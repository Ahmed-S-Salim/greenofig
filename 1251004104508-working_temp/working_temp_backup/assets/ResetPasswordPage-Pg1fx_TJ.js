import{j as e}from"./vendor-ui-B996hA52.js";import{u as s,a}from"./vendor-react-sNAoBuc2.js";import{H as t,l as r,I as i,B as l,s as n,t as o}from"./index-KPc8XEHt.js";import{m as d,aa as c,c as m,k as x}from"./vendor-utils-cF2MmNet.js";import"./vendor-editor-DcuCxt3Z.js";const u=()=>{const u=s(),[p,h]=a.useState(!1),[w,j]=a.useState(""),[g,f]=a.useState(""),[b,v]=a.useState(!1);a.useEffect(()=>{(async()=>{const{data:{session:e}}=await n.auth.getSession();e||o({variant:"destructive",title:"Invalid or expired link",description:"Please request a new password reset link."})})()},[]);return b?e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:[e.jsx(t,{children:e.jsx("title",{children:"Password Reset - GreenoFig"})}),e.jsx(d.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"w-full max-w-md",children:e.jsxs("div",{className:"glass-effect rounded-2xl p-8 shadow-2xl text-center",children:[e.jsx("div",{className:"inline-block p-4 bg-green-100 dark:bg-green-900 rounded-full mb-4",children:e.jsx(c,{className:"w-12 h-12 text-green-600 dark:text-green-400"})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Password Updated!"}),e.jsx("p",{className:"text-text-secondary mb-6",children:"Your password has been successfully updated. Redirecting to login..."}),e.jsx(m,{className:"w-6 h-6 animate-spin mx-auto text-primary"})]})})]}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:[e.jsx(t,{children:e.jsx("title",{children:"Set Your Password - GreenoFig"})}),e.jsx(d.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"w-full max-w-md",children:e.jsxs("div",{className:"glass-effect rounded-2xl p-8 shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(d.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"inline-block mb-4",children:e.jsx("img",{src:r,alt:"GreenoFig Logo",className:"w-20 h-20"})}),e.jsx("h1",{className:"text-4xl font-bold gradient-text mb-2",children:"Set Your Password"}),e.jsx("p",{className:"text-text-secondary",children:"Create a secure password for your account"})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),w.length<8)o({variant:"destructive",title:"Password too short",description:"Password must be at least 8 characters long."});else if(w===g){h(!0);try{const{error:e}=await n.auth.updateUser({password:w});if(e)throw e;v(!0),o({title:"Password updated successfully",description:"You can now login with your new password."}),setTimeout(()=>{u("/login")},2e3)}catch(s){console.error("Error updating password:",s),o({variant:"destructive",title:"Error updating password",description:s.message})}finally{h(!1)}}else o({variant:"destructive",title:"Passwords do not match",description:"Please make sure both passwords are the same."})},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary"}),e.jsx(i,{type:"password",value:w,onChange:e=>j(e.target.value),className:"pl-10",placeholder:"Enter new password",disabled:p,required:!0,minLength:8})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"At least 8 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary"}),e.jsx(i,{type:"password",value:g,onChange:e=>f(e.target.value),className:"pl-10",placeholder:"Confirm new password",disabled:p,required:!0,minLength:8})]})]}),e.jsxs(l,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground font-semibold py-3 rounded-lg shadow-lg",disabled:p,children:[p&&e.jsx(m,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Updating Password...":"Set Password"]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>u("/login"),className:"text-text-secondary hover:text-primary transition-colors text-sm",disabled:p,children:"Back to Login"})})]})})]})};export{u as default};
