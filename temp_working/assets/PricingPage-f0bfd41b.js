import{j as e}from"./vendor-ui-1f4695e3.js";import{u as t,f as r,r as a}from"./vendor-react-c35372bd.js";import{u as i,a as s,H as n,B as l,c,s as p,t as o}from"./index-6b8dec48.js";import{S as m}from"./SiteLayout-a0a74e79.js";import{C as u}from"./CheckoutDialog-fe9b9ef7.js";import{L as d,a6 as x}from"./vendor-utils-a892ab91.js";import"./vendor-editor-8f9f6f2d.js";import"./OnboardingSurvey-3783d7af.js";const g=({logoUrl:g})=>{const h=t(),y=r(),{t:f}=i(),{user:b}=s(),[j,F]=a.useState("monthly"),[v,N]=a.useState([]),[k,C]=a.useState(!0),[S,P]=a.useState(null),[w,_]=a.useState(null),[$,A]=a.useState(!1),B=e=>{const t=`pricing.planDescriptions.${e}`,r=f(t);return r!==t?r:""},E={Base:[f("pricing.planFeatures.base.mealPlans"),f("pricing.planFeatures.base.workoutPlans"),f("pricing.planFeatures.base.chatMessages"),f("pricing.planFeatures.base.basicTracking"),f("pricing.planFeatures.base.communityAccess"),f("pricing.planFeatures.base.mobileAccess"),f("pricing.planFeatures.base.smartLogging")],Premium:[f("pricing.planFeatures.premium.adFree"),f("pricing.planFeatures.premium.unlimitedMeals"),f("pricing.planFeatures.premium.unlimitedWorkouts"),f("pricing.planFeatures.premium.unlimitedChat"),f("pricing.planFeatures.premium.analytics"),f("pricing.planFeatures.premium.goalTracking"),f("pricing.planFeatures.premium.customPreferences"),f("pricing.planFeatures.premium.wearableSync"),f("pricing.planFeatures.premium.reports"),f("pricing.planFeatures.premium.communityAccess"),f("pricing.planFeatures.premium.mobileAccess")],Ultimate:[f("pricing.planFeatures.ultimate.everythingPremium"),f("pricing.planFeatures.ultimate.nutritionists"),f("pricing.planFeatures.ultimate.prioritySupport"),f("pricing.planFeatures.ultimate.videoConsultations"),f("pricing.planFeatures.ultimate.mealPlanningTools"),f("pricing.planFeatures.ultimate.workoutBuilder"),f("pricing.planFeatures.ultimate.performanceOptimization"),f("pricing.planFeatures.ultimate.bodyAnalysis"),f("pricing.planFeatures.ultimate.exclusiveChallenges")],Elite:[f("pricing.planFeatures.elite.everythingUltimate"),f("pricing.planFeatures.elite.photoRecognition"),f("pricing.planFeatures.elite.unlimitedCoaching"),f("pricing.planFeatures.elite.doctorConsultations"),f("pricing.planFeatures.elite.appointmentScheduling"),f("pricing.planFeatures.elite.priority247"),f("pricing.planFeatures.elite.supplementPlan"),f("pricing.planFeatures.elite.vipAccess"),f("pricing.planFeatures.elite.concierge")]};a.useEffect(()=>{var e;(null==(e=y.state)?void 0:e.recommendedPlan)&&P(y.state.recommendedPlan)},[y.state]),a.useEffect(()=>{(async()=>{C(!0);const{data:e,error:t}=await p.from("subscription_plans").select("*").eq("is_active",!0).order("price_monthly",{ascending:!0});t?o({title:"Error fetching pricing",description:t.message,variant:"destructive"}):N(e),C(!1)})()},[]);const T=e=>{b?(_(e),A(!0)):h("/signup",{state:{selectedPlan:e.name}})};return e.jsxs(m,{logoUrl:g,pageTitle:e.jsx(e.Fragment,{children:f("pricing.title")}),pageDescription:f("pricing.subtitle"),children:[e.jsxs(n,{children:[e.jsxs("title",{children:[f("pricing.title")," - GreenoFig"]}),e.jsx("meta",{name:"description",content:f("pricing.subtitle")}),e.jsx("link",{rel:"canonical",href:"https://greenofig.com/pricing"}),e.jsx("meta",{property:"og:title",content:`${f("pricing.title")} - GreenoFig`}),e.jsx("meta",{property:"og:description",content:f("pricing.subtitle")}),e.jsx("meta",{property:"og:url",content:"https://greenofig.com/pricing"}),e.jsx("meta",{property:"og:type",content:"website"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"mb-12 flex items-center gap-2 glass-effect p-1 rounded-full",style:{backdropFilter:"blur(16px) saturate(180%)",WebkitBackdropFilter:"blur(16px) saturate(180%)"},children:[e.jsx(l,{onClick:()=>F("monthly"),variant:"monthly"===j?"default":"ghost",className:"rounded-full px-6",children:f("pricing.monthly")}),e.jsxs(l,{onClick:()=>F("yearly"),variant:"yearly"===j?"default":"ghost",className:"rounded-full px-6 relative",children:[f("pricing.yearly"),e.jsx("span",{className:"absolute -top-2 -right-2 bg-destructive text-destructive-foreground text-xs font-bold px-2 py-0.5 rounded-full",children:f("pricing.save25")})]})]}),k?e.jsx("div",{className:"flex justify-center items-center h-96",children:e.jsx(d,{className:"w-12 h-12 animate-spin text-primary"})}):e.jsxs("div",{className:"w-full space-y-8",children:[v.filter(e=>0===e.price_monthly).map(t=>{const r=S===t.name;return e.jsxs("div",{className:c("card card-scale glass-effect p-6 rounded-xl border-2 relative max-w-2xl mx-auto animate-item",r?"border-primary ring-4 ring-primary/50":"border-primary/50"),style:{backdropFilter:"blur(24px) saturate(180%)",WebkitBackdropFilter:"blur(24px) saturate(180%)"},children:[r&&e.jsx("div",{className:"absolute top-0 -translate-y-1/2 left-1/2 -translate-x-1/2 px-3 py-1 text-xs font-semibold text-primary-foreground bg-green-500 rounded-full",children:f("pricing.popularChoice")}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:t.name}),e.jsx("p",{className:"text-text-secondary text-sm mb-4",children:B(t.name)||t.description}),e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"text-4xl font-extrabold",children:f("pricing.freePlan")}),e.jsx("p",{className:"text-text-secondary text-sm mt-1",children:f("common.comingSoon")})]}),e.jsx(l,{onClick:()=>T(t),size:"default",className:"px-8",children:f("common.getStarted")})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-3 mt-4",children:(E[t.name]||t.features||[]).map((t,r)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(x,{className:"w-4 h-4 text-primary flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm",children:t})]},r))})]},t.id)}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:v.filter(e=>e.price_monthly>0).map((t,r)=>{const a=S===t.name;return e.jsxs("div",{className:c("card card-scale glass-effect p-5 rounded-xl flex flex-col border-2 relative animate-item",a?"border-primary ring-4 ring-primary/50":t.is_popular?"border-primary":"border-border"),style:{backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)"},children:[a&&e.jsx("div",{className:"absolute top-0 -translate-y-1/2 left-1/2 -translate-x-1/2 px-3 py-1 text-xs font-semibold text-primary-foreground bg-green-500 rounded-full",children:f("pricing.popularChoice")}),!a&&t.is_popular&&e.jsx("div",{className:"absolute top-0 -translate-y-1/2 left-1/2 -translate-x-1/2 px-3 py-1 text-xs font-semibold text-primary-foreground bg-primary rounded-full",children:f("pricing.mostPopular")}),e.jsx("h3",{className:"text-xl font-bold text-center mb-1",children:t.name}),e.jsx("p",{className:"text-text-secondary text-center text-sm min-h-[35px] mb-4",children:B(t.name)||t.description}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("span",{className:"text-4xl font-extrabold",children:"monthly"===j?`$${t.price_monthly}`:`$${(t.price_yearly/12).toFixed(2)}`}),e.jsx("span",{className:"text-base font-medium text-text-secondary",children:f("pricing.perMonth")}),"yearly"===j&&e.jsxs("p",{className:"text-xs text-text-secondary mt-1",children:[f("pricing.billedYearly")," ($",t.price_yearly,f("pricing.perYear"),")"]})]}),e.jsx("div",{className:"flex-grow",children:e.jsx("ul",{className:"space-y-2",children:(E[t.name]||t.features||[]).map((t,r)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(x,{className:"w-4 h-4 text-primary flex-shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm",children:t})]},r))})}),e.jsx(l,{onClick:()=>T(t),className:"w-full mt-5 "+(a||t.is_popular?"btn-primary":"btn-secondary"),variant:a||t.is_popular?"default":"outline",children:f("pricing.selectPlan")})]},t.id)})})]})]}),e.jsx(u,{open:$,onOpenChange:A,plan:w,billingCycle:j})]})};export{g as default};
