import{j as e}from"./vendor-ui-1f4695e3.js";import{k as t,r as s}from"./vendor-react-c35372bd.js";import{u as r,n as a,s as l,g as n,B as i,I as d,T as o}from"./index-6b8dec48.js";import{L as m,au as c,a6 as x,aJ as u,a1 as h,bA as g,h as b,d4 as p,U as f,M as v,u as j,F as y,an as N,b9 as w}from"./vendor-utils-a892ab91.js";import"./vendor-editor-8f9f6f2d.js";const _=({value:t,onChange:r,label:a,required:l,isRTL:n})=>{const d=s.useRef(null),[o,m]=s.useState(!1);s.useEffect(()=>{const e=d.current,s=e.getContext("2d");if(s.fillStyle="rgba(255,255,255,0.95)",s.fillRect(0,0,e.width,e.height),s.strokeStyle="#1a1a1a",s.lineWidth=2,s.lineCap="round",t){const e=new Image;e.onload=()=>s.drawImage(e,0,0),e.src=t}},[]);const c=e=>{var t,s,r,a;const l=d.current,n=l.getBoundingClientRect(),i=l.getContext("2d"),o=(e.clientX||(null==(s=null==(t=e.touches)?void 0:t[0])?void 0:s.clientX))-n.left,c=(e.clientY||(null==(a=null==(r=e.touches)?void 0:r[0])?void 0:a.clientY))-n.top;i.beginPath(),i.moveTo(o,c),m(!0)},x=e=>{var t,s,r,a;if(!o)return;const l=d.current,n=l.getBoundingClientRect(),i=l.getContext("2d"),m=(e.clientX||(null==(s=null==(t=e.touches)?void 0:t[0])?void 0:s.clientX))-n.left,c=(e.clientY||(null==(a=null==(r=e.touches)?void 0:r[0])?void 0:a.clientY))-n.top;i.lineTo(m,c),i.stroke()},u=()=>{if(o){m(!1);const e=d.current;r(e.toDataURL())}};return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[a," ",l&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"border-2 border-emerald-200 rounded-xl overflow-hidden bg-white",children:e.jsx("canvas",{ref:d,width:400,height:150,className:"w-full touch-none cursor-crosshair",onMouseDown:c,onMouseMove:x,onMouseUp:u,onMouseLeave:u,onTouchStart:c,onTouchMove:x,onTouchEnd:u})}),e.jsx(i,{type:"button",variant:"outline",size:"sm",onClick:()=>{const e=d.current,t=e.getContext("2d");t.fillStyle="rgba(255,255,255,0.95)",t.fillRect(0,0,e.width,e.height),r("")},className:"text-xs border-emerald-300 text-emerald-700 hover:bg-emerald-50",children:n?"مسح التوقيع":"Clear Signature"})]})},k=({question:t,value:s,onChange:r,language:a})=>{var l,n;const m="ar"===a&&t.label_ar||t.label,c="ar"===a,x={id:t.id,value:s||"",onChange:e=>r(t.id,e.target.value),required:t.required,className:"w-full bg-white border-emerald-200 focus:border-emerald-500 focus:ring-emerald-500 rounded-lg "+(c?"text-right":"text-left"),dir:c?"rtl":"ltr"};switch(t.type){case"text":case"tel":case"phone":case"email":return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{htmlFor:t.id,className:"block text-sm font-medium text-gray-700",children:[m," ",t.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{type:"phone"===t.type?"tel":t.type,...x})]});case"number":return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{htmlFor:t.id,className:"block text-sm font-medium text-gray-700",children:[m," ",t.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{type:"number",...x})]});case"date":return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{htmlFor:t.id,className:"block text-sm font-medium text-gray-700",children:[m," ",t.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(d,{type:"date",...x})]});case"textarea":return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{htmlFor:t.id,className:"block text-sm font-medium text-gray-700",children:[m," ",t.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(o,{...x,rows:3})]});case"yes_no":case"yesno":return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-emerald-50/50 rounded-xl border border-emerald-100",children:[e.jsxs("span",{className:"text-sm text-gray-700 flex-1 pr-4",children:[m," ",t.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"button",size:"sm",variant:!0===s||"yes"===s?"default":"outline",className:"min-w-[60px] "+(!0===s||"yes"===s?"bg-emerald-600 hover:bg-emerald-700 text-white":"border-emerald-300 hover:bg-emerald-50"),onClick:()=>r(t.id,!0),children:"ar"===a?"نعم":"Yes"}),e.jsx(i,{type:"button",size:"sm",variant:!1===s||"no"===s?"default":"outline",className:"min-w-[60px] "+(!1===s||"no"===s?"bg-red-500 hover:bg-red-600 text-white":"border-red-200 hover:bg-red-50"),onClick:()=>r(t.id,!1),children:"ar"===a?"لا":"No"})]})]});case"select":return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{htmlFor:t.id,className:"block text-sm font-medium text-gray-700",children:[m," ",t.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...x,className:"w-full p-2.5 bg-white border border-emerald-200 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 text-gray-700",children:[e.jsx("option",{value:"",children:"ar"===a?"اختر...":"Select..."}),null==(l=t.options)?void 0:l.map((t,s)=>e.jsx("option",{value:t.value||t,children:"ar"===a?t.label_ar||t.label||t:t.label||t},s))]})]});case"multiselect":const u=Array.isArray(s)?s:[];return e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[m," ",t.required&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:null==(n=t.options)?void 0:n.map((s,l)=>{const n=s.value||s,i=u.includes(n);return e.jsx("button",{type:"button",className:"px-3 py-1.5 rounded-lg text-sm transition-all "+(i?"bg-emerald-600 text-white":"bg-emerald-50 text-emerald-700 hover:bg-emerald-100 border border-emerald-200"),onClick:()=>{const e=i?u.filter(e=>e!==n):[...u,n];r(t.id,e)},children:"ar"===a?s.label_ar||s.label||s:s.label||s},l)})})]});case"signature":return e.jsx(_,{value:s,onChange:e=>r(t.id,e),label:m,required:t.required,isRTL:c});default:return null}},S=(e,t,s)=>{if(null==t||""===t)return"-";if("yes_no"===e.type||"yesno"===e.type){if(!0===t||"yes"===t)return"ar"===s?"نعم":"Yes";if(!1===t||"no"===t)return"ar"===s?"لا":"No"}if("select"===e.type&&e.options){const r=e.options.find(e=>(e.value||e)===t);if(r)return"ar"===s?r.label_ar||r.label||r:r.label||r}return"multiselect"===e.type&&Array.isArray(t)?t.map(t=>{var r;const a=null==(r=e.options)?void 0:r.find(e=>(e.value||e)===t);return a?"ar"===s?a.label_ar||a.label||a:a.label||a:t}).join(", "):"signature"===e.type?"ar"===s?"تم التوقيع":"Signed":t};function $(){var o;const{linkCode:_}=t();r();const{sendPushToUser:$}=a(),[F,C]=s.useState(!0),[q,E]=s.useState(!1),[T,G]=s.useState(null),[Y,P]=s.useState(null),[R,A]=s.useState(null),[z,D]=s.useState(null),[M,I]=s.useState(!1),[L,O]=s.useState("en"),U=L,X="ar"===L,[B,H]=s.useState(""),[W,J]=s.useState(""),[V,K]=s.useState(""),[Q,Z]=s.useState(0),[ee,te]=s.useState({}),[se,re]=s.useState({}),[ae,le]=s.useState(!1),[ne,ie]=s.useState([]);s.useEffect(()=>{de()},[_]);const de=async()=>{try{const{data:e,error:t}=await l.from("public_form_links").select("*, form_template:form_templates(*)").eq("link_code",_).eq("is_active",!0).single();if(t||!e)return D("Invalid or expired form link / رابط النموذج غير صالح أو منتهي الصلاحية"),void C(!1);const s=e.form_language||"en";if(O(s),e.expires_at&&new Date(e.expires_at)<new Date)return D("ar"===s?"انتهت صلاحية هذا الرابط":"This link has expired"),void C(!1);if(e.max_submissions&&e.current_submissions>=e.max_submissions)return D("ar"===s?"تم الوصول إلى الحد الأقصى للتقديمات":"Maximum submissions reached"),void C(!1);G(e),P(e.form_template);const{data:r}=await l.from("user_profiles").select("full_name, email").eq("id",e.nutritionist_id).single();A(r)}catch(e){D("Error loading form / حدث خطأ في تحميل النموذج")}finally{C(!1)}},oe=(e,t)=>{te(s=>({...s,[e]:t})),se[e]&&re(t=>({...t,[e]:null}))},me=e=>{var t,s;if(!(null==(t=null==Y?void 0:Y.sections)?void 0:t[e]))return!0;const r={};return null==(s=Y.sections[e].questions)||s.forEach(e=>{if(e.required){const t=ee[e.id];(null==t||""===t||Array.isArray(t)&&0===t.length)&&(r[e.id]=!0)}}),re(r),0===Object.keys(r).length},ce=()=>{le(!1),Z(e=>e+1)},xe=()=>{le(!1)},ue=async(e,t,s)=>{try{const r=await fetch("https://greenofig.com/api/send-email.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({to:e,from:"nutritionist@greenofig.com",subject:t,html:s})});return(await r.json()).success}catch(r){return!1}},he=async()=>{var e;const t=((null==(e=null==Y?void 0:Y.sections)?void 0:e.length)||1)-1;if(me(t)){E(!0);try{const e=X&&(null==Y?void 0:Y.name_ar)||(null==Y?void 0:Y.name),{error:t}=await l.from("external_form_submissions").insert({link_id:T.id,nutritionist_id:T.nutritionist_id,form_template_id:Y.id,submitter_name:B,submitter_email:W,submitter_phone:V,responses:ee,signature_data:ee.signature||null,status:"submitted"});if(t)throw t;await l.from("public_form_links").update({current_submissions:(T.current_submissions||0)+1}).eq("id",T.id),await l.from("notifications").insert({user_id:T.nutritionist_id,type:"external_form_submitted",title:X?"نموذج جديد مستلم":"New Form Submission",message:X?`قام ${B} بتقديم نموذج "${e}"`:`${B} submitted the form: ${e}`,is_read:!1});try{await $(T.nutritionist_id,X?"نموذج جديد مستلم":"New Form Submission",X?`قام ${B} بتقديم نموذج "${e}"`:`${B} submitted: ${e}`,{tag:"form-submission",data:{type:"external_form_submitted",url:"/app/nutritionist/dashboard"}})}catch(s){}(null==R?void 0:R.email)&&await ue(R.email,X?`نموذج جديد من ${B}`:`New Form Submission from ${B}`,(()=>{const e=X&&(null==Y?void 0:Y.name_ar)||(null==Y?void 0:Y.name);return`\n      <!DOCTYPE html>\n      <html dir="${X?"rtl":"ltr"}">\n      <head><meta charset="UTF-8"></head>\n      <body style="font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px;">\n        <div style="max-width: 600px; margin: 0 auto; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">\n          <div style="background: linear-gradient(135deg, #10b981, #34d399); padding: 30px; text-align: center;">\n            <img src="https://greenofig.com/logo.png" alt="GreenoFig" style="width: 60px; height: 60px; margin-bottom: 10px;">\n            <h1 style="color: white; margin: 0; font-size: 24px;">GreenoFig</h1>\n            <p style="color: rgba(255,255,255,0.9); margin: 5px 0 0 0;">${X?"نموذج جديد مستلم":"New Form Submission"}</p>\n          </div>\n          <div style="padding: 30px;">\n            <h2 style="color: #1f2937; margin: 0 0 20px 0;">${X?"تفاصيل النموذج":"Form Details"}</h2>\n            <div style="background: #f9fafb; border-radius: 8px; padding: 20px; margin-bottom: 20px;">\n              <p style="margin: 0 0 10px 0;"><strong>${X?"اسم النموذج:":"Form:"}</strong> ${e}</p>\n              <p style="margin: 0 0 10px 0;"><strong>${X?"الاسم:":"Name:"}</strong> ${B}</p>\n              <p style="margin: 0 0 10px 0;"><strong>${X?"البريد:":"Email:"}</strong> ${W}</p>\n              ${V?`<p style="margin: 0;"><strong>${X?"الهاتف:":"Phone:"}</strong> ${V}</p>`:""}\n            </div>\n            <a href="https://greenofig.com/app/nutritionist/dashboard" style="display: inline-block; background: linear-gradient(135deg, #10b981, #34d399); color: white; padding: 12px 24px; border-radius: 8px; text-decoration: none; font-weight: bold;">\n              ${X?"عرض في لوحة التحكم":"View in Dashboard"}\n            </a>\n          </div>\n          <div style="background: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb;">\n            <p style="margin: 0; color: #6b7280; font-size: 14px;">© ${(new Date).getFullYear()} GreenoFig</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `})()),await ue(W,X?"شكراً لإكمال النموذج - GreenoFig":"Thank You for Your Submission - GreenoFig",(()=>{const e=X&&(null==Y?void 0:Y.name_ar)||(null==Y?void 0:Y.name);return`\n      <!DOCTYPE html>\n      <html dir="${X?"rtl":"ltr"}">\n      <head><meta charset="UTF-8"></head>\n      <body style="font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px;">\n        <div style="max-width: 600px; margin: 0 auto; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">\n          <div style="background: linear-gradient(135deg, #10b981, #34d399); padding: 30px; text-align: center;">\n            <img src="https://greenofig.com/logo.png" alt="GreenoFig" style="width: 60px; height: 60px; margin-bottom: 10px;">\n            <h1 style="color: white; margin: 0; font-size: 24px;">GreenoFig</h1>\n          </div>\n          <div style="padding: 30px;">\n            <h2 style="color: #1f2937; margin: 0 0 20px 0;">${X?`مرحباً ${B}!`:`Welcome ${B}!`}</h2>\n            <p style="color: #4b5563; line-height: 1.6;">\n              ${X?`شكراً لإكمال نموذج "${e}". لقد استلمنا معلوماتك بنجاح وسيتواصل معك أخصائي التغذية قريباً.`:`Thank you for completing the "${e}" form. We have received your information and your nutritionist will contact you soon.`}\n            </p>\n            <div style="background: #ecfdf5; border-radius: 8px; padding: 20px; margin: 20px 0; text-align: center;">\n              <p style="margin: 0; color: #059669; font-weight: bold;">\n                ${X?"تم استلام النموذج بنجاح!":"Form Successfully Received!"}\n              </p>\n            </div>\n            <p style="color: #6b7280; font-size: 14px;">\n              ${X?"إذا كانت لديك أي أسئلة، يرجى التواصل مع أخصائي التغذية الخاص بك.":"If you have any questions, please contact your nutritionist."}\n            </p>\n          </div>\n          <div style="background: #f9fafb; padding: 20px; text-align: center; border-top: 1px solid #e5e7eb;">\n            <p style="margin: 0; color: #6b7280; font-size: 14px;">© ${(new Date).getFullYear()} GreenoFig - ${X?"منصة التغذية الذكية":"Smart Nutrition Platform"}</p>\n          </div>\n        </div>\n      </body>\n      </html>\n    `})()),I(!0)}catch(r){D(X?"حدث خطأ في إرسال النموذج":"Error submitting form")}finally{E(!1)}}};if(F)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-green-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(m,{className:"w-12 h-12 animate-spin text-emerald-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:X?"جاري التحميل...":"Loading..."})]})});if(z&&!M)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-green-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(c,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:X?"خطأ":"Error"}),e.jsx("p",{className:"text-gray-600",children:z})]})});if(M){const t=X&&(null==Y?void 0:Y.name_ar)||(null==Y?void 0:Y.name);return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-green-50 flex items-center justify-center p-4 "+(X?"rtl":"ltr"),dir:X?"rtl":"ltr",children:e.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center border-2 border-emerald-100",children:[e.jsx("img",{src:"https://greenofig.com/logo.png",alt:"GreenoFig",className:"w-16 h-16 mx-auto mb-4 object-contain",onError:e=>{e.target.style.display="none"}}),e.jsx("div",{className:"w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(x,{className:"w-10 h-10 text-emerald-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:X?"تم الإرسال بنجاح!":"Successfully Submitted!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:X?`شكراً لإكمال نموذج "${t}". سيتواصل معك أخصائي التغذية قريباً.`:`Thank you for completing the "${t}" form. Your nutritionist will contact you soon.`}),e.jsx("div",{className:"bg-emerald-50 rounded-xl p-4 mb-6",children:e.jsx("p",{className:"text-emerald-700 text-sm",children:X?"تم إرسال رسالة تأكيد إلى بريدك الإلكتروني":"A confirmation email has been sent to your inbox"})}),e.jsx("div",{className:"flex items-center justify-center gap-2 text-emerald-600 pt-4 border-t border-emerald-100",children:e.jsx("span",{className:"font-bold text-lg",children:"GreenoFig"})}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:X?"منصة التغذية والصحة الذكية":"Smart Nutrition & Health Platform"})]})})}const ge=(null==Y?void 0:Y.sections)||[],be=ge.length+1,pe=Q===be-1,fe=0===Q,ve=X&&(null==Y?void 0:Y.name_ar)||(null==Y?void 0:Y.name),je=X&&(null==Y?void 0:Y.description_ar)||(null==Y?void 0:Y.description);if(ae){const t=(()=>{var e;if(0===Q)return{title:X?"معلوماتك":"Your Information",items:[{label:X?"الاسم الكامل":"Full Name",value:B},{label:X?"البريد الإلكتروني":"Email",value:W},{label:X?"رقم الهاتف":"Phone",value:V||"-"}]};const t=ge[Q-1];return{title:X&&t.title_ar||t.title,items:(null==(e=t.questions)?void 0:e.map(e=>({label:X&&e.label_ar||e.label,value:S(e,ee[e.id],U)})))||[]}})();return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-green-50 "+(X?"rtl":"ltr"),dir:X?"rtl":"ltr",children:[e.jsx("div",{className:"bg-white border-b-2 border-emerald-500 sticky top-0 z-10 shadow-sm",children:e.jsx("div",{className:"max-w-3xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"https://greenofig.com/logo.png",alt:"GreenoFig",className:"w-10 h-10 object-contain",onError:e=>{e.target.style.display="none"}}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-emerald-600",children:"GreenoFig"}),e.jsx("p",{className:"text-xs text-gray-500",children:X?"مراجعة الإجابات":"Review Answers"})]})]}),e.jsxs(n,{className:"bg-emerald-100 text-emerald-700 border-emerald-200",children:[e.jsx(u,{className:"w-3 h-3 mr-1"}),X?"مراجعة":"Review"]})]})})}),e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border-2 border-emerald-100 p-6 sm:p-8 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-emerald-100",children:[e.jsx("div",{className:"p-2 rounded-xl bg-emerald-100",children:e.jsx(h,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.title}),e.jsx("p",{className:"text-sm text-gray-500",children:X?"راجع إجاباتك قبل المتابعة":"Review your answers before continuing"})]})]}),e.jsx("div",{className:"space-y-4",children:t.items.map((t,s)=>e.jsxs("div",{className:"flex justify-between items-start p-3 bg-gray-50 rounded-xl",children:[e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:t.label}),e.jsx("span",{className:"text-sm text-gray-900 text-right max-w-[60%]",children:t.value})]},s))})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs(i,{variant:"outline",onClick:xe,className:"flex items-center gap-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50",children:[e.jsx(g,{className:"w-4 h-4"}),X?"تعديل":"Edit"]}),pe?e.jsxs(i,{onClick:he,disabled:q,className:"flex items-center gap-2 bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-700 hover:to-green-700 text-white shadow-lg",children:[q?e.jsx(m,{className:"w-4 h-4 animate-spin"}):e.jsx(b,{className:"w-4 h-4"}),X?"إرسال النموذج":"Submit Form"]}):e.jsxs(i,{onClick:ce,className:"flex items-center gap-2 bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-700 hover:to-green-700 text-white shadow-lg",children:[e.jsx(h,{className:"w-4 h-4"}),X?"تأكيد والمتابعة":"Confirm & Continue"]})]})]})]})}return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-green-50 "+(X?"rtl":"ltr"),dir:X?"rtl":"ltr",children:[e.jsx("div",{className:"bg-white border-b-2 border-emerald-500 sticky top-0 z-10 shadow-sm",children:e.jsx("div",{className:"max-w-3xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:"https://greenofig.com/logo.png",alt:"GreenoFig",className:"w-10 h-10 sm:w-12 sm:h-12 object-contain",onError:e=>{e.target.style.display="none"}}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-emerald-600",children:"GreenoFig"}),e.jsx("p",{className:"text-xs text-gray-500",children:X?"نموذج صحي احترافي":"Professional Health Form"})]})]}),e.jsx("div",{className:"px-3 py-1 rounded-full bg-emerald-50 border border-emerald-200",children:e.jsx("span",{className:"text-xs font-medium text-emerald-700",children:X?"العربية":"English"})})]})})}),e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-emerald-100 text-emerald-700 text-sm font-medium mb-4",children:[e.jsx(p,{className:"w-4 h-4"}),"GreenoFig"]}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:ve}),je&&e.jsx("p",{className:"text-gray-600",children:je})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 mb-2",children:[e.jsxs("span",{children:[X?"الخطوة":"Step"," ",Q+1," / ",be]}),e.jsxs("span",{children:[Math.round((Q+1)/be*100),"%"]})]}),e.jsx("div",{className:"w-full bg-emerald-100 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-green-500 h-2 rounded-full transition-all duration-500",style:{width:(Q+1)/be*100+"%"}})})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border-2 border-emerald-100 p-6 sm:p-8 mb-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-gradient-to-br from-emerald-500/10 to-green-500/5 rounded-bl-full"}),0===Q&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-emerald-100",children:[e.jsx("div",{className:"p-2 rounded-xl bg-emerald-100",children:e.jsx(f,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:X?"معلوماتك":"Your Information"}),e.jsx("p",{className:"text-sm text-gray-500",children:X?"يرجى إدخال بياناتك الشخصية":"Please enter your contact details"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[X?"الاسم الكامل":"Full Name"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:`absolute top-3 ${X?"right-3":"left-3"} w-5 h-5 text-gray-400`}),e.jsx(d,{value:B,onChange:e=>H(e.target.value),placeholder:X?"أدخل اسمك الكامل":"Enter your full name",className:(X?"pr-10":"pl-10")+" bg-white border-emerald-200 focus:border-emerald-500"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:[X?"البريد الإلكتروني":"Email"," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:`absolute top-3 ${X?"right-3":"left-3"} w-5 h-5 text-gray-400`}),e.jsx(d,{type:"email",value:W,onChange:e=>J(e.target.value),placeholder:X?"أدخل بريدك الإلكتروني":"Enter your email",className:(X?"pr-10":"pl-10")+" bg-white border-emerald-200 focus:border-emerald-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:X?"رقم الهاتف":"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:`absolute top-3 ${X?"right-3":"left-3"} w-5 h-5 text-gray-400`}),e.jsx(d,{type:"tel",value:V,onChange:e=>K(e.target.value),placeholder:X?"أدخل رقم هاتفك":"Enter your phone number",className:(X?"pr-10":"pl-10")+" bg-white border-emerald-200 focus:border-emerald-500"})]})]})]})]}),Q>0&&ge[Q-1]&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-emerald-100",children:[e.jsx("div",{className:"p-2 rounded-xl bg-emerald-100",children:e.jsx(y,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:X&&ge[Q-1].title_ar||ge[Q-1].title}),ge[Q-1].description&&e.jsx("p",{className:"text-sm text-gray-500",children:X&&ge[Q-1].description_ar||ge[Q-1].description})]})]}),e.jsx("div",{className:"space-y-4",children:null==(o=ge[Q-1].questions)?void 0:o.map(t=>e.jsxs("div",{className:se[t.id]?"ring-2 ring-red-300 rounded-xl p-3 -m-1 bg-red-50":"",children:[e.jsx(k,{question:t,value:ee[t.id],onChange:oe,language:U}),se[t.id]&&e.jsxs("p",{className:"text-red-500 text-xs mt-1.5 flex items-center gap-1",children:[e.jsx(c,{className:"w-3 h-3"}),X?"هذا الحقل مطلوب":"This field is required"]})]},t.id))})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs(i,{variant:"outline",onClick:()=>{le(!1),Z(e=>e-1)},disabled:fe,className:"flex items-center gap-2 border-emerald-300 text-emerald-700 hover:bg-emerald-50",children:[X?e.jsx(N,{className:"w-4 h-4"}):e.jsx(w,{className:"w-4 h-4"}),X?"السابق":"Previous"]}),e.jsxs(i,{onClick:()=>{if(0===Q){if(!(()=>{const e={};return B.trim()||(e.name=!0),W.trim()&&/\S+@\S+\.\S+/.test(W)||(e.email=!0),0===Object.keys(e).length})())return;return void le(!0)}const e=Q-1;me(e)&&(ne.includes(e)||ie(t=>[...t,e]),le(!0))},className:"flex items-center gap-2 bg-gradient-to-r from-emerald-600 to-green-600 hover:from-emerald-700 hover:to-green-700 text-white shadow-lg",children:[X?"التالي":"Next",X?e.jsx(w,{className:"w-4 h-4"}):e.jsx(N,{className:"w-4 h-4"})]})]}),e.jsxs("div",{className:"mt-8 text-center pb-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[e.jsx("img",{src:"https://greenofig.com/logo.png",alt:"GreenoFig",className:"w-6 h-6 object-contain",onError:e=>{e.target.style.display="none"}}),e.jsx("span",{className:"font-bold text-emerald-600",children:"GreenoFig"})]}),e.jsx("p",{className:"text-xs text-gray-400",children:X?"منصة التغذية والصحة الذكية":"Smart Nutrition & Health Platform"})]})]})]})}export{$ as default};
