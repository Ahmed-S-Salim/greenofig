import{j as e,V as t,R as s,A as r,C as i,T as n,D as o,P as a,s as l,S as c,a as u,I as d,F as h,b as p,c as g,O as m,d as f,e as y,f as v,g as b,h as w,i as x}from"./vendor-ui-1f4695e3.js";import{a as _,g as k,r as S,R as j,d as T,e as P,u as C,f as E,L as N,O as A,N as O,h as R,i as I,j as D,B as L}from"./vendor-react-c35372bd.js";import{t as $,c as F,X as M,m as U,A as B,L as q,U as W,M as H,a as z,G,b as V,H as Y,B as K,d as J,e as Q,f as X,S as Z,g as ee,h as te,i as se,j as re,C as ie,k as ne,T as oe,l as ae,P as le,n as ce,o as ue,V as de,p as he,q as pe,r as ge,F as me,s as fe,u as ye,v as ve,w as be,x as we,D as xe,y as _e,z as ke,E as Se,I as je,J as Te,K as Pe,N as Ce,O as Ee,Q as Ne,W as Ae,R as Oe,Y as Re,Z as Ie,_ as De,$ as Le,a0 as $e,a1 as Fe,a2 as Me,a3 as Ue}from"./vendor-utils-a892ab91.js";import"./vendor-editor-8f9f6f2d.js";function Be(e,t){for(var s=0;s<t.length;s++){const r=t[s];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const s=Object.getOwnPropertyDescriptor(r,t);s&&Object.defineProperty(e,t,s.get?s:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var qe={},We=_;qe.createRoot=We.createRoot,qe.hydrateRoot=We.hydrateRoot;const He={},ze=function(e,t,s){if(!t||0===t.length)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(e=>{if((e=function(e){return"/"+e}(e))in He)return;He[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(!!s)for(let s=r.length-1;s>=0;s--){const i=r[s];if(i.href===e&&(!t||"stylesheet"===i.rel))return}else if(document.querySelector(`link[href="${e}"]${i}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise((t,s)=>{n.addEventListener("load",t),n.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e()).catch(e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e})};var Ge={exports:{}};function Ve(){}function Ye(){}Ye.resetWarningCache=Ve;Ge.exports=function(){function e(e,t,s,r,i,n){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ye,resetWarningCache:Ve};return s.PropTypes=s,s}();const Ke=k(Ge.exports);var Je,Qe=S,Xe=(Je=Qe)&&"object"==typeof Je&&"default"in Je?Je.default:Je;function Ze(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var et=!("undefined"==typeof window||!window.document||!window.document.createElement);const tt=k(function(e,t,s){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==s&&"function"!=typeof s)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!=typeof r)throw new Error("Expected WrappedComponent to be a React component.");var i,n=[];function o(){i=e(n.map(function(e){return e.props})),a.canUseDOM?t(i):s&&(i=s(i))}var a=function(e){var t,s;function a(){return e.apply(this,arguments)||this}s=e,(t=a).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s,a.peek=function(){return i},a.rewind=function(){if(a.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=i;return i=void 0,n=[],e};var l=a.prototype;return l.UNSAFE_componentWillMount=function(){n.push(this),o()},l.componentDidUpdate=function(){o()},l.componentWillUnmount=function(){var e=n.indexOf(this);n.splice(e,1),o()},l.render=function(){return Xe.createElement(r,this.props)},a}(Qe.PureComponent);return Ze(a,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),Ze(a,"canUseDOM",et),a}});var st="undefined"!=typeof Element,rt="function"==typeof Map,it="function"==typeof Set,nt="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function ot(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var s,r,i,n;if(Array.isArray(e)){if((s=e.length)!=t.length)return!1;for(r=s;0!==r--;)if(!ot(e[r],t[r]))return!1;return!0}if(rt&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(n=e.entries();!(r=n.next()).done;)if(!t.has(r.value[0]))return!1;for(n=e.entries();!(r=n.next()).done;)if(!ot(r.value[1],t.get(r.value[0])))return!1;return!0}if(it&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(n=e.entries();!(r=n.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(nt&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((s=e.length)!=t.length)return!1;for(r=s;0!==r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof t.toString)return e.toString()===t.toString();if((s=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=s;0!==r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(st&&e instanceof Element)return!1;for(r=s;0!==r--;)if(("_owner"!==i[r]&&"__v"!==i[r]&&"__o"!==i[r]||!e.$$typeof)&&!ot(e[i[r]],t[i[r]]))return!1;return!0}return e!=e&&t!=t}const at=k(function(e,t){try{return ot(e,t)}catch(s){if((s.message||"").match(/stack|recursion/i))return!1;throw s}});
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var lt=Object.getOwnPropertySymbols,ct=Object.prototype.hasOwnProperty,ut=Object.prototype.propertyIsEnumerable;const dt=k(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},s=0;s<10;s++)t["_"+String.fromCharCode(s)]=s;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var s,r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),n=1;n<arguments.length;n++){for(var o in s=Object(arguments[n]))ct.call(s,o)&&(i[o]=s[o]);if(lt){r=lt(s);for(var a=0;a<r.length;a++)ut.call(s,r[a])&&(i[r[a]]=s[r[a]])}}return i});var ht="bodyAttributes",pt="htmlAttributes",gt="titleAttributes",mt={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(mt).map(function(e){return mt[e]});var ft,yt,vt,bt,wt="charset",xt="cssText",_t="href",kt="http-equiv",St="innerHTML",jt="itemprop",Tt="name",Pt="property",Ct="rel",Et="src",Nt="target",At={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Ot="defaultTitle",Rt="defer",It="encodeSpecialCharacters",Dt="onChangeClientState",Lt="titleTemplate",$t=Object.keys(At).reduce(function(e,t){return e[At[t]]=t,e},{}),Ft=[mt.NOSCRIPT,mt.SCRIPT,mt.STYLE],Mt="data-react-helmet",Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Wt=function(e,t){var s={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},Ht=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},zt=function(e){var t=Jt(e,mt.TITLE),s=Jt(e,Lt);if(s&&t)return s.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var r=Jt(e,Ot);return t||r||void 0},Gt=function(e){return Jt(e,Dt)||function(){}},Vt=function(e,t){return t.filter(function(t){return void 0!==t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return qt({},e,t)},{})},Yt=function(e,t){return t.filter(function(e){return void 0!==e[mt.BASE]}).map(function(e){return e[mt.BASE]}).reverse().reduce(function(t,s){if(!t.length)for(var r=Object.keys(s),i=0;i<r.length;i++){var n=r[i].toLowerCase();if(-1!==e.indexOf(n)&&s[n])return t.concat(s)}return t},[])},Kt=function(e,t,s){var r={};return s.filter(function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&ts("Helmet: "+e+' should be of type "Array". Instead found type "'+Ut(t[e])+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,s){var i={};s.filter(function(e){for(var s=void 0,n=Object.keys(e),o=0;o<n.length;o++){var a=n[o],l=a.toLowerCase();-1===t.indexOf(l)||s===Ct&&"canonical"===e[s].toLowerCase()||l===Ct&&"stylesheet"===e[l].toLowerCase()||(s=l),-1===t.indexOf(a)||a!==St&&a!==xt&&a!==jt||(s=a)}if(!s||!e[s])return!1;var c=e[s].toLowerCase();return r[s]||(r[s]={}),i[s]||(i[s]={}),!r[s][c]&&(i[s][c]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var n=Object.keys(i),o=0;o<n.length;o++){var a=n[o],l=dt({},r[a],i[a]);r[a]=l}return e},[]).reverse()},Jt=function(e,t){for(var s=e.length-1;s>=0;s--){var r=e[s];if(r.hasOwnProperty(t))return r[t]}return null},Qt=(ft=Date.now(),function(e){var t=Date.now();t-ft>16?(ft=t,e(t)):setTimeout(function(){Qt(e)},0)}),Xt=function(e){return clearTimeout(e)},Zt="undefined"!=typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Qt:global.requestAnimationFrame||Qt,es="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||Xt:global.cancelAnimationFrame||Xt,ts=function(e){return console&&"function"==typeof console.warn&&void 0},ss=null,rs=function(e,t){var s=e.baseTag,r=e.bodyAttributes,i=e.htmlAttributes,n=e.linkTags,o=e.metaTags,a=e.noscriptTags,l=e.onChangeClientState,c=e.scriptTags,u=e.styleTags,d=e.title,h=e.titleAttributes;os(mt.BODY,r),os(mt.HTML,i),ns(d,h);var p={baseTag:as(mt.BASE,s),linkTags:as(mt.LINK,n),metaTags:as(mt.META,o),noscriptTags:as(mt.NOSCRIPT,a),scriptTags:as(mt.SCRIPT,c),styleTags:as(mt.STYLE,u)},g={},m={};Object.keys(p).forEach(function(e){var t=p[e],s=t.newTags,r=t.oldTags;s.length&&(g[e]=s),r.length&&(m[e]=p[e].oldTags)}),t&&t(),l(e,g,m)},is=function(e){return Array.isArray(e)?e.join(""):e},ns=function(e,t){void 0!==e&&document.title!==e&&(document.title=is(e)),os(mt.TITLE,t)},os=function(e,t){var s=document.getElementsByTagName(e)[0];if(s){for(var r=s.getAttribute(Mt),i=r?r.split(","):[],n=[].concat(i),o=Object.keys(t),a=0;a<o.length;a++){var l=o[a],c=t[l]||"";s.getAttribute(l)!==c&&s.setAttribute(l,c),-1===i.indexOf(l)&&i.push(l);var u=n.indexOf(l);-1!==u&&n.splice(u,1)}for(var d=n.length-1;d>=0;d--)s.removeAttribute(n[d]);i.length===n.length?s.removeAttribute(Mt):s.getAttribute(Mt)!==o.join(",")&&s.setAttribute(Mt,o.join(","))}},as=function(e,t){var s=document.head||document.querySelector(mt.HEAD),r=s.querySelectorAll(e+"["+Mt+"]"),i=Array.prototype.slice.call(r),n=[],o=void 0;return t&&t.length&&t.forEach(function(t){var s=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===St)s.innerHTML=t.innerHTML;else if(r===xt)s.styleSheet?s.styleSheet.cssText=t.cssText:s.appendChild(document.createTextNode(t.cssText));else{var a=void 0===t[r]?"":t[r];s.setAttribute(r,a)}s.setAttribute(Mt,"true"),i.some(function(e,t){return o=t,s.isEqualNode(e)})?i.splice(o,1):n.push(s)}),i.forEach(function(e){return e.parentNode.removeChild(e)}),n.forEach(function(e){return s.appendChild(e)}),{oldTags:i,newTags:n}},ls=function(e){return Object.keys(e).reduce(function(t,s){var r=void 0!==e[s]?s+'="'+e[s]+'"':""+s;return t?t+" "+r:r},"")},cs=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,s){return t[At[s]||s]=e[s],t},t)},us=function(e,t,s){switch(e){case mt.TITLE:return{toComponent:function(){return e=t.title,s=t.titleAttributes,(r={key:e})[Mt]=!0,i=cs(s,r),[j.createElement(mt.TITLE,i,e)];var e,s,r,i},toString:function(){return function(e,t,s,r){var i=ls(s),n=is(t);return i?"<"+e+" "+Mt+'="true" '+i+">"+Ht(n,r)+"</"+e+">":"<"+e+" "+Mt+'="true">'+Ht(n,r)+"</"+e+">"}(e,t.title,t.titleAttributes,s)}};case ht:case pt:return{toComponent:function(){return cs(t)},toString:function(){return ls(t)}};default:return{toComponent:function(){return function(e,t){return t.map(function(t,s){var r,i=((r={key:s})[Mt]=!0,r);return Object.keys(t).forEach(function(e){var s=At[e]||e;if(s===St||s===xt){var r=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[s]=t[e]}),j.createElement(e,i)})}(e,t)},toString:function(){return function(e,t,s){return t.reduce(function(t,r){var i=Object.keys(r).filter(function(e){return!(e===St||e===xt)}).reduce(function(e,t){var i=void 0===r[t]?t:t+'="'+Ht(r[t],s)+'"';return e?e+" "+i:i},""),n=r.innerHTML||r.cssText||"",o=-1===Ft.indexOf(e);return t+"<"+e+" "+Mt+'="true" '+i+(o?"/>":">"+n+"</"+e+">")},"")}(e,t,s)}}}},ds=function(e){var t=e.baseTag,s=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,n=e.linkTags,o=e.metaTags,a=e.noscriptTags,l=e.scriptTags,c=e.styleTags,u=e.title,d=void 0===u?"":u,h=e.titleAttributes;return{base:us(mt.BASE,t,r),bodyAttributes:us(ht,s,r),htmlAttributes:us(pt,i,r),link:us(mt.LINK,n,r),meta:us(mt.META,o,r),noscript:us(mt.NOSCRIPT,a,r),script:us(mt.SCRIPT,l,r),style:us(mt.STYLE,c,r),title:us(mt.TITLE,{title:d,titleAttributes:h},r)}},hs=tt(function(e){return{baseTag:Yt([_t,Nt],e),bodyAttributes:Vt(ht,e),defer:Jt(e,Rt),encode:Jt(e,It),htmlAttributes:Vt(pt,e),linkTags:Kt(mt.LINK,[Ct,_t],e),metaTags:Kt(mt.META,[Tt,wt,kt,Pt,jt],e),noscriptTags:Kt(mt.NOSCRIPT,[St],e),onChangeClientState:Gt(e),scriptTags:Kt(mt.SCRIPT,[Et,St],e),styleTags:Kt(mt.STYLE,[xt],e),title:zt(e),titleAttributes:Vt(gt,e)}},function(e){ss&&es(ss),e.defer?ss=Zt(function(){rs(e,function(){ss=null})}):(rs(e),ss=null)},ds)(function(){return null}),ps=(yt=hs,bt=vt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!at(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case mt.SCRIPT:case mt.NOSCRIPT:return{innerHTML:t};case mt.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,s=e.child,r=e.arrayTypeChildren,i=e.newChildProps,n=e.nestedChildren;return qt({},r,((t={})[s.type]=[].concat(r[s.type]||[],[qt({},i,this.mapNestedChildrenToProps(s,n))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,s,r=e.child,i=e.newProps,n=e.newChildProps,o=e.nestedChildren;switch(r.type){case mt.TITLE:return qt({},i,((t={})[r.type]=o,t.titleAttributes=qt({},n),t));case mt.BODY:return qt({},i,{bodyAttributes:qt({},n)});case mt.HTML:return qt({},i,{htmlAttributes:qt({},n)})}return qt({},i,((s={})[r.type]=qt({},n),s))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var s=qt({},t);return Object.keys(e).forEach(function(t){var r;s=qt({},s,((r={})[t]=e[t],r))}),s},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var s=this,r={};return j.Children.forEach(e,function(e){if(e&&e.props){var i=e.props,n=i.children,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,s){return t[$t[s]||s]=e[s],t},t)}(Wt(i,["children"]));switch(s.warnOnInvalidChildren(e,n),e.type){case mt.LINK:case mt.META:case mt.NOSCRIPT:case mt.SCRIPT:case mt.STYLE:r=s.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:o,nestedChildren:n});break;default:t=s.mapObjectTypeChildren({child:e,newProps:t,newChildProps:o,nestedChildren:n})}}}),t=this.mapArrayTypeChildrenToProps(r,t)},t.prototype.render=function(){var e=this.props,t=e.children,s=Wt(e,["children"]),r=qt({},s);return t&&(r=this.mapChildrenToProps(t,r)),j.createElement(yt,r)},Bt(t,null,[{key:"canUseDOM",set:function(e){yt.canUseDOM=e}}]),t}(j.Component),vt.propTypes={base:Ke.object,bodyAttributes:Ke.object,children:Ke.oneOfType([Ke.arrayOf(Ke.node),Ke.node]),defaultTitle:Ke.string,defer:Ke.bool,encodeSpecialCharacters:Ke.bool,htmlAttributes:Ke.object,link:Ke.arrayOf(Ke.object),meta:Ke.arrayOf(Ke.object),noscript:Ke.arrayOf(Ke.object),onChangeClientState:Ke.func,script:Ke.arrayOf(Ke.object),style:Ke.arrayOf(Ke.object),title:Ke.string,titleAttributes:Ke.object,titleTemplate:Ke.string},vt.defaultProps={defer:!0,encodeSpecialCharacters:!0},vt.peek=yt.peek,vt.rewind=function(){var e=yt.rewind();return e||(e=ds({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},bt);function gs(...e){return $(F(e))}ps.renderStatic=ps.rewind;const ms=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,fs=F,ys=(e,t)=>s=>{var r;if(null==(null==t?void 0:t.variants))return fs(e,null==s?void 0:s.class,null==s?void 0:s.className);const{variants:i,defaultVariants:n}=t,o=Object.keys(i).map(e=>{const t=null==s?void 0:s[e],r=null==n?void 0:n[e];if(null===t)return null;const o=ms(t)||ms(r);return i[e][o]}),a=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...i}=t;return Object.entries(i).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...n,...a}[t]):{...n,...a}[t]===s})?[...e,s,r]:e},[]);return fs(e,o,l,null==s?void 0:s.class,null==s?void 0:s.className)},vs=a,bs=j.forwardRef(({className:s,...r},i)=>e.jsx(t,{ref:i,className:gs("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...r}));bs.displayName=t.displayName;const ws=ys("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),xs=j.forwardRef(({className:t,variant:r,...i},n)=>e.jsx(s,{ref:n,className:gs(ws({variant:r}),t),...i}));xs.displayName=s.displayName;j.forwardRef(({className:t,...s},i)=>e.jsx(r,{ref:i,className:gs("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s})).displayName=r.displayName;const _s=j.forwardRef(({className:t,...s},r)=>e.jsx(i,{ref:r,className:gs("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(M,{className:"h-4 w-4"})}));_s.displayName=i.displayName;const ks=j.forwardRef(({className:t,...s},r)=>e.jsx(n,{ref:r,className:gs("text-sm font-semibold",t),...s}));ks.displayName=n.displayName;const Ss=j.forwardRef(({className:t,...s},r)=>e.jsx(o,{ref:r,className:gs("text-sm opacity-90",t),...s}));Ss.displayName=o.displayName;let js=0;const Ts={state:{toasts:[]},listeners:[],getState:()=>Ts.state,setState:e=>{Ts.state="function"==typeof e?e(Ts.state):{...Ts.state,...e},Ts.listeners.forEach(e=>e(Ts.state))},subscribe:e=>(Ts.listeners.push(e),()=>{Ts.listeners=Ts.listeners.filter(t=>t!==e)})},Ps=({...e})=>{const t=(js=(js+1)%Number.MAX_VALUE,js.toString()),s=()=>Ts.setState(e=>({...e,toasts:e.toasts.filter(e=>e.id!==t)}));return Ts.setState(r=>({...r,toasts:[{...e,id:t,dismiss:s},...r.toasts].slice(0,1)})),{id:t,dismiss:s,update:e=>Ts.setState(s=>({...s,toasts:s.toasts.map(s=>s.id===t?{...s,...e}:s)}))}};function Cs(){const[e,t]=S.useState(Ts.getState());return S.useEffect(()=>Ts.subscribe(e=>{t(e)}),[]),S.useEffect(()=>{const t=[];return e.toasts.forEach(e=>{if(e.duration===1/0)return;const s=setTimeout(()=>{e.dismiss()},e.duration||5e3);t.push(s)}),()=>{t.forEach(e=>clearTimeout(e))}},[e.toasts]),{toast:Ps,toasts:e.toasts}}function Es(){const{toasts:t}=Cs();return e.jsxs(vs,{children:[t.map(({id:t,title:s,description:r,action:i,...n})=>e.jsxs(xs,{...n,children:[e.jsxs("div",{className:"grid gap-1",children:[s&&e.jsx(ks,{children:s}),r&&e.jsx(Ss,{children:r})]}),i,e.jsx(_s,{})]},t)),e.jsx(bs,{})]})}class Ns extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class As extends Ns{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Os extends Ns{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Rs extends Ns{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Is,Ds;(Ds=Is||(Is={})).Any="any",Ds.ApNortheast1="ap-northeast-1",Ds.ApNortheast2="ap-northeast-2",Ds.ApSouth1="ap-south-1",Ds.ApSoutheast1="ap-southeast-1",Ds.ApSoutheast2="ap-southeast-2",Ds.CaCentral1="ca-central-1",Ds.EuCentral1="eu-central-1",Ds.EuWest1="eu-west-1",Ds.EuWest2="eu-west-2",Ds.EuWest3="eu-west-3",Ds.SaEast1="sa-east-1",Ds.UsEast1="us-east-1",Ds.UsWest1="us-west-1",Ds.UsWest2="us-west-2";var Ls=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};class $s{constructor(e,{headers:t={},customFetch:s,region:r=Is.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>ze(()=>Promise.resolve().then(()=>Js),void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return Ls(this,arguments,void 0,function*(e,t={}){var s;try{const{headers:r,method:i,body:n,signal:o}=t;let a={},{region:l}=t;l||(l=this.region);const c=new URL(`${this.url}/${e}`);let u;l&&"any"!==l&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l)),n&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&n instanceof Blob||n instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=n):"string"==typeof n?(a["Content-Type"]="text/plain",u=n):"undefined"!=typeof FormData&&n instanceof FormData?u=n:(a["Content-Type"]="application/json",u=JSON.stringify(n)));const d=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:u,signal:o}).catch(e=>{if("AbortError"===e.name)throw e;throw new As(e)}),h=d.headers.get("x-relay-error");if(h&&"true"===h)throw new Os(d);if(!d.ok)throw new Rs(d);let p,g=(null!==(s=d.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return p="application/json"===g?yield d.json():"application/octet-stream"===g?yield d.blob():"text/event-stream"===g?d:"multipart/form-data"===g?yield d.formData():yield d.text(),{data:p,error:null,response:d}}catch(r){return r instanceof Error&&"AbortError"===r.name?{data:null,error:new As(r)}:{data:null,error:r,response:r instanceof Rs||r instanceof Os?r.context:void 0}}})}}var Fs={},Ms={},Us={},Bs={},qs={},Ws={},Hs=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const zs=Hs.fetch,Gs=Hs.fetch.bind(Hs),Vs=Hs.Headers,Ys=Hs.Request,Ks=Hs.Response,Js=Object.freeze(Object.defineProperty({__proto__:null,Headers:Vs,Request:Ys,Response:Ks,default:Gs,fetch:zs},Symbol.toStringTag,{value:"Module"})),Qs=T(Js);var Xs={};Object.defineProperty(Xs,"__esModule",{value:!0});let Zs=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Xs.default=Zs;var er=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ws,"__esModule",{value:!0});const tr=er(Qs),sr=er(Xs);Ws.default=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(s=e.isMaybeSingle)&&void 0!==s&&s,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=tr.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,r,i;let n=null,o=null,a=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const s=await e.text();""===s||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?s:JSON.parse(s))}const i=null===(s=this.headers.get("Prefer"))||void 0===s?void 0:s.match(/count=(exact|planned|estimated)/),u=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");i&&u&&u.length>1&&(a=parseInt(u[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(n={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,a=null,l=406,c="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{n=JSON.parse(t),Array.isArray(n)&&404===e.status&&(o=[],n=null,l=200,c="OK")}catch(u){404===e.status&&""===t?(l=204,c="No Content"):n={message:t}}if(n&&this.isMaybeSingle&&(null===(i=null==n?void 0:n.details)||void 0===i?void 0:i.includes("0 rows"))&&(n=null,l=200,c="OK"),n&&this.shouldThrowOnError)throw new sr.default(n)}return{error:n,data:o,count:a,status:l,statusText:c}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,s,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};var rr=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qs,"__esModule",{value:!0});const ir=rr(Ws);let nr=class extends ir.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const n=i?`${i}.order`:"order",o=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const i=void 0===r?"offset":`${r}.offset`,n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(n,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:n="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(o=this.headers.get("Accept"))&&void 0!==o?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${l}"; options=${a};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};qs.default=nr;var or=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Bs,"__esModule",{value:!0});const ar=or(qs);let lr=class extends ar.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const n=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};Bs.default=lr;var cr=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Us,"__esModule",{value:!0});const ur=cr(Bs);Us.default=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let i=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",n),s&&this.headers.append("Prefer",`count=${s}`),new ur.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:s=!0}={}){var r;if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new ur.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){var n;if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new ur.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}update(e,{count:t}={}){var s;return t&&this.headers.append("Prefer",`count=${t}`),new ur.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new ur.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}};var dr=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ms,"__esModule",{value:!0});const hr=dr(Us),pr=dr(Bs);Ms.default=class e{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new hr.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:i}={}){var n;let o;const a=new URL(`${this.url}/rpc/${e}`);let l;s||r?(o=s?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{a.searchParams.append(e,t)})):(o="POST",l=t);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new pr.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}};var gr=P&&P.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.PostgrestError=Fs.PostgrestBuilder=Fs.PostgrestTransformBuilder=Fs.PostgrestFilterBuilder=Fs.PostgrestQueryBuilder=Fs.PostgrestClient=void 0;const mr=gr(Ms);Fs.PostgrestClient=mr.default;const fr=gr(Us);Fs.PostgrestQueryBuilder=fr.default;const yr=gr(Bs);Fs.PostgrestFilterBuilder=yr.default;const vr=gr(qs);Fs.PostgrestTransformBuilder=vr.default;const br=gr(Ws);Fs.PostgrestBuilder=br.default;const wr=gr(Xs);Fs.PostgrestError=wr.default;var xr=Fs.default={PostgrestClient:mr.default,PostgrestQueryBuilder:fr.default,PostgrestFilterBuilder:yr.default,PostgrestTransformBuilder:vr.default,PostgrestBuilder:br.default,PostgrestError:wr.default};const{PostgrestClient:_r,PostgrestQueryBuilder:kr,PostgrestFilterBuilder:Sr,PostgrestTransformBuilder:jr,PostgrestBuilder:Tr,PostgrestError:Pr}=xr;class Cr{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,s=parseInt(t.replace(/^v/,"").split(".")[0]);return s>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const Er=1e4;var Nr,Ar,Or,Rr,Ir,Dr,Lr,$r,Fr,Mr,Ur;(Ar=Nr||(Nr={}))[Ar.connecting=0]="connecting",Ar[Ar.open=1]="open",Ar[Ar.closing=2]="closing",Ar[Ar.closed=3]="closed",(Rr=Or||(Or={})).closed="closed",Rr.errored="errored",Rr.joined="joined",Rr.joining="joining",Rr.leaving="leaving",(Dr=Ir||(Ir={})).close="phx_close",Dr.error="phx_error",Dr.join="phx_join",Dr.reply="phx_reply",Dr.leave="phx_leave",Dr.access_token="access_token",(Lr||(Lr={})).websocket="websocket",(Fr=$r||($r={})).Connecting="connecting",Fr.Open="open",Fr.Closing="closing",Fr.Closed="closed";class Br{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),i=t.getUint8(2);let n=this.HEADER_LENGTH+2;const o=s.decode(e.slice(n,n+r));n+=r;const a=s.decode(e.slice(n,n+i));n+=i;return{ref:null,topic:o,event:a,payload:JSON.parse(s.decode(e.slice(n,e.byteLength)))}}}class qr{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(Ur=Mr||(Mr={})).abstime="abstime",Ur.bool="bool",Ur.date="date",Ur.daterange="daterange",Ur.float4="float4",Ur.float8="float8",Ur.int2="int2",Ur.int4="int4",Ur.int4range="int4range",Ur.int8="int8",Ur.int8range="int8range",Ur.json="json",Ur.jsonb="jsonb",Ur.money="money",Ur.numeric="numeric",Ur.oid="oid",Ur.reltime="reltime",Ur.text="text",Ur.time="time",Ur.timestamp="timestamp",Ur.timestamptz="timestamptz",Ur.timetz="timetz",Ur.tsrange="tsrange",Ur.tstzrange="tstzrange";const Wr=(e,t,s={})=>{var r;const i=null!==(r=s.skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((s,r)=>(s[r]=Hr(r,e,t,i),s),{}):{}},Hr=(e,t,s,r)=>{const i=t.find(t=>t.name===e),n=null==i?void 0:i.type,o=s[e];return n&&!r.includes(n)?zr(n,o):Gr(o)},zr=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return Jr(t,s)}switch(e){case Mr.bool:return Vr(t);case Mr.float4:case Mr.float8:case Mr.int2:case Mr.int4:case Mr.int8:case Mr.numeric:case Mr.oid:return Yr(t);case Mr.json:case Mr.jsonb:return Kr(t);case Mr.timestamp:return Qr(t);case Mr.abstime:case Mr.date:case Mr.daterange:case Mr.int4range:case Mr.int8range:case Mr.money:case Mr.reltime:case Mr.text:case Mr.time:case Mr.timestamptz:case Mr.timetz:case Mr.tsrange:case Mr.tstzrange:default:return Gr(t)}},Gr=e=>e,Vr=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Yr=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Kr=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},Jr=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,r=e[s];if("{"===e[0]&&"}"===r){let r;const n=e.slice(1,s);try{r=JSON.parse("["+n+"]")}catch(i){r=n?n.split(","):[]}return r.map(e=>zr(t,e))}return e},Qr=e=>"string"==typeof e?e.replace(" ","T"):e,Xr=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Zr{constructor(e,t,s={},r=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var ei,ti,si,ri,ii,ni,oi,ai;(ti=ei||(ei={})).SYNC="sync",ti.JOIN="join",ti.LEAVE="leave";class li{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=li.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=li.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],r()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=li.syncDiff(this.state,e,t,s),r())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const i=this.cloneDeep(e),n=this.transformState(t),o={},a={};return this.map(i,(e,t)=>{n[e]||(a[e]=t)}),this.map(n,(e,t)=>{const s=i[e];if(s){const r=t.map(e=>e.presence_ref),i=s.map(e=>e.presence_ref),n=t.filter(e=>i.indexOf(e.presence_ref)<0),l=s.filter(e=>r.indexOf(e.presence_ref)<0);n.length>0&&(o[e]=n),l.length>0&&(a[e]=l)}else o[e]=t}),this.syncDiff(i,{joins:o,leaves:a},s,r)}static syncDiff(e,t,s,r){const{joins:i,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(t,r)=>{var i;const n=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),n.length>0){const s=e[t].map(e=>e.presence_ref),r=n.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...r)}s(t,n,r)}),this.map(n,(t,s)=>{let i=e[t];if(!i)return;const n=s.map(e=>e.presence_ref);i=i.filter(e=>n.indexOf(e.presence_ref)<0),e[t]=i,r(t,i,s),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return t[s]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(ri=si||(si={})).ALL="*",ri.INSERT="INSERT",ri.UPDATE="UPDATE",ri.DELETE="DELETE",(ni=ii||(ii={})).BROADCAST="broadcast",ni.PRESENCE="presence",ni.POSTGRES_CHANGES="postgres_changes",ni.SYSTEM="system",(ai=oi||(oi={})).SUBSCRIBED="SUBSCRIBED",ai.TIMED_OUT="TIMED_OUT",ai.CLOSED="CLOSED",ai.CHANNEL_ERROR="CHANNEL_ERROR";class ci{constructor(e,t={config:{}},s){var r,i;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=Or.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Zr(this,Ir.join,this.params,this.timeout),this.rejoinTimer=new qr(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Or.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Or.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Or.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Or.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=Or.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ir.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new li(this),this.broadcastEndpointURL=Xr(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(i=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===i?void 0:i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Or.closed){const{config:{broadcast:n,presence:o,private:a}}=this.params,l=null!==(r=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[ii.PRESENCE]&&this.bindings[ii.PRESENCE].length>0||!0===(null===(i=this.params.config.presence)||void 0===i?void 0:i.enabled),u={},d={broadcast:n,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(oi.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(oi.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var s;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,i=null!==(s=null==r?void 0:r.length)&&void 0!==s?s:0,n=[];for(let s=0;s<i;s++){const i=r[s],{filter:{event:o,schema:a,table:l,filter:c}}=i,u=t&&t[s];if(!u||u.event!==o||u.schema!==a||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=Or.errored,void(null==e||e(oi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));n.push(Object.assign(Object.assign({},i),{id:u.id}))}return this.bindings.postgres_changes=n,void(e&&e(oi.SUBSCRIBED))}null==e||e(oi.SUBSCRIBED)}).receive("error",t=>{this.state=Or.errored,null==e||e(oi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(oi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===Or.joined&&e===ii.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var r,i,n;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(n=null===(i=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===i?void 0:i.broadcast)||void 0===n?void 0:n.ack)||s("ok"),o.receive("ok",()=>s("ok")),o.receive("error",()=>s("error")),o.receive("timeout",()=>s("timed out"))});{const{event:n,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:o,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Or.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ir.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new Zr(this,Ir.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null==s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Or.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),n}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Zr(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,i;const n=e.toLocaleLowerCase(),{close:o,error:a,leave:l,join:c}=Ir;if(s&&[o,a,l,c].indexOf(n)>=0&&s!==this._joinRef())return;let u=this._onMessage(n,t,s);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,s,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===r?void 0:r.toLocaleLowerCase())===n}).map(e=>e.callback(u,s)):null===(i=this.bindings[n])||void 0===i||i.filter(e=>{var s,r,i,o,a,l;if(["broadcast","presence","postgres_changes"].includes(n)){if("id"in e){const n=e.id,o=null===(s=e.filter)||void 0===s?void 0:s.event;return n&&(null===(r=t.ids)||void 0===r?void 0:r.includes(n))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const s=null===(a=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===s||s===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===n}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:s,commit_timestamp:r,type:i,errors:n}=e,o={schema:t,table:s,commit_timestamp:r,eventType:i,new:{},old:{},errors:n};u=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(u,s)})}_isClosed(){return this.state===Or.closed}_isJoined(){return this.state===Or.joined}_isJoining(){return this.state===Or.joining}_isLeaving(){return this.state===Or.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===s&&ci.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ir.close,{},e)}_onError(e){this._on(Ir.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Or.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Wr(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Wr(e.columns,e.old_record)),t}}const ui=()=>{},di=25e3,hi=10,pi=100,gi=[1e3,2e3,5e3,1e4];class mi{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Er,this.transport=null,this.heartbeatIntervalMs=di,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ui,this.ref=0,this.reconnectTimer=null,this.logger=ui,this.conn=null,this.sendBuffer=[],this.serializer=new Br,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>ze(()=>Promise.resolve().then(()=>Js),void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Lr.websocket}`,this.httpEndpoint=Xr(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Cr.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case Nr.connecting:return $r.Connecting;case Nr.open:return $r.Open;case Nr.closing:return $r.Closing;default:return $r.Closed}}isConnected(){return this.connectionState()===$r.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===s);if(r)return r;{const s=new ci(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:r,ref:i}=e,n=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${s} (${i})`,r),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},pi)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(a){this.log("error","error in heartbeat callback",a)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:s,payload:r,ref:i}=e,n=i?`(${i})`:"",o=r.status||"";this.log("receive",`${o} ${t} ${s} ${n}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,r,i)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ir.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const s={access_token:t,version:"realtime-js/2.75.0"};t&&e.updateJoinPayload(s),e.joinedOnce&&e._isJoined()&&e._push(Ir.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new qr(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hi)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,i,n,o,a,l,c;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(s=null==e?void 0:e.timeout)&&void 0!==s?s:Er,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:di,this.worker=null!==(i=null==e?void 0:e.worker)&&void 0!==i&&i,this.accessToken=null!==(n=null==e?void 0:e.accessToken)&&void 0!==n?n:null,this.heartbeatCallback=null!==(o=null==e?void 0:e.heartbeatCallback)&&void 0!==o?o:ui,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(a=null==e?void 0:e.reconnectAfterMs)&&void 0!==a?a:e=>gi[e-1]||1e4,this.encode=null!==(l=null==e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null==e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class fi extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function yi(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class vi extends fi{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bi extends fi{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var wi=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};const xi=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>ze(()=>Promise.resolve().then(()=>Js),void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},_i=e=>{if(Array.isArray(e))return e.map(e=>_i(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,s])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=_i(s)}),t};var ki=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};const Si=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ji=(e,t,s)=>ki(void 0,void 0,void 0,function*(){const r=yield wi(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield ze(()=>Promise.resolve().then(()=>Js),void 0)).Response:Response});e instanceof r&&!(null==s?void 0:s.noResolveJson)?e.json().then(s=>{const r=e.status||500,i=(null==s?void 0:s.statusCode)||r+"";t(new vi(Si(s),r,i))}).catch(e=>{t(new bi(Si(e),e))}):t(new bi(Si(e),e))}),Ti=(e,t,s,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,(null==t?void 0:t.duplex)&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),s)):i};function Pi(e,t,s,r,i,n){return ki(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(s,Ti(t,r,i,n)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(e=>ji(e,a,r))})})}function Ci(e,t,s,r){return ki(this,void 0,void 0,function*(){return Pi(e,"GET",t,s,r)})}function Ei(e,t,s,r,i){return ki(this,void 0,void 0,function*(){return Pi(e,"POST",t,r,i,s)})}function Ni(e,t,s,r,i){return ki(this,void 0,void 0,function*(){return Pi(e,"PUT",t,r,i,s)})}function Ai(e,t,s,r,i){return ki(this,void 0,void 0,function*(){return Pi(e,"DELETE",t,r,i,s)})}var Oi=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};class Ri{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return Oi(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yi(e))return{data:null,error:e};throw e}})}}var Ii=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};class Di{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new Ri(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return Ii(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yi(e))return{data:null,error:e};throw e}})}}var Li=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};const $i={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Mi{constructor(e,t={},s,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=xi(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,r){return Li(this,void 0,void 0,function*(){try{let i;const n=Object.assign(Object.assign({},Fi),r);let o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)});const a=n.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(i=new FormData,i.append("cacheControl",n.cacheControl),a&&i.append("metadata",this.encodeMetadata(a)),i.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(i=s,i.append("cacheControl",n.cacheControl),a&&i.append("metadata",this.encodeMetadata(a))):(i=s,o["cache-control"]=`max-age=${n.cacheControl}`,o["content-type"]=n.contentType,a&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null==r?void 0:r.headers)&&(o=Object.assign(Object.assign({},o),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?Ni:Ei)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:o},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(yi(i))return{data:null,error:i};throw i}})}upload(e,t,s){return Li(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return Li(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),n=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${n}`);o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Fi.upsert},r),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);return{data:{path:i,fullPath:(yield Ni(this.fetch,o.toString(),e,{headers:n})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(yi(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,t){return Li(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const i=yield Ei(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),n=new URL(this.url+i.url),o=n.searchParams.get("token");if(!o)throw new fi("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:o},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yi(s))return{data:null,error:s};throw s}})}update(e,t,s){return Li(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return Li(this,void 0,void 0,function*(){try{return{data:yield Ei(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yi(r))return{data:null,error:r};throw r}})}copy(e,t,s){return Li(this,void 0,void 0,function*(){try{return{data:{path:(yield Ei(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yi(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return Li(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield Ei(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const n=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${n}`)},{data:i,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yi(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return Li(this,void 0,void 0,function*(){try{const r=yield Ei(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yi(r))return{data:null,error:r};throw r}})}download(e,t){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=r?`?${r}`:"",n=this._getFinalPath(e);return new Di(()=>Ci(this.fetch,`${this.url}/${s}/${n}${i}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return Li(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Ci(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:_i(e),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yi(s))return{data:null,error:s};throw s}})}exists(e){return Li(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,r){return ki(this,void 0,void 0,function*(){return Pi(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yi(s)&&s instanceof bi){const e=s.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&r.push(i);const n=void 0!==(null==t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&r.push(o);let a=r.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${s}${a}`)}}}remove(e){return Li(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yi(t))return{data:null,error:t};throw t}})}list(e,t,s){return Li(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},$i),t),{prefix:e||""});return{data:yield Ei(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yi(r))return{data:null,error:r};throw r}})}listV2(e,t){return Li(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield Ei(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yi(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Ui={"X-Client-Info":"storage-js/2.75.0"};var Bi=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};class qi{constructor(e,t={},s,r){this.shouldThrowOnError=!1;const i=new URL(e);if(null==r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."))}this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ui),t),this.fetch=xi(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Bi(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yi(e))return{data:null,error:e};throw e}})}getBucket(e){return Bi(this,void 0,void 0,function*(){try{return{data:yield Ci(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yi(t))return{data:null,error:t};throw t}})}createBucket(e){return Bi(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield Ei(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yi(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return Bi(this,void 0,void 0,function*(){try{return{data:yield Ni(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yi(s))return{data:null,error:s};throw s}})}emptyBucket(e){return Bi(this,void 0,void 0,function*(){try{return{data:yield Ei(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yi(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Bi(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(yi(t))return{data:null,error:t};throw t}})}}class Wi extends qi{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new Mi(this.url,this.headers,e,this.fetch)}}const Hi={"X-Client-Info":"supabase-js/2.30.0"};var zi={exports:{}};!function(e,t){var s,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==P&&P,i=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();s=i,function(e){var t=void 0!==s&&s||"undefined"!=typeof self&&self||void 0!==P&&P||{},r="URLSearchParams"in t,i="Symbol"in t&&"iterator"in Symbol,n="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in t,a="ArrayBuffer"in t;if(a)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&l.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function g(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function m(e){return new Promise(function(t,s){e.onload=function(){t(e.result)},e.onerror=function(){s(e.error)}})}function f(e){var t=new FileReader,s=m(t);return t.readAsArrayBuffer(e),s}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:n&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&n&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=g(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(n)return this.blob().then(f);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,s,r,i,n=g(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,s=m(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),i=r?r[1]:"utf-8",t.readAsText(e,i),s;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),s=new Array(t.length),r=0;r<t.length;r++)s[r]=String.fromCharCode(t[r]);return s.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(x)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=u(e),t=d(t);var s=this.map[e];this.map[e]=s?s+", "+t:t},p.prototype.delete=function(e){delete this.map[u(e)]},p.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},p.prototype.set=function(e,t){this.map[u(e)]=d(t)},p.prototype.forEach=function(e,t){for(var s in this.map)this.map.hasOwnProperty(s)&&e.call(t,this.map[s],s,this)},p.prototype.keys=function(){var e=[];return this.forEach(function(t,s){e.push(s)}),h(e)},p.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),h(e)},p.prototype.entries=function(){var e=[];return this.forEach(function(t,s){e.push([s,t])}),h(e)},i&&(p.prototype[Symbol.iterator]=p.prototype.entries);var b=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function w(e,s){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,n=(s=s||{}).body;if(e instanceof w){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,s.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=s.credentials||this.credentials||"same-origin",!s.headers&&this.headers||(this.headers=new p(s.headers)),this.method=(r=s.method||this.method||"GET",i=r.toUpperCase(),b.indexOf(i)>-1?i:r),this.mode=s.mode||this.mode||null,this.signal=s.signal||this.signal||function(){if("AbortController"in t)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==s.cache&&"no-cache"!==s.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function x(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var s=e.split("="),r=s.shift().replace(/\+/g," "),i=s.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function _(e,t){if(!(this instanceof _))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},v.call(w.prototype),v.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},_.error=function(){var e=new _(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var k=[301,302,303,307,308];_.redirect=function(e,t){if(-1===k.indexOf(t))throw new RangeError("Invalid status code");return new _(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(j){e.DOMException=function(e,t){this.message=e,this.name=t;var s=Error(e);this.stack=s.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function S(s,r){return new Promise(function(i,o){var l=new w(s,r);if(l.signal&&l.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function h(){c.abort()}if(c.onload=function(){var e,t,s={statusText:c.statusText,headers:(e=c.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var s=e.split(":"),r=s.shift().trim();if(r){var i=s.join(":").trim();try{t.append(r,i)}catch(n){}}}),t)};0===l.url.indexOf("file://")&&(c.status<200||c.status>599)?s.status=200:s.status=c.status,s.url="responseURL"in c?c.responseURL:s.headers.get("X-Request-URL");var r="response"in c?c.response:c.responseText;setTimeout(function(){i(new _(r,s))},0)},c.onerror=function(){setTimeout(function(){o(new TypeError("Network request failed"))},0)},c.ontimeout=function(){setTimeout(function(){o(new TypeError("Network request timed out"))},0)},c.onabort=function(){setTimeout(function(){o(new e.DOMException("Aborted","AbortError"))},0)},c.open(l.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(s){return e}}(l.url),!0),"include"===l.credentials?c.withCredentials=!0:"omit"===l.credentials&&(c.withCredentials=!1),"responseType"in c&&(n?c.responseType="blob":a&&(c.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof p||t.Headers&&r.headers instanceof t.Headers)){var g=[];Object.getOwnPropertyNames(r.headers).forEach(function(e){g.push(u(e)),c.setRequestHeader(e,d(r.headers[e]))}),l.headers.forEach(function(e,t){-1===g.indexOf(t)&&c.setRequestHeader(t,e)})}else l.headers.forEach(function(e,t){c.setRequestHeader(t,e)});l.signal&&(l.signal.addEventListener("abort",h),c.onreadystatechange=function(){4===c.readyState&&l.signal.removeEventListener("abort",h)}),c.send(void 0===l._bodyInit?null:l._bodyInit)})}S.polyfill=!0,t.fetch||(t.fetch=S,t.Headers=p,t.Request=w,t.Response=_),e.Headers=p,e.Request=w,e.Response=_,e.fetch=S,Object.defineProperty(e,"__esModule",{value:!0})}({}),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var n=r.fetch?r:i;(t=n.fetch).default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,e.exports=t}(zi,zi.exports);var Gi=zi.exports;const Vi=k(Gi),Yi=Be({__proto__:null,default:Vi},[Gi]);var Ki=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};const Ji=(e,t,s)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?Vi:fetch),(...e)=>t(...e)})(s),i="undefined"==typeof Headers?Gi.Headers:Headers;return(s,n)=>Ki(void 0,void 0,void 0,function*(){var o;const a=null!==(o=yield t())&&void 0!==o?o:e;let l=new i(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${a}`),r(s,Object.assign(Object.assign({},n),{headers:l}))})};const Qi=()=>"undefined"!=typeof document,Xi={tested:!1,writable:!1},Zi=()=>{if(!Qi())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(Xi.tested)return Xi.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Xi.tested=!0,Xi.writable=!0}catch(t){Xi.tested=!0,Xi.writable=!1}return Xi.writable};function en(e,t){var s;t||(t=(null===(s=null===window||void 0===window?void 0:window.location)||void 0===s?void 0:s.href)||""),e=e.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}const tn=e=>{let t;return t=e||("undefined"==typeof fetch?async(...e)=>await(await ze(()=>Promise.resolve().then(()=>Yi),void 0)).fetch(...e):fetch),(...e)=>t(...e)},sn=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},rn=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(r){return s}},nn=async(e,t)=>{await e.removeItem(t)};class on{constructor(){this.promise=new on.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function an(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s,r,i,n,o,a,l,c="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)n=t.indexOf(e.charAt(u++)),o=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),s=n<<2|o>>4,r=(15&o)<<4|a>>2,i=(3&a)<<6|l,c+=String.fromCharCode(s),64!=a&&0!=r&&(c+=String.fromCharCode(r)),64!=l&&0!=i&&(c+=String.fromCharCode(i));return c}(s))}function ln(e){return("0"+e.toString(16)).substr(-2)}function cn(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let r=0;r<56;r++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,ln).join("")}async function un(e){if("undefined"==typeof crypto)return e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}on.promiseConstructor=Promise;const dn=/__stack_guard__([a-zA-Z0-9_-]+)__/;let hn,pn=!1;function gn(e){var t,s;let r;hn();try{throw new Error}catch(n){r=n}const i=null!==(s=null===(t=r.stack)||void 0===t?void 0:t.split("\n"))&&void 0!==s?s:[];for(let o=0;o<i.length;o+=1){const t=i[o].match(dn);if(t&&t[1]===e)return!0}return!1}async function mn(e,t){await hn();const s=`__stack_guard__${e}__`,r={[s]:async()=>await t()};return await r[s]()}hn=async()=>{pn||(pn=!0,await mn("ENV_CHECK",async()=>{const e=gn("ENV_CHECK");return e}))};class fn extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function yn(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class vn extends fn{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class bn extends fn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class wn extends fn{constructor(e,t,s){super(e),this.name=t,this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class xn extends wn{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class _n extends wn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class kn extends wn{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class Sn extends wn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class jn extends wn{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Tn extends wn{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function Pn(e){return yn(e)&&"AuthRetryableFetchError"===e.name}var Cn=globalThis&&globalThis.__rest||function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]])}return s};const En=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Nn=[502,503,504];async function An(e){if(!("object"==typeof(t=e)&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"==typeof t.json))throw new Tn(En(e),0);var t;if(Nn.includes(e.status))throw new Tn(En(e),e.status);let s;try{s=await e.json()}catch(r){throw new bn(En(r),r)}throw new vn(En(s),e.status||500)}async function On(e,t,s,r){var i;const n=Object.assign({},null==r?void 0:r.headers);(null==r?void 0:r.jwt)&&(n.Authorization=`Bearer ${r.jwt}`);const o=null!==(i=null==r?void 0:r.query)&&void 0!==i?i:{};(null==r?void 0:r.redirectTo)&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await async function(e,t,s,r,i,n){const o=((e,t,s,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),s))})(t,r,i,n);let a;try{a=await e(s,o)}catch(l){throw new Tn(En(l),0)}a.ok||await An(a);if(null==r?void 0:r.noResolveJson)return a;try{return await a.json()}catch(l){await An(l)}}(e,t,s+a,{headers:n,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function Rn(e){var t;let s=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function In(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Dn(e){return{data:e,error:null}}function Ln(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:i,verification_type:n}=e,o=Cn(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:r,redirect_to:i,verification_type:n},user:Object.assign({},o)},error:null}}function $n(e){return e}var Fn=globalThis&&globalThis.__rest||function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]])}return s};class Mn{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=tn(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await On(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(yn(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await On(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:In})}catch(s){if(yn(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=Fn(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=null==s?void 0:s.newEmail,delete r.newEmail),await On(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Ln,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(yn(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await On(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:In})}catch(t){if(yn(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,i,n,o,a;try{const l={nextPage:null,lastPage:0,total:0},c=await On(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(i=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:$n});if(c.error)throw c.error;const u=await c.json(),d=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,h=null!==(a=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l[`${s}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(yn(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await On(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:In})}catch(t){if(yn(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await On(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:In})}catch(s){if(yn(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await On(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:In})}catch(s){if(yn(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await On(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(t){if(yn(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await On(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(yn(t))return{data:null,error:t};throw t}}}const Un={"X-Client-Info":"gotrue-js/2.43.1"},Bn={getItem:e=>Zi()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Zi()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Zi()&&globalThis.localStorage.removeItem(e)}};!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const qn={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Un,flowType:"implicit",debug:!1},Wn=3e4;class Hn{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=Hn.nextInstanceID,Hn.nextInstanceID+=1,this.instanceID>0&&Qi();const s=Object.assign(Object.assign({},qn),e);if(this.logDebugMessages=s.debug,this.inMemorySession=null,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.persistSession=s.persistSession,this.storage=s.storage||Bn,this.admin=new Mn({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=tn(s.fetch),this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===Bn&&Zi(),Qi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){}null===(t=this.broadcastChannel)||void 0===t||t.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages,this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=mn("_initialize",async()=>{try{const e=!!Qi()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromUrl(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),await this._removeSession(),{error:s};const{session:r,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),await this._saveSession(r),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return yn(e)?{error:e}:{error:new bn("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(e){var t,s,r;try{let i;if(await this._removeSession(),"email"in e){const{email:s,password:r,options:n}=e;let o=null,a=null;if("pkce"===this.flowType){const e=cn();await sn(this.storage,`${this.storageKey}-code-verifier`,e),o=await un(e),a=e===o?"plain":"s256"}i=await On(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:s,password:r,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:o,code_challenge_method:a},xform:Rn})}else{if(!("phone"in e))throw new kn("You must provide either an email or phone number and a password");{const{phone:t,password:n,options:o}=e;i=await On(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!==(s=null==o?void 0:o.data)&&void 0!==s?s:{},channel:null!==(r=null==o?void 0:o.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:Rn})}}const{data:n,error:o}=i;if(o||!n)return{data:{user:null,session:null},error:o};const a=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(i){if(yn(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if(await this._removeSession(),"email"in e){const{email:s,password:r,options:i}=e;t=await On(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Rn})}else{if(!("phone"in e))throw new kn("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:i}=e;t=await On(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Rn})}}const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:{user:s.user,session:s.session},error:r}):{data:{user:null,session:null},error:new _n}}catch(t){if(yn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){const t=await rn(this.storage,`${this.storageKey}-code-verifier`),{data:s,error:r}=await On(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:Rn});return await nn(this.storage,`${this.storageKey}-code-verifier`),r?{data:{user:null,session:null},error:r}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:r}):{data:{user:null,session:null},error:new _n}}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:s,token:r,access_token:i,nonce:n}=e,o=await On(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Rn}),{data:a,error:l}=o;return l?{data:{user:null,session:null},error:l}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l}):{data:{user:null,session:null},error:new _n}}catch(t){if(yn(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,i,n;try{if(await this._removeSession(),"email"in e){const{email:r,options:i}=e;let n=null,o=null;if("pkce"===this.flowType){const e=cn();await sn(this.storage,`${this.storageKey}-code-verifier`,e),n=await un(e),o=e===n?"plain":"s256"}const{error:a}=await On(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(s=null==i?void 0:i.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:n,code_challenge_method:o},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:s}=e,{data:o,error:a}=await On(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==s?void 0:s.data)&&void 0!==r?r:{},create_user:null===(i=null==s?void 0:s.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(n=null==s?void 0:s.channel)&&void 0!==n?n:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new kn("You must provide either an email or phone number.")}catch(o){if(yn(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{"email_change"!==e.type&&"phone_change"!==e.type&&await this._removeSession();const{data:r,error:i}=await On(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:null===(t=e.options)||void 0===t?void 0:t.captchaToken}}),redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,xform:Rn});if(i)throw i;if(!r)throw new Error("An error occurred on token verification.");const n=r.session,o=r.user;return(null==n?void 0:n.access_token)&&(await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)),{data:{user:o,session:n},error:null}}catch(r){if(yn(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{return await this._removeSession(),await On(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:Dn})}catch(i){if(yn(i))return{data:null,error:i};throw i}}async reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new xn;const{error:r}=await On(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(yn(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{"email_change"!=e.type&&"phone_change"!=e.type&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:n}=await On(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:n}}if("phone"in e){const{phone:s,type:r,options:i}=e,{data:n,error:o}=await On(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:o}}throw new kn("You must provide either an email or phone number and a type")}catch(t){if(yn(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return this._useSession(async e=>e)}async _useSession(e){return await mn("_useSession",async()=>{const t=await this.__loadSession();return await e(t)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!gn("_useSession"))throw new Error("Please use #_useSession()");gn("_initialize")||await this.initializePromise;try{let e=null;if(this.persistSession){const t=await rn(this.storage,this.storageKey);this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){try{return await this._useSession(async t=>{var s,r;if(!e){const{data:i,error:n}=t;if(n)throw n;e=null!==(r=null===(s=i.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0}return await On(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:In})})}catch(t){if(yn(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new xn;const n=r.session,{data:o,error:a}=await On(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:e,jwt:n.access_token,xform:In});if(a)throw a;return n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}})}catch(s){if(yn(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return an(e)}async setSession(e){try{if(!e.access_token||!e.refresh_token)throw new xn;const t=Date.now()/1e3;let s=t,r=!0,i=null;const n=an(e.access_token);if(n.exp&&(s=n.exp,r=s<=t),r){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:r,error:n}=await this.getUser(e.access_token);if(n)throw n;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(yn(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:r,error:i}=t;if(i)throw i;e=null!==(s=r.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new xn;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(yn(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromUrl(e){try{if(!Qi())throw new Sn("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new Sn("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!e)throw new jn("Not a valid PKCE flow url.");if(e){const e=en("code");if(!e)throw new jn("No code detected.");const{data:t,error:s}=await this.exchangeCodeForSession(e);if(s)throw s;if(!t.session)throw new jn("No session detected.");let r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const t=en("error_description");if(t){const e=en("error_code");if(!e)throw new Sn("No error_code detected.");const s=en("error");if(!s)throw new Sn("No error detected.");throw new Sn(t,{error:s,code:e})}const s=en("provider_token"),r=en("provider_refresh_token"),i=en("access_token");if(!i)throw new Sn("No access_token detected.");const n=en("expires_in");if(!n)throw new Sn("No expires_in detected.");const o=en("refresh_token");if(!o)throw new Sn("No refresh_token detected.");const a=en("token_type");if(!a)throw new Sn("No token_type detected.");const l=Math.round(Date.now()/1e3)+parseInt(n),{data:c,error:u}=await this.getUser(i);if(u)throw u;const d=c.user,h={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:parseInt(n),expires_at:l,refresh_token:o,token_type:a,user:d},p=en("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:h,redirectType:p},error:null}}catch(t){if(yn(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){return Qi()&&(Boolean(en("access_token"))||Boolean(en("error_description")))}async _isPKCEFlow(){const e=await rn(this.storage,`${this.storageKey}-code-verifier`);return Boolean(en("code"))&&Boolean(e)}async signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{error:i};const n=null===(s=r.session)||void 0===s?void 0:s.access_token;if(n){const{error:t}=await this.admin.signOut(n,e);if(t&&(!function(e){return yn(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await nn(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),this._emitInitialSession(t),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:r},error:i}=t;if(i)throw i;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(i){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;if("pkce"===this.flowType){const e=cn();await sn(this.storage,`${this.storageKey}-code-verifier`,e),s=await un(e),r=e===s?"plain":"s256"}try{return await On(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(yn(i))return{data:null,error:i};throw i}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await(s=async s=>{var r;return await(r=200*s,new Promise(e=>{setTimeout(()=>e(null),r)})),this._debug(t,"refreshing attempt",s),await On(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Rn})},r=(e,t,s)=>s&&s.error&&Pn(s.error)&&Date.now()+200*(e+1)-i<Wn,new Promise((e,t)=>{(async()=>{for(let n=0;n<1/0;n++)try{const t=await s(n);if(!r(n,null,t))return void e(t)}catch(i){if(!r(n,i))return void t(i)}})()}))}catch(i){if(this._debug(t,"error",i),yn(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}var s,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Qi()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await rn(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s))return this._debug(t,"session is not valid"),void(null!==s&&await this._removeSession());const r=Math.round(Date.now()/1e3),i=(null!==(e=s.expires_at)&&void 0!==e?e:1/0)<r+10;if(this._debug(t,`session has${i?"":" not"} expired with margin of 10s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:e}=await this._callRefreshToken(s.refresh_token);e&&(Pn(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return void this._debug(t,"error",s)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new xn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new on;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new xn;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(i){if(this._debug(r,"error",i),yn(i)){const e={session:null,error:i};return null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],i=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(i){r.push(i)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),sn(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await nn(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qi()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Wn);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:s}}=e;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*s.expires_at-t)/Wn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(s.refresh_token)})}catch(e){}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qi()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const s=[`provider=${encodeURIComponent(e)}`];if((null==t?void 0:t.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(null==t?void 0:t.scopes)&&s.push(`scopes=${encodeURIComponent(t.scopes)}`),"pkce"===this.flowType){const e=cn();await sn(this.storage,`${this.storageKey}-code-verifier`,e);const t=await un(e),r=e===t?"plain":"s256";this._debug("PKCE","code verifier",`${e.substring(0,5)}...`,"code challenge",t,"method",r);const i=new URLSearchParams({code_challenge:`${encodeURIComponent(t)}`,code_challenge_method:`${encodeURIComponent(r)}`});s.push(i.toString())}if(null==t?void 0:t.queryParams){const e=new URLSearchParams(t.queryParams);s.push(e.toString())}return`${this.url}/authorize?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await On(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(yn(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:n}=t;if(n)return{data:null,error:n};const{data:o,error:a}=await On(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(s=null==i?void 0:i.session)||void 0===s?void 0:s.access_token});return a?{data:null,error:a}:((null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(yn(t))return{data:null,error:t};throw t}}async _verify(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:n,error:o}=await On(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+n.expires_in},n)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",n),{data:n,error:o})})}catch(t){if(yn(t))return{data:null,error:t};throw t}}async _challenge(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await On(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(yn(t))return{data:null,error:t};throw t}}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],r=s.filter(e=>"totp"===e.factor_type&&"verified"===e.status);return{data:{all:s,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var t,s;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const n=this._decodeJWT(r.access_token);let o=null;n.aal&&(o=n.aal);let a=o;(null!==(s=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==s?s:[]).length>0&&(a="aal2");return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:n.amr||[]},error:null}})}}Hn.nextInstanceID=0;class zn extends Hn{constructor(e){super(e)}}var Gn=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};const Vn={headers:Hi},Yn={schema:"public"},Kn={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Jn={};class Qn{constructor(e,t,s){var r,i,n,o,a,l,c,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const d=e.replace(/\/$/,"");this.realtimeUrl=`${d}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${d}/auth/v1`,this.storageUrl=`${d}/storage/v1`,this.functionsUrl=`${d}/functions/v1`;const h=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p=function(e,t){const{db:s,auth:r,realtime:i,global:n}=e,{db:o,auth:a,realtime:l,global:c}=t;return{db:Object.assign(Object.assign({},o),s),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),n)}}(null!=s?s:{},{db:Yn,realtime:Jn,auth:Object.assign(Object.assign({},Kn),{storageKey:h}),global:Vn});this.storageKey=null!==(i=null===(r=p.auth)||void 0===r?void 0:r.storageKey)&&void 0!==i?i:"",this.headers=null!==(o=null===(n=p.global)||void 0===n?void 0:n.headers)&&void 0!==o?o:{},this.auth=this._initSupabaseAuthClient(null!==(a=p.auth)&&void 0!==a?a:{},this.headers,null===(l=p.global)||void 0===l?void 0:l.fetch),this.fetch=Ji(t,this._getAccessToken.bind(this),null===(c=p.global)||void 0===c?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},p.realtime)),this.rest=new _r(`${d}/rest/v1`,{headers:this.headers,schema:null===(u=p.db)||void 0===u?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new $s(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Wi(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},s){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Gn(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:i,flowType:n,debug:o},a,l){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zn({url:this.authUrl,headers:Object.assign(Object.assign({},c),a),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:n,debug:o,fetch:l})}_initRealtimeClient(e){return new mi(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=s?s:null),this.changedAccessToken=s)}}const Xn=(Zn="https://xdzoikocriuvgkoenjqk.supabase.co",eo="sb_publishable_VXiUtpRKA79e51E2p2csvw_vmmek-LL",to={auth:{storage:window.localStorage,storageKey:"greenofig-auth",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},realtime:{params:{eventsPerSecond:10}},global:{headers:{"X-Client-Info":"greenofig-web"}}},new Qn(Zn,eo,to));var Zn,eo,to;const so=S.createContext(null),ro=({children:t})=>{const[s,r]=S.useState(null),[i,n]=S.useState(null),[o,a]=S.useState(!0),{toast:l}=Cs(),c=S.useCallback(async e=>{var t,s,r,i,o;if(!e)return n(null),null;try{let{data:a,error:l}=await Xn.from("user_profiles").select("*").eq("id",e.id).single();if(l&&"PGRST116"===l.code){const n=(null==(t=e.user_metadata)?void 0:t.full_name)||(null==(s=e.user_metadata)?void 0:s.name)||(null==(r=e.email)?void 0:r.split("@")[0])||"User",l=(null==(i=e.user_metadata)?void 0:i.avatar_url)||(null==(o=e.user_metadata)?void 0:o.picture),{data:c,error:u}=await Xn.from("user_profiles").insert({id:e.id,full_name:n,email:e.email,role:"user",profile_picture_url:l}).select().single();if(u)throw u;a=c}else if(l)throw l;return n(a),a}catch(a){return l({variant:"destructive",title:"Error Loading Profile",description:a.message||"Could not load profile. Please refresh the page."}),null}},[l]),u=S.useCallback(()=>s?c(s):Promise.resolve(null),[s,c]);S.useEffect(()=>{(async()=>{a(!0);const{data:{session:e}}=await Xn.auth.getSession();r((null==e?void 0:e.user)??null),(null==e?void 0:e.user)&&await c(e.user),a(!1)})();const{data:e}=Xn.auth.onAuthStateChange(async(e,t)=>{const s=(null==t?void 0:t.user)??null;if(r(s),"SIGNED_IN"===e&&window.location.search.includes("code=")){const e=new URL(window.location.href);return e.searchParams.delete("code"),void(window.location.href=e.toString())}s?await c(s):n(null),a(!1)});return()=>{var t;null==(t=null==e?void 0:e.subscription)||t.unsubscribe()}},[c]);const d=S.useCallback(async e=>{const{data:t,error:s}=await Xn.auth.signInWithPassword(e);if(s)return l({variant:"destructive",title:"Login Failed",description:s.message}),{error:s};const i=await c(t.user);return r(t.user),n(i),l({title:"Login Successful",description:`Welcome back${(null==i?void 0:i.full_name)?", "+i.full_name:""}!`}),{error:null,profile:i}},[c,l]),h=S.useCallback(async()=>{a(!0);const e=`${window.location.origin}/app`,{error:t}=await Xn.auth.signInWithOAuth({provider:"google",options:{redirectTo:e}});t&&(a(!1),l({variant:"destructive",title:"Google Sign-In Failed",description:t.message}))},[l]),p=S.useCallback(async e=>{const{email:t,password:s,full_name:i}=e,{data:o,error:a}=await Xn.auth.signUp({email:t,password:s,options:{data:{full_name:i,role:"user"}}});if(a)return l({variant:"destructive",title:"Sign Up Failed",description:a.message}),{user:null,error:a};const{data:u,error:d}=await Xn.auth.signInWithPassword({email:t,password:s});if(d)return l({variant:"destructive",title:"Sign-in after sign-up failed.",description:d.message}),{user:null,error:d};await new Promise(e=>setTimeout(e,1500));const h=await c(u.user);return r(u.user),n(h),{user:u.user,error:null,profile:h}},[c,l]),g=S.useCallback(async()=>{a(!0);try{await Xn.auth.signOut(),r(null),n(null),localStorage.clear(),sessionStorage.clear(),l({title:"Signed Out",description:"You have been successfully signed out."})}catch(e){}window.location.replace("/home")},[l]),m=S.useMemo(()=>({user:s,userProfile:i,loading:o,signIn:d,signInWithGoogle:h,signUp:p,signOut:g,refreshUserProfile:u}),[s,i,o,d,h,p,g,u]);return e.jsx(so.Provider,{value:m,children:t})},io=()=>{const e=S.useContext(so);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},no="/assets/Remove background project-af9f111b.png",oo=e=>"string"==typeof e,ao=()=>{let e,t;const s=new Promise((s,r)=>{e=s,t=r});return s.resolve=e,s.reject=t,s},lo=e=>null==e?"":""+e,co=/###/g,uo=e=>e&&e.indexOf("###")>-1?e.replace(co,"."):e,ho=e=>!e||oo(e),po=(e,t,s)=>{const r=oo(t)?t.split("."):t;let i=0;for(;i<r.length-1;){if(ho(e))return{};const t=uo(r[i]);!e[t]&&s&&(e[t]=new s),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++i}return ho(e)?{}:{obj:e,k:uo(r[i])}},go=(e,t,s)=>{const{obj:r,k:i}=po(e,t,Object);if(void 0!==r||1===t.length)return void(r[i]=s);let n=t[t.length-1],o=t.slice(0,t.length-1),a=po(e,o,Object);for(;void 0===a.obj&&o.length;)n=`${o[o.length-1]}.${n}`,o=o.slice(0,o.length-1),a=po(e,o,Object),(null==a?void 0:a.obj)&&void 0!==a.obj[`${a.k}.${n}`]&&(a.obj=void 0);a.obj[`${a.k}.${n}`]=s},mo=(e,t)=>{const{obj:s,k:r}=po(e,t);if(s&&Object.prototype.hasOwnProperty.call(s,r))return s[r]},fo=(e,t,s)=>{for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?oo(e[r])||e[r]instanceof String||oo(t[r])||t[r]instanceof String?s&&(e[r]=t[r]):fo(e[r],t[r],s):e[r]=t[r]);return e},yo=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var vo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const bo=e=>oo(e)?e.replace(/[&<>"'\/]/g,e=>vo[e]):e;const wo=[" ",",","?","!",";"],xo=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}(20),_o=(e,t,s=".")=>{if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const r=t.split(s);let i=e;for(let n=0;n<r.length;){if(!i||"object"!=typeof i)return;let e,t="";for(let o=n;o<r.length;++o)if(o!==n&&(t+=s),t+=r[o],e=i[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&o<r.length-1)continue;n+=o-n+1;break}i=e}return i},ko=e=>null==e?void 0:e.replace("_","-"),So={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var s,r;null==(r=null==(s=null==console?void 0:console[e])?void 0:s.apply)||r.call(s,console,t)}};class jo{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||So,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,r){return r&&!this.debug?null:(oo(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new jo(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new jo(this.logger,e)}}var To=new jo;class Po{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const s=this.observers[e].get(t)||0;this.observers[e].set(t,s+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e,...t){if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(([e,s])=>{for(let r=0;r<s;r++)e(...t)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(([s,r])=>{for(let i=0;i<r;i++)s.apply(s,[e,...t])})}}}class Co extends Po{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s,r={}){var i,n;const o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,a=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],s&&(Array.isArray(s)?l.push(...s):oo(s)&&o?l.push(...s.split(o)):l.push(s)));const c=mo(this.data,l);return!c&&!t&&!s&&e.indexOf(".")>-1&&(e=l[0],t=l[1],s=l.slice(2).join(".")),!c&&a&&oo(s)?_o(null==(n=null==(i=this.data)?void 0:i[e])?void 0:n[t],s,o):c}addResource(e,t,s,r,i={silent:!1}){const n=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let o=[e,t];s&&(o=o.concat(n?s.split(n):s)),e.indexOf(".")>-1&&(o=e.split("."),r=t,t=o[1]),this.addNamespaces(t),go(this.data,o,r),i.silent||this.emit("added",e,t,s,r)}addResources(e,t,s,r={silent:!1}){for(const i in s)(oo(s[i])||Array.isArray(s[i]))&&this.addResource(e,t,i,s[i],{silent:!0});r.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,r,i,n={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),r=s,s=t,t=o[1]),this.addNamespaces(t);let a=mo(this.data,o)||{};n.skipCopy||(s=JSON.parse(JSON.stringify(s))),r?fo(a,s,i):a={...a,...s},go(this.data,o,a),n.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var Eo={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,s,r,i){return e.forEach(e=>{var n;t=(null==(n=this.processors[e])?void 0:n.process(t,s,r,i))??t}),t}};const No=Symbol("i18next/PATH_KEY");function Ao(e,t){const{[No]:s}=e(function(){const e=[],t=Object.create(null);let s;return t.get=(r,i)=>{var n;return null==(n=null==s?void 0:s.revoke)||n.call(s),i===No?e:(e.push(i),s=Proxy.revocable(r,t),s.proxy)},Proxy.revocable(Object.create(null),t).proxy}());return s.join((null==t?void 0:t.keySeparator)??".")}const Oo={},Ro=e=>!oo(e)&&"boolean"!=typeof e&&"number"!=typeof e;class Io extends Po{constructor(e,t={}){var s,r;super(),s=e,r=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach(e=>{s[e]&&(r[e]=s[e])}),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=To.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const s={...t};if(null==e)return!1;const r=this.resolve(e,s);if(void 0===(null==r?void 0:r.res))return!1;const i=Ro(r.res);return!1!==s.returnObjects||!i}extractFromKey(e,t){let s=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===s&&(s=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const n=s&&e.indexOf(s)>-1,o=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,s)=>{t=t||"",s=s||"";const r=wo.filter(e=>t.indexOf(e)<0&&s.indexOf(e)<0);if(0===r.length)return!0;const i=xo.getRegExp(`(${r.map(e=>"?"===e?"\\?":e).join("|")})`);let n=!i.test(e);if(!n){const t=e.indexOf(s);t>0&&!i.test(e.substring(0,t))&&(n=!0)}return n})(e,s,r));if(n&&!o){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:oo(i)?[i]:i};const n=e.split(s);(s!==r||s===r&&this.options.ns.indexOf(n[0])>-1)&&(i=n.shift()),e=n.join(r)}return{key:e,namespaces:oo(i)?[i]:i}}translate(e,t,s){let r="object"==typeof t?{...t}:t;if("object"!=typeof r&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof r&&(r={...r}),r||(r={}),null==e)return"";"function"==typeof e&&(e=Ao(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const i=void 0!==r.returnDetails?r.returnDetails:this.options.returnDetails,n=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],r),l=a[a.length-1];let c=void 0!==r.nsSeparator?r.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const u=r.lng||this.language,d=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null==u?void 0:u.toLowerCase()))return d?i?{res:`${l}${c}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${c}${o}`:i?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:o;const h=this.resolve(e,r);let p=null==h?void 0:h.res;const g=(null==h?void 0:h.usedKey)||o,m=(null==h?void 0:h.exactUsedKey)||o,f=void 0!==r.joinArrays?r.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,v=void 0!==r.count&&!oo(r.count),b=Io.hasDefaultValue(r),w=v?this.pluralResolver.getSuffix(u,r.count,r):"",x=r.ordinal&&v?this.pluralResolver.getSuffix(u,r.count,{ordinal:!1}):"",_=v&&!r.ordinal&&0===r.count,k=_&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${w}`]||r[`defaultValue${x}`]||r.defaultValue;let S=p;y&&!p&&b&&(S=k);const j=Ro(S),T=Object.prototype.toString.apply(S);if(!(y&&S&&j&&["[object Number]","[object Function]","[object RegExp]"].indexOf(T)<0)||oo(f)&&Array.isArray(S))if(y&&oo(f)&&Array.isArray(p))p=p.join(f),p&&(p=this.extendTranslation(p,e,r,s));else{let t=!1,i=!1;!this.isValidLookup(p)&&b&&(t=!0,p=k),this.isValidLookup(p)||(i=!0,p=o);const a=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&i?void 0:p,d=b&&k!==p&&this.options.updateMissing;if(i||t||d){if(this.logger.log(d?"updateKey":"missingKey",u,l,o,d?k:p),n){const e=this.resolve(o,{...r,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let r=0;r<t.length;r++)e.push(t[r]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(r.lng||this.language):e.push(r.lng||this.language);const s=(e,t,s)=>{var i;const n=b&&s!==p?s:a;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,n,d,r):(null==(i=this.backendConnector)?void 0:i.saveMissing)&&this.backendConnector.saveMissing(e,l,t,n,d,r),this.emit("missingKey",e,l,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&v?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,r);_&&r[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{s([e],o+t,r[`defaultValue${t}`]||k)})}):s(e,o,k))}p=this.extendTranslation(p,e,r,h,s),i&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${l}${c}${o}`),(i||t)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${c}${o}`:o,t?p:void 0,r))}else{if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,S,{...r,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(h.res=e,h.usedParams=this.getUsedParamsDetails(r),h):e}if(n){const e=Array.isArray(S),t=e?[]:{},s=e?m:g;for(const i in S)if(Object.prototype.hasOwnProperty.call(S,i)){const e=`${s}${n}${i}`;t[i]=b&&!p?this.translate(e,{...r,defaultValue:Ro(k)?k[i]:void 0,joinArrays:!1,ns:a}):this.translate(e,{...r,joinArrays:!1,ns:a}),t[i]===e&&(t[i]=S[i])}p=t}}return i?(h.res=p,h.usedParams=this.getUsedParamsDetails(r),h):p}extendTranslation(e,t,s,r,i){var n,o;if(null==(n=this.i18nFormat)?void 0:n.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const n=oo(e)&&(void 0!==(null==(o=null==s?void 0:s.interpolation)?void 0:o.skipOnVariables)?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(n){const t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let l=s.replace&&!oo(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,s.lng||this.language||r.usedLng,s),n){const t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(s.nest=!1)}!s.lng&&r&&r.res&&(s.lng=this.language||r.usedLng),!1!==s.nest&&(e=this.interpolator.nest(e,(...e)=>(null==i?void 0:i[0])!==e[0]||s.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null),s)),s.interpolation&&this.interpolator.reset()}const a=s.postProcess||this.options.postProcess,l=oo(a)?[a]:a;return null!=e&&(null==l?void 0:l.length)&&!1!==s.applyPostProcessor&&(e=Eo.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,t={}){let s,r,i,n,o;return oo(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(s))return;const a=this.extractFromKey(e,t),l=a.key;r=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==t.count&&!oo(t.count),d=u&&!t.ordinal&&0===t.count,h=void 0!==t.context&&(oo(t.context)||"number"==typeof t.context)&&""!==t.context,p=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);c.forEach(e=>{var a,c;this.isValidLookup(s)||(o=e,Oo[`${p[0]}-${e}`]||!(null==(a=this.utils)?void 0:a.hasLoadedNamespace)||(null==(c=this.utils)?void 0:c.hasLoadedNamespace(o))||(Oo[`${p[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${p.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(r=>{var o;if(this.isValidLookup(s))return;n=r;const a=[l];if(null==(o=this.i18nFormat)?void 0:o.addLookupKeys)this.i18nFormat.addLookupKeys(a,l,r,e,t);else{let e;u&&(e=this.pluralResolver.getSuffix(r,t.count,t));const s=`${this.options.pluralSeparator}zero`,i=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(t.ordinal&&0===e.indexOf(i)&&a.push(l+e.replace(i,this.options.pluralSeparator)),a.push(l+e),d&&a.push(l+s)),h){const r=`${l}${this.options.contextSeparator||"_"}${t.context}`;a.push(r),u&&(t.ordinal&&0===e.indexOf(i)&&a.push(r+e.replace(i,this.options.pluralSeparator)),a.push(r+e),d&&a.push(r+s))}}let c;for(;c=a.pop();)this.isValidLookup(s)||(i=c,s=this.getResource(r,e,c,t))}))})}),{res:s,usedKey:r,exactUsedKey:i,usedLng:n,usedNS:o}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,s,r={}){var i;return(null==(i=this.i18nFormat)?void 0:i.getResource)?this.i18nFormat.getResource(e,t,s,r):this.resourceStore.getResource(e,t,s,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!oo(e.replace);let r=s?e.replace:e;if(s&&void 0!==e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!s){r={...r};for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,12)&&void 0!==e[s])return!0;return!1}}class Do{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=To.create("languageUtils")}getScriptPartFromCode(e){if(!(e=ko(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=ko(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(oo(e)&&e.indexOf("-")>-1){let s;try{s=Intl.getCanonicalLocales(e)[0]}catch(t){}return s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const s=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(s)||(t=s)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const s=this.getScriptPartFromCode(e);if(this.isSupportedCode(s))return t=s;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(e=>e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),oo(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),r=[],i=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return oo(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):oo(e)&&i(this.formatLanguageCode(e)),s.forEach(e=>{r.indexOf(e)<0&&i(this.formatLanguageCode(e))}),r}}const Lo={zero:0,one:1,two:2,few:3,many:4,other:5},$o={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Fo{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=To.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const s=ko("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:s,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let n;try{n=new Intl.PluralRules(s,{type:r})}catch(o){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),$o;if(!e.match(/-|_/))return $o;const s=this.languageUtils.getLanguagePartFromCode(e);n=this.getRule(s,t)}return this.pluralRulesCache[i]=n,n}needsPlural(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),(null==s?void 0:s.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,s={}){return this.getSuffixes(e,s).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?s.resolvedOptions().pluralCategories.sort((e,t)=>Lo[e]-Lo[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,s={}){const r=this.getRule(e,s);return r?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,s))}}const Mo=(e,t,s,r=".",i=!0)=>{let n=((e,t,s)=>{const r=mo(e,s);return void 0!==r?r:mo(t,s)})(e,t,s);return!n&&i&&oo(s)&&(n=_o(e,s,r),void 0===n&&(n=_o(t,s,r))),n},Uo=e=>e.replace(/\$/g,"$$$$");class Bo{constructor(e={}){var t;this.logger=To.create("interpolator"),this.options=e,this.format=(null==(t=null==e?void 0:e.interpolation)?void 0:t.format)||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:r,prefix:i,prefixEscaped:n,suffix:o,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:g,nestingOptionsSeparator:m,maxReplaces:f,alwaysFormat:y}=e.interpolation;this.escape=void 0!==t?t:bo,this.escapeValue=void 0===s||s,this.useRawValueToEscape=void 0!==r&&r,this.prefix=i?yo(i):n||"{{",this.suffix=o?yo(o):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?yo(d):h||yo("$t("),this.nestingSuffix=p?yo(p):g||yo(")"),this.nestingOptionsSeparator=m||",",this.maxReplaces=f||1e3,this.alwaysFormat=void 0!==y&&y,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null==e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,s,r){var i;let n,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){const i=Mo(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,s,{...r,...t,interpolationkey:e}):i}const i=e.split(this.formatSeparator),n=i.shift().trim(),o=i.join(this.formatSeparator).trim();return this.format(Mo(t,l,n,this.options.keySeparator,this.options.ignoreJSONStructure),o,s,{...r,...t,interpolationkey:n})};this.resetRegExp();const u=(null==r?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,d=void 0!==(null==(i=null==r?void 0:r.interpolation)?void 0:i.skipOnVariables)?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>Uo(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?Uo(this.escape(e)):Uo(e)}].forEach(t=>{for(a=0;n=t.regex.exec(e);){const s=n[1].trim();if(o=c(s),void 0===o)if("function"==typeof u){const t=u(e,n,r);o=oo(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,s))o="";else{if(d){o=n[0];continue}this.logger.warn(`missed to pass in variable ${s} for interpolating ${e}`),o=""}else oo(o)||this.useRawValueToEscape||(o=lo(o));const i=t.safeValue(o);if(e=e.replace(n[0],i),d?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=n[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,s={}){let r,i,n;const o=(e,t)=>{const s=this.nestingOptionsSeparator;if(e.indexOf(s)<0)return e;const r=e.split(new RegExp(`${s}[ ]*{`));let i=`{${r[1]}`;e=r[0],i=this.interpolate(i,n);const o=i.match(/'/g),a=i.match(/"/g);(((null==o?void 0:o.length)??0)%2==0&&!a||a.length%2!=0)&&(i=i.replace(/'/g,'"'));try{n=JSON.parse(i),t&&(n={...t,...n})}catch(l){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,l),`${e}${s}${i}`}return n.defaultValue&&n.defaultValue.indexOf(this.prefix)>-1&&delete n.defaultValue,e};for(;r=this.nestingRegexp.exec(e);){let a=[];n={...s},n=n.replace&&!oo(n.replace)?n.replace:n,n.applyPostProcessor=!1,delete n.defaultValue;const l=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(-1!==l&&(a=r[1].slice(l).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),r[1]=r[1].slice(0,l)),i=t(o.call(this,r[1].trim(),n),n),i&&r[0]===e&&!oo(i))return i;oo(i)||(i=lo(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),i=""),a.length&&(i=a.reduce((e,t)=>this.format(e,t,s.lng,{...s,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}}const qo=e=>{const t={};return(s,r,i)=>{let n=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(n={...n,[i.interpolationkey]:void 0});const o=r+JSON.stringify(n);let a=t[o];return a||(a=e(ko(r),i),t[o]=a),a(s)}},Wo=e=>(t,s,r)=>e(ko(s),r)(t);class Ho{constructor(e={}){this.logger=To.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const s=t.cacheInBuiltFormats?qo:Wo;this.formats={number:s((e,t)=>{const s=new Intl.NumberFormat(e,{...t});return e=>s.format(e)}),currency:s((e,t)=>{const s=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>s.format(e)}),datetime:s((e,t)=>{const s=new Intl.DateTimeFormat(e,{...t});return e=>s.format(e)}),relativetime:s((e,t)=>{const s=new Intl.RelativeTimeFormat(e,{...t});return e=>s.format(e,t.range||"day")}),list:s((e,t)=>{const s=new Intl.ListFormat(e,{...t});return e=>s.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=qo(t)}format(e,t,s,r={}){const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(e=>e.indexOf(")")>-1)){const e=i.findIndex(e=>e.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}return i.reduce((e,t)=>{var i;const{formatName:n,formatOptions:o}=(e=>{let t=e.toLowerCase().trim();const s={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?s.currency||(s.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?s.range||(s.range=i.trim()):i.split(";").forEach(e=>{if(e){const[t,...r]=e.split(":"),i=r.join(":").trim().replace(/^'+|'+$/g,""),n=t.trim();s[n]||(s[n]=i),"false"===i&&(s[n]=!1),"true"===i&&(s[n]=!0),isNaN(i)||(s[n]=parseInt(i,10))}})}return{formatName:t,formatOptions:s}})(t);if(this.formats[n]){let t=e;try{const a=(null==(i=null==r?void 0:r.formatParams)?void 0:i[r.interpolationkey])||{},l=a.locale||a.lng||r.locale||r.lng||s;t=this.formats[n](e,l,{...o,...r,...a})}catch(a){this.logger.warn(a)}return t}return this.logger.warn(`there was no format function for ${n}`),e},e)}}class zo extends Po{constructor(e,t,s,r={}){var i,n;super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=r,this.logger=To.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],null==(n=null==(i=this.backend)?void 0:i.init)||n.call(i,s,r.backend,r)}queueLoad(e,t,s,r){const i={},n={},o={},a={};return e.forEach(e=>{let r=!0;t.forEach(t=>{const o=`${e}|${t}`;!s.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===n[o]&&(n[o]=!0):(this.state[o]=1,r=!1,void 0===n[o]&&(n[o]=!0),void 0===i[o]&&(i[o]=!0),void 0===a[t]&&(a[t]=!0)))}),r||(o[e]=!0)}),(Object.keys(i).length||Object.keys(n).length)&&this.queue.push({pending:n,pendingCount:Object.keys(n).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(n),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(a)}}loaded(e,t,s){const r=e.split("|"),i=r[0],n=r[1];t&&this.emit("failedLoading",i,n,t),!t&&s&&this.store.addResourceBundle(i,n,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);const o={};this.queue.forEach(s=>{((e,t,s)=>{const{obj:r,k:i}=po(e,t,Object);r[i]=r[i]||[],r[i].push(s)})(s.loaded,[i],n),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(s,e),t&&s.errors.push(t),0!==s.pendingCount||s.done||(Object.keys(s.loaded).forEach(e=>{o[e]||(o[e]={});const t=s.loaded[e];t.length&&t.forEach(t=>{void 0===o[e][t]&&(o[e][t]=!0)})}),s.done=!0,s.errors.length?s.callback(s.errors):s.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(e=>!e.done)}read(e,t,s,r=0,i=this.retryTimeout,n){if(!e.length)return n(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:s,tried:r,wait:i,callback:n});this.readingCalls++;const o=(o,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&a&&r<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,s,r+1,2*i,n)},i):n(o,a)},a=this.backend[s].bind(this.backend);if(2!==a.length)return a(e,t,o);try{const s=a(e,t);s&&"function"==typeof s.then?s.then(e=>o(null,e)).catch(o):o(null,s)}catch(l){o(l)}}prepareLoading(e,t,s={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();oo(e)&&(e=this.languageUtils.toResolveHierarchy(e)),oo(t)&&(t=[t]);const i=this.queueLoad(e,t,s,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e,t=""){const s=e.split("|"),r=s[0],i=s[1];this.read(r,i,"read",void 0,void 0,(s,n)=>{s&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,s),!s&&n&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,n),this.loaded(e,s,n)})}saveMissing(e,t,s,r,i,n={},o=()=>{}){var a,l,c,u,d;if(!(null==(l=null==(a=this.services)?void 0:a.utils)?void 0:l.hasLoadedNamespace)||(null==(u=null==(c=this.services)?void 0:c.utils)?void 0:u.hasLoadedNamespace(t))){if(null!=s&&""!==s){if(null==(d=this.backend)?void 0:d.create){const a={...n,isUpdate:i},l=this.backend.create.bind(this.backend);if(l.length<6)try{let i;i=5===l.length?l(e,t,s,r,a):l(e,t,s,r),i&&"function"==typeof i.then?i.then(e=>o(null,e)).catch(o):o(null,i)}catch(h){o(h)}else l(e,t,s,r,o,a)}e&&e[0]&&this.store.addResource(e[0],t,s,r)}}else this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const Go=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),oo(e[1])&&(t.defaultValue=e[1]),oo(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const s=e[3]||e[2];Object.keys(s).forEach(e=>{t[e]=s[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Vo=e=>{var t,s;return oo(e.ns)&&(e.ns=[e.ns]),oo(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),oo(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null==(s=null==(t=e.supportedLngs)?void 0:t.indexOf)?void 0:s.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},Yo=()=>{};class Ko extends Po{constructor(e={},t){var s;if(super(),this.options=Vo(e),this.services={},this.logger=To,this.modules={external:[]},s=this,Object.getOwnPropertyNames(Object.getPrototypeOf(s)).forEach(e=>{"function"==typeof s[e]&&(s[e]=s[e].bind(s))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(oo(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=Go();this.options={...s,...this.options,...Vo(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?To.init(r(this.modules.logger),this.options):To.init(null,this.options),e=this.modules.formatter?this.modules.formatter:Ho;const t=new Do(this.options);this.store=new Co(this.options.resources,this.options);const i=this.services;i.logger=To,i.resourceStore=this.store,i.languageUtils=t,i.pluralResolver=new Fo(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix});this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!e||this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format||(i.formatter=r(e),i.formatter.init&&i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new Bo(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new zo(r(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(i.languageDetector=r(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=r(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new Io(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Yo),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=(...t)=>this.store[e](...t)});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});const i=ao(),n=()=>{const e=(e,s)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),i.resolve(s),t(e,s)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?n():setTimeout(n,0),i}loadResources(e,t=Yo){var s,r;let i=t;const n=oo(e)?e:this.language;if("function"==typeof e&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===(null==n?void 0:n.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return i();const e=[],t=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(n)t(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e))}null==(r=null==(s=this.options.preload)?void 0:s.forEach)||r.call(s,e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),i(e)})}else i(null)}reloadResources(e,t,s){const r=ao();return"function"==typeof e&&(s=e,e=void 0),"function"==typeof t&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=Yo),this.services.backendConnector.reload(e,t,e=>{r.resolve(),s(e)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Eo.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const s=ao();this.emit("languageChanging",e);const r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},i=(i,n)=>{n?this.isLanguageChangingTo===e&&(r(n),this.translator.changeLanguage(n),this.isLanguageChangingTo=void 0,this.emit("languageChanged",n),this.logger.log("languageChanged",n)):this.isLanguageChangingTo=void 0,s.resolve((...e)=>this.t(...e)),t&&t(i,(...e)=>this.t(...e))},n=t=>{var s,n;e||t||!this.services.languageDetector||(t=[]);const o=oo(t)?t:t&&t[0],a=this.store.hasLanguageSomeTranslations(o)?o:this.services.languageUtils.getBestMatchFromCodes(oo(t)?[t]:t);a&&(this.language||r(a),this.translator.language||this.translator.changeLanguage(a),null==(n=null==(s=this.services.languageDetector)?void 0:s.cacheUserLanguage)||n.call(s,a)),this.loadResources(a,e=>{i(e,a)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(n):this.services.languageDetector.detect(n):n(e):n(this.services.languageDetector.detect()),s}getFixedT(e,t,s){const r=(e,t,...i)=>{let n;n="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(i)):{...t},n.lng=n.lng||r.lng,n.lngs=n.lngs||r.lngs,n.ns=n.ns||r.ns,""!==n.keyPrefix&&(n.keyPrefix=n.keyPrefix||s||r.keyPrefix);const o=this.options.keySeparator||".";let a;return n.keyPrefix&&Array.isArray(e)?a=e.map(e=>("function"==typeof e&&(e=Ao(e,{...this.options,...t})),`${n.keyPrefix}${o}${e}`)):("function"==typeof e&&(e=Ao(e,{...this.options,...t})),a=n.keyPrefix?`${n.keyPrefix}${o}${e}`:e),this.t(a,n)};return oo(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=s,r}t(...e){var t;return null==(t=this.translator)?void 0:t.translate(...e)}exists(...e){var t;return null==(t=this.translator)?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===s.toLowerCase())return!0;const n=(e,t)=>{const s=this.services.backendConnector.state[`${e}|${t}`];return-1===s||0===s||2===s};if(t.precheck){const e=t.precheck(this,n);if(void 0!==e)return e}return!!this.hasResourceBundle(s,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!n(s,e)||r&&!n(i,e)))}loadNamespaces(e,t){const s=ao();return this.options.ns?(oo(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{s.resolve(),t&&t(e)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=ao();oo(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter(e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return i.length?(this.options.preload=r.concat(i),this.loadResources(e=>{s.resolve(),t&&t(e)}),s):(t&&t(),Promise.resolve())}dir(e){var t,s;if(e||(e=this.resolvedLanguage||((null==(t=this.languages)?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(i){}const r=(null==(s=this.services)?void 0:s.languageUtils)||new Do(Go());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const s=new Ko(e,t);return s.createInstance=Ko.createInstance,s}cloneInstance(e={},t=Yo){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new Ko(r);void 0===e.debug&&void 0===e.prefix||(i.logger=i.logger.clone(e));if(["store","services","language"].forEach(e=>{i[e]=this[e]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},s){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce((s,r)=>(s[r]={...e[t][r]},s),e[t]),e),{});i.store=new Co(e,r),i.services.resourceStore=i.store}return i.translator=new Io(i.services,r),i.translator.on("*",(e,...t)=>{i.emit(e,...t)}),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Jo=Ko.createInstance();Jo.createInstance,Jo.dir,Jo.init,Jo.loadResources,Jo.reloadResources,Jo.use,Jo.changeLanguage,Jo.getFixedT,Jo.t,Jo.exists,Jo.setDefaultNamespace,Jo.hasLoadedNamespace,Jo.loadNamespaces,Jo.loadLanguages;const Qo={},Xo=(e,t,s,r)=>{sa(s)&&Qo[s]||(sa(s)&&(Qo[s]=new Date),((e,t,s,r)=>{var i,n,o,a;const l=[s,{code:t,...r||{}}];if(null==(n=null==(i=null==e?void 0:e.services)?void 0:i.logger)?void 0:n.forward)return e.services.logger.forward(l,"warn","react-i18next::",!0);sa(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),(null==(a=null==(o=null==e?void 0:e.services)?void 0:o.logger)?void 0:a.warn)?e.services.logger.warn(...l):null==console||console.warn})(e,t,s,r))},Zo=(e,t)=>()=>{if(e.isInitialized)t();else{const s=()=>{setTimeout(()=>{e.off("initialized",s)},0),t()};e.on("initialized",s)}},ea=(e,t,s)=>{e.loadNamespaces(t,Zo(e,s))},ta=(e,t,s,r)=>{if(sa(s)&&(s=[s]),e.options.preload&&e.options.preload.indexOf(t)>-1)return ea(e,s,r);s.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,Zo(e,r))},sa=e=>"string"==typeof e,ra=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ia={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},na=e=>ia[e];let oa={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(ra,na)};let aa;const la={type:"3rdParty",init(e){((e={})=>{oa={...oa,...e}})(e.options.react),(e=>{aa=e})(e)}},ca=S.createContext();class ua{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const da={t:(e,t)=>{return sa(t)?t:"object"==typeof(s=t)&&null!==s&&sa(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var s},ready:!1},ha=()=>()=>{},pa=(e,t={})=>{var s,r,i;const{i18n:n}=t,{i18n:o,defaultNS:a}=S.useContext(ca)||{},c=n||o||aa;c&&!c.reportNamespaces&&(c.reportNamespaces=new ua),c||Xo(c,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const u=S.useMemo(()=>{var e;return{...oa,...null==(e=null==c?void 0:c.options)?void 0:e.react,...t}},[c,t]),{useSuspense:d,keyPrefix:h}=u,p=e||a||(null==(s=null==c?void 0:c.options)?void 0:s.defaultNS),g=sa(p)?[p]:p||["translation"],m=S.useMemo(()=>g,g);null==(i=null==(r=null==c?void 0:c.reportNamespaces)?void 0:r.addUsedNamespaces)||i.call(r,m);const f=S.useRef(0),y=S.useCallback(e=>{if(!c)return ha;const{bindI18n:t,bindI18nStore:s}=u,r=()=>{f.current+=1,e()};return t&&c.on(t,r),s&&c.store.on(s,r),()=>{t&&t.split(" ").forEach(e=>c.off(e,r)),s&&s.split(" ").forEach(e=>c.store.off(e,r))}},[c,u]),v=S.useRef(),b=S.useCallback(()=>{if(!c)return da;const e=!(!c.isInitialized&&!c.initializedStoreOnce)&&m.every(e=>((e,t,s={})=>t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:s.lng,precheck:(t,r)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):(Xo(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0))(e,c,u)),s=t.lng||c.language,r=f.current,i=v.current;if(i&&i.ready===e&&i.lng===s&&i.keyPrefix===h&&i.revision===r)return i;const n={t:c.getFixedT(s,"fallback"===u.nsMode?m:m[0],h),ready:e,lng:s,keyPrefix:h,revision:r};return v.current=n,n},[c,m,h,u,t.lng]),[w,x]=S.useState(0),{t:_,ready:k}=l.useSyncExternalStore(y,b,b);S.useEffect(()=>{if(c&&!k&&!d){const e=()=>x(e=>e+1);t.lng?ta(c,t.lng,m,e):ea(c,m,e)}},[c,t.lng,m,k,d,w]);const j=c||{},T=S.useRef(null),P=S.useRef(),C=e=>{const t=Object.getOwnPropertyDescriptors(e);t.__original&&delete t.__original;const s=Object.create(Object.getPrototypeOf(e),t);if(!Object.prototype.hasOwnProperty.call(s,"__original"))try{Object.defineProperty(s,"__original",{value:e,writable:!1,enumerable:!1,configurable:!1})}catch(r){}return s},E=S.useMemo(()=>{const e=j,t=null==e?void 0:e.language;let s=e;e&&(T.current&&T.current.__original===e?P.current!==t?(s=C(e),T.current=s,P.current=t):s=T.current:(s=C(e),T.current=s,P.current=t));const r=[_,s,k];return r.t=_,r.i18n=s,r.ready=k,r},[_,j,k,j.resolvedLanguage,j.language,j.languages]);if(c&&d&&!k)throw new Promise(e=>{const s=()=>e();t.lng?ta(c,t.lng,m,s):ea(c,m,s)});return E},ga=ys("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-semibold ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 hover:shadow-lg hover:shadow-primary/20",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:shadow-lg hover:shadow-destructive/20",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-primary/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline focus-visible:ring-offset-0"},size:{default:"h-9 px-3 text-sm",sm:"h-9 px-3 text-sm",lg:"h-11 px-4 text-base",icon:"h-9 w-9 p-0"}},defaultVariants:{variant:"default",size:"sm"}}),ma=S.forwardRef(({className:t,variant:s,size:r,asChild:i=!1,...n},o)=>{const a=i?c:"button";return e.jsx(a,{className:gs(ga({variant:s,size:r,className:t})),ref:o,type:"button"!==a||n.type?n.type:"button",...n})});ma.displayName="Button";const fa=t=>e.jsxs("svg",{viewBox:"0 0 48 48",...t,children:[e.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),e.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),e.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.222,0-9.651-3.356-11.303-8H6.306C9.656,39.663,16.318,44,24,44z"}),e.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571l6.19,5.238C44.572,34.046,48,27.461,48,20C48,17.222,47.113,14.69,45.54,12.591L39.9,18.335C42.128,20.45,43.611,20.083,43.611,20.083z"})]}),ya=({logoUrl:t,initialIsLogin:s=!0})=>{const{t:r}=pa(),{signIn:i,signUp:n,signInWithGoogle:o,user:a,userProfile:l}=io(),c=C(),u=E(),[d,h]=S.useState(s),[p,g]=S.useState(""),[m,f]=S.useState(""),[y,v]=S.useState(""),[b,w]=S.useState(!1),[x,_]=S.useState(!1),[k,j]=S.useState(null);S.useEffect(()=>{var e;(null==(e=u.state)?void 0:e.selectedPlan)&&j(u.state.selectedPlan)},[u.state]),S.useEffect(()=>{h("/login"===u.pathname)},[u.pathname]);return e.jsx("div",{className:"h-screen flex items-center justify-center p-2 bg-background touch-auto overflow-hidden",children:e.jsx(U.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"w-full max-w-md h-full max-h-[98vh] flex items-center",children:e.jsxs("div",{className:"glass-effect rounded-lg p-3 shadow-2xl w-full",children:[e.jsxs("button",{onClick:()=>c(-1),className:"flex items-center gap-1 text-text-secondary hover:text-primary transition-colors mb-2 group",children:[e.jsx(B,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"text-xs font-medium",children:r("auth.back")})]}),e.jsxs("div",{className:"text-center mb-3",children:[e.jsx(N,{to:"/home",className:"inline-block mb-2",children:e.jsx("img",{src:t,alt:"GreenoFig Logo",className:"w-12 h-12"})}),e.jsx("h1",{className:"text-2xl font-bold gradient-text mb-1",children:"GreenoFig"}),e.jsx("p",{className:"text-text-secondary text-xs",children:r("auth.tagline")}),k&&!d&&e.jsxs("div",{className:"mt-4 bg-primary/10 text-primary font-semibold p-2 rounded-lg",children:[r("auth.signUpForPlan")," ",e.jsx("span",{className:"font-bold",children:k})," ",r("auth.plan")]})]}),e.jsxs(ma,{variant:"outline",className:"w-full py-2 min-h-[36px] rounded-lg shadow-lg flex items-center justify-center gap-2 touch-manipulation active:scale-95 transition-transform text-xs",onClick:async()=>{b||x||(_(!0),await o(),setTimeout(()=>_(!1),5e3))},disabled:x||b,type:"button",children:[x?e.jsx(q,{className:"h-4 w-4 animate-spin"}):e.jsx(fa,{className:"w-4 h-4"}),e.jsx("span",{children:r(d?"auth.signInWithGoogle":"auth.signUpWithGoogle")})]}),e.jsxs("div",{className:"my-2 flex items-center",children:[e.jsx("div",{className:"flex-grow border-t border-border"}),e.jsx("span",{className:"flex-shrink mx-2 text-[10px] text-text-secondary uppercase",children:r("auth.orContinueWith")}),e.jsx("div",{className:"flex-grow border-t border-border"})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!b&&!x)if(p&&m&&(d||y))if(w(!0),d){const{error:e,profile:t}=await i({email:p,password:m});if(!e&&t){const e=t.role;let s="/app/user";return"admin"===e||"super_admin"===e?s="/app/admin":"nutritionist"===e&&(s="/app/nutritionist/dashboard"),void c(s,{replace:!0,state:{skipLoading:!0}})}w(!1)}else{const{user:e,error:t,profile:s}=await n({email:p,password:m,full_name:y});if(!t&&e&&s)return Ps({title:r("auth.accountCreated"),description:r("auth.welcomeSetup")}),void c("/app/user",{replace:!0,state:{skipLoading:!0}});w(!1)}else Ps({title:r("auth.missingFields"),description:r("auth.fillAllFields"),variant:"destructive"})},className:"space-y-2",children:[!d&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:r("auth.fullName")}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-primary"}),e.jsx("input",{type:"text",value:y,onChange:e=>v(e.target.value),className:"w-full pl-8 pr-3 py-2 min-h-[36px] bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring touch-manipulation text-xs",placeholder:"John Doe",disabled:b||x,required:!0,autoComplete:"name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:r("auth.email")}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-primary"}),e.jsx("input",{type:"email",value:p,onChange:e=>g(e.target.value),className:"w-full pl-8 pr-3 py-2 min-h-[36px] bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring touch-manipulation text-xs",placeholder:"you@example.com",disabled:b||x,required:!0,autoComplete:"email",inputMode:"email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:r("auth.password")}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-primary"}),e.jsx("input",{type:"password",value:m,onChange:e=>f(e.target.value),className:"w-full pl-8 pr-3 py-2 min-h-[36px] bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring touch-manipulation text-xs",placeholder:"",disabled:b||x,required:!0,autoComplete:d?"current-password":"new-password"})]})]}),e.jsxs(ma,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground font-semibold py-2 min-h-[36px] rounded-lg shadow-lg touch-manipulation active:scale-95 transition-transform text-xs",disabled:b||x,children:[b&&e.jsx(q,{className:"mr-2 h-3 w-3 animate-spin"}),r(b?"auth.processing":d?"auth.login":"auth.signup")]})]}),e.jsx("div",{className:"mt-3 text-center",children:e.jsx("button",{onClick:()=>{b||x||c(d?"/signup":"/login")},type:"button",className:"text-text-secondary hover:text-primary transition-colors disabled:opacity-50 min-h-[32px] py-1 px-3 touch-manipulation text-xs",disabled:b||x,children:d?`${r("auth.dontHaveAccount")} ${r("auth.signup")}`:`${r("auth.alreadyHaveAccount")} ${r("auth.login")}`})})]})})})},va=S.forwardRef(({className:t,...s},r)=>e.jsx(u,{ref:r,className:gs("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));va.displayName=u.displayName;const ba=S.forwardRef(({className:t,...s},r)=>e.jsx(d,{ref:r,className:gs("aspect-square h-full w-full",t),...s}));ba.displayName=d.displayName;const wa=S.forwardRef(({className:t,...s},r)=>e.jsx(h,{ref:r,className:gs("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));wa.displayName=h.displayName;const xa=ys("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"text-foreground hover:bg-accent"}},defaultVariants:{variant:"default"}});function _a({className:t,variant:s,...r}){return e.jsx("div",{className:gs(xa({variant:s}),t),...r})}const ka=()=>{const{i18n:t}=pa(),[s,r]=S.useState(!1),i=S.useRef(null),n=[{code:"en",name:"En"},{code:"ar",name:""}],o=n.find(e=>e.code===t.language)||n[0];return S.useEffect(()=>{const e=e=>{i.current&&!i.current.contains(e.target)&&r(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),S.useEffect(()=>{document.documentElement.dir="ar"===t.language?"rtl":"ltr",document.documentElement.lang=t.language},[t.language]),e.jsxs("div",{className:"relative",ref:i,children:[e.jsxs("button",{onClick:()=>r(!s),className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-background/50 hover:bg-background/80 border border-border/50 transition-colors duration-200 min-h-[44px] min-w-[44px]","aria-label":"Change language",children:[e.jsx(G,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:o.name})]}),s&&e.jsx("div",{className:"absolute top-full right-0 mt-2 w-48 bg-background/95 backdrop-blur-md border border-border/50 rounded-lg shadow-xl z-50 overflow-hidden",children:n.map(s=>e.jsx("button",{onClick:()=>{return e=s.code,localStorage.setItem("language",e),document.documentElement.dir="ar"===e?"rtl":"ltr",document.documentElement.lang=e,t.changeLanguage(e),void r(!1);var e},className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-primary/10 transition-colors duration-200 "+(o.code===s.code?"bg-primary/20":""),children:e.jsx("span",{className:"text-sm font-medium text-text-primary",children:s.name})},s.code))})]})},Sa=S.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:gs("flex min-h-[120px] w-full rounded-2xl border border-input bg-background/50 backdrop-blur-sm px-4 py-3 text-base text-foreground ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 hover:border-primary/50 resize-y",t),style:{fontSize:"16px"},ref:r,"aria-invalid":s["aria-invalid"],...s}));Sa.displayName="Textarea";const ja=S.forwardRef(({className:t,type:s,...r},i)=>e.jsx("input",{type:s,className:gs("flex h-12 lg:h-14 w-full min-w-0 max-w-full rounded-2xl border border-input bg-background/50 backdrop-blur-sm px-4 lg:px-5 py-3 lg:py-3.5 text-base lg:text-lg text-foreground ring-offset-background file:border-0 file:bg-transparent file:text-base lg:file:text-lg file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 hover:border-primary/50",t),style:{fontSize:"16px"},ref:i,"aria-invalid":r["aria-invalid"],...r}));ja.displayName="Input";const Ta=ys("text-sm font-semibold text-foreground mb-2 block tracking-wide leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Pa=S.forwardRef(({className:t,...s},r)=>e.jsx(p,{ref:r,className:gs(Ta(),t),...s}));Pa.displayName=p.displayName;const Ca=e=>{if(!e||0===e.trim().length)return"en";const t=(e=>/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/.test(e))(e),s=(e=>/[a-zA-Z]/.test(e))(e);if(t&&!s)return"ar";if(t&&s){return(e.match(/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/g)||[]).length>(e.match(/[a-zA-Z]/g)||[]).length?"ar":"en"}return"en"},Ea=()=>{var t,s,r,i;const{userProfile:n,user:o}=io(),{toast:a}=Cs(),[l,c]=S.useState(!1),[u,d]=S.useState(!1),[h,p]=S.useState("ai"),[g,m]=S.useState([]),[f,y]=S.useState(""),[v,b]=S.useState(!1),[w,x]=S.useState(!1),[_,k]=S.useState([]),[j,T]=S.useState(null),[P,C]=S.useState([]),[E,N]=S.useState(0),[A,O]=S.useState(!0),[R,I]=S.useState(window.innerHeight),[D,L]=S.useState(()=>{const e=localStorage.getItem("chatButtonPos");if(e)try{return JSON.parse(e)}catch{return{x:window.innerWidth-80,y:window.innerHeight-88,side:"right"}}return{x:window.innerWidth-80,y:window.innerHeight-88,side:"right"}}),$=S.useRef(null),F=S.useRef(null),[q,W]=S.useState(!1),[z,G]=S.useState(""),[re,ie]=S.useState(""),[ne,oe]=S.useState(""),[ae,le]=S.useState(!1),[ce,ue]=S.useState(!1),[de,he]=S.useState([]),[pe,ge]=S.useState(""),me=S.useRef(null),fe=S.useRef(null),ye=S.useRef(null),ve=!o;S.useEffect(()=>{const e=new(window.AudioContext||window.webkitAudioContext);return ye.current=e,()=>{e&&"closed"!==e.state&&e.close()}},[]),S.useEffect(()=>{const e=()=>{window.visualViewport?I(window.visualViewport.height):I(window.innerHeight)};return window.visualViewport?(window.visualViewport.addEventListener("resize",e),window.visualViewport.addEventListener("scroll",e)):window.addEventListener("resize",e),()=>{window.visualViewport?(window.visualViewport.removeEventListener("resize",e),window.visualViewport.removeEventListener("scroll",e)):window.removeEventListener("resize",e)}},[]);S.useEffect(()=>{if((null==o?void 0:o.id)&&(null==n?void 0:n.role)){be();const e=Xn.channel("messages-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},e=>{if(e.new.recipient_id===o.id||e.new.sender_id===o.id){if(be(),j){const t=null==n?void 0:n.role;let s=!1;s="nutritionist"===t||"admin"===t||"super_admin"===t?e.new.sender_id===j||e.new.recipient_id===j:e.new.conversation_id===j,s&&we(j)}e.new.recipient_id===o.id&&e.new.sender_id!==o.id&&((()=>{if(A&&ye.current)try{const e=ye.current.createOscillator(),t=ye.current.createGain();e.connect(t),t.connect(ye.current.destination),e.frequency.value=800,e.type="sine",t.gain.setValueAtTime(.3,ye.current.currentTime),t.gain.exponentialRampToValueAtTime(.01,ye.current.currentTime+.3),e.start(ye.current.currentTime),e.stop(ye.current.currentTime+.3)}catch(e){}})(),a({title:" New Message",description:"You have received a new message",duration:3e3}))}}).subscribe();return()=>{Xn.removeChannel(e)}}},[null==o?void 0:o.id,null==n?void 0:n.role,j]);const be=async()=>{if(null==o?void 0:o.id)try{const e=null==n?void 0:n.role,{data:t,error:s}=await Xn.from("messages").select("\n          *,\n          sender:user_profiles!messages_sender_id_fkey(id, full_name, email, profile_picture_url),\n          recipient:user_profiles!messages_recipient_id_fkey(id, full_name, email, profile_picture_url)\n        ").or(`sender_id.eq.${o.id},recipient_id.eq.${o.id}`).order("created_at",{ascending:!1});if(s)return k([]),void N(0);const r=new Map;(t||[]).forEach(t=>{if(!t||!t.sender_id||!t.recipient_id)return;const s=t.sender_id===o.id?t.recipient_id:t.sender_id,i=t.sender_id===o.id?t.recipient||{}:t.sender||{};if(i&&i.id&&("user"!==e||"user"!==i.role))if(r.has(s)){const e=r.get(s);new Date(t.created_at)>new Date(e.lastMessage.created_at)&&(e.lastMessage=t),t.recipient_id!==o.id||t.is_read||e.unreadCount++}else r.set(s,{id:s,partner:i,lastMessage:t,unreadCount:t.recipient_id!==o.id||t.is_read?0:1})}),k(Array.from(r.values())),N(Array.from(r.values()).reduce((e,t)=>e+t.unreadCount,0))}catch(e){k([]),N(0)}},we=async e=>{try{const{data:t,error:s}=await Xn.from("messages").select("*").or(`and(sender_id.eq.${o.id},recipient_id.eq.${e}),and(sender_id.eq.${e},recipient_id.eq.${o.id})`).order("created_at",{ascending:!0});if(s)throw s;C(t||[]),await Xn.from("messages").update({is_read:!0}).eq("recipient_id",o.id).eq("sender_id",e),be()}catch(t){}},xe=(()=>{if(ve)return["What features does GreenoFig offer?","Tell me about the pricing plans","I'd like to speak with someone from your team"];const e=null==n?void 0:n.role;return"admin"===e||"super_admin"===e?["Show me platform analytics overview","What are the best practices for user engagement?","Help me analyze subscription trends"]:"nutritionist"===e?["Suggest evidence-based nutrition strategies","Help me create a client meal plan template","What are current nutrition research trends?"]:["Give me a healthy breakfast idea","Suggest a quick 15-minute workout","How can I improve my sleep quality?"]})();S.useEffect(()=>{const e=setTimeout(()=>x(!0),3e3),t=setTimeout(()=>x(!1),8e3);return()=>{clearTimeout(e),clearTimeout(t)}},[]),S.useEffect(()=>{const e=e=>{fe.current&&!fe.current.contains(e.target)&&l&&c(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[l]);S.useEffect(()=>{var e;null==(e=me.current)||e.scrollIntoView({behavior:"smooth"})},[g,P]),S.useEffect(()=>{var e,t,s;if(l&&0===g.length&&"ai"===h){let r="";if(ve)r="Hi there!  Welcome to GreenoFig! I'm your Website Assistant. I can help answer questions about our platform, features, pricing, and how we can support your health journey. If you'd like to speak with our team, just let me know!";else{const i=null==n?void 0:n.role;r="admin"===i||"super_admin"===i?`Hi ${(null==(e=null==n?void 0:n.full_name)?void 0:e.split(" ")[0])||"Admin"}!  I'm your AI Business Assistant. I can help with analytics, strategies, and platform insights.`:"nutritionist"===i?`Hi ${(null==(t=null==n?void 0:n.full_name)?void 0:t.split(" ")[0])||"there"}!  I'm your AI Nutrition Assistant. I can help with evidence-based strategies, client plans, and research.`:`Hi ${(null==(s=null==n?void 0:n.full_name)?void 0:s.split(" ")[0])||"there"}!  I'm your AI Health Coach. How can I help you today?`}const i={id:Date.now(),text:r,sender:"ai"};m([i])}},[l,ve,n,h]);const _e=async(e,t)=>{if(e&&e.preventDefault(),"messages"===h)return void(async()=>{if(!f.trim()||!j)return;const e=f.trim();y("");try{const t={message_text:e,sender_id:o.id,recipient_id:j,is_read:!1,created_at:(new Date).toISOString()},{error:s}=await Xn.from("messages").insert([t]);if(s)throw s;await we(j)}catch(t){a({title:"Error",description:"Failed to send message",variant:"destructive"})}})();const s=t||f;if(!s.trim()||v)return;const r={...{text:s,sender:"user",user_id:null==o?void 0:o.id},id:Date.now(),created_at:(new Date).toISOString()},i=[...g,r];m(i),y(""),b(!0);try{if(ve&&(s.toLowerCase().includes("talk to someone")||s.toLowerCase().includes("speak with")||s.toLowerCase().includes("contact")||s.toLowerCase().includes("representative")||s.toLowerCase().includes("human")||s.toLowerCase().includes("real person")||s.toLowerCase().includes("team member"))){const e={text:"I'd be happy to connect you with our team! Please provide your name and email address, and someone from our team will reach out to you shortly.",sender:"ai",id:Date.now()+1};return m(t=>[...t,e]),W(!0),void b(!1)}const e=Ca(s),t=((e,t=[])=>{if(!e&&t.length>0){const s=t.slice(-3).filter(e=>"user"===e.sender||"user"===e.role).map(e=>e.text||e.content).join(" ");e=Ca(s)}const s={ar:{language:"ar",languageName:"Arabic",systemPrompt:"      GreenoFig.       .\n\n :\n- **   ** -         \n-    \n-        \n-          \n-        \n\n:\n-  \n-   \n-    \n-   \n-     ",responseFormat:"      ",greeting:"!       "},en:{language:"en",languageName:"English",systemPrompt:"You are GreenoFig AI Health Coach, a friendly and knowledgeable wellness assistant.\n\nImportant Rules:\n- **Always respond in English** - The user is speaking English, so your responses must be in English only\n- Be friendly, encouraging, and professional\n- Provide evidence-based nutrition and fitness advice\n- If asked about medical information, remind users to consult healthcare professionals\n- Never provide medical diagnoses or specific treatment recommendations\n\nYour capabilities:\n- Meal planning\n- Workout suggestions\n- Calorie and nutrition tracking\n- Motivating and encouraging users\n- Answering general health questions",responseFormat:"All responses must be in English",greeting:"Hello! How can I help you with your health journey today?"}};return s[e=e||"en"]||s.en})(e,i),{data:r,error:a}=await Xn.functions.invoke("ai-coach-memory",{body:JSON.stringify({messages:i.slice(-10),language:e,languageInstructions:t,userProfile:ve?{isVisitor:!0,role:"visitor",systemPrompt:"ar"===e?"   GreenoFig     .      :                 .                       .          . **  .**":"You are a helpful Website Assistant for GreenoFig, an AI-powered health and wellness platform. You can ONLY answer questions about: the website features, pricing plans, how the platform works, subscription details, privacy and security, payment methods, and general information about our services. If asked about personal health advice, meal plans, or fitness routines, politely explain that users need to sign up to access our AI Health Coach. Keep responses friendly, concise, and focused on helping visitors understand our platform. **Always respond in English.**"}:{...n,isAdmin:"admin"===(null==n?void 0:n.role)||"super_admin"===(null==n?void 0:n.role),isNutritionist:"nutritionist"===(null==n?void 0:n.role)}})});if(a)throw a;const l={text:r.reply,sender:"ai",user_id:null==o?void 0:o.id,id:Date.now()+1,created_at:(new Date).toISOString()};m(e=>[...e,l])}catch(l){const e={text:"I'm having trouble connecting right now. Please try again! ",sender:"ai",id:Date.now()+1};m(t=>[...t,e]),a({title:"Error",description:"Failed to get AI response. Please try again.",variant:"destructive"})}finally{b(!1)}},ke=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_e())},Se=()=>{c(!l),d(!1)};return e.jsxs("div",{ref:fe,children:[e.jsx("div",{ref:$,className:"fixed inset-0 pointer-events-none z-[9998]"}),e.jsx(V,{children:!l&&e.jsxs(U.div,{ref:F,initial:{scale:0,opacity:0,x:D.x,y:D.y},animate:{scale:1,opacity:1,x:D.x,y:D.y},exit:{scale:0,opacity:0},drag:!0,dragConstraints:$,dragElastic:0,dragMomentum:!1,onDragEnd:(e,t)=>{const s=window.innerWidth,r=window.innerHeight,i=e.target.getBoundingClientRect(),n=i.left+i.width/2<s/2?"left":"right",o={x:"left"===n?16:s-64-16,y:Math.max(80,Math.min(r-64-16,i.top)),side:n};L(o),localStorage.setItem("chatButtonPos",JSON.stringify(o)),F.current&&(F.current.style.transition="left 0.3s ease-out, right 0.3s ease-out",setTimeout(()=>{F.current&&(F.current.style.transition="")},300))},whileTap:{scale:.95},onClick:Se,transition:{type:"spring",stiffness:400,damping:30},className:"fixed top-0 left-0 z-[9999] h-16 w-16 rounded-full shadow-2xl cursor-grab active:cursor-grabbing bg-gradient-to-br from-primary to-green-400 touch-none select-none",children:[E>0&&e.jsx(U.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 h-6 w-6 rounded-full bg-red-500 flex items-center justify-center text-white text-xs font-bold shadow-lg z-10",children:E>9?"9+":E}),e.jsx(U.div,{animate:{boxShadow:["0 0 10px hsl(var(--primary) / 0.3)","0 0 20px hsl(var(--primary) / 0.4)","0 0 10px hsl(var(--primary) / 0.3)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 rounded-full"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-2",children:e.jsx("img",{src:no,alt:"GreenoFig AI Coach",className:"h-12 w-12 object-contain drop-shadow-lg",style:{filter:"brightness(0.75) contrast(1.15)"}})})]})}),e.jsx(V,{children:!l&&w&&e.jsxs(U.div,{initial:{opacity:0,y:10,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.9},className:"fixed bg-card rounded-lg shadow-xl p-3 w-56 border border-primary/20 z-[9999] "+("right"===D.side?"right-4":"left-4"),style:{bottom:window.innerHeight-D.y+20},children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Y,{className:"h-5 w-5 text-primary shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-card-foreground",children:"Need help?"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Chat with AI Coach or message your nutritionist!"})]})]}),e.jsx("div",{className:"absolute -bottom-2 w-4 h-4 bg-card border-r border-b border-primary/20 transform rotate-45 "+("right"===D.side?"right-6":"left-6")})]})}),e.jsx(V,{children:l&&e.jsxs(U.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:50,scale:.9},transition:{type:"spring",stiffness:300,damping:30},className:"fixed w-[calc(100vw-32px)] max-w-[320px] md:max-w-[340px] bg-card rounded-2xl shadow-2xl z-[9999] border border-border overflow-hidden flex flex-col",style:{[D.side||"right"]:"16px",bottom:"16px",height:u?"60px":"auto",maxHeight:u?"60px":"550px"},children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary to-green-400 p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0 overflow-hidden",children:[e.jsx("div",{className:"rounded-full bg-white/20 flex items-center justify-center overflow-hidden flex-shrink-0 "+(u?"h-8 w-8":"h-10 w-10"),children:e.jsx("img",{src:no,alt:"GreenoFig",className:"rounded-full object-cover "+(u?"h-6 w-6":"h-8 w-8")})}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsx("h3",{className:"font-semibold text-white text-sm truncate whitespace-nowrap",children:ve?"Website Assistant":"ai"===h?"AI Health Coach":"Messages"}),!u&&e.jsx("p",{className:"text-xs text-white/80 truncate whitespace-nowrap",children:ve?"Ask me about GreenoFig!":"ai"===h?v?"Thinking...":"Online":`${_.length} conversations`})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ma,{variant:"ghost",size:"sm",onClick:()=>O(!A),className:"h-8 w-8 p-0 text-white hover:bg-white/20",title:A?"Mute notifications":"Unmute notifications",children:A?e.jsx(K,{className:"h-4 w-4"}):e.jsx(J,{className:"h-4 w-4"})}),e.jsx(ma,{variant:"ghost",size:"sm",onClick:()=>{d(!u)},className:"h-8 w-8 p-0 text-white hover:bg-white/20",children:u?e.jsx(Q,{className:"h-4 w-4"}):e.jsx(X,{className:"h-4 w-4"})}),e.jsx(ma,{variant:"ghost",size:"sm",onClick:Se,className:"h-8 w-8 p-0 text-white hover:bg-white/20",children:e.jsx(M,{className:"h-4 w-4"})})]})]}),!u&&!ve&&!j&&e.jsxs("div",{className:"flex border-b border-border bg-muted/30",children:[e.jsxs("button",{onClick:()=>p("ai"),className:"flex-1 py-3 px-4 flex items-center justify-center gap-2 font-medium text-sm transition-all "+("ai"===h?"bg-background text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground hover:bg-muted/50"),children:[e.jsx(Z,{className:"h-4 w-4"}),"AI Coach"]}),e.jsxs("button",{onClick:()=>p("messages"),className:"flex-1 py-3 px-4 flex items-center justify-center gap-2 font-medium text-sm transition-all relative "+("messages"===h?"bg-background text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground hover:bg-muted/50"),children:[e.jsx(ee,{className:"h-4 w-4"}),"Messages",E>0&&e.jsx(_a,{variant:"destructive",className:"h-5 min-w-[20px] px-1.5 text-[10px]",children:E>9?"9+":E})]})]}),!u&&"ai"===h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-muted/30",style:{maxHeight:"320px"},children:[e.jsx(V,{children:g.map((t,s)=>e.jsx(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex "+("user"===t.sender?"justify-end":"justify-start"),children:e.jsx("div",{className:"max-w-[85%] rounded-xl px-3 py-2.5 shadow-sm "+("user"===t.sender?"bg-gradient-to-br from-primary to-green-400 text-primary-foreground":"bg-card border border-border text-card-foreground"),children:e.jsx("p",{className:"text-[13px] leading-relaxed whitespace-pre-wrap break-words",children:t.text})})},t.id||s))}),v&&e.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-xl px-4 py-3 shadow-sm",children:e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),e.jsx("div",{ref:me})]}),g.length<=1&&!v&&!q&&e.jsx("div",{className:"px-3 pb-2 pt-1",children:e.jsx("div",{className:"space-y-2",children:xe.map((t,s)=>e.jsx(U.button,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.1*s},onClick:e=>_e(e,t),className:"w-full p-2 bg-muted hover:bg-accent rounded-lg text-left text-xs transition-colors",children:t},s))})}),e.jsx("div",{className:"p-4 bg-card border-t border-border",children:q?e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),re.trim()&&z.trim()){le(!0);try{const{error:e}=await Xn.from("visitor_inquiries").insert([{name:z,email:re,question:ne||f,conversation_history:JSON.stringify(g),status:"pending",created_at:(new Date).toISOString()}]);if(e)throw e;a({title:"Thank you!",description:"Our team will get back to you shortly via email."});const t={id:Date.now(),text:`Thank you, ${z}! I've forwarded your information to our team. Someone will reach out to you at ${re} shortly. Is there anything else I can help you with about our website?`,sender:"ai"};m(e=>[...e,t]),W(!1),G(""),ie(""),oe("")}catch(t){a({title:"Error",description:"Failed to submit your information. Please try again or email us directly at support@greenofig.com",variant:"destructive"})}finally{le(!1)}}else a({title:"Missing Information",description:"Please provide your name and email",variant:"destructive"})},className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(Pa,{htmlFor:"visitor-name",className:"text-xs font-medium",children:"Name *"}),e.jsx(ja,{id:"visitor-name",type:"text",value:z,onChange:e=>G(e.target.value),placeholder:"Your name",className:"mt-1 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx(Pa,{htmlFor:"visitor-email",className:"text-xs font-medium",children:"Email *"}),e.jsx(ja,{id:"visitor-email",type:"email",value:re,onChange:e=>ie(e.target.value),placeholder:"your@email.com",className:"mt-1 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx(Pa,{htmlFor:"visitor-question",className:"text-xs font-medium",children:"Question (Optional)"}),e.jsx(Sa,{id:"visitor-question",value:ne,onChange:e=>oe(e.target.value),placeholder:"Tell us how we can help...",className:"mt-1 text-sm resize-none",rows:2})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ma,{type:"button",variant:"outline",onClick:()=>W(!1),className:"flex-1",disabled:ae,children:"Cancel"}),e.jsx(ma,{type:"submit",disabled:ae,className:"flex-1 bg-gradient-to-br from-primary to-green-400",children:ae?"Sending...":"Submit"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:_e,className:"flex gap-3 items-end",children:[e.jsx(Sa,{value:f,onChange:e=>y(e.target.value),onKeyPress:ke,placeholder:ve?"Ask about our platform...":"Ask me anything...",className:"flex-1 min-h-[48px] max-h-[120px] resize-none text-sm bg-background border-input focus:border-ring focus:ring-2 focus:ring-primary/20 rounded-lg p-3",rows:2}),e.jsx(ma,{type:"submit",disabled:!f.trim()||v,size:"icon",className:"h-12 w-12 bg-gradient-to-br from-primary to-green-400 hover:from-primary/90 hover:to-green-400/90 shrink-0 shadow-md transition-all",children:e.jsx(te,{className:"h-5 w-5"})})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-2 text-center",children:"Press Enter to send  Shift+Enter for new line"})]})})]}),!u&&"messages"===h&&e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[!j&&!ce&&("admin"===(null==n?void 0:n.role)||"super_admin"===(null==n?void 0:n.role)||"nutritionist"===(null==n?void 0:n.role))&&e.jsx("div",{className:"p-3 border-b border-border",children:e.jsxs(ma,{onClick:()=>{ue(!0),(async()=>{try{const{data:e,error:t}=await Xn.from("user_profiles").select("id, full_name, email, profile_picture_url, role").neq("id",o.id).order("full_name");if(t)throw t;he(e||[])}catch(e){}})()},className:"w-full bg-gradient-to-br from-primary to-green-400",size:"sm",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"New Message"]})}),ce&&e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-3 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ma,{variant:"ghost",size:"sm",onClick:()=>{ue(!1),ge("")},className:"h-8 w-8 p-0",title:"Back to conversations",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx("h3",{className:"text-sm font-semibold",children:"Select User to Message"})]}),e.jsx(ja,{placeholder:"Search users...",value:pe,onChange:e=>ge(e.target.value),className:"text-sm"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto divide-y divide-border",children:de.filter(e=>{var t,s;return(null==(t=e.full_name)?void 0:t.toLowerCase().includes(pe.toLowerCase()))||(null==(s=e.email)?void 0:s.toLowerCase().includes(pe.toLowerCase()))}).map(t=>{var s;return e.jsxs(U.button,{onClick:()=>{return e=t.id,T(e),ue(!1),ge(""),void we(e);var e},className:"w-full p-3 hover:bg-muted/50 transition-colors text-left flex items-center gap-3",whileHover:{backgroundColor:"rgba(0,0,0,0.02)"},children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:t.profile_picture_url?e.jsx("img",{src:t.profile_picture_url,alt:t.full_name,className:"h-full w-full rounded-full object-cover"}):e.jsx("span",{className:"text-sm font-semibold text-primary",children:(null==(s=t.full_name)?void 0:s.charAt(0))||"?"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground truncate",children:t.full_name||"Unknown"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.email})]}),e.jsx(_a,{variant:"outline",className:"text-[10px]",children:t.role})]},t.id)})})]}),!j&&!ce&&e.jsx("div",{className:"flex-1 overflow-y-auto",children:0===_.length?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[e.jsx(ee,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No conversations yet"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Start chatting with your ","user"===(null==n?void 0:n.role)?"nutritionist":"clients","!"]})]}):e.jsx("div",{className:"divide-y divide-border",children:_.map(t=>{var s;const r=t.partner||t.nutritionist,i=t.lastMessage||{message_text:t.last_message,created_at:t.last_message_at},n=t.unreadCount||t.unread_count||0;return e.jsxs(U.button,{onClick:()=>{return e=t.id,T(e),void we(e);var e},className:"w-full p-3 hover:bg-muted/50 transition-colors text-left flex items-start gap-3",whileHover:{backgroundColor:"rgba(0,0,0,0.02)"},children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:(null==r?void 0:r.profile_picture_url)?e.jsx("img",{src:r.profile_picture_url,alt:r.full_name,className:"h-full w-full rounded-full object-cover"}):e.jsx("span",{className:"text-sm font-semibold text-primary",children:(null==(s=null==r?void 0:r.full_name)?void 0:s.charAt(0))||"?"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground truncate",children:(null==r?void 0:r.full_name)||"Unknown"}),(null==i?void 0:i.created_at)&&e.jsx("span",{className:"text-[10px] text-muted-foreground whitespace-nowrap ml-2",children:se(new Date(i.created_at),"MMM d")})]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:(null==i?void 0:i.message_text)||"No messages yet"})]}),n>0&&e.jsx(_a,{variant:"destructive",className:"h-5 min-w-[20px] px-1.5 text-[10px] flex-shrink-0",children:n})]},t.id)})})}),j&&e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"p-3 border-b border-border flex items-center gap-3 bg-muted/30",children:[e.jsx(ma,{variant:"ghost",size:"sm",onClick:()=>{T(null),C([])},className:"h-8 w-8 p-0",title:"Back to conversations",children:e.jsx(B,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-semibold",children:(null==(s=null==(t=_.find(e=>e.id===j))?void 0:t.partner)?void 0:s.full_name)||(null==(i=null==(r=_.find(e=>e.id===j))?void 0:r.nutritionist)?void 0:i.full_name)||"Conversation"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 bg-muted/30",style:{maxHeight:"320px"},children:[P.map(t=>e.jsx(U.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex "+(t.sender_id===o.id?"justify-end":"justify-start"),children:e.jsxs("div",{className:"max-w-[85%] rounded-xl px-3 py-2 shadow-sm "+(t.sender_id===o.id?"bg-gradient-to-br from-primary to-green-400 text-primary-foreground":"bg-card border border-border text-card-foreground"),children:[e.jsx("p",{className:"text-[13px] leading-relaxed whitespace-pre-wrap break-words",children:t.message_text}),e.jsx("span",{className:"text-[10px] opacity-70 mt-1 block",children:se(new Date(t.created_at),"h:mm a")})]})},t.id)),e.jsx("div",{ref:me})]}),e.jsx("div",{className:"p-4 bg-card border-t border-border",children:e.jsxs("form",{onSubmit:_e,className:"flex gap-3 items-end",children:[e.jsx(Sa,{value:f,onChange:e=>y(e.target.value),onKeyPress:ke,placeholder:"Type a message...",className:"flex-1 min-h-[48px] max-h-[120px] resize-none text-sm bg-background border-input focus:border-ring focus:ring-2 focus:ring-primary/20 rounded-lg p-3",rows:2}),e.jsx(ma,{type:"submit",disabled:!f.trim(),size:"icon",className:"h-12 w-12 bg-gradient-to-br from-primary to-green-400 hover:from-primary/90 hover:to-green-400/90 shrink-0 shadow-md transition-all",children:e.jsx(te,{className:"h-5 w-5"})})]})})]})]})]})})]})},Na=({targetId:t="main-content"})=>{const[s,r]=S.useState(!1);S.useEffect(()=>{document.getElementById(t)||window;const e=t?document.getElementById(t):null,s=()=>{e?e.scrollTop>300?r(!0):r(!1):window.pageYOffset>300?r(!0):r(!1)};return e?e.addEventListener("scroll",s):window.addEventListener("scroll",s),()=>{e?e.removeEventListener("scroll",s):window.removeEventListener("scroll",s)}},[t]);return e.jsx(V,{children:s&&e.jsx(U.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},className:"fixed bottom-6 left-1/2 -translate-x-1/2 md:left-6 md:translate-x-0 z-40",children:e.jsx(ma,{onClick:()=>{const e=t?document.getElementById(t):null;e?e.scrollTo({top:0,behavior:"smooth"}):window.scrollTo({top:0,behavior:"smooth"})},size:"icon",className:"h-12 w-12 rounded-full shadow-lg bg-primary/60 hover:bg-primary/80 backdrop-blur-sm text-primary-foreground border border-primary/20","aria-label":"Scroll to top",children:e.jsx(re,{className:"h-5 w-5"})})})})},Aa=S.createContext(),Oa={listeners:new Set,emit(e,t){this.listeners.forEach(s=>s(e,t))},subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}},Ra=async e=>{try{"setAppBadge"in navigator&&(e>0?await navigator.setAppBadge(e):await navigator.clearAppBadge()),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"SET_BADGE",count:e})}catch(t){}},Ia=({children:t})=>{const{userProfile:s}=io(),[r,i]=S.useState(0),[n,o]=S.useState([]),a=S.useRef(null);S.useEffect(()=>{try{const e=new(window.AudioContext||window.webkitAudioContext),t=()=>{const t=e.createOscillator(),s=e.createGain();t.connect(s),s.connect(e.destination),t.frequency.setValueAtTime(880,e.currentTime),t.frequency.setValueAtTime(1174.66,e.currentTime+.1),t.frequency.setValueAtTime(1318.51,e.currentTime+.2),s.gain.setValueAtTime(.3,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.4),t.start(e.currentTime),t.stop(e.currentTime+.4)};a.current={play:t,audioContext:e}}catch(e){a.current=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuEzvLaizsIGmi77eamUBELTKXh8bllHAU2jdXyzn0vBSR2xe/glEILElyx6OyrWBQLRp3e8cFuJAUpgs/z3I4+CRhnvO7op1YSCEE=")}},[]),S.useEffect(()=>{if(!(null==s?void 0:s.id))return;const e=[];return e.push(Xn.channel("user_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`recipient_id=eq.${s.id}`},e=>{l(),c(" New Message","You have a new message"),u()}).subscribe()),e.push(Xn.channel("user_meal_plans").on("postgres_changes",{event:"INSERT",schema:"public",table:"ai_meal_plans",filter:`user_id=eq.${s.id}`},e=>{l(),c(" New Meal Plan","A new meal plan has been assigned to you!")}).subscribe()),e.push(Xn.channel("user_workout_plans").on("postgres_changes",{event:"INSERT",schema:"public",table:"workout_plans",filter:`user_id=eq.${s.id}`},e=>{l(),c(" New Workout Plan","Your trainer assigned you a new workout!")}).subscribe()),e.push(Xn.channel("user_achievements").on("postgres_changes",{event:"INSERT",schema:"public",table:"user_achievements",filter:`user_id=eq.${s.id}`},e=>{l(),c(" Achievement Unlocked!","You earned a new badge!","success")}).subscribe()),e.push(Xn.channel("user_levels").on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_gamification",filter:`user_id=eq.${s.id}`},e=>{if(e.new.level>e.old.level&&(l(),c(" Level Up!",`You reached level ${e.new.level}!`,"success")),e.new.total_points>e.old.total_points){const t=e.new.total_points-e.old.total_points;l(),c(" Points Earned!",`+${t} points!`)}}).subscribe()),e.push(Xn.channel("user_goals").on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_goals",filter:`user_id=eq.${s.id}`},e=>{"completed"===e.new.status&&"completed"!==e.old.status&&(l(),c(" Goal Completed!",`You completed: ${e.new.goal_name}`))}).subscribe()),e.push(Xn.channel("user_weight_logs").on("postgres_changes",{event:"INSERT",schema:"public",table:"weight_logs",filter:`user_id=eq.${s.id}`},e=>{l(),c(" Weight Logged","Great job tracking your progress!")}).subscribe()),e.push(Xn.channel("user_subscriptions").on("postgres_changes",{event:"INSERT",schema:"public",table:"user_subscriptions",filter:`user_id=eq.${s.id}`},e=>{l(),c(" Subscription Active!",`Welcome to ${e.new.tier_name} tier!`)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_subscriptions",filter:`user_id=eq.${s.id}`},e=>{"cancelled"===e.new.status&&"active"===e.old.status&&(l(),c(" Subscription Cancelled","Your subscription has been cancelled"))}).subscribe()),"nutritionist"!==s.role&&"admin"!==s.role&&"super_admin"!==s.role||e.push(Xn.channel("nutritionist_appointments").on("postgres_changes",{event:"INSERT",schema:"public",table:"appointments",filter:`nutritionist_id=eq.${s.id}`},e=>{l(),c(" New Appointment","A client booked an appointment with you!")}).subscribe()),"user"===s.role&&e.push(Xn.channel("client_appointments").on("postgres_changes",{event:"INSERT",schema:"public",table:"appointments",filter:`client_id=eq.${s.id}`},e=>{l(),c(" New Appointment Scheduled",`Your nutritionist scheduled an appointment: ${e.new.title||"Consultation"}`,"default","appointment")}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"appointments",filter:`client_id=eq.${s.id}`},e=>{"cancelled"===e.new.status?(l(),c(" Appointment Cancelled",`Your appointment "${e.new.title}" has been cancelled`,"default","appointment")):(l(),c(" Appointment Updated",`Your appointment "${e.new.title}" has been updated`,"default","appointment"))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"appointments",filter:`client_id=eq.${s.id}`},e=>{l(),c(" Appointment Cancelled","An appointment has been cancelled by your nutritionist","default","appointment")}).subscribe()),e.push(Xn.channel("user_notifications_table").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${s.id}`},e=>{l(),c(e.new.title||" Notification",e.new.message||"You have a new notification"),u()}).subscribe()),e.push(Xn.channel("user_form_assignments").on("postgres_changes",{event:"INSERT",schema:"public",table:"form_assignments",filter:`client_id=eq.${s.id}`},e=>{l(),c(" New Form Assigned","Your nutritionist sent you a form to complete","default","form"),u()}).on("postgres_changes",{event:"DELETE",schema:"public",table:"form_assignments",filter:`client_id=eq.${s.id}`},e=>{l(),c(" Form Revoked","A form assignment has been removed","default","form"),u()}).subscribe()),"nutritionist"!==s.role&&"admin"!==s.role&&"super_admin"!==s.role||e.push(Xn.channel("nutritionist_form_submissions").on("postgres_changes",{event:"UPDATE",schema:"public",table:"form_assignments",filter:`nutritionist_id=eq.${s.id}`},e=>{"submitted"===e.new.status&&"submitted"!==e.old.status&&(l(),c(" Form Submitted","A client has submitted their form for review","default","form"),u())}).subscribe()),e.push(Xn.channel(`user-${s.id}`).on("broadcast",{event:"notification"},e=>{l(),c(e.payload.title||" Notification",e.payload.message||"You have a new notification")}).on("broadcast",{event:"incoming_call"},e=>{l(),c(" Incoming Video Call",e.payload.callerName?`${e.payload.callerName} is calling...`:"You have an incoming video call!")}).subscribe()),"nutritionist"!==s.role&&"admin"!==s.role&&"super_admin"!==s.role||e.push(Xn.channel("new_users").on("postgres_changes",{event:"INSERT",schema:"public",table:"user_profiles",filter:"role=eq.user"},e=>{l(),c(" New Client","A new user signed up!")}).subscribe()),e.push(Xn.channel("user_streaks").on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_profiles",filter:`id=eq.${s.id}`},e=>{e.new.current_streak&&e.new.current_streak%7==0&&e.new.current_streak>e.old.current_streak&&(l(),c(" Streak Milestone!",`${e.new.current_streak} day streak! Keep it up!`,"success"))}).subscribe()),e.push(Xn.channel("user_meal_logs").on("postgres_changes",{event:"INSERT",schema:"public",table:"meal_logs",filter:`user_id=eq.${s.id}`},e=>{l(),c(" Meal Logged","Great job tracking your nutrition!")}).subscribe()),e.push(Xn.channel("user_workout_logs").on("postgres_changes",{event:"INSERT",schema:"public",table:"workout_logs",filter:`user_id=eq.${s.id}`},e=>{l(),c(" Workout Logged","Awesome workout! Keep pushing!")}).subscribe()),e.push(Xn.channel("user_comments").on("postgres_changes",{event:"INSERT",schema:"public",table:"comments"},e=>{l(),c(" New Comment","Someone commented on your post!")}).subscribe()),e.push(Xn.channel("shared_recipes").on("postgres_changes",{event:"INSERT",schema:"public",table:"shared_recipes",filter:`shared_with_user_id=eq.${s.id}`},e=>{l(),c(" Recipe Shared","Your nutritionist shared a recipe with you!")}).subscribe()),e.push(Xn.channel("user_payments").on("postgres_changes",{event:"INSERT",schema:"public",table:"payments",filter:`user_id=eq.${s.id}`},e=>{"succeeded"===e.new.status&&(l(),c(" Payment Successful","Your payment was processed successfully!"))}).subscribe()),u(),()=>{e.forEach(e=>Xn.removeChannel(e))}},[null==s?void 0:s.id,null==s?void 0:s.role]);const l=()=>{if(a.current)try{if("function"==typeof a.current.play)if(a.current.audioContext){"suspended"===a.current.audioContext.state&&a.current.audioContext.resume();const e=a.current.audioContext,t=e.createOscillator(),s=e.createGain();t.connect(s),s.connect(e.destination),t.frequency.setValueAtTime(523.25,e.currentTime),t.frequency.setValueAtTime(659.25,e.currentTime+.1),t.frequency.setValueAtTime(783.99,e.currentTime+.2),s.gain.setValueAtTime(.4,e.currentTime),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.5),t.start(e.currentTime),t.stop(e.currentTime+.5)}else a.current.currentTime=0,a.current.play().catch(e=>{})}catch(e){}},c=async(e,t,s="default",r="general")=>{const n=(e=>{switch(e){case"appointment":return"/app/user#user-appointments";case"form":return"/app/forms";case"message":return"/app/user#messaging-center";default:return"/app/user"}})(r);if("serviceWorker"in navigator&&navigator.serviceWorker.controller)try{const s=await navigator.serviceWorker.ready;await s.showNotification(e,{body:t,icon:"/logo.png",badge:"/logo.png",vibrate:[200,100,200],tag:`greenofig-${r}-${Date.now()}`,requireInteraction:!1,data:{type:r,url:n}})}catch(o){"Notification"in window&&"granted"===Notification.permission&&new Notification(e,{body:t,icon:"/logo.png",badge:"/logo.png"})}else"Notification"in window&&"granted"===Notification.permission&&new Notification(e,{body:t,icon:"/logo.png",badge:"/logo.png"});Ps({title:e,description:t,variant:s,duration:5e3}),Oa.emit("notification",{title:e,description:t,type:r,timestamp:Date.now()}),i(e=>{const t=e+1;return Ra(t),t})},u=async()=>{if(null==s?void 0:s.id)try{const{count:e}=await Xn.from("messages").select("*",{count:"exact",head:!0}).eq("recipient_id",s.id).eq("is_read",!1),{count:t}=await Xn.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",s.id).eq("is_read",!1),r=(e||0)+(t||0);i(r),Ra(r)}catch(e){}},d={unreadCount:r,notifications:n,playNotificationSound:l,showNotification:c,requestNotificationPermission:async()=>{if("Notification"in window&&"default"===Notification.permission){return"granted"===await Notification.requestPermission()}return"granted"===Notification.permission},updateUnreadCount:u};return e.jsx(Aa.Provider,{value:d,children:t})},Da=()=>{try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),s=e.createGain();t.connect(s),s.connect(e.destination),t.frequency.value=800,t.type="sine",s.gain.value=.3,t.start(),s.gain.exponentialRampToValueAtTime(.01,e.currentTime+.2),t.stop(e.currentTime+.2)}catch(e){}},La=()=>{const{unreadCount:t,requestNotificationPermission:s,updateUnreadCount:r}=(()=>{const e=S.useContext(Aa);if(!e)throw new Error("useNotifications must be used within NotificationProvider");return e})(),{userProfile:i}=io(),n=C(),[o,a]=S.useState(!1),[l,c]=S.useState([]),[u,d]=S.useState(!1),[h,p]=S.useState(!0),[g,m]=S.useState(0),[f,y]=S.useState("all"),v=S.useRef(null),b=S.useRef(null);S.useEffect(()=>{s(),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("message",e=>{var t,s;"NEW_NOTIFICATION"===(null==(t=e.data)?void 0:t.type)&&(x(),_(),Da()),null==(s=e.data)||s.type})},[]),S.useEffect(()=>{(null==i?void 0:i.id)&&(x(),_())},[null==i?void 0:i.id]),S.useEffect(()=>{(async e=>{try{"setAppBadge"in navigator&&(e>0?await navigator.setAppBadge(e):await navigator.clearAppBadge()),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"SET_BADGE",count:e})}catch(t){}})(g)},[g]),S.useEffect(()=>{const e=()=>{"visible"===document.visibilityState&&(null==i?void 0:i.id)&&(x(),_())};return document.addEventListener("visibilitychange",e),()=>document.removeEventListener("visibilitychange",e)},[null==i?void 0:i.id]),S.useEffect(()=>{const e=e=>{v.current&&!v.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),S.useEffect(()=>{if(!(null==i?void 0:i.id))return;b.current&&Xn.removeChannel(b.current);const e=Xn.channel(`live-notifications-${i.id}`,{config:{broadcast:{self:!0},presence:{key:i.id}}});e.on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`recipient_id=eq.${i.id}`},e=>{w(e.new,"message")}),e.on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${i.id}`},e=>{w(e.new,"notification")}),e.on("postgres_changes",{event:"INSERT",schema:"public",table:"appointments",filter:`client_id=eq.${i.id}`},e=>{w(e.new,"appointment")}),e.on("postgres_changes",{event:"INSERT",schema:"public",table:"appointments",filter:`nutritionist_id=eq.${i.id}`},e=>{w(e.new,"appointment")}),e.on("postgres_changes",{event:"UPDATE",schema:"public",table:"appointments"},e=>{e.new.client_id!==i.id&&e.new.nutritionist_id!==i.id||_()}),e.on("postgres_changes",{event:"INSERT",schema:"public",table:"meal_plans",filter:`client_id=eq.${i.id}`},e=>{w(e.new,"meal_plan")}),e.on("postgres_changes",{event:"INSERT",schema:"public",table:"user_achievements",filter:`user_id=eq.${i.id}`},e=>{w(e.new,"achievement")}),e.on("postgres_changes",{event:"INSERT",schema:"public",table:"form_assignments",filter:`client_id=eq.${i.id}`},e=>{w(e.new,"form_assignment")}),e.subscribe(e=>{"SUBSCRIBED"===e||"CHANNEL_ERROR"!==e&&"TIMED_OUT"!==e||setTimeout(()=>{b.current&&b.current.subscribe()},5e3)}),b.current=e;const t=setInterval(()=>{"visible"===document.visibilityState&&x()},3e4);return()=>{clearInterval(t),b.current&&(Xn.removeChannel(b.current),b.current=null)}},[null==i?void 0:i.id]);const w=S.useCallback(async(e,t)=>{var s,i,n,o,a,l,u,d,h,p,g,f,y,v,b;Da(),m(e=>e+1);let w=null;if("message"===t){const{data:t}=await Xn.from("user_profiles").select("full_name").eq("id",e.sender_id).single();w={id:`msg-${e.id}`,type:"message",title:`New message from ${(null==t?void 0:t.full_name)||"Someone"}`,description:(null==(s=e.message_text)?void 0:s.substring(0,60))||"New message",createdAt:e.created_at,isRead:!1,data:{senderId:e.sender_id},icon:ee,color:"text-blue-500",bgColor:"bg-blue-100"},Ps({title:w.title,description:w.description})}else if("notification"===t){let t=K,s="text-blue-500",r="bg-blue-100";(null==(i=e.type)?void 0:i.includes("patient_intake"))||(null==(n=e.title)?void 0:n.toLowerCase().includes("intake"))||(null==(o=e.title)?void 0:o.toLowerCase().includes("patient"))?(t=me,s="text-primary",r="bg-primary/10"):(null==(a=e.type)?void 0:a.includes("appointment"))||(null==(l=e.title)?void 0:l.toLowerCase().includes("appointment"))?(t=ie,s="text-purple-500",r="bg-purple-100"):(null==(u=e.type)?void 0:u.includes("missed_call"))||(null==(d=e.title)?void 0:d.toLowerCase().includes("missed"))?(t=le,s="text-red-500",r="bg-red-100"):(null==(h=e.type)?void 0:h.includes("incoming_call"))||(null==(p=e.title)?void 0:p.toLowerCase().includes("incoming"))?(t=ce,s="text-blue-500",r="bg-blue-100"):(null==(g=e.type)?void 0:g.includes("outgoing_call"))||(null==(f=e.title)?void 0:f.toLowerCase().includes("outgoing"))?(t=ue,s="text-purple-500",r="bg-purple-100"):(null==(y=e.type)?void 0:y.includes("call"))?(t=de,s="text-green-500",r="bg-green-100"):(null==(v=e.type)?void 0:v.includes("achievement"))?(t=oe,s="text-yellow-500",r="bg-yellow-100"):(null==(b=e.type)?void 0:b.includes("meal"))&&(t=ne,s="text-orange-500",r="bg-orange-100"),w={id:`notif-${e.id}`,type:e.type||"notification",title:e.title||"New Notification",description:e.message||"",createdAt:e.created_at,isRead:!1,data:{notificationId:e.id},icon:t,color:s,bgColor:r},Ps({title:w.title,description:w.description})}else"appointment"===t?(w={id:`apt-${e.id}`,type:"appointment",title:"New Appointment Scheduled",description:e.title||"New appointment",createdAt:e.created_at,isRead:!1,data:{appointmentId:e.id},icon:ie,color:"text-purple-500",bgColor:"bg-purple-100"},Ps({title:w.title,description:w.description})):"meal_plan"===t?(w={id:`meal-${e.id}`,type:"meal",title:"New Meal Plan Assigned",description:e.name||"Your nutritionist created a meal plan for you",createdAt:e.created_at,isRead:!1,data:{planId:e.id},icon:ne,color:"text-orange-500",bgColor:"bg-orange-100"},Ps({title:w.title,description:w.description})):"achievement"===t?(w={id:`ach-${e.id}`,type:"achievement",title:"Achievement Unlocked!",description:"You earned a new achievement",createdAt:e.unlocked_at||e.created_at,isRead:!1,data:{achievementId:e.achievement_id},icon:oe,color:"text-yellow-500",bgColor:"bg-yellow-100"},Ps({title:w.title,description:w.description})):"form_assignment"===t&&(w={id:`form-${e.id}`,type:"form",title:"New Form Assigned",description:"Your nutritionist has sent you a form to complete",createdAt:e.created_at,isRead:!1,data:{assignmentId:e.id},icon:ae,color:"text-indigo-500",bgColor:"bg-indigo-100"},Ps({title:w.title,description:w.description}));w&&c(e=>[w,...e.slice(0,14)]),r()},[r]),x=async()=>{if(null==i?void 0:i.id)try{const{count:e}=await Xn.from("messages").select("*",{count:"exact",head:!0}).eq("recipient_id",i.id).eq("is_read",!1),{count:t}=await Xn.from("notifications").select("*",{count:"exact",head:!0}).eq("user_id",i.id).eq("is_read",!1);m((e||0)+(t||0)),p(!1)}catch(e){p(!1)}},_=async()=>{if(null==i?void 0:i.id){d(!0);try{const e=[];let t=0;const{data:s}=await Xn.from("messages").select("\n          id,\n          message_text,\n          created_at,\n          is_read,\n          sender_id,\n          sender:user_profiles!messages_sender_id_fkey(id, full_name, profile_picture_url)\n        ").eq("recipient_id",i.id).order("created_at",{ascending:!1}).limit(5);s&&s.forEach(s=>{var r,i,n;e.push({id:`msg-${s.id}`,type:"message",title:`Message from ${(null==(r=s.sender)?void 0:r.full_name)||"Unknown"}`,description:(null==(i=s.message_text)?void 0:i.substring(0,60))+((null==(n=s.message_text)?void 0:n.length)>60?"...":""),createdAt:s.created_at,isRead:s.is_read,data:{senderId:s.sender_id},icon:ee,color:"text-blue-500",bgColor:"bg-blue-100"}),s.is_read||t++});const{data:r}=await Xn.from("notifications").select("*").eq("user_id",i.id).order("created_at",{ascending:!1}).limit(15);r&&r.forEach(s=>{var r,i,n,o,a,l,c,u,d,h,p,g,m,f,y,v,b,w,x,_,k,S,j,T;let P=K,C="text-blue-500",E="bg-blue-100",N="notification";(null==(r=s.type)?void 0:r.includes("appointment"))||(null==(i=s.title)?void 0:i.toLowerCase().includes("appointment"))?(P=ie,C="text-purple-500",E="bg-purple-100",N="appointment"):(null==(n=s.type)?void 0:n.includes("missed_call"))||(null==(o=s.title)?void 0:o.toLowerCase().includes("missed"))?(P=le,C="text-red-500",E="bg-red-100",N="call"):(null==(a=s.type)?void 0:a.includes("incoming_call"))||(null==(l=s.title)?void 0:l.toLowerCase().includes("incoming"))?(P=ce,C="text-blue-500",E="bg-blue-100",N="call"):(null==(c=s.type)?void 0:c.includes("outgoing_call"))||(null==(u=s.title)?void 0:u.toLowerCase().includes("outgoing"))?(P=ue,C="text-purple-500",E="bg-purple-100",N="call"):(null==(d=s.type)?void 0:d.includes("completed_call"))||(null==(h=s.title)?void 0:h.toLowerCase().includes("completed"))||(null==(p=s.type)?void 0:p.includes("call"))||(null==(g=s.title)?void 0:g.toLowerCase().includes("call"))?(P=de,C="text-green-500",E="bg-green-100",N="call"):(null==(m=s.type)?void 0:m.includes("achievement"))||(null==(f=s.title)?void 0:f.toLowerCase().includes("achievement"))?(P=oe,C="text-yellow-500",E="bg-yellow-100",N="achievement"):(null==(y=s.type)?void 0:y.includes("meal"))||(null==(v=s.title)?void 0:v.toLowerCase().includes("meal"))?(P=ne,C="text-orange-500",E="bg-orange-100",N="meal"):(null==(b=s.type)?void 0:b.includes("goal"))||(null==(w=s.title)?void 0:w.toLowerCase().includes("goal"))?(P=he,C="text-green-500",E="bg-green-100",N="goal"):(null==(x=s.type)?void 0:x.includes("message"))||(null==(_=s.title)?void 0:_.toLowerCase().includes("message"))?(P=ee,C="text-blue-500",E="bg-blue-100",N="message"):(null==(k=s.type)?void 0:k.includes("payment"))||(null==(S=s.title)?void 0:S.toLowerCase().includes("payment"))?(P=pe,C="text-emerald-500",E="bg-emerald-100",N="payment"):((null==(j=s.type)?void 0:j.includes("form"))||(null==(T=s.title)?void 0:T.toLowerCase().includes("form")))&&(P=ae,C="text-indigo-500",E="bg-indigo-100",N="form"),e.push({id:`notif-${s.id}`,type:N,title:s.title||"Notification",description:s.message||"",createdAt:s.created_at,isRead:s.is_read||!1,data:{notificationId:s.id},icon:P,color:C,bgColor:E}),s.is_read||t++});const n=new Date;n.setDate(n.getDate()+7);const{data:o}=await Xn.from("appointments").select("id, title, appointment_date, appointment_time, status, created_at").or(`client_id.eq.${i.id},nutritionist_id.eq.${i.id}`).gte("appointment_date",(new Date).toISOString().split("T")[0]).lte("appointment_date",n.toISOString().split("T")[0]).in("status",["scheduled","confirmed"]).order("created_at",{ascending:!1}).limit(5);o&&o.forEach(s=>{const r=new Date(s.created_at)>new Date(Date.now()-6048e5);e.push({id:`apt-${s.id}`,type:"appointment",title:r?"New Appointment Scheduled":"Upcoming Appointment",description:`${s.title} - ${se(new Date(s.appointment_date),"MMM d")} at ${s.appointment_time||"TBD"}`,createdAt:s.created_at||s.appointment_date,isRead:!r,data:{appointmentId:s.id},icon:ie,color:"text-purple-500",bgColor:"bg-purple-100"}),r&&t++});const{data:a}=await Xn.from("user_achievements").select("id, achievement_id, unlocked_at, achievements(name, description)").eq("user_id",i.id).order("unlocked_at",{ascending:!1}).limit(3);a&&a.forEach(s=>{var r;const i=new Date(s.unlocked_at)>new Date(Date.now()-6048e5);e.push({id:`ach-${s.id}`,type:"achievement",title:"Achievement Unlocked!",description:(null==(r=s.achievements)?void 0:r.name)||"New achievement",createdAt:s.unlocked_at,isRead:!i,data:{achievementId:s.achievement_id},icon:oe,color:"text-yellow-500",bgColor:"bg-yellow-100"}),i&&t++});const{data:l}=await Xn.from("client_goals").select("id, goal_type, current_value, target_value, status, updated_at").eq("client_id",i.id).eq("status","active").order("updated_at",{ascending:!1}).limit(2);if(l&&l.forEach(t=>{const s=t.current_value/t.target_value*100;s>=75&&e.push({id:`goal-${t.id}`,type:"goal",title:"Goal Progress",description:`You're ${s.toFixed(0)}% towards your ${t.goal_type.replace("_"," ")} goal!`,createdAt:t.updated_at,isRead:!0,data:{goalId:t.id},icon:he,color:"text-green-500",bgColor:"bg-green-100"})}),"user"===i.role){const{data:s}=await Xn.from("meal_plans").select("id, name, created_at").eq("client_id",i.id).order("created_at",{ascending:!1}).limit(2);s&&s.forEach(s=>{new Date(s.created_at)>new Date(Date.now()-2592e5)&&(e.push({id:`meal-${s.id}`,type:"meal",title:"New Meal Plan",description:s.name||"Your nutritionist created a new meal plan",createdAt:s.created_at,isRead:!1,data:{planId:s.id},icon:ne,color:"text-orange-500",bgColor:"bg-orange-100"}),t++)})}const{data:u}=await Xn.from("payment_history").select("id, amount, status, created_at").eq("user_id",i.id).order("created_at",{ascending:!1}).limit(2);u&&u.forEach(t=>{new Date(t.created_at)>new Date(Date.now()-6048e5)&&"succeeded"===t.status&&e.push({id:`pay-${t.id}`,type:"payment",title:"Payment Successful",description:`Your payment of $${(t.amount/100).toFixed(2)} was processed`,createdAt:t.created_at,isRead:!0,data:{paymentId:t.id},icon:pe,color:"text-emerald-500",bgColor:"bg-emerald-100"})}),e.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)),c(e.slice(0,15)),m(t)}catch(e){c([])}finally{d(!1)}}},k=e=>{var t,s;switch((async e=>{if(!e.isRead){if("message"===e.type&&e.id.startsWith("msg-")){const t=e.id.replace("msg-","");await Xn.from("messages").update({is_read:!0}).eq("id",t)}else if(e.id.startsWith("notif-")){const t=e.id.replace("notif-","");await Xn.from("notifications").update({is_read:!0}).eq("id",t)}c(t=>t.map(t=>t.id===e.id?{...t,isRead:!0}:t)),m(e=>Math.max(0,e-1)),r()}})(e),a(!1),e.type){case"message":"nutritionist"===(null==i?void 0:i.role)||"admin"===(null==i?void 0:i.role)||"super_admin"===(null==i?void 0:i.role)?n(`/app/nutritionist/messages?conversation=${null==(t=e.data)?void 0:t.senderId}`):n(`/app/messages?conversation=${null==(s=e.data)?void 0:s.senderId}`);break;case"appointment":"nutritionist"===(null==i?void 0:i.role)?n("/app/nutritionist/schedule"):(n("/app/user"),setTimeout(()=>{const e=document.getElementById("user-appointments");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},100));break;case"call":"nutritionist"===(null==i?void 0:i.role)?n("/app/nutritionist/schedule"):(n("/app/user"),setTimeout(()=>{const e=document.getElementById("user-appointments");e&&e.scrollIntoView({behavior:"smooth",block:"start"})},100));break;case"achievement":n("/app/user");break;case"goal":n("/app/progress");break;case"meal":n("/app/nutrition");break;case"payment":n("/app/billing");break;case"form":n("/app/forms")}},j="all"===f?l:l.filter(e=>e.type===f);return e.jsxs("div",{className:"relative",ref:v,children:[e.jsxs(ma,{variant:"ghost",size:"icon",className:"relative min-h-[44px] min-w-[44px]",onClick:()=>{o||_(),a(!o)},children:[e.jsx(U.div,{animate:g>0?{rotate:[0,-15,15,-10,10,-5,5,0]}:{},transition:{duration:.6,repeat:g>0?1/0:0,repeatDelay:3},children:e.jsx(K,{className:"h-5 w-5"})}),g>0&&e.jsx(_a,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:g>9?"9+":g})]}),e.jsx(V,{children:o&&e.jsxs(U.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"fixed sm:absolute left-2 right-2 sm:left-auto sm:right-0 translate-x-0 sm:translate-x-0 top-16 sm:top-full mt-0 sm:mt-2 w-auto sm:w-96 max-w-[400px] bg-card rounded-xl shadow-2xl border border-border z-[100] overflow-hidden",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(K,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Notifications"}),g>0&&e.jsxs(_a,{variant:"secondary",className:"text-xs",children:[g," new"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[g>0&&e.jsxs(ma,{variant:"ghost",size:"sm",onClick:async()=>{await Xn.from("messages").update({is_read:!0}).eq("recipient_id",i.id).eq("is_read",!1),await Xn.from("notifications").update({is_read:!0}).eq("user_id",i.id).eq("is_read",!1),c(e=>e.map(e=>({...e,isRead:!0}))),m(0),r(),(async()=>{try{"clearAppBadge"in navigator&&await navigator.clearAppBadge(),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CLEAR_BADGE"})}catch(e){}})()},className:"text-xs h-7 px-2",children:[e.jsx(ge,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),e.jsx(ma,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>a(!1),children:e.jsx(M,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex gap-1 p-2 border-b border-border overflow-x-auto",children:[{id:"all",label:"All"},{id:"message",label:"Messages"},{id:"appointment",label:"Appointments"},{id:"call",label:"Calls"},{id:"form",label:"Forms"},{id:"achievement",label:"Achievements"}].map(t=>e.jsx(ma,{variant:f===t.id?"default":"ghost",size:"sm",className:"text-xs h-7 whitespace-nowrap",onClick:()=>y(t.id),children:t.label},t.id))}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:u?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(q,{className:"h-6 w-6 animate-spin text-primary"})}):0===j.length?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4 text-center",children:[e.jsx(K,{className:"h-10 w-10 text-muted-foreground mb-2 opacity-50"}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"You're all caught up!"})]}):e.jsx("div",{className:"divide-y divide-border",children:j.map(t=>{const s=t.icon;return e.jsxs(U.button,{onClick:()=>k(t),className:"w-full p-3 text-left hover:bg-muted/50 transition-colors flex items-start gap-3 "+(t.isRead?"":"bg-primary/5"),whileHover:{backgroundColor:"rgba(0,0,0,0.02)"},children:[e.jsx("div",{className:`flex-shrink-0 w-9 h-9 rounded-full flex items-center justify-center ${t.bgColor}`,children:e.jsx(s,{className:`h-4 w-4 ${t.color}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm truncate "+(t.isRead?"font-medium":"font-semibold"),children:t.title}),!t.isRead&&e.jsx("span",{className:"w-2 h-2 bg-primary rounded-full flex-shrink-0"})]}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mt-0.5",children:t.description}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:se(new Date(t.createdAt),"MMM d, h:mm a")})]})]},t.id)})})}),l.length>0&&e.jsx("div",{className:"p-2 border-t border-border bg-muted/30",children:e.jsx(ma,{variant:"ghost",size:"sm",className:"w-full text-xs",onClick:()=>{a(!1),"nutritionist"===(null==i?void 0:i.role)||"admin"===(null==i?void 0:i.role)||"super_admin"===(null==i?void 0:i.role)?n("/app/nutritionist/messages"):n("/app/messages")},children:"View all messages"})})]})})]})},$a={}.VITE_VAPID_PUBLIC_KEY||"BMB4AwUd3VqZ0NDGjvB4-4Cnih6wXeEeajXOvIKcvbk-mZF6cLoJFT0V1u5R6UU_eaRyi2PjHHoOQOFU_MtJ4n8",Fa=()=>{const{user:e,userProfile:t}=io(),[s,r]=S.useState("default"),[i,n]=S.useState(null),[o,a]=S.useState(!1),[l,c]=S.useState(null);S.useEffect(()=>{const e="serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window;a(e),e&&r(Notification.permission)},[]),S.useEffect(()=>{if(!o)return;(async()=>{try{const e=await navigator.serviceWorker.register("/sw.js",{scope:"/"});c(e);const t=await e.pushManager.getSubscription();t&&n(t)}catch(e){}})()},[o]),S.useEffect(()=>{if(!o)return;const e=e=>{const{data:t}=e;"ANSWER_CALL"===t.type&&window.dispatchEvent(new CustomEvent("answerCall",{detail:{roomId:t.roomId,callerId:t.callerId}})),"DECLINE_CALL"===t.type&&window.dispatchEvent(new CustomEvent("declineCall",{detail:{roomId:t.roomId,callerId:t.callerId}}))};return navigator.serviceWorker.addEventListener("message",e),()=>{navigator.serviceWorker.removeEventListener("message",e)}},[o]);const u=S.useCallback(async()=>{if(!o)return!1;try{const e=await Notification.requestPermission();return r(e),"granted"===e}catch(e){return!1}},[o]),d=S.useCallback(async()=>{var t,r;if(!o||!l)return null;if("granted"!==s){if(!(await u()))return null}try{if(!$a)return null;const s=await l.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ma($a)});if(n(s),null==e?void 0:e.id){const i=s.toJSON();await Xn.from("push_subscriptions").upsert({user_id:e.id,endpoint:i.endpoint,p256dh:(null==(t=i.keys)?void 0:t.p256dh)||"",auth:(null==(r=i.keys)?void 0:r.auth)||"",updated_at:(new Date).toISOString()},{onConflict:"user_id,endpoint"})}return s}catch(i){return null}},[o,l,s,u,null==e?void 0:e.id]),h=S.useCallback(async(e,t={})=>{if(!o)return!1;if("granted"!==s){if(!(await u()))return!1}try{return l?(await l.showNotification(e,{icon:"/logo.png",badge:"/logo.png",vibrate:[200,100,200],...t}),!0):(new Notification(e,{icon:"/logo.png",...t}),!0)}catch(r){return!1}},[o,s,u,l]),p=S.useCallback(async(e,t,s)=>h(`Incoming Call from ${e}`,{body:"Tap to answer the video call",tag:"greenofig-video-call",requireInteraction:!0,vibrate:[500,200,500,200,500,200,500],actions:[{action:"answer",title:"Answer"},{action:"decline",title:"Decline"}],data:{type:"incoming_call",roomId:t,callerId:s,callUrl:`/call/${t}`}}),[h]),g=S.useCallback(async(e,t)=>h(`Missed Call from ${e}`,{body:"You missed a video call. Tap to call back.",tag:"greenofig-video-call-missed",actions:[{action:"callback",title:"Call Back"},{action:"view",title:"View"}],data:{type:"missed_call",roomId:t,callUrl:`/call/${t}`}}),[h]),m=S.useCallback(async(e,t=15)=>{const s=new Date(e.appointment_date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return h(`Appointment in ${t} minutes`,{body:`${e.title} at ${s}`,tag:"greenofig-appointment-reminder",requireInteraction:!0,actions:[{action:"view",title:"View"},{action:"join",title:"Join Call"}],data:{type:"appointment_reminder",appointmentId:e.id,url:"/app/user"}})},[h]),f=S.useCallback(async(e,t,s,r)=>h(t,{body:s,tag:"greenofig-appointment",actions:[{action:"view",title:"View Details"}],data:{type:e,appointmentId:r,url:"/app/user"}}),[h]);S.useEffect(()=>{(null==e?void 0:e.id)&&"granted"===s&&l&&!i&&d()},[null==e?void 0:e.id,s,l,i,d]);const y=S.useCallback(async(e,t,s,r={})=>{try{const{data:i,error:n}=await Xn.functions.invoke("send-push-notification",{body:{userId:e,title:t,body:s,...r}});return!n}catch(i){return!1}},[]);return{isSupported:o,permission:s,subscription:i,requestPermission:u,subscribeToPush:d,showLocalNotification:h,showIncomingCallNotification:p,showMissedCallNotification:g,showAppointmentReminder:m,showAppointmentNotification:f,sendPushToUser:y}};function Ma(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),s=window.atob(t),r=new Uint8Array(s.length);for(let i=0;i<s.length;++i)r[i]=s.charCodeAt(i);return r}const Ua=w,Ba=x,qa=({className:t,...s})=>e.jsx(g,{className:gs(t),...s});qa.displayName=g.displayName;const Wa=S.forwardRef(({className:t,...s},r)=>e.jsx(m,{ref:r,className:gs("fixed inset-0 z-50 bg-black/80 backdrop-blur-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 transition-all duration-300 overflow-hidden",t),style:{scrollbarWidth:"none",msOverflowStyle:"none"},...s}));Wa.displayName=m.displayName;const Ha=S.forwardRef(({className:t,children:s,...r},i)=>e.jsxs(qa,{children:[e.jsx(Wa,{}),e.jsxs(f,{ref:i,className:gs("fixed left-[50%] top-[50%] z-50 grid w-[95vw] sm:w-full max-w-[95vw] sm:max-w-lg lg:max-w-2xl xl:max-w-3xl translate-x-[-50%] translate-y-[-50%] gap-3 sm:gap-4 lg:gap-6 glass-effect custom-scrollbar rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 lg:p-10 shadow-2xl border border-border/50 max-h-[90vh] overflow-y-auto overflow-x-hidden duration-300 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-top-[48%] transition-all ease-out",t),...r,children:[s,e.jsxs(y,{className:"absolute right-3 top-3 sm:right-4 sm:top-4 lg:right-6 lg:top-6 rounded-full p-2 lg:p-2.5 opacity-70 ring-offset-background transition-all duration-200 hover:opacity-100 hover:bg-primary/10 hover:text-primary active:scale-90 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none min-h-[44px] min-w-[44px] sm:min-h-0 sm:min-w-0 flex items-center justify-center",children:[e.jsx(M,{className:"h-5 w-5 sm:h-4 sm:w-4 lg:h-5 lg:w-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ha.displayName=f.displayName;const za=({className:t,...s})=>e.jsx("div",{className:gs("flex flex-col space-y-2 sm:space-y-3 text-center sm:text-left pb-3 sm:pb-4 border-b border-border/30 mb-4 sm:mb-6",t),...s});za.displayName="DialogHeader";const Ga=({className:t,...s})=>e.jsx("div",{className:gs("flex flex-col-reverse sm:flex-row sm:justify-end gap-2 sm:gap-3 pt-4 sm:pt-6 border-t border-border/30 mt-4 sm:mt-6",t),...s});Ga.displayName="DialogFooter";const Va=S.forwardRef(({className:t,...s},r)=>e.jsx(v,{ref:r,className:gs("text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold leading-tight tracking-tight text-foreground",t),...s}));Va.displayName=v.displayName;const Ya=S.forwardRef(({className:t,...s},r)=>e.jsx(b,{ref:r,className:gs("text-sm sm:text-base md:text-lg lg:text-xl text-text-secondary leading-relaxed mt-1 sm:mt-2",t),...s}));Ya.displayName=b.displayName;const Ka=()=>{const{user:t,userProfile:s}=io(),r=C(),{showIncomingCallNotification:i,showMissedCallNotification:n,requestPermission:o,isSupported:a}=Fa(),[l,c]=S.useState(null),u=S.useRef(null),d=S.useRef(null);S.useEffect(()=>{a&&o()},[a,o]),S.useEffect(()=>(u.current=(()=>{try{const e=new(window.AudioContext||window.webkitAudioContext),t=(t,s)=>{const r=e.createOscillator(),i=e.createGain();r.connect(i),i.connect(e.destination),r.frequency.value=t,r.type="sine",i.gain.setValueAtTime(.3,e.currentTime),i.gain.exponentialRampToValueAtTime(.01,e.currentTime+s),r.start(e.currentTime),r.stop(e.currentTime+s)};return{play:()=>{"suspended"===e.state&&e.resume(),t(880,.2),setTimeout(()=>t(880,.2),300)},context:e}}catch(e){return null}})(),()=>{var e;(null==(e=u.current)?void 0:e.context)&&u.current.context.close()}),[]),S.useEffect(()=>{if(!(null==t?void 0:t.id))return;const e=Xn.channel(`user-calls:${t.id}`);return e.on("broadcast",{event:"incoming-call"},async({payload:s})=>{c(s);const r=setInterval(()=>{var e;null==(e=u.current)||e.play()},1500);await i(s.callerName,s.roomId,s.callerId);const o=setTimeout(async()=>{clearInterval(r),c(null),await n(s.callerName,s.roomId);try{await Xn.from("notifications").insert({user_id:t.id,type:"appointment_scheduled",title:"Missed Call",message:`You missed a video call from ${s.callerName}`,is_read:!1})}catch(e){}},3e4);e.ringInterval=r,e.missedCallTimeout=o}),e.on("broadcast",{event:"call-cancelled"},()=>{e.ringInterval&&clearInterval(e.ringInterval),e.missedCallTimeout&&clearTimeout(e.missedCallTimeout),c(null)}),e.subscribe(),d.current=e,()=>{e.ringInterval&&clearInterval(e.ringInterval),e.missedCallTimeout&&clearTimeout(e.missedCallTimeout),Xn.removeChannel(e)}},[null==t?void 0:t.id,i,n]),S.useEffect(()=>{const e=e=>{const{roomId:t}=e.detail;t&&r(`/call/${t}`)},t=()=>{var e;c(null),(null==(e=d.current)?void 0:e.ringInterval)&&clearInterval(d.current.ringInterval)};return window.addEventListener("answerCall",e),window.addEventListener("declineCall",t),()=>{window.removeEventListener("answerCall",e),window.removeEventListener("declineCall",t)}},[r]);return l?e.jsx(Ua,{open:!0,onOpenChange:()=>{},children:e.jsx(Ha,{className:"sm:max-w-md",children:e.jsxs("div",{className:"flex flex-col items-center py-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center mb-4 animate-pulse",children:e.jsx(de,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Incoming Video Call"}),e.jsxs("p",{className:"text-muted-foreground mb-6",children:[l.callerName," is calling..."]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(ma,{variant:"destructive",size:"lg",className:"rounded-full w-16 h-16",onClick:()=>{var e,s;if((null==(e=d.current)?void 0:e.ringInterval)&&clearInterval(d.current.ringInterval),(null==(s=d.current)?void 0:s.missedCallTimeout)&&clearTimeout(d.current.missedCallTimeout),d.current&&l){const e=Xn.channel(`user-calls:${l.callerId}`);e.subscribe(async s=>{"SUBSCRIBED"===s&&(await e.send({type:"broadcast",event:"call-declined",payload:{declinedBy:null==t?void 0:t.id}}),Xn.removeChannel(e))})}c(null)},children:e.jsx(fe,{className:"w-6 h-6"})}),e.jsx(ma,{size:"lg",className:"rounded-full w-16 h-16 bg-green-500 hover:bg-green-600",onClick:()=>{var e,t;(null==(e=d.current)?void 0:e.ringInterval)&&clearInterval(d.current.ringInterval),(null==(t=d.current)?void 0:t.missedCallTimeout)&&clearTimeout(d.current.missedCallTimeout),r(`/call/${l.roomId}`),c(null)},children:e.jsx(ye,{className:"w-6 h-6"})})]})]})})}):null},Ja=({logoUrl:t})=>{var s,r;const{userProfile:i,user:n,loading:o,signOut:a,refreshUserProfile:l}=io(),{t:c,i18n:u}=pa();C();const d=E(),[h,p]=S.useState(!1),[g,m]=S.useState(0),f="ar"===u.language;S.useEffect(()=>{!n||i||o||l()},[n,i,o,l]),S.useEffect(()=>{if(null==i?void 0:i.id){y();try{const e=Xn.channel("conversations-changes").on("postgres_changes",{event:"*",schema:"public",table:"conversations",filter:"user"===i.role?`user_id=eq.${i.id}`:`nutritionist_id=eq.${i.id}`},()=>{y()}).subscribe(e=>{});return()=>{try{Xn.removeChannel(e)}catch(t){}}}catch(e){const t=setInterval(y,3e4);return()=>clearInterval(t)}}},[null==i?void 0:i.id]);const y=async()=>{if(null==i?void 0:i.id)try{if("user"===i.role){const{data:e,error:t}=await Xn.rpc("get_unread_message_count",{p_user_id:i.id});t||m(e||0)}else if(["nutritionist","admin","super_admin"].includes(i.role)){const{data:e,error:t}=await Xn.rpc("get_nutritionist_unread_count",{p_nutritionist_id:i.id});t||m(e||0)}}catch(e){}},v=async()=>{await a()},b=(null==i?void 0:i.full_name)||(null==(s=null==n?void 0:n.user_metadata)?void 0:s.full_name)||(null==(r=null==n?void 0:n.email)?void 0:r.split("@")[0])||"User",w=(null==i?void 0:i.email)||(null==n?void 0:n.email)||"",x=[{icon:ve,label:c("dashboard.nav.dashboard","Dashboard"),path:"/app/user"},{icon:be,label:c("dashboard.nav.aiCoach","AI Coach"),path:"/app/ai-coach"},{icon:we,label:c("dashboard.nav.nutrition","Nutrition"),path:"/app/nutrition"},{icon:xe,label:c("dashboard.nav.fitness","Fitness"),path:"/app/fitness"},{icon:_e,label:c("dashboard.nav.progress","Progress"),path:"/app/progress"},{icon:ie,label:c("dashboard.nav.appointments","Appointments"),path:"/app/appointments"},{icon:H,label:c("dashboard.nav.messages","Messages"),path:"/app/messages"},{icon:ae,label:c("dashboard.nav.forms","My Forms"),path:"/app/forms"},{icon:ee,label:c("dashboard.nav.support","Support"),path:"/app/support"}],_=[{icon:ve,label:c("nutritionistNav.dashboard","Dashboard"),path:"/app/nutritionist/dashboard"},{icon:ke,label:c("nutritionistNav.clients","Clients"),path:"/app/nutritionist/clients"},{icon:we,label:c("nutritionistNav.mealPlans","Meal Plans"),path:"/app/nutritionist/meals"},{icon:ie,label:c("nutritionistNav.schedule","Schedule"),path:"/app/nutritionist/schedule"},{icon:ee,label:c("nutritionistNav.messages","Messages"),path:"/app/nutritionist/messages"},{icon:_e,label:c("nutritionistNav.analytics","Analytics"),path:"/app/nutritionist/analytics"},{icon:Se,label:c("nutritionistNav.clientSuccess","Client Success"),path:"/app/nutritionist/success"},{icon:me,label:c("nutritionistNav.reports","Reports"),path:"/app/nutritionist/reports"},{icon:me,label:c("nutritionistNav.resources","Resources"),path:"/app/nutritionist/resources"},{icon:me,label:c("nutritionistNav.blog","Blog"),path:"/app/nutritionist/blog"},{icon:ae,label:c("nutritionistNav.forms","Client Forms"),path:"/app/nutritionist/forms"},{icon:je,label:c("nutritionistNav.settings","Settings"),path:"/app/nutritionist/settings"}],k=[{icon:ve,label:"Dashboard",path:"/app/admin"},{icon:W,label:"Tier Preview",path:"/app/admin/tier-preview"},{icon:_e,label:"Analytics",path:"/app/admin/analytics"},{icon:Ee,label:"Revenue",path:"/app/admin/revenue"},{icon:Ne,label:"AI Errors",path:"/app/admin/errors"},{icon:ke,label:"User Management",path:"/app/admin/customers"},{icon:pe,label:"Subscriptions",path:"/app/admin/subscriptions"},{icon:Ae,label:"Payments",path:"/app/admin/payments"},{icon:Oe,label:"Coupons",path:"/app/admin/coupons"},{icon:Re,label:"Referrals",path:"/app/admin/referrals"},{icon:Ie,label:"Support",path:"/app/admin/issues"},{icon:ee,label:"Messaging",path:"/app/admin/messaging"},{icon:me,label:"Blog",path:"/app/admin/blog"},{icon:G,label:"Website",path:"/app/admin/website"},{icon:De,label:"Ad Management",path:"/app/admin/ads"},{icon:be,label:"AI Coach",path:"/app/admin/ai-coach"},{icon:Le,label:"Database",path:"/app/admin/studio"}],j=(()=>{switch(null==i?void 0:i.role){case"admin":case"super_admin":return k;case"nutritionist":return _;default:return x}})(),T=({link:t,isActive:s})=>{const[r,i]=S.useState(!1),n=("/app/messages"===t.path||"/app/nutritionist/messages"===t.path||"/app/admin/messaging"===t.path)&&g>0;return e.jsxs(O,{to:t.path,end:!0,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),className:`flex items-center gap-2 px-2 py-2 sm:py-1.5 rounded-md transition-all duration-200 text-sm sm:text-xs font-medium border min-h-[44px] sm:min-h-0 ${f?"flex-row-reverse":""} ${s||r?"bg-gradient-to-r from-primary to-green-400 text-primary-foreground border-primary/30":"bg-transparent text-muted-foreground border-transparent hover:border-primary/30"} ${r?f?"-translate-x-1":"translate-x-1":"translate-x-0"}`,onClick:()=>h&&p(!1),children:[e.jsx(t.icon,{className:"w-4 h-4 sm:w-3.5 sm:h-3.5 flex-shrink-0"}),e.jsx("span",{className:"flex-1 truncate",children:t.label}),n&&e.jsx(_a,{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 min-w-[20px] h-5 sm:h-4 flex items-center justify-center animate-pulse",children:g>99?"99+":g})]})},P=()=>{var s,r;return e.jsxs("div",{className:"flex flex-col h-full "+(f?"text-right":"text-left"),dir:f?"rtl":"ltr",children:[e.jsx("div",{className:"p-3 sm:p-2.5 border-b border-border flex items-center gap-2 "+(f?"flex-row-reverse":""),children:e.jsxs(N,{to:"/home",className:"flex items-center gap-1.5 "+(f?"flex-row-reverse":""),children:[e.jsx("img",{src:t,alt:"GreenoFig Logo",className:"w-7 h-7 sm:w-6 sm:h-6"}),e.jsx("span",{className:"text-base sm:text-sm font-bold gradient-text",children:"GreenoFig"})]})}),e.jsx("nav",{className:"flex-1 p-2 space-y-0.5 overflow-y-auto",children:j.map(t=>{let s=!1;return s=t.path.includes("?")?d.pathname+d.search===t.path:"/app/admin"===t.path?d.pathname===t.path&&!d.search:d.pathname===t.path,e.jsx(T,{link:t,isActive:s},t.path)})}),e.jsxs("div",{className:"p-3 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 "+(f?"flex-row-reverse":""),children:[e.jsxs(va,{className:"w-9 h-9 sm:w-8 sm:h-8",children:[e.jsx(ba,{src:(null==i?void 0:i.profile_picture_url)||(null==(s=null==n?void 0:n.user_metadata)?void 0:s.avatar_url)}),e.jsx(wa,{className:"text-xs sm:text-[10px]",children:(r=b,r?r.split(" ").map(e=>e[0]).join("").toUpperCase():(null==n?void 0:n.email)?n.email[0].toUpperCase():"?")})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("p",{className:"text-sm sm:text-xs font-semibold truncate",children:b}),e.jsx("p",{className:"text-xs sm:text-[10px] text-text-secondary truncate",children:w})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(O,{to:"/app/profile",className:({isActive:e})=>`flex items-center gap-3 px-3 py-2.5 sm:py-2 rounded-lg transition-colors text-sm font-medium min-h-[44px] sm:min-h-0 ${f?"flex-row-reverse":""} ${e?"bg-muted text-foreground":"text-text-secondary hover:bg-muted hover:text-foreground"}`,onClick:()=>h&&p(!1),children:[e.jsx(W,{className:"w-4 h-4"}),c("dashboard.nav.profile","Profile")]}),e.jsxs("button",{onClick:v,className:"w-full flex items-center gap-3 px-3 py-2.5 sm:py-2 rounded-lg transition-colors text-sm font-medium text-text-secondary hover:bg-muted hover:text-foreground min-h-[44px] sm:min-h-0 "+(f?"flex-row-reverse":""),children:[e.jsx(Ce,{className:"w-4 h-4"}),c("dashboard.nav.signOut","Sign Out")]})]})]})]})};return e.jsxs("div",{className:"flex h-screen bg-background text-foreground overflow-hidden",dir:f?"rtl":"ltr",children:[e.jsx("aside",{className:`hidden lg:block w-64 bg-card ${f?"border-l":"border-r"} border-border flex-shrink-0`,children:e.jsx(P,{})}),e.jsx(V,{children:h&&e.jsxs(e.Fragment,{children:[e.jsx(U.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>p(!1)}),e.jsx(U.aside,{variants:{open:{x:0,transition:{type:"spring",stiffness:300,damping:30}},closed:{x:"100%",transition:{type:"spring",stiffness:300,damping:30}}},initial:"closed",animate:"open",exit:"closed",className:"fixed top-0 right-0 h-full w-72 sm:w-64 bg-card z-50 lg:hidden shadow-2xl",children:e.jsx(P,{})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-w-0",children:[e.jsx("header",{className:"sticky top-0 z-30 flex items-center justify-end h-14 sm:h-16 px-4 border-b border-border bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx(ka,{}),e.jsx(La,{user:i}),"admin"===(null==i?void 0:i.role)||"super_admin"===(null==i?void 0:i.role)?e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm font-semibold text-primary",children:[e.jsx(Te,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Admin Mode"}),e.jsx("span",{className:"sm:hidden",children:"Admin"})]}):null,e.jsx(ma,{variant:"ghost",size:"icon",className:"lg:hidden min-h-[44px] min-w-[44px]",onClick:()=>p(!0),children:e.jsx(Pe,{className:"w-6 h-6"})})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8",id:"main-content",children:e.jsx(A,{})})]}),e.jsx(Ea,{}),e.jsx(Ka,{}),e.jsx(Na,{targetId:"main-content"})]})};var Qa,Xa="clover",Za="https://js.stripe.com",el="".concat(Za,"/").concat(Xa,"/stripe.js"),tl=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,sl=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,rl=function(e){return tl.test(e)||sl.test(e)},il=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",s=document.createElement("script");s.src="".concat(el).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(s),s},nl=null,ol=null,al=null,ll=function(e){return null!==nl?nl:(nl=new Promise(function(t,s){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe,window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Za,'"]')),t=0;t<e.length;t++){var s=e[t];if(rl(s.src))return s}return null}();if(r&&e);else if(r){if(r&&null!==al&&null!==ol){var i;r.removeEventListener("load",al),r.removeEventListener("error",ol),null===(i=r.parentNode)||void 0===i||i.removeChild(r),r=il(e)}}else r=il(e);al=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,s),ol=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(s),r.addEventListener("load",al),r.addEventListener("error",ol)}catch(n){return void s(n)}else t(null)})).catch(function(e){return nl=null,Promise.reject(e)})},cl=function(){return Qa||(Qa=ll(null).catch(function(e){return Qa=null,Promise.reject(e)}))};Promise.resolve().then(function(){return cl()}).catch(function(e){});var ul=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];0;var r=Date.now();return cl().then(function(e){return function(e,t,s){if(null===e)return null;t[0].match(/^pk_test/),e.version;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"8.1.0",startTime:t})}(r,s),r}(e,t,r)})};const dl=async e=>{try{const{data:t,error:s}=await Xn.from("user_subscriptions").select("\n        *,\n        subscription_plans (*)\n      ").eq("user_id",e).single();if(s&&"PGRST116"!==s.code)throw s;return t}catch(t){return null}},hl=async(e,t=null,s=null)=>{try{const{data:r,error:i}=await Xn.from("user_subscriptions").update({cancel_at_period_end:!0,status:"canceled",canceled_at:(new Date).toISOString(),cancellation_reason:t,cancellation_feedback:s}).eq("user_id",e).select().single();if(i)throw i;return r}catch(r){throw r}},pl=async e=>{try{const{data:t,error:s}=await Xn.from("payment_methods").select("*").eq("user_id",e).eq("status","active").order("is_default",{ascending:!1}).order("created_at",{ascending:!1});if(s)throw s;return t||[]}catch(t){return[]}},gl=async(e,t)=>{try{await Xn.from("payment_methods").update({is_default:!1}).eq("user_id",e);const{data:s,error:r}=await Xn.from("payment_methods").update({is_default:!0}).eq("id",t).eq("user_id",e).select().single();if(r)throw r;return s}catch(s){throw s}},ml=async(e,t)=>{try{const{data:s,error:r}=await Xn.from("payment_methods").update({status:"inactive"}).eq("id",t).eq("user_id",e).select().single();if(r)throw r;return s}catch(s){throw s}},fl=async({userId:e,paymentTransactionId:t,amount:s,reason:r,refundType:i="full",customerNotes:n=null})=>{try{const{data:o,error:a}=await Xn.from("refunds").insert([{user_id:e,payment_transaction_id:t,amount:s,reason:r,refund_type:i,customer_notes:n,status:"pending",requested_by:e}]).select().single();if(a)throw a;return o}catch(o){throw o}},yl=async e=>{try{const{data:t,error:s}=await Xn.from("refunds").select("\n        *,\n        payment_transactions (*)\n      ").eq("user_id",e).order("created_at",{ascending:!1});if(s)throw s;return t||[]}catch(t){return[]}},vl={free:{basicDashboard:!0,quickLog:!0,progressTracking:!0,hasAds:!0,maxMealPlansPerMonth:2,maxWorkoutsPerMonth:2,aiChatMessages:10,advancedAnalytics:!1,wearableIntegration:!1,photoRecognition:!1,nutritionistAccess:!1,downloadReports:!1,customGoals:!1,prioritySupport:!1},premium:{basicDashboard:!0,quickLog:!0,progressTracking:!0,hasAds:!1,maxMealPlansPerMonth:-1,maxWorkoutsPerMonth:-1,aiChatMessages:-1,advancedAnalytics:!0,wearableIntegration:!1,photoRecognition:!1,nutritionistAccess:!1,downloadReports:!0,customGoals:!0,prioritySupport:!1},pro:{basicDashboard:!0,quickLog:!0,progressTracking:!0,hasAds:!1,maxMealPlansPerMonth:-1,maxWorkoutsPerMonth:-1,aiChatMessages:-1,advancedAnalytics:!0,downloadReports:!0,customGoals:!0,wearableIntegration:!0,photoRecognition:!1,nutritionistAccess:!0,prioritySupport:!0,mealPlanHistory:!0,workoutHistory:!0,biometricTracking:!0},elite:{basicDashboard:!0,quickLog:!0,progressTracking:!0,hasAds:!1,maxMealPlansPerMonth:-1,maxWorkoutsPerMonth:-1,aiChatMessages:-1,advancedAnalytics:!0,downloadReports:!0,customGoals:!0,wearableIntegration:!0,nutritionistAccess:!0,prioritySupport:!0,mealPlanHistory:!0,workoutHistory:!0,biometricTracking:!0,photoRecognition:!0,personalCoach:!0,videoConsultations:!0,dnaAnalysis:!0,premiumRecipes:!0,aiNutritionOptimization:!0}},bl=()=>{const{plan:e,isFree:t,isPremium:s,isPro:r,isElite:i,loading:n,isActive:o}=(()=>{var e;const{user:t}=io(),[s,r]=S.useState(null),[i,n]=S.useState(!0);S.useEffect(()=>{t?o():(r(null),n(!1))},[t]);const o=async()=>{try{n(!0);const e=await dl(t.id);r(e)}catch(e){r(null)}finally{n(!1)}},a=null==s?void 0:s.subscription_plans,l=(null==(e=null==a?void 0:a.name)?void 0:e.toLowerCase())||"base";return{subscription:s,plan:a,loading:i,isActive:"active"===(null==s?void 0:s.status),isPremium:"premium"===l,isPro:"ultimate"===l,isElite:"elite"===l,isFree:!s||"base"===l||"free"===l,refresh:o}})(),a=i?"elite":r?"pro":s?"premium":"free",l=vl[a];return{hasAccess:e=>o||t?l[e]||!1:vl.free[e]||!1,hasAds:l.hasAds||!1,canUse:(e,t=0)=>{const s=l[e];return-1===s||(!0===s||"number"==typeof s&&t<s)},getRemainingUsage:(e,t=0)=>{const s=l[e];return-1===s||!0===s?-1:"number"==typeof s?Math.max(0,s-t):0},features:l,planKey:a,planName:(null==e?void 0:e.name)||"Free",loading:n}},wl=()=>{const{user:e,userProfile:t}=io(),{hasAds:s,planKey:r}=bl(),[i,n]=S.useState({}),[o,a]=S.useState(!1),l=S.useRef(new Set),c=!("superadmin"===(null==t?void 0:t.role)||"super_admin"===(null==t?void 0:t.role)||"admin"===(null==t?void 0:t.role)||"nutritionist"===(null==t?void 0:t.role))&&(!e||s),u=c,d=S.useCallback(async t=>{if(!c)return null;try{const s=e?"free"===r?"Base":r:"Base",{data:i,error:n}=await Xn.from("ad_campaigns").select("\n          *,\n          ad_placements!inner(*)\n        ").eq("ad_placements.name",t).eq("is_active",!0).eq("status","active").lte("start_date",(new Date).toISOString()).or(`end_date.is.null,end_date.gt.${(new Date).toISOString()}`).contains("target_plans",[s]).order("cost_per_click",{ascending:!1}).limit(1).single();return n&&"PGRST116"!==n.code?null:i||null}catch(s){return null}},[c,r,e]),h=S.useCallback(async(t,s,r)=>{if(!c||!t)return null;const i=`${t}-${r}`;if(l.current.has(i))return null;l.current.add(i);try{const{data:i,error:n}=await Xn.from("ad_impressions").insert({campaign_id:t,placement_id:s,user_id:(null==e?void 0:e.id)||null,page_path:r,referrer:document.referrer,user_agent:navigator.userAgent,device_type:f(),viewed_at:(new Date).toISOString()}).select().single();if(n)throw n;return await Xn.rpc("increment_campaign_impressions",{campaign_uuid:t}),i}catch(n){return null}},[c,e]),p=S.useCallback(async(t,s,r)=>{if(!c||!t)return null;try{const{data:i,error:n}=await Xn.from("ad_clicks").insert({campaign_id:t,impression_id:s,user_id:(null==e?void 0:e.id)||null,page_path:r}).select().single();if(n)throw n;return await Xn.rpc("increment_campaign_clicks",{campaign_uuid:t}),i}catch(i){return null}},[c,e]),g=S.useCallback(async(t,s,r,i=0)=>{if(!t)return null;try{const{data:n,error:o}=await Xn.from("ad_conversions").insert({campaign_id:t,click_id:s,user_id:(null==e?void 0:e.id)||null,conversion_type:r,conversion_value:i}).select().single();if(o)throw o;return await Xn.rpc("increment_campaign_conversions",{campaign_uuid:t}),n}catch(n){return null}},[e]),m=S.useCallback(async t=>{if((null==e?void 0:e.id)&&t)try{await Xn.from("user_ad_interactions").upsert({user_id:e.id,campaign_id:t,dismissed:!0,date:(new Date).toISOString().split("T")[0]},{onConflict:"user_id,campaign_id,date"})}catch(s){}},[e]),f=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"};return{hasAds:u,campaigns:i,loading:o,fetchCampaignForPlacement:d,trackImpression:h,trackClick:p,trackConversion:g,dismissAd:m}},xl=()=>{const[e,t]=S.useState([]),[s,r]=S.useState([]),[i,n]=S.useState(null),[o,a]=S.useState(!1),l=S.useCallback(async()=>{a(!0);try{const{data:e,error:s}=await Xn.from("ad_placements").select("*").order("priority",{ascending:!1});if(s)throw s;t(e||[])}catch(e){}finally{a(!1)}},[]),c=S.useCallback(async()=>{a(!0);try{const{data:e,error:t}=await Xn.from("ad_campaigns").select("\n          *,\n          ad_placements(name, display_name, placement_type)\n        ").order("created_at",{ascending:!1});if(t)throw t;r(e||[])}catch(e){}finally{a(!1)}},[]),u=S.useCallback(async e=>{try{const{data:t,error:s}=await Xn.from("ad_campaigns").insert(e).select().single();if(s)throw s;return await c(),{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},[c]),d=S.useCallback(async(e,t)=>{try{const{data:s,error:r}=await Xn.from("ad_campaigns").update({...t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(r)throw r;return await c(),{success:!0,data:s}}catch(s){return{success:!1,error:s.message}}},[c]),h=S.useCallback(async e=>{try{const{error:t}=await Xn.from("ad_campaigns").delete().eq("id",e);if(t)throw t;return await c(),{success:!0}}catch(t){return{success:!1,error:t.message}}},[c]),p=S.useCallback(async(e,t)=>d(e,{is_active:t}),[d]),g=S.useCallback(async(e=30)=>{a(!0);try{const t=new Date;t.setDate(t.getDate()-e);const{count:s}=await Xn.from("ad_impressions").select("*",{count:"exact",head:!0}).gte("viewed_at",t.toISOString()),{count:r}=await Xn.from("ad_clicks").select("*",{count:"exact",head:!0}).gte("clicked_at",t.toISOString()),{count:i}=await Xn.from("ad_conversions").select("*",{count:"exact",head:!0}).gte("converted_at",t.toISOString()),{data:o}=await Xn.from("ad_campaigns").select("id, name, total_impressions, total_clicks, total_conversions, cost_per_click, cost_per_impression").eq("is_active",!0).order("total_impressions",{ascending:!1}).limit(10),a=s>0?r/s*100:0,l=r>0?i/r*100:0;let c=0;o&&o.forEach(e=>{c+=e.total_impressions*(e.cost_per_impression||.005),c+=e.total_clicks*(e.cost_per_click||.5)}),n({totalImpressions:s||0,totalClicks:r||0,totalConversions:i||0,ctr:a.toFixed(2),cvr:l.toFixed(2),estimatedRevenue:c.toFixed(2),campaignPerformance:o||[],dateRange:e})}catch(t){}finally{a(!1)}},[]);return{placements:e,campaigns:s,analytics:i,loading:o,fetchPlacements:l,fetchCampaigns:c,createCampaign:u,updateCampaign:d,deleteCampaign:h,toggleCampaignStatus:p,fetchAnalytics:g}},_l=()=>{const t=E(),{t:s,i18n:r}=pa(),i="ar"===r.language,{hasAds:n,fetchCampaignForPlacement:o,trackImpression:a,trackClick:l,dismissAd:c}=wl(),[u,d]=S.useState(null),[h,p]=S.useState(null),[g,m]=S.useState(!1),[f,y]=S.useState(!0),[v,b]=S.useState(!1),w=["/app/admin","/app/nutritionist","/login","/signup","/auth"].some(e=>t.pathname.startsWith(e));S.useEffect(()=>{(async()=>{if(!n||w)return void y(!1);const e=await o("bottom_banner");d(e),y(!1),setTimeout(()=>b(!0),100)})()},[n,w,o]),S.useEffect(()=>{if(!u||h)return;(async()=>{const e=await a(u.id,u.placement_id,t.pathname);p(e)})()},[u,h,a,t.pathname]);const x=async()=>{u&&await c(u.id),m(!0),sessionStorage.setItem("bottom_banner_dismissed","true")};if(S.useEffect(()=>{sessionStorage.getItem("bottom_banner_dismissed")&&m(!0)},[]),!n||w||g||f)return null;const _=i?["     ","    ","   ","  "]:["Personalized meal plans from nutritionists","Unlimited meal & workout tracking","Direct consultations with experts","Ad-free experience"];return u?e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:x,children:e.jsxs("div",{className:"relative w-full max-w-md transform transition-all duration-500 "+(v?"scale-100 opacity-100":"scale-95 opacity-0"),onClick:e=>e.stopPropagation(),children:[e.jsx("button",{onClick:x,className:"absolute top-3 right-3 z-10 bg-white/20 hover:bg-white/30 rounded-full p-1.5 transition-colors","aria-label":"Close",children:e.jsx(M,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"rounded-2xl shadow-2xl overflow-hidden",style:{backgroundColor:u.background_color||"#059669"},children:[e.jsxs("div",{className:"relative px-6 pt-8 pb-4 text-center",children:[e.jsx("div",{className:"relative mx-auto w-20 h-20 mb-4",children:e.jsx("div",{className:"absolute inset-0 bg-white rounded-2xl shadow-lg flex items-center justify-center",children:u.image_url?e.jsx("img",{src:u.image_url,alt:u.title,className:"w-16 h-16 object-contain"}):e.jsx("img",{src:"/logo.png",alt:"GreenoFig",className:"w-16 h-16 object-contain"})})}),e.jsx("span",{className:"inline-block text-[9px] uppercase tracking-wider opacity-70 font-medium mb-2 px-2 py-0.5 rounded-full",style:{backgroundColor:"rgba(255,255,255,0.2)",color:u.text_color||"#ffffff"},children:"Ad"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:u.text_color||"#ffffff"},children:u.title}),u.subtitle&&e.jsx("p",{className:"text-sm opacity-90",style:{color:u.text_color||"#ffffff"},children:u.subtitle})]}),e.jsx("div",{className:"px-6 py-6 bg-black/10",children:e.jsx(ma,{onClick:async()=>{u&&(await l(u.id,null==h?void 0:h.id,t.pathname),u.cta_url&&(u.cta_url.startsWith("/")?window.location.href=u.cta_url:window.open(u.cta_url,"_blank","noopener,noreferrer")))},className:"w-full h-12 bg-white hover:bg-gray-100 text-gray-800 font-bold text-base rounded-xl shadow-lg hover:shadow-xl transition-all duration-300",children:u.cta_text})})]})]})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>m(!0),children:e.jsxs("div",{className:"relative w-full max-w-md transform transition-all duration-500 "+(v?"scale-100 opacity-100":"scale-95 opacity-0"),onClick:e=>e.stopPropagation(),dir:i?"rtl":"ltr",children:[e.jsx("button",{onClick:()=>m(!0),className:`absolute top-3 ${i?"left-3":"right-3"} z-10 bg-white/20 hover:bg-white/30 rounded-full p-1.5 transition-colors`,"aria-label":"Close",children:e.jsx(M,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"bg-gradient-to-br from-emerald-600 via-green-600 to-teal-700 rounded-2xl shadow-2xl overflow-hidden",children:[e.jsxs("div",{className:"relative px-6 pt-8 pb-4 text-center",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden",children:[e.jsx("div",{className:"absolute -top-10 -left-10 w-32 h-32 bg-white/10 rounded-full blur-2xl"}),e.jsx("div",{className:"absolute -top-5 -right-5 w-24 h-24 bg-yellow-400/20 rounded-full blur-xl"})]}),e.jsxs("div",{className:"relative mx-auto w-20 h-20 mb-4",children:[e.jsx("div",{className:"absolute inset-0 bg-white rounded-2xl shadow-lg transform rotate-3"}),e.jsx("div",{className:"absolute inset-0 bg-white rounded-2xl shadow-lg flex items-center justify-center",children:e.jsx("img",{src:"/logo.png",alt:"GreenoFig",className:"w-16 h-16 object-contain"})}),e.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-400 rounded-full p-1.5 shadow-lg",children:e.jsx($e,{className:"w-4 h-4 text-yellow-800"})})]}),e.jsx("h2",{className:"relative text-2xl font-bold text-white mb-2",children:i?"  !":"Upgrade to Premium!"}),e.jsx("p",{className:"relative text-white/90 text-sm",children:i?"       ":"Unlock the complete health & fitness experience"})]}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm px-6 py-5",children:e.jsx("ul",{className:"space-y-3",children:_.map((t,s)=>e.jsxs("li",{className:"flex items-center gap-3 text-white",children:[e.jsx("div",{className:"flex-shrink-0 w-5 h-5 bg-emerald-400 rounded-full flex items-center justify-center",children:e.jsx(Fe,{className:"w-3 h-3 text-emerald-900"})}),e.jsx("span",{className:"text-sm",children:t})]},s))})}),e.jsxs("div",{className:"px-6 py-5 bg-gradient-to-t from-black/20 to-transparent",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-white/60 line-through text-lg",children:"$29.99"}),e.jsx("span",{className:"bg-yellow-400 text-yellow-900 text-xs font-bold px-2 py-0.5 rounded-full",children:i?" 67%":"67% OFF"})]}),e.jsxs("div",{className:"flex items-baseline justify-center gap-1 mt-1",children:[e.jsx("span",{className:"text-4xl font-bold text-white",children:"$9.99"}),e.jsx("span",{className:"text-white/70 text-sm",children:i?"/":"/month"})]})]}),e.jsxs(ma,{onClick:()=>window.location.href="/pricing",className:"w-full h-12 bg-white hover:bg-gray-100 text-emerald-700 font-bold text-base rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 group",children:[e.jsx(Me,{className:`w-5 h-5 ${i?"ml-2":"mr-2"} text-yellow-500 group-hover:animate-pulse`}),i?"  -   7 ":"Start Now - 7 Days Free Trial"]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-1 text-white/60 text-xs",children:[e.jsx(Te,{className:"w-3 h-3"}),e.jsx("span",{children:i?" 100%":"100% Secure"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-white/60 text-xs",children:[e.jsx(Ue,{className:"w-3 h-3"}),e.jsx("span",{children:i?"   ":"Cancel anytime"})]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-black/20 text-center",children:[e.jsx("div",{className:"flex items-center justify-center gap-1 mb-1",children:[1,2,3,4,5].map(t=>e.jsx(Ue,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"},t))}),e.jsx("p",{className:"text-white/80 text-xs",children:i?"    10,000  ":"Trusted by 10,000+ active users"})]})]})]})})})},kl=()=>{const{user:t,userProfile:s}=io(),r=C(),[i,n]=S.useState(null),o=S.useRef(null),a=S.useRef(null),l=S.useRef(null),c=S.useRef(null);S.useEffect(()=>{try{c.current=new(window.AudioContext||window.webkitAudioContext)}catch(e){}return()=>{var e,t;"closed"!==(null==(e=c.current)?void 0:e.state)&&(null==(t=c.current)||t.close())}},[]);const u=()=>{if(c.current)try{const e=c.current;"suspended"===e.state&&e.resume();const t=(t,s)=>{const r=e.createOscillator(),i=e.createGain();r.connect(i),i.connect(e.destination),r.frequency.value=t,r.type="sine",i.gain.setValueAtTime(.3,e.currentTime+s),i.gain.exponentialRampToValueAtTime(.01,e.currentTime+s+.3),r.start(e.currentTime+s),r.stop(e.currentTime+s+.3)};t(880,0),t(880,.4)}catch(e){}},d=()=>{a.current&&(clearInterval(a.current),a.current=null),l.current&&(clearTimeout(l.current),l.current=null)};S.useEffect(()=>{if(!(null==t?void 0:t.id))return;const e=Xn.channel(`user-calls:${t.id}`);return e.on("broadcast",{event:"incoming-call"},async e=>{const s=e.payload;if(!i){n(s);try{await Xn.from("notifications").insert({user_id:t.id,type:"incoming_call",title:"Incoming Call",message:`Video call from ${s.callerName||"your nutritionist"}`,is_read:!1})}catch(r){}u(),a.current=setInterval(u,1500),l.current=setTimeout(async()=>{d(),n(null);try{await Xn.from("notifications").insert({user_id:t.id,type:"missed_call",title:"Missed Call",message:`You missed a video call from ${s.callerName||"your nutritionist"}`,is_read:!1})}catch(r){}Ps({title:"Missed Call",description:`You missed a call from ${s.callerName||"your nutritionist"}`})},3e4)}}),e.on("broadcast",{event:"call-ended"},()=>{d(),n(null)}),e.subscribe(e=>{}),o.current=e,()=>{d(),o.current&&Xn.removeChannel(o.current)}},[null==t?void 0:t.id]);return i?e.jsx(Ua,{open:!0,onOpenChange:()=>{},children:e.jsx(Ha,{className:"sm:max-w-md p-0 overflow-hidden",children:e.jsx("div",{className:"bg-gradient-to-br from-emerald-600 via-green-600 to-teal-700 p-8",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx(U.div,{className:"w-24 h-24 rounded-full bg-white/20 flex items-center justify-center mb-4",animate:{scale:[1,1.1,1],boxShadow:["0 0 0 0 rgba(255,255,255,0.4)","0 0 0 20px rgba(255,255,255,0)","0 0 0 0 rgba(255,255,255,0)"]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:e.jsx(de,{className:"w-12 h-12 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Incoming Video Call"}),e.jsx("p",{className:"text-white/90 text-lg mb-1",children:i.callerName||"Your Nutritionist"}),e.jsx("p",{className:"text-white/70 text-sm mb-8",children:"is calling you..."}),e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(ma,{variant:"destructive",size:"lg",className:"rounded-full w-16 h-16 mb-2",onClick:async()=>{if(d(),(null==i?void 0:i.roomId)&&o.current){const e=Xn.channel(`call-signal:${i.roomId}`);e.subscribe(async s=>{"SUBSCRIBED"===s&&(await e.send({type:"broadcast",event:"call-declined",payload:{declinedBy:null==t?void 0:t.id,declinedAt:(new Date).toISOString()}}),Xn.removeChannel(e))})}n(null),Ps({title:"Call Declined",description:"You declined the incoming call"})},children:e.jsx(fe,{className:"w-7 h-7"})}),e.jsx("span",{className:"text-white/80 text-sm",children:"Decline"})]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(U.div,{animate:{scale:[1,1.05,1]},transition:{duration:.5,repeat:1/0},children:e.jsx(ma,{size:"lg",className:"rounded-full w-16 h-16 bg-white hover:bg-gray-100 text-green-600 mb-2",onClick:()=>{d(),(null==i?void 0:i.roomId)&&r(`/call/${i.roomId}`),n(null)},children:e.jsx(ye,{className:"w-7 h-7"})})}),e.jsx("span",{className:"text-white/80 text-sm",children:"Answer"})]})]})]})})})}):null},Sl=()=>{const{pathname:e}=E();return S.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),null},jl=S.lazy(()=>ze(()=>import("./HomePage-331264b3.js"),["assets/HomePage-331264b3.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a0a74e79.js","assets/OnboardingSurvey-3783d7af.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js","assets/CheckoutDialog-fe9b9ef7.js","assets/AdContainer-f0457877.js","assets/switch-9ad3fbc0.js","assets/select-2a07d39b.js","assets/table-f1db2980.js","assets/card-337a2a4f.js","assets/tabs-fb6868c7.js"])),Tl=S.lazy(()=>ze(()=>import("./FeaturesPage-33d4eef5.js"),["assets/FeaturesPage-33d4eef5.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js","assets/SiteLayout-a0a74e79.js","assets/OnboardingSurvey-3783d7af.js","assets/FloatingFruits-183f19db.js","assets/AdContainer-f0457877.js","assets/switch-9ad3fbc0.js","assets/select-2a07d39b.js","assets/table-f1db2980.js","assets/card-337a2a4f.js","assets/tabs-fb6868c7.js"])),Pl=S.lazy(()=>ze(()=>import("./PricingPage-f0bfd41b.js"),["assets/PricingPage-f0bfd41b.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a0a74e79.js","assets/OnboardingSurvey-3783d7af.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js","assets/CheckoutDialog-fe9b9ef7.js"])),Cl=S.lazy(()=>ze(()=>import("./BlogPage-3cc9f1ec.js"),["assets/BlogPage-3cc9f1ec.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/card-337a2a4f.js","assets/tabs-fb6868c7.js","assets/SiteLayout-a0a74e79.js","assets/OnboardingSurvey-3783d7af.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js","assets/purify.es-3247f85f.js","assets/FloatingFruits-183f19db.js","assets/AdContainer-f0457877.js"])),El=S.lazy(()=>ze(()=>import("./ReviewsPage-f723ef84.js"),["assets/ReviewsPage-f723ef84.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a0a74e79.js","assets/OnboardingSurvey-3783d7af.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js","assets/card-337a2a4f.js"])),Nl=S.lazy(()=>ze(()=>import("./ContactPage-3b681062.js"),["assets/ContactPage-3b681062.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a0a74e79.js","assets/OnboardingSurvey-3783d7af.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js","assets/AdContainer-f0457877.js","assets/switch-9ad3fbc0.js","assets/select-2a07d39b.js","assets/table-f1db2980.js","assets/card-337a2a4f.js","assets/tabs-fb6868c7.js"])),Al=S.lazy(()=>ze(()=>import("./FaqPage-02e2c2c5.js"),["assets/FaqPage-02e2c2c5.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a0a74e79.js","assets/OnboardingSurvey-3783d7af.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Ol=S.lazy(()=>ze(()=>import("./AboutPage-8af07c62.js"),["assets/AboutPage-8af07c62.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a0a74e79.js","assets/OnboardingSurvey-3783d7af.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Rl=S.lazy(()=>ze(()=>import("./UserDashboard-81b5230a.js").then(e=>e.a),["assets/UserDashboard-81b5230a.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/card-337a2a4f.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js","assets/QuickLogMeal-1dd1a56a.js","assets/select-2a07d39b.js","assets/tabs-fb6868c7.js","assets/alert-dialog-710c679f.js","assets/AdContainer-f0457877.js","assets/alert-9ac43f95.js","assets/switch-9ad3fbc0.js","assets/MessagingCenter-4bab00d2.js","assets/progress-0fee62a7.js","assets/checkbox-7ffa2cd8.js","assets/UserAppointments-c076f96a.js"])),Il=S.lazy(()=>ze(()=>import("./NutritionistDashboardV2-efd4c65a.js"),["assets/NutritionistDashboardV2-efd4c65a.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/BlogManagementHub-b3edf6fc.js","assets/card-337a2a4f.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js","assets/tabs-fb6868c7.js","assets/checkbox-7ffa2cd8.js","assets/select-2a07d39b.js","assets/switch-9ad3fbc0.js","assets/AIBlogAssistant-056e3d94.js","assets/BlogTagsManager-515206b7.js","assets/alert-dialog-710c679f.js","assets/progress-0fee62a7.js","assets/useWebRTC-25f2080c.js","assets/alert-9ac43f95.js","assets/ClientIntakeForm-117b49ad.js"])),Dl=S.lazy(()=>ze(()=>import("./AdminDashboard-6cc1ce0d.js"),["assets/AdminDashboard-6cc1ce0d.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/BlogManagementHub-b3edf6fc.js","assets/card-337a2a4f.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js","assets/tabs-fb6868c7.js","assets/checkbox-7ffa2cd8.js","assets/select-2a07d39b.js","assets/switch-9ad3fbc0.js","assets/AIBlogAssistant-056e3d94.js","assets/BlogTagsManager-515206b7.js","assets/alert-dialog-710c679f.js","assets/table-f1db2980.js","assets/RevenueAnalyticsPage-f56358d5.js","assets/UserDashboard-81b5230a.js","assets/QuickLogMeal-1dd1a56a.js","assets/AdContainer-f0457877.js","assets/alert-9ac43f95.js","assets/MessagingCenter-4bab00d2.js","assets/progress-0fee62a7.js","assets/UserAppointments-c076f96a.js"])),Ll=S.lazy(()=>ze(()=>import("./OnboardingSurvey-3783d7af.js"),["assets/OnboardingSurvey-3783d7af.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),$l=S.lazy(()=>ze(()=>import("./ProfilePage-319dff02.js"),["assets/ProfilePage-319dff02.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/card-337a2a4f.js","assets/checkbox-7ffa2cd8.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Fl=S.lazy(()=>ze(()=>import("./EnhancedBlogPostEditor-3feaf936.js"),["assets/EnhancedBlogPostEditor-3feaf936.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/card-337a2a4f.js","assets/switch-9ad3fbc0.js","assets/tabs-fb6868c7.js","assets/select-2a07d39b.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js","assets/AIBlogAssistant-056e3d94.js"])),Ml=S.lazy(()=>ze(()=>import("./BlogTagsManager-515206b7.js"),["assets/BlogTagsManager-515206b7.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/card-337a2a4f.js","assets/tabs-fb6868c7.js","assets/alert-dialog-710c679f.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Ul=S.lazy(()=>ze(()=>import("./AiCoachPage-50c5afd9.js"),["assets/AiCoachPage-50c5afd9.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Bl=S.lazy(()=>ze(()=>import("./SurveyPage-51a0bee7.js"),["assets/SurveyPage-51a0bee7.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),ql=S.lazy(()=>ze(()=>import("./RevenueAnalyticsPage-f56358d5.js"),["assets/RevenueAnalyticsPage-f56358d5.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/card-337a2a4f.js","assets/tabs-fb6868c7.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Wl=S.lazy(()=>ze(()=>import("./BillingPage-5d2c5314.js"),["assets/BillingPage-5d2c5314.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/card-337a2a4f.js","assets/tabs-fb6868c7.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Hl=S.lazy(()=>ze(()=>import("./SupportPage-46288822.js"),["assets/SupportPage-46288822.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/card-337a2a4f.js","assets/select-2a07d39b.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js","assets/tabs-fb6868c7.js"])),zl=S.lazy(()=>ze(()=>import("./ResetPasswordPage-14958ce6.js"),["assets/ResetPasswordPage-14958ce6.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Gl=S.lazy(()=>ze(()=>import("./NutritionPageFunctional-13b74765.js"),["assets/NutritionPageFunctional-13b74765.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/QuickLogMeal-1dd1a56a.js","assets/select-2a07d39b.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Vl=S.lazy(()=>ze(()=>import("./FitnessPage-9406c525.js"),["assets/FitnessPage-9406c525.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/card-337a2a4f.js","assets/progress-0fee62a7.js","assets/tabs-fb6868c7.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Yl=S.lazy(()=>ze(()=>import("./ProgressPage-8dc5198a.js"),["assets/ProgressPage-8dc5198a.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/card-337a2a4f.js","assets/tabs-fb6868c7.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Kl=S.lazy(()=>ze(()=>import("./MessagingCenter-4bab00d2.js"),["assets/MessagingCenter-4bab00d2.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/card-337a2a4f.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Jl=S.lazy(()=>ze(()=>import("./MyFormsPage-9fd716f0.js"),["assets/MyFormsPage-9fd716f0.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/card-337a2a4f.js","assets/ClientIntakeForm-117b49ad.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Ql=S.lazy(()=>ze(()=>import("./AppointmentsPage-6a944b17.js"),["assets/AppointmentsPage-6a944b17.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/UserAppointments-c076f96a.js","assets/card-337a2a4f.js","assets/tabs-fb6868c7.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Xl=S.lazy(()=>ze(()=>import("./PrivacyPolicyPage-ddbdf0cd.js"),["assets/PrivacyPolicyPage-ddbdf0cd.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a0a74e79.js","assets/OnboardingSurvey-3783d7af.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),Zl=S.lazy(()=>ze(()=>import("./TermsOfServicePage-b815914e.js"),["assets/TermsOfServicePage-b815914e.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a0a74e79.js","assets/OnboardingSurvey-3783d7af.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),ec=S.lazy(()=>ze(()=>import("./AdminFAQPage-e97598ea.js"),["assets/AdminFAQPage-e97598ea.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/card-337a2a4f.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),tc=S.lazy(()=>ze(()=>import("./DownloadPage-a0f9189f.js"),["assets/DownloadPage-a0f9189f.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a0a74e79.js","assets/OnboardingSurvey-3783d7af.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),sc=S.lazy(()=>ze(()=>import("./VideoCallPage-1f2ee233.js"),["assets/VideoCallPage-1f2ee233.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/card-337a2a4f.js","assets/useWebRTC-25f2080c.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),rc=S.lazy(()=>ze(()=>import("./PublicFormPage-5f6f14fb.js"),["assets/PublicFormPage-5f6f14fb.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),ic=S.lazy(()=>ze(()=>import("./PatientIntakePage-6508e6d5.js"),["assets/PatientIntakePage-6508e6d5.js","assets/vendor-ui-1f4695e3.js","assets/vendor-react-c35372bd.js","assets/vendor-utils-a892ab91.js","assets/vendor-editor-8f9f6f2d.js"])),nc=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("img",{src:no,alt:"GreenoFig Logo",className:"w-24 h-24 animate-pulse"})}),oc=({children:t})=>{const{user:s,userProfile:r,loading:i}=io(),n=E();return s&&r?t:i&&!s?e.jsx(nc,{}):s?t:e.jsx(D,{to:"/login",state:{from:n},replace:!0})},ac=({children:t})=>{const{user:s,userProfile:r,loading:i}=io();return i&&!s?e.jsx(nc,{}):"admin"!==(null==r?void 0:r.role)&&"super_admin"!==(null==r?void 0:r.role)?e.jsx(D,{to:"/app",replace:!0}):t},lc=({children:t})=>{const{user:s,userProfile:r,loading:i}=io();return i&&!s?e.jsx(nc,{}):["admin","super_admin","nutritionist"].includes(null==r?void 0:r.role)?t:e.jsx(D,{to:"/app",replace:!0})},cc=()=>{const{user:t,userProfile:s,loading:r}=io();if(r||t&&!s)return e.jsx(nc,{});if(!t)return e.jsx(D,{to:"/login",replace:!0});if(!s)return e.jsx(D,{to:"/login",replace:!0});const i=s.role;return"admin"===i||"super_admin"===i?e.jsx(D,{to:"/app/admin",replace:!0}):"nutritionist"===i?e.jsx(D,{to:"/app/nutritionist/dashboard",replace:!0}):e.jsx(D,{to:"/app/user",replace:!0})},uc=({children:t})=>{const{user:s,userProfile:r,loading:i}=io();if(i)return t;if(s&&r){const t=r.role;return"admin"===t||"super_admin"===t?e.jsx(D,{to:"/app/admin",replace:!0}):"nutritionist"===t?e.jsx(D,{to:"/app/nutritionist/dashboard",replace:!0}):e.jsx(D,{to:"/app/user",replace:!0})}return t},dc=()=>{const{user:t,loading:s}=io();return s?e.jsx(nc,{}):t?e.jsx(D,{to:"/app",replace:!0}):e.jsx(D,{to:"/home",replace:!0})};function hc(){const t=E();return e.jsxs(e.Fragment,{children:[e.jsx(Sl,{}),e.jsxs(ps,{children:[e.jsx("title",{children:"GreenoFig - AI-Powered Health & Wellness"}),e.jsx("meta",{name:"description",content:"Your AI-Powered Health Companion. Achieve your wellness goals with personalized nutrition, fitness, and lifestyle coaching."})]}),e.jsx(S.Suspense,{fallback:e.jsx(nc,{}),children:e.jsx(V,{mode:"wait",children:e.jsxs(R,{location:t,children:[e.jsx(I,{path:"/login",element:e.jsx(ya,{logoUrl:no})}),e.jsx(I,{path:"/signup",element:e.jsx(ya,{logoUrl:no,initialIsLogin:!1})}),e.jsx(I,{path:"/reset-password",element:e.jsx(zl,{})}),e.jsx(I,{path:"/form/:linkCode",element:e.jsx(rc,{})}),e.jsx(I,{path:"/patientinfo/:linkCode",element:e.jsx(ic,{})}),e.jsxs(I,{path:"/app",element:e.jsx(oc,{children:e.jsx(Ja,{logoUrl:no})}),children:[e.jsx(I,{index:!0,element:e.jsx(cc,{})}),e.jsx(I,{path:"user",element:e.jsx(Rl,{logoUrl:no})}),e.jsx(I,{path:"nutritionist",element:e.jsx(Il,{logoUrl:no})}),e.jsx(I,{path:"nutritionist/dashboard",element:e.jsx(Il,{logoUrl:no})}),e.jsx(I,{path:"nutritionist/clients",element:e.jsx(Il,{logoUrl:no})}),e.jsx(I,{path:"nutritionist/meals",element:e.jsx(Il,{logoUrl:no})}),e.jsx(I,{path:"nutritionist/schedule",element:e.jsx(Il,{logoUrl:no})}),e.jsx(I,{path:"nutritionist/messages",element:e.jsx(Il,{logoUrl:no})}),e.jsx(I,{path:"nutritionist/analytics",element:e.jsx(Il,{logoUrl:no})}),e.jsx(I,{path:"nutritionist/success",element:e.jsx(Il,{logoUrl:no})}),e.jsx(I,{path:"nutritionist/reports",element:e.jsx(Il,{logoUrl:no})}),e.jsx(I,{path:"nutritionist/resources",element:e.jsx(Il,{logoUrl:no})}),e.jsx(I,{path:"nutritionist/blog",element:e.jsx(Il,{logoUrl:no})}),e.jsx(I,{path:"nutritionist/forms",element:e.jsx(Il,{logoUrl:no})}),e.jsx(I,{path:"nutritionist/settings",element:e.jsx(Il,{logoUrl:no})}),e.jsx(I,{path:"nutritionist/blog/new",element:e.jsx(lc,{children:e.jsx(Fl,{logoUrl:no})})}),e.jsx(I,{path:"nutritionist/blog/edit/:postId",element:e.jsx(lc,{children:e.jsx(Fl,{logoUrl:no})})}),e.jsx(I,{path:"admin",element:e.jsx(Dl,{logoUrl:no})}),e.jsx(I,{path:"admin/blog/new",element:e.jsx(lc,{children:e.jsx(Fl,{logoUrl:no})})}),e.jsx(I,{path:"admin/blog/edit/:postId",element:e.jsx(lc,{children:e.jsx(Fl,{logoUrl:no})})}),e.jsx(I,{path:"admin/blog/tags",element:e.jsx(ac,{children:e.jsx(Ml,{logoUrl:no})})}),e.jsx(I,{path:"admin/faq",element:e.jsx(ac,{children:e.jsx(ec,{})})}),e.jsx(I,{path:"admin/revenue",element:e.jsx(ac,{children:e.jsx(ql,{})})}),e.jsx(I,{path:"profile",element:e.jsx($l,{logoUrl:no})}),e.jsx(I,{path:"billing",element:e.jsx(Wl,{})}),e.jsx(I,{path:"support",element:e.jsx(Hl,{})}),e.jsx(I,{path:"ai-coach",element:e.jsx(Ul,{})}),e.jsx(I,{path:"nutrition",element:e.jsx(Gl,{})}),e.jsx(I,{path:"fitness",element:e.jsx(Vl,{})}),e.jsx(I,{path:"progress",element:e.jsx(Yl,{})}),e.jsx(I,{path:"messages",element:e.jsx(Kl,{})}),e.jsx(I,{path:"forms",element:e.jsx(Jl,{})}),e.jsx(I,{path:"appointments",element:e.jsx(Ql,{})})]}),e.jsx(I,{path:"/onboarding",element:e.jsx(oc,{children:e.jsx(Ll,{logoUrl:no})})}),e.jsx(I,{path:"/survey",element:e.jsx(Bl,{logoUrl:no})}),e.jsx(I,{path:"/home",element:e.jsx(uc,{children:e.jsx(jl,{logoUrl:no})})}),e.jsx(I,{path:"/features",element:e.jsx(uc,{children:e.jsx(Tl,{logoUrl:no})})}),e.jsx(I,{path:"/pricing",element:e.jsx(uc,{children:e.jsx(Pl,{logoUrl:no})})}),e.jsx(I,{path:"/download",element:e.jsx(uc,{children:e.jsx(tc,{logoUrl:no})})}),e.jsx(I,{path:"/blog",element:e.jsx(uc,{children:e.jsx(Cl,{logoUrl:no})})}),e.jsx(I,{path:"/blog/:postId",element:e.jsx(uc,{children:e.jsx(Cl,{logoUrl:no})})}),e.jsx(I,{path:"/reviews",element:e.jsx(uc,{children:e.jsx(El,{logoUrl:no})})}),e.jsx(I,{path:"/contact",element:e.jsx(uc,{children:e.jsx(Nl,{logoUrl:no})})}),e.jsx(I,{path:"/faq",element:e.jsx(uc,{children:e.jsx(Al,{logoUrl:no})})}),e.jsx(I,{path:"/about",element:e.jsx(uc,{children:e.jsx(Ol,{logoUrl:no})})}),e.jsx(I,{path:"/privacy-policy",element:e.jsx(Xl,{logoUrl:no})}),e.jsx(I,{path:"/terms-of-service",element:e.jsx(Zl,{logoUrl:no})}),e.jsx(I,{path:"/call/:roomId",element:e.jsx(sc,{})}),e.jsx(I,{path:"/",element:e.jsx(dc,{})}),e.jsx(I,{path:"/*",element:e.jsx(D,{to:"/home",replace:!0})})]},t.pathname)})}),e.jsx(Es,{}),e.jsx(kl,{}),e.jsx(_l,{})]})}const pc=new class{constructor(){this.isInitialized=!1}init(){this.isInitialized||(window.onerror=(e,t,s,r,i)=>(this.logError({message:e.toString(),stack:null==i?void 0:i.stack,type:"runtime_error",url:window.location.href,source:t,line:s,column:r}),!1),window.addEventListener("unhandledrejection",e=>{var t;this.logError({message:`Unhandled Promise Rejection: ${e.reason}`,stack:null==(t=e.reason)?void 0:t.stack,type:"promise_rejection",url:window.location.href})}),this.isInitialized=!0)}async logError({message:e,stack:t="",type:s="unknown",componentName:r="unknown",severity:i="medium",url:n=window.location.href,source:o="",line:a=null,column:l=null,userId:c=null}){try{if(!c){const{data:{user:e}}=await Xn.auth.getUser();c=(null==e?void 0:e.id)||null}const u={error_message:e,error_stack:t,error_type:s,component_name:r,user_id:c,user_agent:navigator.userAgent,url:n,severity:i,status:"open",source_file:o,line_number:a,column_number:l,browser_info:{language:navigator.language,platform:navigator.platform,screen:{width:window.screen.width,height:window.screen.height}}},{error:d}=await Xn.from("error_logs").insert([u])}catch(u){}}log(e,t="unknown",s="medium"){this.logError({message:e.message||e.toString(),stack:e.stack,type:"manual_log",componentName:t,severity:s})}};"undefined"!=typeof window&&pc.init();const{slice:gc,forEach:mc}=[];const fc=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,yc={create(e,t,s,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};s&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+60*s*1e3)),r&&(i.domain=r),document.cookie=function(e,t){const s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"};let r=`${e}=${encodeURIComponent(t)}`;if(s.maxAge>0){const e=s.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(e)}`}if(s.domain){if(!fc.test(s.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${s.domain}`}if(s.path){if(!fc.test(s.path))throw new TypeError("option path is invalid");r+=`; Path=${s.path}`}if(s.expires){if("function"!=typeof s.expires.toUTCString)throw new TypeError("option expires is invalid");r+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(r+="; HttpOnly"),s.secure&&(r+="; Secure"),s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(r+="; Partitioned"),r}(e,t,i)},read(e){const t=`${e}=`,s=document.cookie.split(";");for(let r=0;r<s.length;r++){let e=s[r];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var vc={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!=typeof document)return yc.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:s,cookieMinutes:r,cookieDomain:i,cookieOptions:n}=t;s&&"undefined"!=typeof document&&yc.create(s,e,r,i,n)}},bc={name:"querystring",lookup(e){var t;let s,{lookupQuerystring:r}=e;if("undefined"!=typeof window){let{search:e}=window.location;!window.location.search&&(null==(t=window.location.hash)?void 0:t.indexOf("?"))>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const i=e.substring(1).split("&");for(let t=0;t<i.length;t++){const e=i[t].indexOf("=");if(e>0){i[t].substring(0,e)===r&&(s=i[t].substring(e+1))}}}return s}},wc={name:"hash",lookup(e){var t;let s,{lookupHash:r,lookupFromHashIndex:i}=e;if("undefined"!=typeof window){const{hash:e}=window.location;if(e&&e.length>2){const n=e.substring(1);if(r){const e=n.split("&");for(let t=0;t<e.length;t++){const i=e[t].indexOf("=");if(i>0){e[t].substring(0,i)===r&&(s=e[t].substring(i+1))}}}if(s)return s;if(!s&&i>-1){const s=e.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(s))return;return null==(t=s["number"==typeof i?i:0])?void 0:t.replace("/","")}}}return s}};let xc=null;const _c=()=>{if(null!==xc)return xc;try{if(xc="undefined"!=typeof window&&null!==window.localStorage,!xc)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){xc=!1}return xc};var kc={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&_c())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:s}=t;s&&_c()&&window.localStorage.setItem(s,e)}};let Sc=null;const jc=()=>{if(null!==Sc)return Sc;try{if(Sc="undefined"!=typeof window&&null!==window.sessionStorage,!Sc)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){Sc=!1}return Sc};var Tc={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&jc())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:s}=t;s&&jc()&&window.sessionStorage.setItem(s,e)}},Pc={name:"navigator",lookup(e){const t=[];if("undefined"!=typeof navigator){const{languages:e,userLanguage:s,language:r}=navigator;if(e)for(let i=0;i<e.length;i++)t.push(e[i]);s&&t.push(s),r&&t.push(r)}return t.length>0?t:void 0}},Cc={name:"htmlTag",lookup(e){let t,{htmlTag:s}=e;const r=s||("undefined"!=typeof document?document.documentElement:null);return r&&"function"==typeof r.getAttribute&&(t=r.getAttribute("lang")),t}},Ec={name:"path",lookup(e){var t;let{lookupFromPathIndex:s}=e;if("undefined"==typeof window)return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(r))return;return null==(t=r["number"==typeof s?s:0])?void 0:t.replace("/","")}},Nc={name:"subdomain",lookup(e){var t,s;let{lookupFromSubdomainIndex:r}=e;const i="number"==typeof r?r+1:1,n="undefined"!=typeof window&&(null==(s=null==(t=window.location)?void 0:t.hostname)?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(n)return n[i]}};let Ac=!1;try{document.cookie,Ac=!0}catch(Fc){}const Oc=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Ac||Oc.splice(1,1);class Rc{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return mc.call(gc.call(arguments,1),t=>{if(t)for(const s in t)void 0===e[s]&&(e[s]=t[s])}),e}(t,this.options||{},{order:Oc,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"==typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(vc),this.addDetector(bc),this.addDetector(kc),this.addDetector(Tc),this.addDetector(Pc),this.addDetector(Cc),this.addDetector(Ec),this.addDetector(Nc),this.addDetector(wc)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach(e=>{if(this.detectors[e]){let s=this.detectors[e].lookup(this.options);s&&"string"==typeof s&&(s=[s]),s&&(t=t.concat(s))}}),t=t.filter(e=>{return null!=e&&!("string"==typeof(t=e)&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(e=>e.test(t)));var t}).map(e=>this.options.convertDetectedLanguage(e)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)}))}}Rc.type="languageDetector";const Ic={en:{translation:{nav:{home:"Home",features:"Features",pricing:"Pricing",blog:"Blog",reviews:"Reviews",contact:"Contact",faq:"FAQ",about:"About",download:"Download",login:"Login",signup:"Sign Up",dashboard:"Dashboard",logout:"Logout"},dashboard:{title:"Dashboard",welcome:"Welcome",overview:"Overview",myProgress:"My Progress",meals:"Meals",workouts:"Workouts",analytics:"Analytics",settings:"Settings",profile:"Profile",billing:"Billing",support:"Support",todaysMeals:"Today's Meals",todaysWorkout:"Today's Workout",weeklyProgress:"Weekly Progress",goals:"Goals",achievements:"Achievements",recentActivity:"Recent Activity",quickActions:"Quick Actions",generateMealPlan:"Generate Meal Plan",generateWorkout:"Generate Workout",trackProgress:"Track Progress",viewReports:"View Reports"},nutritionistNav:{dashboard:"Dashboard",clients:"Clients",forms:"Client Forms",mealPlans:"Meal Plans",schedule:"Schedule",messages:"Messages",analytics:"Analytics",clientSuccess:"Client Success",reports:"Reports",resources:"Resources",blog:"Blog",settings:"Settings"},home:{hero:{title:"Your Professional Health Companion",subtitle:"Achieve your wellness goals with hyper-personalized nutrition, fitness, and lifestyle coaching guided by certified nutritionists and registered dietitians.",getStarted:"Get Started",learnMore:"Explore Features"},features:{title:"Transform Your Health Journey",subtitle:"Unlock your full potential with our suite of professionally designed features.",aiMealPlans:"Expert Meal Plans",aiMealPlansDesc:"Get delicious, easy-to-make meal plans tailored to your goals and dietary preferences by certified nutritionists.",personalizedWorkouts:"Personalized Workouts",personalizedWorkoutsDesc:"Custom-built exercise routines that adapt to your progress and keep you challenged.",aiCoach:"Your Professional Coach",aiCoachDesc:"24/7 guidance and motivation from your certified nutrition team."},pricing:{title:"Choose Your Perfect Plan",subtitle:"Simple, transparent pricing. Save 25% with any yearly plan!",mostPopular:"Most Popular",perMonth:"/mo",choosePlan:"Choose",viewAllPlans:"View All Plans & Features"},howItWorks:{title:"How It Works",subtitle:"Start your transformation in three simple steps.",step1Title:"Tell Us Your Goals",step1Text:"Complete a quick survey to help our nutritionists understand you.",step2Title:"Get Your Personalized Plan",step2Text:"Receive your unique fitness and nutrition plan instantly.",step3Title:"Achieve Your Best Self",step3Text:"Track your progress, adapt, and reach your wellness goals."},whyChoose:{title:"Why Choose GreenoFig?",subtitle:"Join thousands of users transforming their health",scienceBacked:"Science-Backed",scienceBackedDesc:"Plans built on the latest nutrition and exercise research.",personalizedAI:"Personalized Coaching",personalizedAIDesc:"Evidence-based methods that adapt to your unique needs.",support247:"24/7 Support",support247Desc:"Get help whenever you need it from our expert team."},reviews:{title:"Loved by users worldwide",review1:"GreenoFig changed my life. I've lost 20 pounds and have never felt more energetic. The professional coach is like having a personal cheerleader!",review2:"As a busy professional, the meal plans are a lifesaver. Healthy eating has never been so easy and delicious.",review3:"I love how it syncs with my watch. Seeing all my health data in one place is incredibly motivating. Highly recommend!",author1:"Sarah L.",author2:"Mike T.",author3:"Jessica P."},cta:{title:"Ready to Transform Your Health?",subtitle:"Join thousands of users already on their wellness journey",button:"Start Your Free Trial"}},pricing:{title:"Choose Your Perfect Plan",subtitle:"Simple, transparent pricing. Save 25% with any yearly plan!",monthly:"Monthly",yearly:"Yearly",mostPopular:"Most Popular",perMonth:"/mo",perYear:"/yr",selectPlan:"Select Plan",currentPlan:"Current Plan",upgrade:"Upgrade",viewAllPlans:"View All Plans & Features",freePlan:"Free",basicPlan:"Basic",premiumPlan:"Premium",ultimatePlan:"Ultimate",elitePlan:"Elite",planDescriptions:{Base:"Get started with essential health tracking features",Premium:"Advanced features for serious fitness enthusiasts",Ultimate:"Everything you need to reach peak performance",Elite:"The ultimate wellness experience with VIP support"},save25:"Save 25%",billed:"Billed",billedMonthly:"Billed monthly",billedYearly:"Billed yearly",features:"Features",popularChoice:"Popular Choice",bestValue:"Best Value",planFeatures:{base:{mealPlans:"2 AI meal plans per month",workoutPlans:"2 AI workout plans per month",chatMessages:"10 AI chat messages per month",basicTracking:"Basic progress tracking",communityAccess:"Community access",mobileAccess:"Mobile app access",smartLogging:"Smart meal logging"},premium:{adFree:" Ad-free experience",unlimitedMeals:"Unlimited AI meal plans",unlimitedWorkouts:"Unlimited AI workout plans",unlimitedChat:"Unlimited AI chat support",analytics:"Advanced progress analytics",goalTracking:"Goal tracking & insights",customPreferences:"Custom meal preferences",wearableSync:"Wearable device sync",reports:"Weekly & monthly reports",communityAccess:"Community access",mobileAccess:"Mobile app access"},ultimate:{everythingPremium:" Everything in Premium",nutritionists:"Access to certified nutritionists",prioritySupport:"Priority customer support",videoConsultations:"Video consultations (2/month)",mealPlanningTools:"Advanced meal planning tools",workoutBuilder:"Custom workout builder",performanceOptimization:"Performance optimization",bodyAnalysis:"Body composition analysis",exclusiveChallenges:"Exclusive challenges"},elite:{everythingUltimate:" Everything in Ultimate",photoRecognition:" Photo food recognition & logging",unlimitedCoaching:"Unlimited video coaching",doctorConsultations:"Schedule virtual consultations with licensed doctors for health concerns and medical advice (2/month)",appointmentScheduling:"Book appointments with health professionals directly through the platform",priority247:"Priority 24/7 support",supplementPlan:"Personalized supplement plan",vipAccess:"VIP community access",concierge:"Concierge service"}}},features:{title:"Powerful Features for Your Health",subtitle:"Everything you need to achieve your health goals",aiCoach:"AI Coach",aiCoachDesc:"24/7 personalized coaching powered by advanced AI",mealPlanning:"Meal Planning",mealPlanningDesc:"Custom meal plans tailored to your dietary needs",workoutTracking:"Workout Tracking",workoutTrackingDesc:"Track your exercises and monitor progress",progressMonitoring:"Progress Monitoring",progressMonitoringDesc:"Detailed analytics and insights on your journey",nutritionAnalysis:"Nutrition Analysis",nutritionAnalysisDesc:"Deep dive into your nutritional intake",smartRecommendations:"Smart Recommendations",smartRecommendationsDesc:"AI-powered suggestions based on your goals",wearableSync:"Wearable Sync",wearableSyncDesc:"Seamlessly integrate with your fitness devices",expertSupport:"Expert Support",expertSupportDesc:"Get help from certified nutritionists and trainers"},blog:{title:"Health & Wellness Blog",subtitle:"Expert insights, tips, and inspiration for your wellness journey",readMore:"Read More",backToBlog:"Back to Blog",relatedPosts:"Related Posts",tableOfContents:"Table of Contents",shareArticle:"Share Article",noPostsFound:"No posts found",loadingPosts:"Loading posts..."},contact:{title:"Get In Touch",subtitle:"Have questions? We'd love to hear from you.",pageDescription:"Have questions or feedback? We'd love to hear from you. Reach out and we'll get back to you shortly.",metaDescription:"Get in touch with the GreenoFig team. We're here to answer your questions and help with your health journey.",name:"Name",fullName:"Full Name",email:"Email",subject:"Subject",message:"Message",send:"Send Message",sending:"Sending...",successMessage:"Thank you for your message! We'll get back to you soon.",errorMessage:"Something went wrong. Please try again.",generalInquiry:"General Inquiry",supportEmail:"support@greenofig.com",salesEmail:"sales@greenofig.com",namePlaceholder:"John Doe",emailPlaceholder:"you@example.com",messagePlaceholder:"Your message...",messageSent:"Message Sent! (Just Kidding )",demoMessage:"This is a demo, but in a real app, your message would be on its way!"},faq:{title:"Frequently Asked Questions",subtitle:"Find answers to common questions about GreenoFig",pageDescription:"Have questions? We've got answers. If you can't find what you're looking for, feel free to contact us.",metaDescription:"Find answers to frequently asked questions about GreenoFig's services, plans, and features.",generalQuestions:"General Questions",subscriptionQuestions:"Subscription & Billing",technicalQuestions:"Technical Support",searchPlaceholder:"Search FAQs...",errorFetching:"Error fetching FAQs",noFaqsFound:"No FAQs Found.",checkBackSoon:"Check back soon or contact support if you have questions."},about:{title:"About GreenoFig",subtitle:"Empowering your health journey with AI",metaDescription:"Learn about the mission, philosophy, and story behind GreenoFig.",ourMission:"Our Mission",ourMissionText:"To make personalized health and wellness accessible to everyone through cutting-edge AI technology.",ourStory:"Our Story",ourTeam:"Our Team",ourValues:"Our Values",errorFetchingContent:"Error fetching page content",contentNotAvailable:"Content not available.",checkBackLater:"Please check back later or contact support."},reviews:{title:"User Reviews",subtitle:"See what our community has to say",verified:"Verified User",writeReview:"Write a Review",allReviews:"All Reviews",rating:"Rating",pageTitle:"Success Stories from Our Community",pageDescription:"See how GreenoFig is helping people just like you achieve their health and wellness goals.",metaDescription:"See what our members are saying about their success with GreenoFig. Real stories from real people transforming their health.",shareYourStory:"Share Your Story",experienceDescription:"We'd love to hear about your experience with GreenoFig.",yourName:"Your Name",namePlaceholder:"John Doe",reviewTitle:"Review Title",reviewTitlePlaceholder:"An amazing experience!",yourReview:"Your Review",reviewPlaceholder:"Tell us what you think...",ratingRequired:"Rating *",submitting:"Submitting...",submitReview:"Submit Review",noReviewsYet:"No Reviews Yet!",beTheFirst:"Be the first to share your success story with GreenoFig.",ratingRequiredError:"Rating Required",ratingRequiredMessage:"Please select a star rating before submitting.",reviewSubmitted:"Review Submitted!",thankYou:"Thank you for sharing your experience with us.",submissionFailed:"Submission Failed",tryAgainLater:"Please try again later.",errorLoadingReviews:"Error loading reviews"},download:{title:"Download GreenoFig",subtitle:"Get the app on your device",downloadIOS:"Download on App Store",downloadAndroid:"Get it on Google Play",comingSoon:"Coming Soon",getToday:"Get GreenoFig Today",appDescription:"Transform your health with AI-powered coaching. Available now on iOS, coming soon to Android.",joinBeta:"Join Beta Testing",betaDescription:"Want early access? Install directly on your iPhone using TestFlight.",contactInvite:"Contact us for invite",iosVersion:"iOS 14.0 or later",androidVersion:"Android 8.0 or later",seeInAction:"See It In Action",sneakPeek:"A sneak peek at what awaits you inside the app",screenshots:{dashboard:"Dashboard",dashboardDesc:"Track your daily health metrics",mealPlans:"Meal Plans",mealPlansDesc:"Delicious recipes personalized for you",workouts:"Workouts",workoutsDesc:"Exercise plans that work",aiCoach:"AI Coach",aiCoachDesc:"Chat with your personal coach"},powerfulFeatures:"Powerful Features",featuresDescription:"Everything you need to achieve your health goals in one app",appFeatures:{aiMealPlans:"AI Meal Plans",aiMealPlansDesc:"Personalized nutrition tailored to your goals",customWorkouts:"Custom Workouts",customWorkoutsDesc:"Exercise routines that adapt to your progress",aiCoach247:"24/7 AI Coach",aiCoach247Desc:"Your personal health companion",foodRecognition:"Food Recognition",foodRecognitionDesc:"Snap photos to log meals instantly",progressTracking:"Progress Tracking",progressTrackingDesc:"Watch your transformation in real-time",smartReminders:"Smart Reminders",smartRemindersDesc:"Never miss a meal or workout"},lovedByThousands:"Loved by Thousands",rating:"4.9",basedOnReviews:"Based on 10,000+ reviews",userReviews:{review1:"GreenoFig changed my life! Lost 20 pounds and feel amazing.",review2:"Best health app I've ever used. The AI coach is incredible!",review3:"So easy to use and the results speak for themselves!"},readyToTransform:"Ready to Transform Your Health?",joinThousands:"Join thousands of users who have already started their journey to a healthier life",downloadNow:"Download Now"},userDashboard:{welcome:"Welcome back",welcomeMessage:"Here's your wellness snapshot for today. Let's make it a great one!",plan:"Plan",bonusMessages:"bonus AI message",bonusMessagesPlural:"bonus AI messages",todayOverview:"Today's Overview",premiumFeatures:"Premium Features",unlockPowerfulTools:"Unlock powerful tools to supercharge your health journey",advancedToolsAvailable:"Advanced tools available in your plan",upgradeButton:"Upgrade",photoFoodRecognition:"Photo Food Recognition",photoFoodRecognitionTier:"Elite",barcodeScanner:"Barcode Scanner",barcodeScannerTier:"Premium+",wearableDevices:"Wearable Devices",wearableDevicesTier:"Premium+",foodDatabase:"Food Database",foodDatabaseTier:"Premium+",messageNutritionist:"Message Nutritionist",messageNutritionistTier:"Ultimate+",nutritionistMessaging:"Nutritionist Messaging",connectWithNutritionist:"Connect with your personal nutritionist for guidance and support",calories:"Calories",protein:"Protein",carbs:"Carbs",fats:"Fats",waterIntake:"Water Intake",stepsToday:"Steps Today",activeMinutes:"Active Minutes",sleepHours:"Sleep Hours",currentWeight:"Current Weight",targetWeight:"Target Weight",bmi:"BMI",bodyFat:"Body Fat %",quickActions:"Quick Actions",weight:"Weight",todaysWeight:"Today's weight",lastLoggedWeight:"Last logged weight",caloriesToday:"Calories Today",burned:"Burned",consumed:"consumed",sleep:"Sleep",notLogged:"Not logged",logYourSleep:"Log your sleep",yourStreaks:"Your Streaks",day:"day",days:"days",streak:"streak",best:"Best",recentActivity:"Recent Activity",noActivityYet:"No activity yet. Start logging your health data!",yourGoals:"Your Goals",noGoalsSet:"No goals set yet. Update your profile to add goals!",aiPoweredTools:"AI-Powered Tools",earnBonusFeatures:"Earn Bonus Features!",watchVideoForBonus:"Watch a short video to get +1 extra AI message",watchAd:"Watch Ad",previewMode:"Preview Mode",previewModeDemo:"This is a demo - no actual changes are made",previewModeRefresh:"Data refresh is disabled in preview mode",rewardEarned:"Reward Earned!",rewardEarnedDesc:"You've earned +1 bonus AI message!"},quickLog:{logWeight:"Log Weight",logYourWeight:"Log Your Weight",date:"Date",weightKg:"Weight (kg)",bodyFatOptional:"Body Fat % (optional)",cancel:"Cancel",logging:"Logging...",weightLogged:"Weight Logged!",successfullyLogged:"Successfully logged",errorLoggingWeight:"Failed to log weight. Please try again.",logMeal:"Log Meal",logYourMeal:"Log Your Meal",mealType:"Meal Type",breakfast:"Breakfast",lunch:"Lunch",dinner:"Dinner",snack:"Snack",mealName:"Meal Name",mealNamePlaceholder:"e.g., Grilled Chicken Salad",descriptionOptional:"Description (optional)",descriptionPlaceholder:"Any additional details...",calories:"Calories",proteinG:"Protein (g)",carbsG:"Carbs (g)",fatsG:"Fats (g)",mealLogged:"Meal Logged!",errorLoggingMeal:"Failed to log meal. Please try again.",logWorkout:"Log Workout",logYourWorkout:"Log Your Workout",workoutType:"Workout Type",running:"Running",walking:"Walking",cycling:"Cycling",swimming:"Swimming",weightTraining:"Weight Training",yoga:"Yoga",hiit:"HIIT",other:"Other",durationMin:"Duration (min)",caloriesBurned:"Calories Burned",notesOptional:"Notes (optional)",notesPlaceholder:"How did it go?",workoutLogged:"Workout Logged!",errorLoggingWorkout:"Failed to log workout. Please try again.",logSleep:"Log Sleep",logYourSleep:"Log Your Sleep",sleepDuration:"Sleep Duration (hours)",sleepQuality:"Sleep Quality",excellent:"Excellent",good:"Good",fair:"Fair",poor:"Poor",sleepLogged:"Sleep Logged!",errorLoggingSleep:"Failed to log sleep. Please try again.",waterIntake:"Water Intake",glasses:"glasses",remove:"Remove",addGlass:"Add Glass",oneGlassEquals:"1 glass = 250ml",errorUpdatingWater:"Failed to update water intake.",waterLogged:"Water Logged",addedWater:"Added {{amount}}ml of water",nightOf:"Night of",selectNight:"Select the night you went to bed",hoursOfSleep:"Hours of Sleep",cardio:"Cardio",strengthTraining:"Strength Training",sports:"Sports",pilates:"Pilates",workoutName:"Workout Name",workoutNamePlaceholder:"e.g., Morning Run",durationMinutes:"Duration (minutes)",intensity:"Intensity",light:"Light",moderate:"Moderate",intense:"Intense",howDidYouFeel:"How did you feel?",exhausted:"Exhausted",tired:"Tired",energized:"Energized",greatJobCompleting:"Great job completing"},gamification:{level:"Level",levelProgress:"Level Progress",xpToNextLevel:"XP to next level",totalXP:"Total XP",badges:"Badges",badgeGallery:"Badge Gallery",achievements:"Achievements",unlocked:"Unlocked",locked:"Locked",streakTracker:"Streak Tracker",currentStreak:"Current Streak",longestStreak:"Longest Streak",leaderboard:"Leaderboard",yourRank:"Your Rank",topUsers:"Top Users",points:"points",dailyChallenge:"Daily Challenge",weeklyChallenge:"Weekly Challenge",challengeCompleted:"Challenge Completed!",keepItUp:"Keep it up!",almostThere:"Almost there!",newBadgeUnlocked:"New Badge Unlocked!",congratulations:"Congratulations!"},premiumFeatures:{dailyHabits:"Daily Habits",trackYourHabits:"Track your daily habits and build consistency",weeklyGoals:"Weekly Goals",setAndTrackGoals:"Set and track your weekly goals",progressPhotos:"Progress Photos",captureYourJourney:"Capture and compare your transformation",myMealPlan:"My Meal Plan",viewMealPlan:"View your personalized meal plan",recipeDatabase:"Recipe Database",browseRecipes:"Browse healthy recipes",macroTracking:"Macro Tracking",trackYourMacros:"Track your macronutrients",exerciseLibrary:"Exercise Library",browseExercises:"Browse exercise tutorials",goalTracking:"Goal Tracking",setSmartGoals:"Set and achieve SMART goals",healthStreaks:"Health Streaks",buildHealthyHabits:"Build and maintain healthy habits",customNotifications:"Custom Notifications",setReminders:"Set personalized reminders",motivationalSupport:"Motivational Support",getDailyMotivation:"Get daily motivation and tips",advancedAnalytics:"Advanced Analytics",deepInsights:"Deep insights into your health data",progressReports:"Progress Reports",weeklyMonthlyReports:"Weekly and monthly progress reports",workoutAnalytics:"Workout Analytics",trackWorkoutProgress:"Track your workout performance",dataExport:"Data Export",exportYourData:"Export your health data",dnaAnalysis:"DNA Analysis",personalizedGenetics:"Personalized genetic insights",masterclassVideos:"Masterclass Videos",expertTutorials:"Expert video tutorials",doctorConsultations:"Doctor Consultations",virtualConsultations:"Virtual consultations with doctors",appointmentScheduling:"Appointment Scheduling",bookAppointments:"Book appointments with professionals",dailyLessons:"Daily Lessons",learnSomethingNew:"Learn something new every day"},nutritionistDashboard:{title:"Nutritionist Dashboard",myClients:"My Clients",activeClients:"Active Clients",pendingRequests:"Pending Requests",totalConsultations:"Total Consultations",clientProgress:"Client Progress",upcomingAppointments:"Upcoming Appointments",recentMessages:"Recent Messages",createMealPlan:"Create Meal Plan",scheduleConsultation:"Schedule Consultation",viewClientHistory:"View Client History"},adminDashboard:{title:"Admin Dashboard",totalUsers:"Total Users",activeSubscriptions:"Active Subscriptions",revenue:"Revenue",newUsersToday:"New Users Today",userManagement:"User Management",subscriptionManagement:"Subscription Management",contentManagement:"Content Management",analyticsReports:"Analytics & Reports",systemSettings:"System Settings",supportTickets:"Support Tickets"},auth:{login:"Login",signup:"Sign Up",logout:"Logout",email:"Email",password:"Password",confirmPassword:"Confirm Password",forgotPassword:"Forgot Password?",resetPassword:"Reset Password",rememberMe:"Remember me",dontHaveAccount:"Don't have an account?",alreadyHaveAccount:"Already have an account?",signInWithGoogle:"Sign in with Google",signUpWithGoogle:"Sign up with Google",signInWithFacebook:"Sign in with Facebook",orContinueWith:"Or continue with",createAccount:"Create Account",verifyEmail:"Verify Email",resendVerification:"Resend Verification",back:"Back",fullName:"Full Name",processing:"Processing...",tagline:"Your Personal Wellness Companion",signUpForPlan:"Signing up for the",plan:"plan",missingFields:"Missing fields",fillAllFields:"Please fill in all required fields",accountCreated:"Account created! ",welcomeSetup:"Welcome! Let's get you set up."},profile:{title:"My Profile",personalInfo:"Personal Information",firstName:"First Name",lastName:"Last Name",dateOfBirth:"Date of Birth",gender:"Gender",height:"Height",weight:"Weight",targetWeight:"Target Weight",activityLevel:"Activity Level",dietaryPreferences:"Dietary Preferences",allergies:"Allergies",healthGoals:"Health Goals",updateProfile:"Update Profile",changePassword:"Change Password",deleteAccount:"Delete Account"},billing:{title:"Billing & Subscription",currentPlan:"Current Plan",billingCycle:"Billing Cycle",nextBillingDate:"Next Billing Date",paymentMethod:"Payment Method",billingHistory:"Billing History",invoices:"Invoices",updatePaymentMethod:"Update Payment Method",cancelSubscription:"Cancel Subscription",upgradePlan:"Upgrade Plan",downgradePlan:"Downgrade Plan"},footer:{tagline:"Your AI-Powered Health & Wellness Companion",contactUs:"Contact Us",platform:"Platform",updates:"Updates",products:"Products",company:"Company",legal:"Legal",privacyPolicy:"Privacy Policy",termsOfService:"Terms of Service",support:"Support",allRightsReserved:"All rights reserved"},common:{loading:"Loading...",error:"Error",success:"Success",cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",close:"Close",submit:"Submit",search:"Search",filter:"Filter",viewAll:"View All",readMore:"Read More",backToHome:"Back to Home",welcome:"Welcome",getStarted:"Get Started",learnMore:"Learn More",tryFree:"Try Free",comingSoon:"Coming Soon",yes:"Yes",no:"No",confirm:"Confirm",back:"Back",next:"Next",previous:"Previous",finish:"Finish",skip:"Skip",all:"All",none:"None",select:"Select",clear:"Clear",apply:"Apply",reset:"Reset",export:"Export",import:"Import",download:"Download",upload:"Upload",share:"Share",copy:"Copy",copied:"Copied!",print:"Print",refresh:"Refresh",sortBy:"Sort by",showMore:"Show More",showLess:"Show Less",expand:"Expand",collapse:"Collapse"},support:{title:"Support Center",subtitle:"Need help? Submit a ticket and our team will assist you.",quickFeedback:"Quick Feedback",quickFeedbackDesc:"Share your thoughts, suggestions, or report issues quickly",createTicket:"Create Ticket",myTickets:"My Tickets",submitTicket:"Submit a Support Ticket",submitTicketDesc:"Describe your issue and we'll get back to you within 24 hours",myTicketsTitle:"My Support Tickets",myTicketsDesc:"View and track your submitted support tickets",rateExperience:"How would you rate your experience?",ratingExcellent:" Excellent!",ratingGreat:" Great!",ratingGood:" Good",ratingCouldBeBetter:" Could be better",ratingNeedsImprovement:" Needs improvement",feedbackType:"What type of feedback is this?",suggestion:"Suggestion",issue:"Issue",praise:"Praise",tellUsMore:"Tell us more",required:"*",feedbackPlaceholderSuggestion:"What feature or improvement would you like to see?",feedbackPlaceholderIssue:"What issue did you encounter? Please provide details...",feedbackPlaceholderPraise:"What did you love about your experience?",conversationInfo:"Direct conversation with our team",conversationInfoDesc:"Your feedback will create a conversation with our support team. You'll be able to chat with them in the Messages section.",sendFeedback:"Send Feedback",submitting:"Submitting...",subject:"Subject",subjectPlaceholder:"Brief description of your issue",category:"Category",categoryPlaceholder:"Select a category",priority:"Priority",priorityLow:"Low - General inquiry",priorityMedium:"Medium - Standard issue",priorityHigh:"High - Affects my work",priorityUrgent:"Urgent - Critical issue",description:"Description",descriptionPlaceholder:"Please provide as much detail as possible about your issue...",descriptionHelper:"Include steps to reproduce the issue, error messages, or screenshots if applicable",submitButton:"Submit Ticket",statusOpen:"Open",statusInProgress:"In Progress",statusResolved:"Resolved",statusClosed:"Closed",priorityUrgentBadge:"Urgent",priorityHighBadge:"High",priorityMediumBadge:"Medium",priorityLowBadge:"Low",noTicketsYet:"You haven't submitted any tickets yet",ticketNumber:"Ticket #",categoryLabel:"Category:",created:"Created:",updated:"Updated:",resolved:" This issue has been resolved. If you need further assistance, please create a new ticket.",missingInfo:"Missing Information",missingInfoDesc:"Please fill in all required fields",missingFeedbackDesc:"Please provide your feedback",errorCreating:"Error Creating Ticket",ticketCreated:"Support Ticket Created!",ticketCreatedDesc:"A conversation has been started with our support team. Check the Messages page for updates.",errorSubmitting:"Error Submitting Feedback",feedbackSubmitted:"Feedback Submitted! ",feedbackSubmittedDesc:"Thank you! A conversation has been created with our team. Check Messages for any follow-up."},privacy:{title:"Privacy Policy",pageDescription:"Learn how GreenoFig collects, uses, and protects your personal information.",metaDescription:"GreenoFig's privacy policy explains how we collect, use, and protect your personal information.",lastUpdated:"Last Updated:",lastUpdatedDate:"October 24, 2025",intro:"At GreenoFig, we are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, disclose, and safeguard your data when you use our website and services.",section1:{title:"1. Information We Collect",intro:"We collect information that you provide directly to us, including:",items:["Personal information (name, email address, phone number)","Health and wellness data (dietary preferences, fitness goals, health metrics)","Payment information (processed securely through third-party payment processors)","Usage data (how you interact with our platform)","Device information (IP address, browser type, operating system)"]},section2:{title:"2. How We Use Your Information",intro:"We use your information to:",items:["Provide and personalize our health and wellness services","Generate AI-powered meal plans and fitness recommendations","Process payments and manage subscriptions","Send important updates, notifications, and promotional materials","Improve our services and develop new features","Ensure security and prevent fraud","Comply with legal obligations"]},section3:{title:"3. Information Sharing and Disclosure",intro:"We do not sell your personal information. We may share your information with:",items:["Service providers who assist in operating our platform","Payment processors for transaction processing","AI service providers for generating personalized recommendations","Legal authorities when required by law","Healthcare professionals (only with your explicit consent)"]},section4:{title:"4. Data Security",content:"We implement industry-standard security measures to protect your data, including encryption, secure servers, and regular security audits. However, no method of transmission over the internet is 100% secure, and we cannot guarantee absolute security."},section5:{title:"5. Your Rights and Choices",intro:"You have the right to:",items:["Access, update, or delete your personal information","Opt-out of marketing communications","Request a copy of your data","Withdraw consent for data processing","Lodge a complaint with a data protection authority"]},section6:{title:"6. Cookies and Tracking Technologies",intro:"We use cookies and similar technologies to enhance your experience, analyze usage patterns, and deliver personalized content.",whatAreCookies:{title:"What Are Cookies?",content:"Cookies are small text files stored on your device that help us remember your preferences and improve your experience on our platform."},typesTitle:"Types of Cookies We Use:",types:{essential:{title:"Essential Cookies (Required)",content:"These cookies are necessary for the website to function properly. They enable core functionality such as security, authentication, and accessibility features. These cannot be disabled."},functional:{title:"Functional Cookies",content:"These cookies enable enhanced functionality and personalization, such as remembering your preferences, language settings, and customized content."},analytics:{title:"Analytics Cookies",content:"We use analytics tools to understand how visitors interact with our website, helping us improve our services. These cookies collect anonymous data about page visits, session duration, and user behavior."},marketing:{title:"Marketing Cookies",content:"These cookies track your browsing habits to provide you with relevant advertisements and measure the effectiveness of our marketing campaigns."}},managing:{title:"Managing Your Cookie Preferences",intro:"You can control and manage cookies in several ways:",items:["Browser Settings: Most browsers allow you to refuse cookies or delete cookies already stored","Third-party Tools: You can use browser extensions or privacy tools to manage cookies","Opt-out Links: For marketing cookies, you can opt out through industry opt-out pages"],note:"Please note that disabling certain cookies may affect the functionality of our website and limit your access to certain features."}},section7:{title:"7. Children's Privacy",content:"Our services are not intended for individuals under the age of 18. We do not knowingly collect personal information from children. If you believe we have inadvertently collected such information, please contact us immediately."},section8:{title:"8. Changes to This Policy",content:'We may update this Privacy Policy from time to time. We will notify you of any significant changes by posting the new policy on this page and updating the "Last Updated" date.'},section9:{title:"9. International Data Transfers",content:"Your information may be transferred to and processed in countries other than your country of residence. We ensure that all such transfers comply with applicable data protection laws and that your data receives adequate protection."},section10:{title:"10. GDPR Compliance (For EU Users)",intro:"If you are located in the European Economic Area (EEA), you have additional rights under the General Data Protection Regulation (GDPR):",rights:{access:"Right to Access: You can request a copy of your personal data",rectification:"Right to Rectification: You can request correction of inaccurate data",erasure:'Right to Erasure: You can request deletion of your data ("right to be forgotten")',restrict:"Right to Restrict Processing: You can limit how we use your data",portability:"Right to Data Portability: You can receive your data in a structured format",object:"Right to Object: You can object to certain data processing activities"},contact:"To exercise any of these rights, please contact us at privacy@greenofig.com"},section11:{title:"11. CCPA Rights (For California Users)",intro:"If you are a California resident, you have specific rights under the California Consumer Privacy Act (CCPA):",rights:{know:"Right to Know: You can request what personal information we collect, use, and share",delete:"Right to Delete: You can request deletion of your personal information",optOut:"Right to Opt-Out: You can opt-out of the sale of your personal information (Note: We do not sell personal information)",nonDiscrimination:"Right to Non-Discrimination: We will not discriminate against you for exercising your privacy rights"},contact:'To submit a request, email privacy@greenofig.com with "CCPA Request" in the subject line.'},section12:{title:"12. Data Retention",content:"We retain your personal information for as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce our agreements. When you delete your account, we will delete or anonymize your data within 90 days, except where we are required to retain it by law."},section13:{title:"13. Contact Us",intro:"If you have any questions or concerns about this Privacy Policy or our data practices, please contact us at:",email:"Email:",support:"Support:",address:"Address:",addressValue:"GreenoFig Inc., Health & Wellness Division",responseTime:"Response Time:",responseTimeValue:"We aim to respond to all privacy inquiries within 30 days"}},terms:{title:"Terms of Service",pageDescription:"Please read these terms and conditions carefully before using GreenoFig services.",metaDescription:"Terms and conditions for using GreenoFig's AI-powered health and wellness platform.",lastUpdated:"Last Updated:",lastUpdatedDate:"October 24, 2025"},onboarding:{welcomeTitle:"Welcome to GreenoFig",welcomeSubtitle:"Let's personalize your experience.",completeProfile:"Complete Your Profile",personalizeExperience:"Personalize your GreenoFig experience",getPersonalizedGuidance:"Get Personalized Health Guidance",signUpToPlan:"Sign up to create your custom health plan",signUp:"Sign Up",aboutYou:"About You",age:"Age",agePlaceholder:"e.g., 28",gender:"Gender",selectGender:"Select gender",male:"Male",female:"Female",other:"Other",preferNotToSay:"Prefer not to say",bodyMetrics:"Your Body Metrics",metric:"Metric",imperial:"Imperial",height:"Height",weight:"Weight",heightPlaceholderMetric:"e.g., 175",heightPlaceholderImperial:"e.g., 69",weightPlaceholderMetric:"e.g., 70",weightPlaceholderImperial:"e.g., 154",lifestyle:"Your Lifestyle",activityLevel:"Activity Level",activitySedentary:"Sedentary",activitySedentaryDesc:"Little or no exercise",activityLightlyActive:"Lightly Active",activityLightlyActiveDesc:"Light exercise/sports 1-3 days/week",activityModeratelyActive:"Moderately Active",activityModeratelyActiveDesc:"Moderate exercise/sports 3-5 days/week",activityVeryActive:"Very Active",activityVeryActiveDesc:"Hard exercise/sports 6-7 days a week",activitySuperActive:"Super Active",activitySuperActiveDesc:"Very hard exercise & physical job",goals:"Your Goals",goalsSubtitle:"Select your primary health and fitness goals. You can select multiple.",goalLoseWeight:"Lose Weight",goalBuildMuscle:"Build Muscle",goalImproveEndurance:"Improve Endurance",goalEatHealthier:"Eat Healthier",goalIncreaseEnergy:"Increase Energy",setupComplete:"Setup Complete!",setupCompleteDesc:"Your profile is personalized. Get ready to start your wellness journey.",goToDashboard:"Go to Dashboard",back:"Back",next:"Next",finish:"Finish",dietaryPreferences:"Dietary Preferences",dietaryPreferencesSubtitle:"Select any dietary restrictions or preferences you follow. You can select multiple.",dietNone:"No restrictions",dietVegetarian:"Vegetarian",dietVegan:"Vegan",dietGlutenFree:"Gluten-Free",dietDairyFree:"Dairy-Free",dietKeto:"Keto",dietPaleo:"Paleo",dietHalal:"Halal",dietKosher:"Kosher",healthConditions:"Health Conditions",healthConditionsSubtitle:"Do you have any health conditions we should know about? You can select multiple.",conditionNone:"None",conditionDiabetes:"Diabetes",conditionHighBloodPressure:"High Blood Pressure",conditionHeartDisease:"Heart Disease",conditionAsthma:"Asthma",conditionArthritis:"Arthritis",conditionThyroid:"Thyroid Issues",conditionFoodAllergies:"Food Allergies"},survey:{title:"Find Your Perfect Plan",subtitle:"Answer a few questions to get your personalized plan recommendation.",stepProgress:"Step {{step}} of {{total}}",back:"Back",next:"Next",findMyPlan:"Find My Plan",step1:{question:"What is your primary health goal?",description:"This will help us recommend the best starting point for you.",loseWeight:"Lose Weight",buildMuscle:"Build Muscle",improveEndurance:"Improve Endurance",eatHealthier:"Eat Healthier",increaseEnergy:"Increase Energy"},step2:{question:"What's your fitness experience level?",beginner:"Beginner",beginnerDesc:"Just starting my fitness journey.",intermediate:"Intermediate",intermediateDesc:"I work out regularly.",advanced:"Advanced",advancedDesc:"I'm very experienced and train hard."},step3:{question:"What's your budget for a health plan?",description:"Choose a range that works for you.",budgetFriendly:"Budget-Friendly",budgetFriendlyDesc:"Under $10/month",moderate:"Moderate",moderateDesc:"$10-$20/month",premium:"Premium",premiumDesc:"$20-$30/month"},step4:{question:"Any dietary preferences or restrictions?",description:"Select all that apply.",noRestrictions:"No Restrictions",vegetarian:"Vegetarian",vegan:"Vegan",glutenFree:"Gluten-Free",keto:"Keto",halal:"Halal"},step5:{question:"How much time can you dedicate daily?",description:"For workouts and meal preparation.",minimal:"15-30 min/day",minimalDesc:"I have limited time",moderate:"30-60 min/day",moderateDesc:"I can dedicate some time",extensive:"60+ min/day",extensiveDesc:"I have plenty of time"},step6:{question:"What type of guidance do you prefer?",selfGuided:"Self-Guided",selfGuidedDesc:"I prefer to work independently",aiCoach:"AI Coach",aiCoachDesc:"I want AI-powered guidance",professional:"Professional Support",professionalDesc:"I need expert nutritionist help"},step7:{question:"Which features interest you most?",description:"Select all that appeal to you.",mealPlanning:"Meal Planning",workoutPlans:"Workout Plans",progressTracking:"Progress Tracking",aiChat:"AI Chat Support",photoRecognition:"Photo Food Recognition",expertConsultation:"Expert Consultation"},step8:{question:"How would you describe your current health?",excellent:"Excellent",excellentDesc:"No health concerns",good:"Good",goodDesc:"Minor concerns, generally healthy",fair:"Fair",fairDesc:"Managing some health conditions",needsAttention:"Needs Attention",needsAttentionDesc:"Require professional guidance"},step9:{question:"What's your timeline for achieving your goals?",description:"How soon do you want to see results?",relaxed:"Relaxed",relaxedDesc:"6+ months",moderate:"Moderate",moderateDesc:"3-6 months",urgent:"Urgent",urgentDesc:"Within 3 months"}}}},ar:{translation:{nav:{home:"",features:"",pricing:"",blog:"",reviews:"",contact:" ",faq:" ",about:" ",download:"",login:" ",signup:" ",dashboard:" ",logout:" "},dashboard:{nav:{dashboard:" ",aiCoach:" ",nutrition:"",fitness:" ",progress:"",appointments:"",messages:"",forms:"  ",support:"",profile:" ",signOut:" "}},nutritionistNav:{dashboard:" ",clients:"",forms:" ",mealPlans:" ",schedule:"",messages:"",analytics:"",clientSuccess:" ",reports:"",resources:"",blog:"",settings:""},userDashboard:{welcome:" ",welcomeMessage:"   .   !",plan:"",bonusMessages:"   ",bonusMessagesPlural:"   ",todayOverview:"   ",premiumFeatures:" ",unlockPowerfulTools:"     ",advancedToolsAvailable:"    ",upgradeButton:"",photoFoodRecognition:"   ",photoFoodRecognitionTier:"",barcodeScanner:" ",barcodeScannerTier:"+",wearableDevices:"  ",wearableDevicesTier:"+",foodDatabase:"  ",foodDatabaseTier:"+",messageNutritionist:"  ",messageNutritionistTier:"+",nutritionistMessaging:"  ",connectWithNutritionist:"         ",calories:" ",protein:"",carbs:"",fats:"",waterIntake:" ",stepsToday:" ",activeMinutes:" ",sleepHours:" ",currentWeight:" ",targetWeight:" ",bmi:"  ",bodyFat:"   ",quickActions:" ",weight:"",todaysWeight:" ",lastLoggedWeight:"  ",caloriesToday:" ",burned:"",consumed:"",sleep:"",notLogged:" ",logYourSleep:" ",yourStreaks:" ",day:"",days:"",streak:"",best:"",recentActivity:" ",noActivityYet:"   .    !",yourGoals:"",noGoalsSet:"    .      !",aiPoweredTools:"  ",earnBonusFeatures:"  !",watchVideoForBonus:"     +1    ",watchAd:" ",previewMode:" ",previewModeDemo:"   -     ",previewModeRefresh:"     ",rewardEarned:"  !",rewardEarnedDesc:"  +1    !"},profile:{title:" ",personalInfo:" ",firstName:" ",lastName:" ",dateOfBirth:" ",gender:"",height:"",weight:"",targetWeight:" ",activityLevel:" ",dietaryPreferences:" ",allergies:"",healthGoals:" ",updateProfile:"  ",changePassword:"  ",deleteAccount:" "},home:{hero:{title:"  ",subtitle:"                   .",getStarted:" ",learnMore:" "},features:{title:"  ",subtitle:"         .",aiMealPlans:"  ",aiMealPlansDesc:"                .",personalizedWorkouts:" ",personalizedWorkoutsDesc:"       .",aiCoach:" ",aiCoachDesc:"            ."},pricing:{title:"  ",subtitle:"  .  25%    !",mostPopular:" ",perMonth:"/",choosePlan:"",viewAllPlans:"   "},howItWorks:{title:" ",subtitle:"     .",step1Title:" ",step1Text:"        .",step2Title:"   ",step2Text:"       .",step3Title:"   ",step3Text:"       ."},whyChoose:{title:"  GreenoFig",subtitle:"      ",scienceBacked:" ",scienceBackedDesc:"      .",personalizedAI:" ",personalizedAIDesc:"       .",support247:" 24/7",support247Desc:"        ."},reviews:{title:"       ",review1:" GreenoFig .   20      .      !",review2:"     .        .",review3:"    .         .  !",author1:" .",author2:" .",author3:" ."},cta:{title:"    ",subtitle:"         ",button:"  "}},pricing:{title:"  ",subtitle:"  .  25%    !",monthly:"",yearly:"",mostPopular:" ",perMonth:"/",perYear:"/",selectPlan:" ",currentPlan:" ",upgrade:"",viewAllPlans:"   ",freePlan:"Free",basicPlan:"Basic",premiumPlan:"Premium",ultimatePlan:"Ultimate",elitePlan:"Elite",planDescriptions:{Base:"    ",Premium:"     ",Ultimate:"       ",Elite:"     VIP"},save25:" 25%",billed:" ",billedMonthly:"  ",billedYearly:"  ",features:"",popularChoice:" ",bestValue:" ",planFeatures:{base:{mealPlans:"    ",workoutPlans:"    ",chatMessages:"10    ",basicTracking:"  ",communityAccess:"  ",mobileAccess:"  ",smartLogging:"  "},premium:{adFree:"    ",unlimitedMeals:"     ",unlimitedWorkouts:"     ",unlimitedChat:"    ",analytics:"  ",goalTracking:"  ",customPreferences:"  ",wearableSync:"   ",reports:"  ",communityAccess:"  ",mobileAccess:"  "},ultimate:{everythingPremium:"    ",nutritionists:"    ",prioritySupport:"   ",videoConsultations:"  (2 )",mealPlanningTools:"   ",workoutBuilder:"  ",performanceOptimization:" ",bodyAnalysis:"  ",exclusiveChallenges:" "},elite:{everythingUltimate:"    ",photoRecognition:"     ",unlimitedCoaching:"   ",doctorConsultations:"          (2 )",appointmentScheduling:"        ",priority247:"     ",supplementPlan:"   ",vipAccess:"   VIP",concierge:" "}}},features:{title:"  ",subtitle:"     ",aiCoach:" ",aiCoachDesc:"        ",mealPlanning:" ",mealPlanningDesc:"      ",workoutTracking:" ",workoutTrackingDesc:"   ",progressMonitoring:" ",progressMonitoringDesc:"    ",nutritionAnalysis:" ",nutritionAnalysisDesc:"   ",smartRecommendations:" ",smartRecommendationsDesc:"      ",wearableSync:"   ",wearableSyncDesc:"       ",expertSupport:" ",expertSupportDesc:"       "},blog:{title:"  ",subtitle:"     ",readMore:" ",backToBlog:"  ",relatedPosts:"  ",tableOfContents:" ",shareArticle:" ",noPostsFound:"    ",loadingPosts:"  ..."},contact:{title:" ",subtitle:"      .",pageDescription:"       .     .",metaDescription:"   GreenoFig.         .",name:"",fullName:" ",email:" ",subject:"",message:"",send:" ",sending:" ...",successMessage:" !   .",errorMessage:"  .    .",generalInquiry:" ",supportEmail:"support@greenofig.com",salesEmail:"sales@greenofig.com",namePlaceholder:" ",emailPlaceholder:"you@example.com",messagePlaceholder:"...",messageSent:"  ! (  )",demoMessage:"          !"},faq:{title:" ",subtitle:"      GreenoFig",pageDescription:"   .           .",metaDescription:"         GreenoFig.",generalQuestions:" ",subscriptionQuestions:" ",technicalQuestions:" ",searchPlaceholder:"   ...",errorFetching:"    ",noFaqsFound:"     .",checkBackSoon:"          ."},about:{title:" GreenoFig",subtitle:"    ",metaDescription:"      GreenoFig.",ourMission:"",ourMissionText:"           .",ourStory:"",ourTeam:"",ourValues:"",errorFetchingContent:"    ",contentNotAvailable:"  .",checkBackLater:"       ."},reviews:{title:" ",subtitle:"    ",verified:" ",writeReview:" ",allReviews:" ",rating:"",pageTitle:"   ",pageDescription:"   GreenoFig       .",metaDescription:"        GreenoFig.       .",shareYourStory:" ",experienceDescription:"      GreenoFig.",yourName:"",namePlaceholder:" ",reviewTitle:" ",reviewTitlePlaceholder:" !",yourReview:"",reviewPlaceholder:" ...",ratingRequired:" *",submitting:" ...",submitReview:" ",noReviewsYet:"   !",beTheFirst:"       GreenoFig.",ratingRequiredError:" ",ratingRequiredMessage:"     .",reviewSubmitted:"  !",thankYou:"   .",submissionFailed:" ",tryAgainLater:"    .",errorLoadingReviews:"   "},download:{title:" GreenoFig",subtitle:"    ",downloadIOS:"  App Store",downloadAndroid:"  Google Play",comingSoon:"",getToday:"  GreenoFig ",appDescription:"      .    iOS   Android.",joinBeta:"  ",betaDescription:"       iPhone  TestFlight.",contactInvite:"    ",iosVersion:"iOS 14.0  ",androidVersion:"Android 8.0  ",seeInAction:"  ",sneakPeek:"      ",screenshots:{dashboard:" ",dashboardDesc:"   ",mealPlans:" ",mealPlansDesc:"   ",workouts:"",workoutsDesc:"  ",aiCoach:" ",aiCoachDesc:"   "},powerfulFeatures:" ",featuresDescription:"        ",appFeatures:{aiMealPlans:"   ",aiMealPlansDesc:"    ",customWorkouts:" ",customWorkoutsDesc:"    ",aiCoach247:"  24/7",aiCoach247Desc:"  ",foodRecognition:"  ",foodRecognitionDesc:"    ",progressTracking:" ",progressTrackingDesc:"    ",smartReminders:" ",smartRemindersDesc:"     "},lovedByThousands:"   ",rating:"4.9",basedOnReviews:"    10,000 ",userReviews:{review1:" GreenoFig !  20    .",review2:"     .   !",review3:"      !"},readyToTransform:"    ",joinThousands:"           ",downloadNow:" "},dashboardPage:{title:" ",welcome:"",overview:" ",myProgress:"",meals:"",workouts:"",analytics:"",settings:"",profile:" ",billing:"",support:"",todaysMeals:" ",todaysWorkout:" ",weeklyProgress:" ",goals:"",achievements:"",recentActivity:" ",quickActions:" ",generateMealPlan:"  ",generateWorkout:" ",trackProgress:" ",viewReports:" "},quickLog:{logWeight:" ",logYourWeight:" ",date:"",weightKg:" ()",bodyFatOptional:"  % ()",cancel:"",logging:" ...",weightLogged:"  !",successfullyLogged:"  ",errorLoggingWeight:"   .    .",logMeal:" ",logYourMeal:" ",mealType:" ",breakfast:"",lunch:"",dinner:"",snack:" ",mealName:" ",mealNamePlaceholder:":   ",descriptionOptional:" ()",descriptionPlaceholder:"  ...",calories:" ",proteinG:" ()",carbsG:" ()",fatsG:" ()",mealLogged:"  !",errorLoggingMeal:"   .    .",logWorkout:" ",logYourWorkout:" ",workoutType:" ",running:"",walking:"",cycling:" ",swimming:"",weightTraining:" ",yoga:"",hiit:"  ",other:"",durationMin:" ()",caloriesBurned:" ",notesOptional:" ()",notesPlaceholder:"  ",workoutLogged:"  !",errorLoggingWorkout:"   .    .",logSleep:" ",logYourSleep:" ",sleepDuration:"  ()",sleepQuality:" ",excellent:"",good:"",fair:"",poor:"",sleepLogged:"  !",errorLoggingSleep:"   .    .",waterIntake:" ",glasses:"",remove:"",addGlass:" ",oneGlassEquals:"  = 250 ",errorUpdatingWater:"    .",waterLogged:"  ",addedWater:"  {{amount}}   ",nightOf:"",selectNight:"    ",hoursOfSleep:" ",cardio:"",strengthTraining:" ",sports:"",pilates:"",workoutName:" ",workoutNamePlaceholder:":  ",durationMinutes:" ()",intensity:"",light:"",moderate:"",intense:"",howDidYouFeel:" ",exhausted:"",tired:"",energized:"",greatJobCompleting:"  "},gamification:{level:"",levelProgress:" ",xpToNextLevel:"   ",totalXP:"  ",badges:"",badgeGallery:" ",achievements:"",unlocked:"",locked:"",streakTracker:" ",currentStreak:" ",longestStreak:" ",leaderboard:" ",yourRank:"",topUsers:" ",points:"",dailyChallenge:" ",weeklyChallenge:" ",challengeCompleted:"  !",keepItUp:"!",almostThere:"  !",newBadgeUnlocked:"   !",congratulations:"!"},premiumFeatures:{dailyHabits:" ",trackYourHabits:"    ",weeklyGoals:" ",setAndTrackGoals:"   ",progressPhotos:" ",captureYourJourney:"  ",myMealPlan:" ",viewMealPlan:"   ",recipeDatabase:"  ",browseRecipes:"  ",macroTracking:"  ",trackYourMacros:"    ",exerciseLibrary:" ",browseExercises:"  ",goalTracking:" ",setSmartGoals:"   SMART",healthStreaks:" ",buildHealthyHabits:"    ",customNotifications:" ",setReminders:"  ",motivationalSupport:" ",getDailyMotivation:"    ",advancedAnalytics:" ",deepInsights:"    ",progressReports:" ",weeklyMonthlyReports:"   ",workoutAnalytics:" ",trackWorkoutProgress:"  ",dataExport:" ",exportYourData:"  ",dnaAnalysis:"  ",personalizedGenetics:"  ",masterclassVideos:" ",expertTutorials:"   ",doctorConsultations:" ",virtualConsultations:"   ",appointmentScheduling:" ",bookAppointments:"   ",dailyLessons:" ",learnSomethingNew:"    "},nutritionistDashboard:{title:"   ",portal:"  ",portalWelcome:" {{name}}.     .",subtitle:"     ",myClients:"",activeClients:" ",pendingRequests:" ",totalConsultations:" ",clientProgress:" ",upcomingAppointments:" ",recentMessages:" ",createMealPlan:"  ",scheduleConsultation:" ",viewClientHistory:"  ",totalClients:" ",activeMealPlans:"  ",monthlyRevenue:" ",thisMonth:" ",clientTierDistribution:"  ",actionItems:" ",todaysSchedule:" ",recentActivity:" ",clientRetentionAnalytics:"  ",clientAlerts:" ",weeklyGoalProgress:"  ",upcomingRenewals:" ",followUpReminders:" ",baseTier:" ",premiumTier:" ",eliteTier:" ",noClientsYet:"   ",noActionItems:"   ",noAppointmentsToday:"    ",viewAll:" ",manageClients:" ",scheduleAppointment:" ",newClientRegistered:"  ",mealPlanCreated:"   ",consultationCompleted:"  ",hoursAgo:" {{hours}} ",daysAgo:" {{days}} ",clientsNeedFollowUp:"{{count}}     ",baseClientsUpgrade:"{{count}}       ",premiumClientsUpgrade:"{{count}}     ",noAlertsAllOnTrack:"   -    !",clientsOnTrack:"{{achieved}}  {{total}}   ",noRenewalsNext30Days:"     30  ",daysUntilRenewal:"  ",allCaughtUp:"  !",appointmentsToday:"{{count}}  ",unreadMessages:"{{count}}   ",reviewAndRespond:"   ",noWeighInFor:"    {{days}} ",unansweredMessages:"{{count}}   ",loading:" ...",min:"",consultation:""},adminDashboard:{title:"  ",totalUsers:" ",activeSubscriptions:" ",revenue:"",newUsersToday:"  ",userManagement:" ",subscriptionManagement:" ",contentManagement:" ",analyticsReports:" ",systemSettings:" ",supportTickets:" "},auth:{login:" ",signup:" ",logout:" ",email:" ",password:" ",confirmPassword:"  ",forgotPassword:"  ",resetPassword:"   ",rememberMe:"",dontHaveAccount:"  ",alreadyHaveAccount:"  ",signInWithGoogle:"   Google",signUpWithGoogle:"   Google",signInWithFacebook:"   Facebook",orContinueWith:"  ",createAccount:" ",verifyEmail:"   ",resendVerification:"  ",back:"",fullName:" ",processing:" ...",tagline:"  ",signUpForPlan:"  ",plan:"",missingFields:" ",fillAllFields:"    ",accountCreated:"  ! ",welcomeSetup:"!  ."},billing:{title:" ",currentPlan:" ",billingCycle:" ",nextBillingDate:"  ",paymentMethod:" ",billingHistory:" ",invoices:"",updatePaymentMethod:"  ",cancelSubscription:" ",upgradePlan:" ",downgradePlan:" "},footer:{tagline:"     ",contactUs:" ",platform:"",updates:"",products:"",company:"",legal:"",privacyPolicy:" ",termsOfService:" ",support:"",allRightsReserved:"  "},common:{loading:" ...",error:"",success:"",cancel:"",save:"",delete:"",edit:"",close:"",submit:"",search:"",filter:"",viewAll:" ",readMore:" ",backToHome:" ",welcome:"",getStarted:" ",learnMore:" ",tryFree:" ",comingSoon:"",yes:"",no:"",confirm:"",back:"",next:"",previous:"",finish:"",skip:"",all:"",none:" ",select:"",clear:"",apply:"",reset:" ",export:"",import:"",download:"",upload:"",share:"",copy:"",copied:" !",print:"",refresh:"",sortBy:" ",showMore:" ",showLess:" ",expand:"",collapse:""},support:{title:" ",subtitle:"     .",quickFeedback:" ",quickFeedbackDesc:"        ",createTicket:" ",myTickets:"",submitTicket:"  ",submitTicketDesc:"      24 ",myTicketsTitle:"   ",myTicketsDesc:"    ",rateExperience:"  ",ratingExcellent:" !",ratingGreat:" !",ratingGood:" ",ratingCouldBeBetter:"    ",ratingNeedsImprovement:"   ",feedbackType:"   ",suggestion:"",issue:"",praise:"",tellUsMore:" ",required:"*",feedbackPlaceholderSuggestion:"       ",feedbackPlaceholderIssue:"       ...",feedbackPlaceholderPraise:"    ",conversationInfo:"   ",conversationInfoDesc:"      .       .",sendFeedback:" ",submitting:" ...",subject:"",subjectPlaceholder:"  ",category:"",categoryPlaceholder:" ",priority:"",priorityLow:" -  ",priorityMedium:" -  ",priorityHigh:" -   ",priorityUrgent:" -  ",description:"",descriptionPlaceholder:"        ...",descriptionHelper:"             ",submitButton:" ",statusOpen:"",statusInProgress:" ",statusResolved:" ",statusClosed:"",priorityUrgentBadge:"",priorityHighBadge:"",priorityMediumBadge:"",priorityLowBadge:"",noTicketsYet:"    ",ticketNumber:" #",categoryLabel:":",created:" :",updated:" :",resolved:"    .           .",missingInfo:" ",missingInfoDesc:"    ",missingFeedbackDesc:"  ",errorCreating:"   ",ticketCreated:"   !",ticketCreatedDesc:"      .       .",errorSubmitting:"   ",feedbackSubmitted:"  ! ",feedbackSubmittedDesc:" !     .     ."},privacy:{title:" ",pageDescription:"    GreenoFig    .",metaDescription:"     GreenoFig      .",lastUpdated:" :",lastUpdatedDate:"24  2025",intro:" GreenoFig       .               .",section1:{title:"1.   ",intro:"        :",items:["  (     )","   (     )","  (          )","  (   )","  ( IP    )"]},section2:{title:"2.   ",intro:"   :",items:["    ","        ","   ","     ","    ","   ","  "]},section3:{title:"3.    ",intro:"    .    :",items:["      ","   ","      ","     ","  (  )"]},section4:{title:"4.  ",content:"                 .           100     ."},section5:{title:"5.  ",intro:"  :",items:["       ","    ","   ","    ","     "]},section6:{title:"6.     ",intro:"             .",whatAreCookies:{title:"    ",content:"                 ."},typesTitle:"     :",types:{essential:{title:"    ()",content:"       .          .   ."},functional:{title:"   ",content:"            ."},analytics:{title:"   ",content:"             .            ."},marketing:{title:"   ",content:"              ."}},managing:{title:"      ",intro:"        :",items:[" :            ","  :           ","  :              "],note:"                  ."}},section7:{title:"7.  ",content:"        18 .         .                ."},section8:{title:"8.    ",content:'        .               " ".'},section9:{title:"9.   ",content:"          .                   ."},section10:{title:"10.      (  )",intro:"       (EEA)         (GDPR):",rights:{access:"  :      ",rectification:"  :      ",erasure:'  :     ("  ")',restrict:"   :      ",portability:"   :     ",object:"  :       "},contact:"         privacy@greenofig.com"},section11:{title:"11.       ( )",intro:"              (CCPA):",rights:{know:"  :         ",delete:"  :     ",optOut:"   :        (:     )",nonDiscrimination:"   :        "},contact:'      privacy@greenofig.com  " CCPA"   .'},section12:{title:"12.  ",content:"               .            90         ."},section13:{title:"13.  ",intro:"                   :",email:" :",support:":",address:":",addressValue:"GreenoFig Inc.   ",responseTime:" :",responseTimeValue:"         30 "}},terms:{title:" ",pageDescription:"         GreenoFig.",metaDescription:"    GreenoFig     .",lastUpdated:" :",lastUpdatedDate:"24  2025"},onboarding:{welcomeTitle:"   GreenoFig",welcomeSubtitle:" .",completeProfile:"  ",personalizeExperience:"   GreenoFig",getPersonalizedGuidance:"    ",signUpToPlan:"    ",signUp:"",aboutYou:"",age:"",agePlaceholder:": 28",gender:"",selectGender:" ",male:"",female:"",other:"",preferNotToSay:"  ",bodyMetrics:" ",metric:"",imperial:"",height:"",weight:"",heightPlaceholderMetric:": 175",heightPlaceholderImperial:": 69",weightPlaceholderMetric:": 70",weightPlaceholderImperial:": 154",lifestyle:" ",activityLevel:" ",activitySedentary:"",activitySedentaryDesc:"     ",activityLightlyActive:" ",activityLightlyActiveDesc:" / 1-3 /",activityModeratelyActive:" ",activityModeratelyActiveDesc:" / 3-5 /",activityVeryActive:" ",activityVeryActiveDesc:" / 6-7   ",activitySuperActive:" ",activitySuperActiveDesc:"    ",goals:"",goalsSubtitle:"     .    .",goalLoseWeight:" ",goalBuildMuscle:" ",goalImproveEndurance:"   ",goalEatHealthier:"  ",goalIncreaseEnergy:" ",setupComplete:" !",setupCompleteDesc:"  .    .",goToDashboard:"   ",back:"",next:"",finish:"",dietaryPreferences:" ",dietaryPreferencesSubtitle:"      .    .",dietNone:"  ",dietVegetarian:"",dietVegan:" ",dietGlutenFree:"  ",dietDairyFree:"   ",dietKeto:"",dietPaleo:"",dietHalal:"",dietKosher:"",healthConditions:" ",healthConditionsSubtitle:"            .",conditionNone:" ",conditionDiabetes:"",conditionHighBloodPressure:"  ",conditionHeartDisease:" ",conditionAsthma:"",conditionArthritis:" ",conditionThyroid:"  ",conditionFoodAllergies:" "},survey:{title:"    ",subtitle:"         .",stepProgress:" {{step}}  {{total}}",back:"",next:"",findMyPlan:"  ",step1:{question:"    ",description:"       .",loseWeight:" ",buildMuscle:" ",improveEndurance:"   ",eatHealthier:" ",increaseEnergy:" "},step2:{question:"      ",beginner:"",beginnerDesc:"    .",intermediate:"",intermediateDesc:" .",advanced:"",advancedDesc:"    ."},step3:{question:"    ",description:"  .",budgetFriendly:"",budgetFriendlyDesc:"  10  ",moderate:"",moderateDesc:"10-20  ",premium:"",premiumDesc:"20-30  "},step4:{question:"      ",description:"   .",noRestrictions:" ",vegetarian:"",vegan:" ",glutenFree:"  ",keto:"",halal:""},step5:{question:"     ",description:"  .",minimal:"15-30  ",minimalDesc:"  ",moderate:"30-60  ",moderateDesc:"   ",extensive:"  60  ",extensiveDesc:"   "},step6:{question:"    ",selfGuided:" ",selfGuidedDesc:"   ",aiCoach:"  ",aiCoachDesc:"    ",professional:" ",professionalDesc:"   "},step7:{question:"     ",description:"   .",mealPlanning:" ",workoutPlans:" ",progressTracking:" ",aiChat:"   ",photoRecognition:"   ",expertConsultation:" "},step8:{question:"   ",excellent:"",excellentDesc:"   ",good:"",goodDesc:"     ",fair:"",fairDesc:"    ",needsAttention:"  ",needsAttentionDesc:"   "},step9:{question:"     ",description:"   ",relaxed:"",relaxedDesc:"6  ",moderate:"",moderateDesc:"3-6 ",urgent:"",urgentDesc:" 3 "}}}}},Dc=()=>{const e=localStorage.getItem("language");return e||"en"};Jo.use(Rc).use(la).init({resources:Ic,fallbackLng:"en",lng:Dc(),debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","cookie","navigator"],caches:["localStorage","cookie"]},react:{useSuspense:!1}});const Lc=Dc();var $c;document.documentElement.dir="ar"===Lc?"rtl":"ltr",document.documentElement.lang=Lc,pc.init(),qe.createRoot(document.getElementById("root")).render(e.jsx(j.StrictMode,{children:e.jsx(ro,{children:e.jsx(Ia,{children:e.jsx(L,{children:e.jsx(hc,{})})})})})),($c=e=>{})&&$c instanceof Function&&ze(()=>import("./web-vitals-22b21531.js"),[]).then(({getCLS:e,getFID:t,getFCP:s,getLCP:r,getTTFB:i})=>{e($c),t($c),s($c),r($c),i($c)}).catch(()=>{}),"serviceWorker"in navigator&&(window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{setInterval(()=>{e.update()},3e4)}).catch(e=>{})}),navigator.serviceWorker.addEventListener("message",e=>{e.data&&"CACHE_UPDATED"===e.data.type&&setTimeout(()=>{window.location.reload()},1e3)}));export{va as A,ma as B,yl as C,Ua as D,gl as E,ml as F,no as G,ps as H,ja as I,ka as J,Ea as K,Pa as L,Na as M,Sa as T,ze as _,io as a,Ha as b,gs as c,za as d,Va as e,Ya as f,_a as g,bl as h,Jo as i,Ba as j,ba as k,wa as l,Ga as m,Fa as n,Cs as o,ul as p,xl as q,wl as r,Xn as s,Ps as t,pa as u,dl as v,pl as w,hl as x,ga as y,fl as z};
