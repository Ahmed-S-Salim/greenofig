import{j as e}from"./vendor-ui-1f4695e3.js";import{f as s,r as a}from"./vendor-react-c35372bd.js";import{r as t,c as l,B as r,u as i}from"./index-6b8dec48.js";import{b6 as n,X as c,J as o,a3 as d}from"./vendor-utils-a892ab91.js";const m=({placementName:r,className:i="",onClose:n,showCloseButton:c=!0,autoTrack:o=!0})=>{var d;const m=s(),{hasAds:u,fetchCampaignForPlacement:b,trackImpression:g,trackClick:j,dismissAd:v}=t(),[f,N]=a.useState(null),[w,y]=a.useState(null),[k,_]=a.useState(!0),[C,S]=a.useState(!1),D=a.useRef(null);a.useEffect(()=>{(async()=>{if(!u)return void _(!1);_(!0);const e=await b(r);N(e),_(!1)})()},[u,r,b]),a.useEffect(()=>{if(!f||!o||w)return;(async()=>{const e=await g(f.id,f.placement_id,m.pathname);y(e)})()},[f,o,g,m.pathname,w]);const A=async e=>{f&&(await j(f.id,null==w?void 0:w.id,m.pathname),f.cta_url&&(f.cta_url.startsWith("/")?window.location.href=f.cta_url:window.open(f.cta_url,"_blank","noopener,noreferrer")))},z=async()=>{f&&await v(f.id),S(!0),n&&n()};if(!u||C||k||!f)return null;const B=(null==(d=f.ad_placements)?void 0:d.placement_type)||"banner";return e.jsxs("div",{ref:D,className:l("ad-container relative","banner"===B&&"ad-banner-container","sidebar"===B&&"ad-sidebar-container","native"===B&&"ad-native-container",i),"data-ad-placement":r,"data-ad-campaign":f.id,children:["banner"===B&&e.jsx(x,{campaign:f,onDismiss:c?z:null,onClick:A}),"sidebar"===B&&e.jsx(h,{campaign:f,onDismiss:c?z:null,onClick:A}),"native"===B&&e.jsx(p,{campaign:f,onDismiss:c?z:null,onClick:A})]})},x=({campaign:s,onDismiss:a,onClick:t})=>e.jsxs("div",{className:"relative bg-gradient-to-r from-primary/10 via-green-500/10 to-emerald-500/10 border border-primary/20 rounded-lg p-4 shadow-sm hover:shadow-md transition-all duration-300",style:{backgroundColor:s.background_color||void 0,color:s.text_color||void 0},children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[s.image_url&&e.jsx("img",{src:s.image_url,alt:s.title,className:"w-16 h-16 object-cover rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-primary/60 font-medium",children:"Sponsored"})}),e.jsx("h4",{className:"font-semibold text-sm mb-1 truncate",children:s.title}),s.subtitle&&e.jsx("p",{className:"text-xs text-text-secondary mb-2 line-clamp-2",children:s.subtitle}),e.jsxs(r,{size:"sm",onClick:t,className:"bg-primary hover:bg-primary/90 text-xs h-7 gap-1",children:[s.cta_text,e.jsx(n,{className:"w-3 h-3"})]})]})]}),a&&e.jsx("button",{onClick:a,className:"text-text-secondary hover:text-foreground transition-colors p-1","aria-label":"Close ad",children:e.jsx(c,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"absolute bottom-1 right-2",children:e.jsx("span",{className:"text-[8px] text-text-secondary/50",children:"Ad"})})]}),h=({campaign:s,onDismiss:a,onClick:t})=>{const{i18n:l}=i(),m="ar"===l.language;return e.jsxs("div",{className:"relative bg-gradient-to-br from-emerald-600 via-green-600 to-teal-700 rounded-2xl shadow-2xl overflow-hidden",dir:m?"rtl":"ltr",children:[a&&e.jsx("button",{onClick:a,className:`absolute top-3 ${m?"left-3":"right-3"} z-10 bg-white/20 hover:bg-white/30 rounded-full p-1.5 transition-colors`,"aria-label":"Close ad",children:e.jsx(c,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"relative px-5 pt-6 pb-4 text-center",children:[e.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-10 -left-10 w-32 h-32 bg-white/10 rounded-full blur-2xl"}),e.jsx("div",{className:"absolute -top-5 -right-5 w-24 h-24 bg-yellow-400/20 rounded-full blur-xl"})]}),s.image_url&&e.jsx("div",{className:"relative mx-auto w-16 h-16 mb-3",children:e.jsx("div",{className:"absolute inset-0 bg-white rounded-xl shadow-lg flex items-center justify-center",children:e.jsx("img",{src:s.image_url,alt:s.title,className:"w-12 h-12 object-contain rounded-lg"})})}),e.jsx("span",{className:"inline-block text-[9px] uppercase tracking-wider text-white/70 font-medium mb-2 px-2 py-0.5 rounded-full bg-white/10",children:m?"إعلان":"Sponsored"}),e.jsx("h4",{className:"relative text-lg font-bold text-white mb-1",children:s.title}),s.subtitle&&e.jsx("p",{className:"relative text-white/90 text-xs",children:s.subtitle})]}),s.body_text&&e.jsx("div",{className:"bg-white/10 backdrop-blur-sm px-5 py-4",children:e.jsx("p",{className:"text-white/90 text-sm leading-relaxed",children:s.body_text})}),e.jsxs("div",{className:"px-5 py-4 bg-gradient-to-t from-black/20 to-transparent",children:[e.jsxs(r,{onClick:t,className:"w-full h-10 bg-white hover:bg-gray-100 text-emerald-700 font-bold text-sm rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 gap-2",children:[s.cta_text,e.jsx(n,{className:"w-4 h-4"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-white/60 text-[10px]",children:[e.jsx(o,{className:"w-3 h-3"}),e.jsx("span",{children:m?"آمن":"Secure"})]}),e.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(s=>e.jsx(d,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"},s))})]})]}),e.jsx("div",{className:"px-5 py-2 bg-black/20 text-center",children:e.jsx("span",{className:"text-[9px] text-white/60",children:s.advertiser_name||"Advertisement"})})]})},p=({campaign:s,onDismiss:a,onClick:t})=>e.jsxs("div",{className:"relative bg-card/50 border border-border/50 rounded-xl p-6 hover:bg-card/80 transition-all duration-300 cursor-pointer",onClick:t,style:{backgroundColor:s.background_color||void 0,color:s.text_color||void 0},children:[a&&e.jsx("button",{onClick:e=>{e.stopPropagation(),a()},className:"absolute top-3 right-3 text-text-secondary hover:text-foreground transition-colors p-1","aria-label":"Close ad",children:e.jsx(c,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex gap-4",children:[s.image_url&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:s.image_url,alt:s.title,className:"w-24 h-24 object-cover rounded-lg"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-primary/60 font-medium bg-primary/10 px-2 py-0.5 rounded",children:"Sponsored"}),s.advertiser_name&&e.jsxs("span",{className:"text-xs text-text-secondary",children:["by ",s.advertiser_name]})]}),e.jsx("h4",{className:"font-bold text-lg mb-2",children:s.title}),s.subtitle&&e.jsx("p",{className:"text-sm text-text-secondary mb-2",children:s.subtitle}),s.body_text&&e.jsx("p",{className:"text-sm text-text-secondary line-clamp-2",children:s.body_text}),e.jsx("div",{className:"mt-4",children:e.jsxs("span",{className:"inline-flex items-center gap-1 text-primary font-medium text-sm hover:underline",children:[s.cta_text,e.jsx(n,{className:"w-4 h-4"})]})})]})]})]});export{m as A};
