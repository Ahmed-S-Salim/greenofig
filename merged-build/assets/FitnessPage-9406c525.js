import{j as e}from"./vendor-ui-1f4695e3.js";import{r as s}from"./vendor-react-c35372bd.js";import{u as t,a as r,s as a,t as i,B as n,g as o}from"./index-6b8dec48.js";import"./card-337a2a4f.js";import{P as l}from"./progress-0fee62a7.js";import"./tabs-fb6868c7.js";import{m as c,av as d,aD as m,a8 as x,aH as u,b as h,c3 as p,c2 as f,b2 as g,c1 as j,c0 as y,cS as b,a9 as N,a2 as v,D as w,H as _,p as S}from"./vendor-utils-a892ab91.js";import"./vendor-editor-8f9f6f2d.js";const T=[{id:"hiit",name:"HIIT Blast",name_ar:"تمرين HIIT مكثف",duration:20,calories:300,difficulty:"hard",type:"Cardio",description:"High-intensity interval training for maximum calorie burn",description_ar:"تدريب متقطع عالي الكثافة لحرق السعرات الحرارية",icon:v,color:"from-red-500 to-orange-500",exercises:[{name:"Jumping Jacks",name_ar:"قفزات جاك",duration:45,rest:15,sets:4},{name:"Burpees",name_ar:"بيربي",duration:30,rest:30,sets:3},{name:"Mountain Climbers",name_ar:"تسلق الجبال",duration:45,rest:15,sets:4},{name:"High Knees",name_ar:"ركب عالية",duration:45,rest:15,sets:4},{name:"Squat Jumps",name_ar:"قفزات القرفصاء",duration:30,rest:30,sets:3}]},{id:"strength",name:"Strength Builder",name_ar:"بناء القوة",duration:45,calories:350,difficulty:"medium",type:"Strength",description:"Build muscle and increase strength with compound movements",description_ar:"بناء العضلات وزيادة القوة",icon:w,color:"from-blue-500 to-indigo-500",exercises:[{name:"Push-ups",name_ar:"تمارين الضغط",reps:15,rest:60,sets:3},{name:"Squats",name_ar:"القرفصاء",reps:20,rest:60,sets:3},{name:"Lunges",name_ar:"الطعنات",reps:12,rest:45,sets:3},{name:"Plank",name_ar:"اللوح",duration:45,rest:30,sets:3},{name:"Dips",name_ar:"الغطس",reps:12,rest:60,sets:3}]},{id:"cardio",name:"Cardio Burn",name_ar:"حرق الكارديو",duration:30,calories:250,difficulty:"medium",type:"Cardio",description:"Steady-state cardio for endurance and fat burning",description_ar:"كارديو ثابت للتحمل وحرق الدهون",icon:_,color:"from-pink-500 to-rose-500",exercises:[{name:"Jogging in Place",name_ar:"الجري في المكان",duration:120,rest:30,sets:3},{name:"Jump Rope",name_ar:"قفز الحبل",duration:60,rest:30,sets:4},{name:"Side Steps",name_ar:"خطوات جانبية",duration:45,rest:15,sets:4},{name:"Boxing Punches",name_ar:"لكمات الملاكمة",duration:60,rest:30,sets:3}]},{id:"flexibility",name:"Yoga Flow",name_ar:"تدفق اليوغا",duration:25,calories:100,difficulty:"easy",type:"Flexibility",description:"Gentle stretching and relaxation for recovery",description_ar:"تمارين الإطالة والاسترخاء للتعافي",icon:d,color:"from-green-500 to-emerald-500",exercises:[{name:"Cat-Cow Stretch",name_ar:"تمدد القط-البقرة",duration:60,rest:15,sets:2},{name:"Downward Dog",name_ar:"الكلب المتجه للأسفل",duration:45,rest:15,sets:2},{name:"Child's Pose",name_ar:"وضع الطفل",duration:60,rest:15,sets:2},{name:"Seated Forward Fold",name_ar:"الطي الأمامي جالساً",duration:45,rest:15,sets:2},{name:"Spinal Twist",name_ar:"لف العمود الفقري",duration:45,rest:15,sets:2}]},{id:"core",name:"Core Crusher",name_ar:"تمارين البطن",duration:15,calories:120,difficulty:"medium",type:"Core",description:"Targeted core exercises for a strong midsection",description_ar:"تمارين مركزة لتقوية عضلات البطن",icon:S,color:"from-purple-500 to-violet-500",exercises:[{name:"Crunches",name_ar:"تمارين البطن",reps:20,rest:30,sets:3},{name:"Leg Raises",name_ar:"رفع الساقين",reps:15,rest:30,sets:3},{name:"Russian Twists",name_ar:"اللف الروسي",reps:20,rest:30,sets:3},{name:"Bicycle Crunches",name_ar:"تمارين الدراجة",reps:20,rest:30,sets:3},{name:"Plank Hold",name_ar:"ثبات اللوح",duration:45,rest:30,sets:3}]}],k={easy:"bg-green-500/10 text-green-600 border-green-500/30",medium:"bg-yellow-500/10 text-yellow-600 border-yellow-500/30",hard:"bg-red-500/10 text-red-600 border-red-500/30"},C=()=>{var v,w,_,S;const{t:C,i18n:D}=t(),{userProfile:M}=r(),B="ar"===D.language,[I,A]=s.useState({workoutsThisWeek:0,caloriesBurned:0,activeMinutes:0,streak:0}),[E,P]=s.useState(null),[R,q]=s.useState(0),[V,W]=s.useState(1),[$,H]=s.useState(!1),[z,F]=s.useState(0),[J,O]=s.useState(!1),[Y,L]=s.useState(0),[G,K]=s.useState(0),[X,Q]=s.useState(!0),[U,Z]=s.useState(!1),ee=s.useRef(null);s.useRef(null),s.useEffect(()=>{(null==M?void 0:M.id)&&se()},[null==M?void 0:M.id]);const se=async()=>{try{const e=new Date;e.setDate(e.getDate()-7);const{data:s,error:t}=await a.from("workout_logs").select("*").eq("user_id",M.id).gte("date",e.toISOString().split("T")[0]);if(!t&&s){const e=s.reduce((e,s)=>({workoutsThisWeek:e.workoutsThisWeek+1,caloriesBurned:e.caloriesBurned+(s.calories_burned||0),activeMinutes:e.activeMinutes+(s.duration_minutes||0)}),{workoutsThisWeek:0,caloriesBurned:0,activeMinutes:0}),{data:t}=await a.from("workout_logs").select("date").eq("user_id",M.id).order("date",{ascending:!1}).limit(30);let r=0;if(t&&t.length>0){const e=(new Date).toISOString().split("T")[0],s=t.map(e=>e.date);let a=new Date;for(let t=0;t<30;t++){const t=a.toISOString().split("T")[0];if(s.includes(t))r++,a.setDate(a.getDate()-1);else{if(t!==e)break;a.setDate(a.getDate()-1)}}}A({...e,streak:r})}}catch(e){}},te=s.useCallback(e=>{if(X)try{const s=new(window.AudioContext||window.webkitAudioContext),t=s.createOscillator(),r=s.createGain();t.connect(r),r.connect(s.destination),"beep"===e?(t.frequency.setValueAtTime(880,s.currentTime),r.gain.setValueAtTime(.3,s.currentTime),r.gain.exponentialRampToValueAtTime(.01,s.currentTime+.2),t.start(s.currentTime),t.stop(s.currentTime+.2)):"complete"===e&&(t.frequency.setValueAtTime(523.25,s.currentTime),t.frequency.setValueAtTime(659.25,s.currentTime+.15),t.frequency.setValueAtTime(783.99,s.currentTime+.3),r.gain.setValueAtTime(.4,s.currentTime),r.gain.exponentialRampToValueAtTime(.01,s.currentTime+.5),t.start(s.currentTime),t.stop(s.currentTime+.5))}catch(s){}},[X]);s.useEffect(()=>(J&&z>0&&(ee.current=setInterval(()=>{F(e=>e<=1?(te("beep"),0):(e<=4&&te("beep"),e-1)),L(e=>e+1),K(e=>e+.1)},1e3)),()=>{ee.current&&clearInterval(ee.current)}),[J,z,te]),s.useEffect(()=>{if(0===z&&J&&E)if(O(!1),$){H(!1);const e=E.exercises[R];if(V<e.sets)W(e=>e+1),F(e.duration||30),O(!0);else if(R<E.exercises.length-1){q(e=>e+1),W(1);const e=E.exercises[R+1];F(e.duration||30),O(!0)}else te("complete"),Z(!0),ae()}else{const e=E.exercises[R];e.rest>0?(H(!0),F(e.rest),O(!0)):V<e.sets&&(W(e=>e+1),F(e.duration||30),O(!0))}},[z,J,E,R,V,$,te]);const re=()=>{O(!1),P(null),q(0),W(1),H(!1),Z(!1)},ae=async()=>{if((null==M?void 0:M.id)&&E)try{const{error:e}=await a.from("workout_logs").insert({user_id:M.id,workout_name:E.name,workout_type:E.type,duration_minutes:Math.round(Y/60),calories_burned:Math.round(G),intensity:E.difficulty,date:(new Date).toISOString().split("T")[0],notes:`Completed ${E.name} workout`});e||(i({title:B?"تم الحفظ!":"Workout Saved!",description:B?`أحرقت ${Math.round(G)} سعرة حرارية`:`You burned ${Math.round(G)} calories!`}),se())}catch(e){}},ie=e=>{const s=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},ne=()=>E?E.exercises[R]:null,oe=()=>{if(!E)return 0;E.exercises.length;const e=E.exercises.reduce((e,s)=>e+s.sets,0),s=E.exercises.slice(0,R).reduce((e,s)=>e+s.sets,0)+(V-1);return Math.round(s/e*100)};return e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs(c.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:B?"مركز اللياقة":"Fitness Center"}),e.jsx("p",{className:"text-text-secondary",children:B?"تمارينك المخصصة مع مؤقت ذكي":"Your personalized workouts with smart timer"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect rounded-xl p-4 border border-border/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-primary to-green-400 flex items-center justify-center",children:e.jsx(d,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-secondary",children:B?"هذا الأسبوع":"This Week"}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:I.workoutsThisWeek})]})]})}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect rounded-xl p-4 border border-border/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-orange-500 to-red-500 flex items-center justify-center",children:e.jsx(m,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-secondary",children:B?"السعرات":"Calories"}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:I.caloriesBurned.toLocaleString()})]})]})}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-effect rounded-xl p-4 border border-border/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center",children:e.jsx(x,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-secondary",children:B?"الدقائق":"Minutes"}),e.jsx("p",{className:"text-xl font-bold text-foreground",children:I.activeMinutes})]})]})}),e.jsx(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-effect rounded-xl p-4 border border-border/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center",children:e.jsx(u,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-text-secondary",children:B?"السلسلة":"Streak"}),e.jsxs("p",{className:"text-xl font-bold text-foreground",children:[I.streak," ",B?"يوم":"days"]})]})]})})]}),e.jsx(h,{children:E&&e.jsx(c.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"glass-effect rounded-2xl p-6 border-2 border-primary/30",children:U?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(c.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",bounce:.5},children:e.jsx(u,{className:"w-20 h-20 mx-auto text-yellow-500 mb-4"})}),e.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:B?"أحسنت!":"Great Job!"}),e.jsx("p",{className:"text-text-secondary mb-4",children:B?`أكملت ${E.name_ar||E.name}`:`You completed ${E.name}`}),e.jsxs("div",{className:"flex justify-center gap-8 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-primary",children:ie(Y)}),e.jsx("p",{className:"text-sm text-text-secondary",children:B?"الوقت":"Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-orange-500",children:Math.round(G)}),e.jsx("p",{className:"text-sm text-text-secondary",children:B?"سعرة":"Calories"})]})]}),e.jsx(n,{onClick:re,className:"bg-gradient-to-r from-primary to-green-400",children:B?"إنهاء":"Done"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:B?E.name_ar:E.name}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[B?"التمرين":"Exercise"," ",R+1,"/",E.exercises.length]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{variant:"ghost",size:"icon",onClick:()=>Q(!X),children:X?e.jsx(p,{className:"w-5 h-5"}):e.jsx(f,{className:"w-5 h-5"})}),e.jsx(n,{variant:"outline",size:"sm",onClick:re,children:B?"إنهاء":"End"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-text-secondary",children:B?"التقدم":"Progress"}),e.jsxs("span",{className:"text-foreground font-medium",children:[oe(),"%"]})]}),e.jsx(l,{value:oe(),className:"h-2"})]}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx(o,{className:"mb-3 "+($?"bg-blue-500":"bg-primary"),children:$?B?"استراحة":"REST":B?"تمرين":"EXERCISE"}),e.jsx("h3",{className:"text-2xl font-bold text-foreground mb-2",children:B?(null==(v=ne())?void 0:v.name_ar)||(null==(w=ne())?void 0:w.name):null==(_=ne())?void 0:_.name}),e.jsxs("p",{className:"text-text-secondary",children:[B?"المجموعة":"Set"," ",V,"/",null==(S=ne())?void 0:S.sets]})]}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx(c.div,{initial:{scale:1.1},animate:{scale:1},className:"text-7xl font-bold "+($?"text-blue-500":"text-primary"),children:ie(z)},z)}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(n,{variant:"outline",size:"icon",className:"w-12 h-12 rounded-full",onClick:()=>{if(O(!1),E){const e=E.exercises[R];F($?e.rest:e.duration||30)}},children:e.jsx(g,{className:"w-5 h-5"})}),e.jsx(n,{size:"icon",className:"w-16 h-16 rounded-full "+(J?"bg-red-500 hover:bg-red-600":"bg-primary hover:bg-primary/90"),onClick:()=>{O(!J)},children:J?e.jsx(j,{className:"w-6 h-6"}):e.jsx(y,{className:"w-6 h-6 ml-1"})}),e.jsx(n,{variant:"outline",size:"icon",className:"w-12 h-12 rounded-full",onClick:()=>{if(!E)return;const e=E.exercises[R];if($){if(H(!1),V<e.sets)W(e=>e+1),F(e.duration||30);else if(R<E.exercises.length-1){q(e=>e+1),W(1);const e=E.exercises[R+1];F(e.duration||30)}}else if(V<e.sets)e.rest>0?(H(!0),F(e.rest)):(W(e=>e+1),F(e.duration||30));else if(R<E.exercises.length-1){q(e=>e+1),W(1);const e=E.exercises[R+1];F(e.duration||30),H(!1)}else Z(!0),O(!1),te("complete"),ae()},children:e.jsx(b,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex justify-center gap-8 mt-6 pt-4 border-t border-border/30",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-foreground",children:ie(Y)}),e.jsx("p",{className:"text-xs text-text-secondary",children:B?"الوقت الكلي":"Total Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-orange-500",children:Math.round(G)}),e.jsx("p",{className:"text-xs text-text-secondary",children:B?"سعرات محروقة":"Calories Burned"})]})]})]})})}),!E&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-foreground",children:B?"اختر تمرينك":"Choose Your Workout"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map((s,t)=>{const r=s.icon;return e.jsxs(c.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},className:"glass-effect rounded-xl p-5 border border-border/30 hover:border-primary/50 transition-all cursor-pointer group",onClick:()=>(e=>{P(e),q(0),W(1),H(!1),F(e.exercises[0].duration||30),L(0),K(0),Z(!1),O(!0)})(s),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-br ${s.color} flex items-center justify-center`,children:e.jsx(r,{className:"w-6 h-6 text-white"})}),e.jsx(o,{className:k[s.difficulty],children:s.difficulty})]}),e.jsx("h3",{className:"text-lg font-bold text-foreground mb-1",children:B?s.name_ar:s.name}),e.jsx("p",{className:"text-sm text-text-secondary mb-4",children:B?s.description_ar:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-text-secondary mb-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(x,{className:"w-4 h-4"}),s.duration," ",B?"دقيقة":"min"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(m,{className:"w-4 h-4"}),s.calories," ",B?"سعرة":"cal"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(N,{className:"w-4 h-4"}),s.exercises.length," ",B?"تمارين":"exercises"]})]}),e.jsxs(n,{className:"w-full bg-gradient-to-r from-primary to-green-400 group-hover:opacity-90",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),B?"ابدأ الآن":"Start Now"]})]},s.id)})})]})]})};export{C as default};
