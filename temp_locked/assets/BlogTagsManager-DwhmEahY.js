import{Y as e,j as s,Z as a,_ as t,$ as l,a0 as r,a1 as i,a2 as c,a3 as d}from"./vendor-ui-CAdTc8ma.js";import{a as n}from"./vendor-react-DYWoKpfz.js";import{c as o,g as m,s as g,B as x,L as h,I as j,T as u,t as f}from"./index-AtoPiNTv.js";import{C as p,a as N,b as y,c as v}from"./card-DObhyBOQ.js";import{T as w,a as C,b,c as S}from"./tabs-W0guYPUx.js";import{D as T,b as k,c as z,d as _,e as E,f as R}from"./dialog-DSKAuchR.js";import{b as q,m as F,ar as A,as as D,P as B,ah as O,at as P}from"./vendor-utils-7_dm-8Ld.js";import"./vendor-editor-CURn2XBo.js";const $=e,L=a,U=n.forwardRef(({className:e,...a},t)=>s.jsx(d,{className:o("fixed inset-0 z-50 bg-black/70 backdrop-blur-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 transition-all duration-300",e),...a,ref:t}));U.displayName=d.displayName;const H=n.forwardRef(({className:e,...a},l)=>s.jsxs(L,{children:[s.jsx(U,{}),s.jsx(t,{ref:l,className:o("fixed left-[50%] top-[50%] z-50 grid w-[calc(100%-2rem)] sm:w-full max-w-[calc(100%-2rem)] sm:max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 glass-effect custom-scrollbar border border-border/50 p-4 sm:p-6 shadow-2xl rounded-xl sm:rounded-2xl max-h-[90vh] overflow-y-auto duration-300 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",e),...a})]}));H.displayName=t.displayName;const I=({className:e,...a})=>s.jsx("div",{className:o("flex flex-col space-y-2 text-center sm:text-left",e),...a});I.displayName="AlertDialogHeader";const J=({className:e,...a})=>s.jsx("div",{className:o("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});J.displayName="AlertDialogFooter";const V=n.forwardRef(({className:e,...a},t)=>s.jsx(l,{ref:t,className:o("text-lg font-semibold",e),...a}));V.displayName=l.displayName;const Y=n.forwardRef(({className:e,...a},t)=>s.jsx(r,{ref:t,className:o("text-sm text-muted-foreground",e),...a}));Y.displayName=r.displayName;const Z=n.forwardRef(({className:e,...a},t)=>s.jsx(c,{ref:t,className:o(m(),e),...a}));Z.displayName=c.displayName;const G=n.forwardRef(({className:e,...a},t)=>s.jsx(i,{ref:t,className:o(m({variant:"outline"}),"mt-2 sm:mt-0",e),...a}));G.displayName=i.displayName;const K=()=>{const[e,a]=n.useState([]),[t,l]=n.useState([]),[r,i]=n.useState(!0),[c,d]=n.useState(!1),[o,m]=n.useState(!1),[L,U]=n.useState(null),[K,M]=n.useState(null),[Q,W]=n.useState(!1),[X,ee]=n.useState(null),[se,ae]=n.useState("tag"),[te,le]=n.useState(""),[re,ie]=n.useState(""),[ce,de]=n.useState(""),[ne,oe]=n.useState(""),[me,ge]=n.useState("");n.useEffect(()=>{xe()},[]);const xe=async()=>{i(!0);const[e,s]=await Promise.all([g.from("blog_tags").select("*").order("name"),g.from("blog_categories").select("*").order("name")]);e.data&&a(e.data),s.data&&l(s.data),i(!1)},he=e=>e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),je=(e=null)=>{e?(U(e),le(e.name),ie(e.slug)):(U(null),le(""),ie("")),d(!0)},ue=(e=null)=>{e?(M(e),de(e.name),oe(e.slug),ge(e.description||"")):(M(null),de(""),oe(""),ge("")),m(!0)},fe=(e,s)=>{ee(e),ae(s),W(!0)};return r?s.jsx("div",{className:"flex justify-center items-center py-10",children:s.jsx(q,{className:"h-8 w-8 animate-spin text-primary"})}):s.jsxs(F.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsx("h2",{className:"text-3xl font-bold",children:"Tags & Categories"})}),s.jsxs(w,{defaultValue:"tags",className:"w-full",children:[s.jsxs(C,{className:"grid w-full grid-cols-2",children:[s.jsx(b,{value:"tags",children:"Tags"}),s.jsx(b,{value:"categories",children:"Categories"})]}),s.jsx(S,{value:"tags",className:"space-y-4",children:s.jsxs(p,{className:"glass-effect",children:[s.jsx(N,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(y,{className:"flex items-center gap-2",children:[s.jsx(A,{className:"w-5 h-5"}),"Blog Tags (",e.length,")"]}),s.jsxs(x,{onClick:()=>je(),children:[s.jsx(D,{className:"w-4 h-4 mr-2"}),"New Tag"]})]})}),s.jsx(v,{children:0===e.length?s.jsx("div",{className:"text-center py-8 text-text-secondary",children:"No tags yet. Create your first tag!"}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>s.jsx(p,{className:"glass-effect",children:s.jsx(v,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:e.name}),s.jsxs("p",{className:"text-sm text-text-secondary",children:["/",e.slug]})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(x,{variant:"ghost",size:"icon",onClick:()=>je(e),children:s.jsx(B,{className:"w-4 h-4"})}),s.jsx(x,{variant:"ghost",size:"icon",onClick:()=>fe(e,"tag"),className:"text-red-400 hover:text-red-500",children:s.jsx(O,{className:"w-4 h-4"})})]})]})})},e.id))})})]})}),s.jsx(S,{value:"categories",className:"space-y-4",children:s.jsxs(p,{className:"glass-effect",children:[s.jsx(N,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(y,{className:"flex items-center gap-2",children:[s.jsx(P,{className:"w-5 h-5"}),"Blog Categories (",t.length,")"]}),s.jsxs(x,{onClick:()=>ue(),children:[s.jsx(D,{className:"w-4 h-4 mr-2"}),"New Category"]})]})}),s.jsx(v,{children:0===t.length?s.jsx("div",{className:"text-center py-8 text-text-secondary",children:"No categories yet. Create your first category!"}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(e=>s.jsx(p,{className:"glass-effect",children:s.jsx(v,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold",children:e.name}),s.jsxs("p",{className:"text-sm text-text-secondary",children:["/",e.slug]}),e.description&&s.jsx("p",{className:"text-sm text-text-secondary mt-2",children:e.description})]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx(x,{variant:"ghost",size:"icon",onClick:()=>ue(e),children:s.jsx(B,{className:"w-4 h-4"})}),s.jsx(x,{variant:"ghost",size:"icon",onClick:()=>fe(e,"category"),className:"text-red-400 hover:text-red-500",children:s.jsx(O,{className:"w-4 h-4"})})]})]})})},e.id))})})]})})]}),s.jsx(T,{open:c,onOpenChange:d,children:s.jsxs(k,{className:"glass-effect",children:[s.jsxs(z,{children:[s.jsx(_,{children:L?"Edit Tag":"Create New Tag"}),s.jsx(E,{children:"Add a tag to organize your blog posts."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{htmlFor:"tag-name",children:"Tag Name *"}),s.jsx(j,{id:"tag-name",placeholder:"e.g., React, JavaScript",value:te,onChange:e=>{le(e.target.value),L||ie(he(e.target.value))}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{htmlFor:"tag-slug",children:"Slug *"}),s.jsx(j,{id:"tag-slug",placeholder:"e.g., react, javascript",value:re,onChange:e=>ie(e.target.value)})]})]}),s.jsxs(R,{children:[s.jsx(x,{variant:"ghost",onClick:()=>d(!1),children:"Cancel"}),s.jsx(x,{onClick:async()=>{if(!te||!re)return void f({title:"Name and slug are required",variant:"destructive"});const e={name:te,slug:re};let s;if(L){const{error:a}=await g.from("blog_tags").update(e).eq("id",L.id);s=a}else{const{error:a}=await g.from("blog_tags").insert(e);s=a}s?f({title:"Error saving tag",description:s.message,variant:"destructive"}):(f({title:`Tag ${L?"updated":"created"} successfully`}),d(!1),xe())},children:L?"Update":"Create"})]})]})}),s.jsx(T,{open:o,onOpenChange:m,children:s.jsxs(k,{className:"glass-effect",children:[s.jsxs(z,{children:[s.jsx(_,{children:K?"Edit Category":"Create New Category"}),s.jsx(E,{children:"Add a category to organize your blog posts."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{htmlFor:"category-name",children:"Category Name *"}),s.jsx(j,{id:"category-name",placeholder:"e.g., Technology, Tutorials",value:ce,onChange:e=>{de(e.target.value),K||oe(he(e.target.value))}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{htmlFor:"category-slug",children:"Slug *"}),s.jsx(j,{id:"category-slug",placeholder:"e.g., technology, tutorials",value:ne,onChange:e=>oe(e.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(h,{htmlFor:"category-description",children:"Description"}),s.jsx(u,{id:"category-description",placeholder:"Brief description of this category",value:me,onChange:e=>ge(e.target.value),rows:3})]})]}),s.jsxs(R,{children:[s.jsx(x,{variant:"ghost",onClick:()=>m(!1),children:"Cancel"}),s.jsx(x,{onClick:async()=>{if(!ce||!ne)return void f({title:"Name and slug are required",variant:"destructive"});const e={name:ce,slug:ne,description:me||null};let s;if(K){const{error:a}=await g.from("blog_categories").update(e).eq("id",K.id);s=a}else{const{error:a}=await g.from("blog_categories").insert(e);s=a}s?f({title:"Error saving category",description:s.message,variant:"destructive"}):(f({title:`Category ${K?"updated":"created"} successfully`}),m(!1),xe())},children:K?"Update":"Create"})]})]})}),s.jsx($,{open:Q,onOpenChange:W,children:s.jsxs(H,{className:"glass-effect",children:[s.jsxs(I,{children:[s.jsx(V,{children:"Are you sure?"}),s.jsxs(Y,{children:["This will delete the ",se,' "',X?.name,'". This action cannot be undone.',"category"===se&&" Posts in this category will become uncategorized.","tag"===se&&" This tag will be removed from all posts."]})]}),s.jsxs(J,{children:[s.jsx(G,{children:"Cancel"}),s.jsx(Z,{onClick:()=>"tag"===se?(async e=>{const{error:s}=await g.from("blog_tags").delete().eq("id",e);s?f({title:"Error deleting tag",description:s.message,variant:"destructive"}):(f({title:"Tag deleted successfully"}),xe()),W(!1)})(X.id):(async e=>{const{error:s}=await g.from("blog_categories").delete().eq("id",e);s?f({title:"Error deleting category",description:s.message,variant:"destructive"}):(f({title:"Category deleted successfully"}),xe()),W(!1)})(X.id),className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})})]})};export{K as default};
