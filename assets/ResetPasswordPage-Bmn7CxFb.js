var __async=(e,s,t)=>new Promise((a,r)=>{var fulfilled=e=>{try{step(t.next(e))}catch(s){r(s)}},rejected=e=>{try{step(t.throw(e))}catch(s){r(s)}},step=e=>e.done?a(e.value):Promise.resolve(e.value).then(fulfilled,rejected);step((t=t.apply(e,s)).next())});import{j as e}from"./vendor-ui-gkPPHEPH.js";import{u as s,a as t}from"./vendor-react-Dds8VpLH.js";import{H as a,l as r,B as l,s as i,t as n}from"./index-CKU5P2TY.js";import{I as o}from"./input-EoRmzMlo.js";import{m as d,a8 as c,c as m,n as x}from"./vendor-utils-CisQTPNT.js";import"./vendor-editor-DGqHsWbs.js";const ResetPasswordPage=()=>{const u=s(),[p,h]=t.useState(!1),[w,j]=t.useState(""),[f,g]=t.useState(""),[v,b]=t.useState(!1);t.useEffect(()=>{__async(null,null,function*(){const{data:{session:e}}=yield i.auth.getSession();e||n({variant:"destructive",title:"Invalid or expired link",description:"Please request a new password reset link."})})},[]);return v?e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:[e.jsx(a,{children:e.jsx("title",{children:"Password Reset - GreenoFig"})}),e.jsx(d.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"w-full max-w-md",children:e.jsxs("div",{className:"glass-effect rounded-2xl p-8 shadow-2xl text-center",children:[e.jsx("div",{className:"inline-block p-4 bg-green-100 dark:bg-green-900 rounded-full mb-4",children:e.jsx(c,{className:"w-12 h-12 text-green-600 dark:text-green-400"})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Password Updated!"}),e.jsx("p",{className:"text-text-secondary mb-6",children:"Your password has been successfully updated. Redirecting to login..."}),e.jsx(m,{className:"w-6 h-6 animate-spin mx-auto text-primary"})]})})]}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:[e.jsx(a,{children:e.jsx("title",{children:"Set Your Password - GreenoFig"})}),e.jsx(d.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"w-full max-w-md",children:e.jsxs("div",{className:"glass-effect rounded-2xl p-8 shadow-2xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(d.div,{animate:{scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"inline-block mb-4",children:e.jsx("img",{src:r,alt:"GreenoFig Logo",className:"w-20 h-20"})}),e.jsx("h1",{className:"text-4xl font-bold gradient-text mb-2",children:"Set Your Password"}),e.jsx("p",{className:"text-text-secondary",children:"Create a secure password for your account"})]}),e.jsxs("form",{onSubmit:e=>__async(null,null,function*(){if(e.preventDefault(),w.length<8)n({variant:"destructive",title:"Password too short",description:"Password must be at least 8 characters long."});else if(w===f){h(!0);try{const{error:e}=yield i.auth.updateUser({password:w});if(e)throw e;b(!0),n({title:"Password updated successfully",description:"You can now login with your new password."}),setTimeout(()=>{u("/login")},2e3)}catch(s){console.error("Error updating password:",s),n({variant:"destructive",title:"Error updating password",description:s.message})}finally{h(!1)}}else n({variant:"destructive",title:"Passwords do not match",description:"Please make sure both passwords are the same."})}),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary"}),e.jsx(o,{type:"password",value:w,onChange:e=>j(e.target.value),className:"pl-10",placeholder:"Enter new password",disabled:p,required:!0,minLength:8})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"At least 8 characters"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-primary"}),e.jsx(o,{type:"password",value:f,onChange:e=>g(e.target.value),className:"pl-10",placeholder:"Confirm new password",disabled:p,required:!0,minLength:8})]})]}),e.jsxs(l,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground font-semibold py-3 rounded-lg shadow-lg",disabled:p,children:[p&&e.jsx(m,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Updating Password...":"Set Password"]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>u("/login"),className:"text-text-secondary hover:text-primary transition-colors text-sm",disabled:p,children:"Back to Login"})})]})})]})};export{ResetPasswordPage as default};
