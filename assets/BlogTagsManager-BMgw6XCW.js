var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,__defNormalProp=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,__spreadValues=(e,s)=>{for(var a in s||(s={}))l.call(s,a)&&__defNormalProp(e,a,s[a]);if(t)for(var a of t(s))r.call(s,a)&&__defNormalProp(e,a,s[a]);return e},__objRest=(e,s)=>{var a={};for(var i in e)l.call(e,i)&&s.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&t)for(var i of t(e))s.indexOf(i)<0&&r.call(e,i)&&(a[i]=e[i]);return a},__async=(e,s,a)=>new Promise((t,l)=>{var fulfilled=e=>{try{step(a.next(e))}catch(s){l(s)}},rejected=e=>{try{step(a.throw(e))}catch(s){l(s)}},step=e=>e.done?t(e.value):Promise.resolve(e.value).then(fulfilled,rejected);step((a=a.apply(e,s)).next())});import{E as i,j as c,F as n,G as o,J as d,K as m,M as g,N as x,Q as u}from"./vendor-ui-gkPPHEPH.js";import{a as h}from"./vendor-react-Dds8VpLH.js";import{c as f,g as j,s as p,B as N,T as y,t as v}from"./index-CKU5P2TY.js";import{C as b,a as w,b as C,c as S}from"./card-Pj_OUEuM.js";import{I as T}from"./input-EoRmzMlo.js";import{L as k}from"./label-qLSsZ5R6.js";import{T as O,a as z,b as P,c as E}from"./tabs-rmIyZk1l.js";import{D as _,b as F,c as R,d as q,e as D,f as A}from"./dialog-D_VtZS95.js";import{c as B,m as I,am as J,an as L,P as U,ag as $,ao as G}from"./vendor-utils-CisQTPNT.js";import"./vendor-editor-DGqHsWbs.js";const H=i,K=n,M=h.forwardRef((e,t)=>{var l,r=e,{className:i}=r,n=__objRest(r,["className"]);return c.jsx(u,(l=__spreadValues({className:f("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",i)},n),s(l,a({ref:t}))))});M.displayName=u.displayName;const Q=h.forwardRef((e,s)=>{var a=e,{className:t}=a,l=__objRest(a,["className"]);return c.jsxs(K,{children:[c.jsx(M,{}),c.jsx(o,__spreadValues({ref:s,className:f("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t)},l))]})});Q.displayName=o.displayName;const AlertDialogHeader=e=>{var s=e,{className:a}=s,t=__objRest(s,["className"]);return c.jsx("div",__spreadValues({className:f("flex flex-col space-y-2 text-center sm:text-left",a)},t))};AlertDialogHeader.displayName="AlertDialogHeader";const AlertDialogFooter=e=>{var s=e,{className:a}=s,t=__objRest(s,["className"]);return c.jsx("div",__spreadValues({className:f("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a)},t))};AlertDialogFooter.displayName="AlertDialogFooter";const V=h.forwardRef((e,s)=>{var a=e,{className:t}=a,l=__objRest(a,["className"]);return c.jsx(d,__spreadValues({ref:s,className:f("text-lg font-semibold",t)},l))});V.displayName=d.displayName;const W=h.forwardRef((e,s)=>{var a=e,{className:t}=a,l=__objRest(a,["className"]);return c.jsx(m,__spreadValues({ref:s,className:f("text-sm text-muted-foreground",t)},l))});W.displayName=m.displayName;const X=h.forwardRef((e,s)=>{var a=e,{className:t}=a,l=__objRest(a,["className"]);return c.jsx(x,__spreadValues({ref:s,className:f(j(),t)},l))});X.displayName=x.displayName;const Y=h.forwardRef((e,s)=>{var a=e,{className:t}=a,l=__objRest(a,["className"]);return c.jsx(g,__spreadValues({ref:s,className:f(j({variant:"outline"}),"mt-2 sm:mt-0",t)},l))});Y.displayName=g.displayName;const BlogTagsManager=()=>{const[e,s]=h.useState([]),[a,t]=h.useState([]),[l,r]=h.useState(!0),[i,n]=h.useState(!1),[o,d]=h.useState(!1),[m,g]=h.useState(null),[x,u]=h.useState(null),[f,j]=h.useState(!1),[K,M]=h.useState(null),[Z,ee]=h.useState("tag"),[se,ae]=h.useState(""),[te,le]=h.useState(""),[re,ie]=h.useState(""),[ce,ne]=h.useState(""),[oe,de]=h.useState("");h.useEffect(()=>{fetchData()},[]);const fetchData=()=>__async(null,null,function*(){r(!0);const[e,a]=yield Promise.all([p.from("blog_tags").select("*").order("name"),p.from("blog_categories").select("*").order("name")]);e.data&&s(e.data),a.data&&t(a.data),r(!1)}),generateSlug=e=>e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),openTagDialog=(e=null)=>{e?(g(e),ae(e.name),le(e.slug)):(g(null),ae(""),le("")),n(!0)},openCategoryDialog=(e=null)=>{e?(u(e),ie(e.name),ne(e.slug),de(e.description||"")):(u(null),ie(""),ne(""),de("")),d(!0)},openDeleteDialog=(e,s)=>{M(e),ee(s),j(!0)};return l?c.jsx("div",{className:"flex justify-center items-center py-10",children:c.jsx(B,{className:"h-8 w-8 animate-spin text-primary"})}):c.jsxs(I.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[c.jsx("div",{className:"flex justify-between items-center",children:c.jsx("h2",{className:"text-3xl font-bold",children:"Tags & Categories"})}),c.jsxs(O,{defaultValue:"tags",className:"w-full",children:[c.jsxs(z,{className:"grid w-full grid-cols-2",children:[c.jsx(P,{value:"tags",children:"Tags"}),c.jsx(P,{value:"categories",children:"Categories"})]}),c.jsx(E,{value:"tags",className:"space-y-4",children:c.jsxs(b,{className:"glass-effect",children:[c.jsx(w,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(C,{className:"flex items-center gap-2",children:[c.jsx(J,{className:"w-5 h-5"}),"Blog Tags (",e.length,")"]}),c.jsxs(N,{onClick:()=>openTagDialog(),children:[c.jsx(L,{className:"w-4 h-4 mr-2"}),"New Tag"]})]})}),c.jsx(S,{children:0===e.length?c.jsx("div",{className:"text-center py-8 text-text-secondary",children:"No tags yet. Create your first tag!"}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>c.jsx(b,{className:"glass-effect",children:c.jsx(S,{className:"p-4",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold",children:e.name}),c.jsxs("p",{className:"text-sm text-text-secondary",children:["/",e.slug]})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx(N,{variant:"ghost",size:"icon",onClick:()=>openTagDialog(e),children:c.jsx(U,{className:"w-4 h-4"})}),c.jsx(N,{variant:"ghost",size:"icon",onClick:()=>openDeleteDialog(e,"tag"),className:"text-red-400 hover:text-red-500",children:c.jsx($,{className:"w-4 h-4"})})]})]})})},e.id))})})]})}),c.jsx(E,{value:"categories",className:"space-y-4",children:c.jsxs(b,{className:"glass-effect",children:[c.jsx(w,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs(C,{className:"flex items-center gap-2",children:[c.jsx(G,{className:"w-5 h-5"}),"Blog Categories (",a.length,")"]}),c.jsxs(N,{onClick:()=>openCategoryDialog(),children:[c.jsx(L,{className:"w-4 h-4 mr-2"}),"New Category"]})]})}),c.jsx(S,{children:0===a.length?c.jsx("div",{className:"text-center py-8 text-text-secondary",children:"No categories yet. Create your first category!"}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(e=>c.jsx(b,{className:"glass-effect",children:c.jsx(S,{className:"p-4",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold",children:e.name}),c.jsxs("p",{className:"text-sm text-text-secondary",children:["/",e.slug]}),e.description&&c.jsx("p",{className:"text-sm text-text-secondary mt-2",children:e.description})]}),c.jsxs("div",{className:"flex gap-1",children:[c.jsx(N,{variant:"ghost",size:"icon",onClick:()=>openCategoryDialog(e),children:c.jsx(U,{className:"w-4 h-4"})}),c.jsx(N,{variant:"ghost",size:"icon",onClick:()=>openDeleteDialog(e,"category"),className:"text-red-400 hover:text-red-500",children:c.jsx($,{className:"w-4 h-4"})})]})]})})},e.id))})})]})})]}),c.jsx(_,{open:i,onOpenChange:n,children:c.jsxs(F,{className:"glass-effect",children:[c.jsxs(R,{children:[c.jsx(q,{children:m?"Edit Tag":"Create New Tag"}),c.jsx(D,{children:"Add a tag to organize your blog posts."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(k,{htmlFor:"tag-name",children:"Tag Name *"}),c.jsx(T,{id:"tag-name",placeholder:"e.g., React, JavaScript",value:se,onChange:e=>{ae(e.target.value),m||le(generateSlug(e.target.value))}})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(k,{htmlFor:"tag-slug",children:"Slug *"}),c.jsx(T,{id:"tag-slug",placeholder:"e.g., react, javascript",value:te,onChange:e=>le(e.target.value)})]})]}),c.jsxs(A,{children:[c.jsx(N,{variant:"ghost",onClick:()=>n(!1),children:"Cancel"}),c.jsx(N,{onClick:()=>__async(null,null,function*(){if(!se||!te)return void v({title:"Name and slug are required",variant:"destructive"});const e={name:se,slug:te};let s;if(m){const{error:a}=yield p.from("blog_tags").update(e).eq("id",m.id);s=a}else{const{error:a}=yield p.from("blog_tags").insert(e);s=a}s?v({title:"Error saving tag",description:s.message,variant:"destructive"}):(v({title:`Tag ${m?"updated":"created"} successfully`}),n(!1),fetchData())}),children:m?"Update":"Create"})]})]})}),c.jsx(_,{open:o,onOpenChange:d,children:c.jsxs(F,{className:"glass-effect",children:[c.jsxs(R,{children:[c.jsx(q,{children:x?"Edit Category":"Create New Category"}),c.jsx(D,{children:"Add a category to organize your blog posts."})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(k,{htmlFor:"category-name",children:"Category Name *"}),c.jsx(T,{id:"category-name",placeholder:"e.g., Technology, Tutorials",value:re,onChange:e=>{ie(e.target.value),x||ne(generateSlug(e.target.value))}})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(k,{htmlFor:"category-slug",children:"Slug *"}),c.jsx(T,{id:"category-slug",placeholder:"e.g., technology, tutorials",value:ce,onChange:e=>ne(e.target.value)})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(k,{htmlFor:"category-description",children:"Description"}),c.jsx(y,{id:"category-description",placeholder:"Brief description of this category",value:oe,onChange:e=>de(e.target.value),rows:3})]})]}),c.jsxs(A,{children:[c.jsx(N,{variant:"ghost",onClick:()=>d(!1),children:"Cancel"}),c.jsx(N,{onClick:()=>__async(null,null,function*(){if(!re||!ce)return void v({title:"Name and slug are required",variant:"destructive"});const e={name:re,slug:ce,description:oe||null};let s;if(x){const{error:a}=yield p.from("blog_categories").update(e).eq("id",x.id);s=a}else{const{error:a}=yield p.from("blog_categories").insert(e);s=a}s?v({title:"Error saving category",description:s.message,variant:"destructive"}):(v({title:`Category ${x?"updated":"created"} successfully`}),d(!1),fetchData())}),children:x?"Update":"Create"})]})]})}),c.jsx(H,{open:f,onOpenChange:j,children:c.jsxs(Q,{className:"glass-effect",children:[c.jsxs(AlertDialogHeader,{children:[c.jsx(V,{children:"Are you sure?"}),c.jsxs(W,{children:["This will delete the ",Z,' "',null==K?void 0:K.name,'". This action cannot be undone.',"category"===Z&&" Posts in this category will become uncategorized.","tag"===Z&&" This tag will be removed from all posts."]})]}),c.jsxs(AlertDialogFooter,{children:[c.jsx(Y,{children:"Cancel"}),c.jsx(X,{onClick:()=>{return"tag"===Z?(s=K.id,__async(null,null,function*(){const{error:e}=yield p.from("blog_tags").delete().eq("id",s);e?v({title:"Error deleting tag",description:e.message,variant:"destructive"}):(v({title:"Tag deleted successfully"}),fetchData()),j(!1)})):(e=K.id,__async(null,null,function*(){const{error:s}=yield p.from("blog_categories").delete().eq("id",e);s?v({title:"Error deleting category",description:s.message,variant:"destructive"}):(v({title:"Category deleted successfully"}),fetchData()),j(!1)}));var e,s},className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})})]})};export{BlogTagsManager as default};
