import{j as e}from"./vendor-ui-fc6158c5.js";import{r as s}from"./vendor-react-c35372bd.js";import{u as t,s as a}from"./index-05318a06.js";import{Q as i}from"./QuickLogMeal-8b517fab.js";import{m as l,n as r,Y as d}from"./vendor-utils-1c344488.js";import"./vendor-editor-c22fa4d3.js";import"./dialog-3cad693a.js";import"./input-a2afde68.js";import"./label-00b518b2.js";import"./select-74e79011.js";const o=()=>{const{userProfile:o}=t(),[n,c]=s.useState([]),[m,x]=s.useState(null),[u,f]=s.useState(!0),[h,g]=s.useState(0);s.useEffect(()=>{(null==o?void 0:o.id)&&p()},[null==o?void 0:o.id,h]);const p=async()=>{f(!0);try{const e=(new Date).toISOString().split("T")[0],{data:s}=await a.from("meal_logs").select("*").eq("user_id",o.id).eq("date",e).order("consumed_at",{ascending:!1});c(s||[]);const{data:t}=await a.from("daily_metrics").select("*").eq("user_id",o.id).eq("date",e).single();x(t)}catch(e){}finally{f(!1)}},j=n.reduce((e,s)=>({calories:e.calories+(s.calories||0),protein:e.protein+(s.protein_g||0),carbs:e.carbs+(s.carbs_g||0),fats:e.fats+(s.fats_g||0)}),{calories:0,protein:0,carbs:0,fats:0}),b={calories:(null==o?void 0:o.target_calories)||2200,protein:(null==o?void 0:o.target_protein)||150,carbs:(null==o?void 0:o.target_carbs)||220,fats:(null==o?void 0:o.target_fats)||70},N=(e,s)=>Math.min(e/s*100,100);return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs(l.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Nutrition Tracker"}),e.jsx("p",{className:"text-text-secondary text-lg",children:"Track your meals and macros"})]}),e.jsx(i,{onSuccess:()=>{g(e=>e+1)}})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-effect rounded-xl p-6 shadow-xl",children:[e.jsx("h3",{className:"text-sm text-muted-foreground mb-2",children:"Calories"}),e.jsx("p",{className:"text-3xl font-bold mb-1",children:Math.round(j.calories)}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["of ",b.calories," kcal"]}),e.jsx("div",{className:"mt-4 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx(l.div,{initial:{width:0},animate:{width:`${N(j.calories,b.calories)}%`},transition:{duration:1},className:"h-full bg-gradient-to-r from-orange-500 to-red-500"})})]}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-effect rounded-xl p-6 shadow-xl",children:[e.jsx("h3",{className:"text-sm text-muted-foreground mb-2",children:"Protein"}),e.jsxs("p",{className:"text-3xl font-bold mb-1",children:[Math.round(j.protein),"g"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["of ",b.protein,"g"]}),e.jsx("div",{className:"mt-4 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx(l.div,{initial:{width:0},animate:{width:`${N(j.protein,b.protein)}%`},transition:{duration:1,delay:.2},className:"h-full bg-gradient-to-r from-pink-500 to-rose-500"})})]}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-effect rounded-xl p-6 shadow-xl",children:[e.jsx("h3",{className:"text-sm text-muted-foreground mb-2",children:"Carbs"}),e.jsxs("p",{className:"text-3xl font-bold mb-1",children:[Math.round(j.carbs),"g"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["of ",b.carbs,"g"]}),e.jsx("div",{className:"mt-4 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx(l.div,{initial:{width:0},animate:{width:`${N(j.carbs,b.carbs)}%`},transition:{duration:1,delay:.3},className:"h-full bg-gradient-to-r from-blue-500 to-cyan-500"})})]}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-effect rounded-xl p-6 shadow-xl",children:[e.jsx("h3",{className:"text-sm text-muted-foreground mb-2",children:"Fats"}),e.jsxs("p",{className:"text-3xl font-bold mb-1",children:[Math.round(j.fats),"g"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["of ",b.fats,"g"]}),e.jsx("div",{className:"mt-4 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx(l.div,{initial:{width:0},animate:{width:`${N(j.fats,b.fats)}%`},transition:{duration:1,delay:.4},className:"h-full bg-gradient-to-r from-yellow-500 to-amber-500"})})]})]}),e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"glass-effect rounded-xl p-6 shadow-xl",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[e.jsx(r,{className:"w-6 h-6 text-primary"}),"Today's Meals"]}),u?e.jsx("div",{className:"text-center py-12 text-muted-foreground",children:e.jsx("div",{className:"animate-pulse",children:"Loading meals..."})}):0===n.length?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(d,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No meals logged today"}),e.jsx("p",{className:"text-sm mt-2",children:'Click "Log Meal" above to add your first meal'})]}):e.jsx("div",{className:"space-y-4",children:n.map((s,t)=>e.jsxs(l.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6+.1*t},className:"p-4 bg-muted rounded-lg hover:bg-muted/80 transition-all",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:s.meal_name||"Meal"}),e.jsx("p",{className:"text-sm text-muted-foreground capitalize",children:s.meal_type}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.description})]}),e.jsxs("span",{className:"px-3 py-1 bg-orange-500/20 text-orange-600 dark:text-orange-300 rounded-full text-sm font-semibold",children:[s.calories||0," kcal"]})]}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Protein: ",e.jsxs("span",{className:"text-foreground font-semibold",children:[s.protein_g||0,"g"]})]}),e.jsxs("span",{className:"text-muted-foreground",children:["Carbs: ",e.jsxs("span",{className:"text-foreground font-semibold",children:[s.carbs_g||0,"g"]})]}),e.jsxs("span",{className:"text-muted-foreground",children:["Fats: ",e.jsxs("span",{className:"text-foreground font-semibold",children:[s.fats_g||0,"g"]})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground mt-2",children:new Date(s.consumed_at).toLocaleTimeString()})]},s.id))})]})]})};export{o as default};
