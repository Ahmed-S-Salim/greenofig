import{j as e}from"./vendor-ui-5701c8ab.js";import{r as s}from"./vendor-react-c35372bd.js";import{H as t,B as r,A as a,b as i,d as l,L as n,I as o,T as c,s as m,t as d}from"./index-8b14cb79.js";import{S as h}from"./SiteLayout-c184b565.js";import{C as x,c as p}from"./card-dd4d8de1.js";import{D as g,e as j,a as u,b as v,c as w,d as y,f}from"./dialog-da002b66.js";import{$ as N,L as b,m as S,R as F,h as _}from"./vendor-utils-278148e0.js";import"./vendor-editor-1616b420.js";import"./OnboardingSurvey-c8353612.js";const R=({review:s,index:t})=>{const r={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{delay:.1*t}}};return e.jsx(S.div,{variants:r,initial:"hidden",animate:"visible",children:e.jsx(x,{className:"glass-effect h-full flex flex-col",children:e.jsxs(p,{className:"p-6 flex flex-col flex-grow",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs(a,{className:"h-12 w-12 border-2 border-primary",children:[e.jsx(i,{src:s.avatar_url||s.customer_image,alt:s.customer_name}),e.jsx(l,{children:(n=s.customer_name,n?n.split(" ").map(e=>e[0]).join("").toUpperCase():"U")})]}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-bold text-lg",children:s.customer_name}),s.customer_title&&e.jsx("p",{className:"text-xs text-text-secondary",children:s.customer_title}),e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((t,r)=>e.jsx(F,{className:"w-4 h-4 "+(r<s.rating?"text-yellow-400 fill-yellow-400":"text-gray-500")},r))})]})]}),e.jsx("p",{className:"text-text-secondary text-sm flex-grow",children:s.quote})]})})});var n},C=({setOpen:t})=>{const[a,i]=s.useState({name:"",title:"",review:"",rating:0}),[l,h]=s.useState(!1);return e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),0!==a.rating){h(!0);try{const{error:e}=await m.from("testimonials").insert([{customer_name:a.name,customer_title:a.title,quote:a.review,rating:a.rating,is_featured:!1,is_approved:!0,display_order:9999,created_at:(new Date).toISOString()}]);if(e)throw e;d({title:"Review Submitted!",description:"Thank you for sharing your experience with us."}),t(!1),window.location.reload()}catch(s){d({title:"Submission Failed",description:s.message||"Please try again later.",variant:"destructive"})}finally{h(!1)}}else d({title:"Rating Required",description:"Please select a star rating before submitting.",variant:"destructive"})},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"name",children:"Your Name"}),e.jsx(o,{id:"name",placeholder:"John Doe",value:a.name,onChange:e=>i({...a,name:e.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"review-title",children:"Review Title"}),e.jsx(o,{id:"review-title",placeholder:"An amazing experience!",value:a.title,onChange:e=>i({...a,title:e.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"review",children:"Your Review"}),e.jsx(c,{id:"review",placeholder:"Tell us what you think...",value:a.review,onChange:e=>i({...a,review:e.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Rating *"}),e.jsx("div",{className:"flex items-center space-x-1",children:[...Array(5)].map((s,t)=>e.jsx(F,{className:"w-6 h-6 cursor-pointer transition-colors "+(t<a.rating?"text-yellow-400 fill-yellow-400":"text-gray-300 hover:text-yellow-400"),onClick:()=>i({...a,rating:t+1})},t))})]}),e.jsx(f,{children:e.jsx(r,{type:"submit",disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Submit Review"]})})})]})},q=({logoUrl:a})=>{const[i,l]=s.useState(!1),[n,o]=s.useState([]),[c,x]=s.useState(!0);return s.useEffect(()=>{(async()=>{x(!0);const{data:e,error:s}=await m.from("testimonials").select("*").eq("is_approved",!0).order("created_at",{ascending:!1});s?(d({title:"Error loading reviews",description:s.message,variant:"destructive"}),o([])):o(e||[]),x(!1)})()},[]),e.jsxs(e.Fragment,{children:[e.jsxs(t,{children:[e.jsx("title",{children:"Reviews - GreenoFig"}),e.jsx("meta",{name:"description",content:"See what our members are saying about their success with GreenoFig. Real stories from real people transforming their health."}),e.jsx("link",{rel:"canonical",href:"https://greenofig.com/reviews"}),e.jsx("meta",{property:"og:title",content:"Reviews - GreenoFig"}),e.jsx("meta",{property:"og:description",content:"See what our members are saying about their success with GreenoFig. Real stories from real people transforming their health."}),e.jsx("meta",{property:"og:url",content:"https://greenofig.com/reviews"}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{name:"robots",content:"index, follow"})]}),e.jsxs(h,{logoUrl:a,pageTitle:e.jsxs(e.Fragment,{children:["Success Stories from Our ",e.jsx("span",{className:"gradient-text",children:"Community"})]}),pageDescription:"See how GreenoFig is helping people just like you achieve their health and wellness goals.",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsxs(g,{open:i,onOpenChange:l,children:[e.jsx(j,{asChild:!0,children:e.jsxs(r,{size:"lg",className:"bg-primary hover:bg-primary/90 hover:shadow-xl transition-all text-primary-foreground shadow-lg",children:[e.jsx(N,{className:"mr-2 h-5 w-5"}),"Write a Review"]})}),e.jsxs(u,{className:"sm:max-w-[425px] glass-effect",children:[e.jsxs(v,{children:[e.jsx(w,{children:"Share Your Story"}),e.jsx(y,{children:"We'd love to hear about your experience with GreenoFig."})]}),e.jsx(C,{setOpen:l})]})]})}),c?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(b,{className:"w-12 h-12 animate-spin text-primary"})}):0===n.length?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"No Reviews Yet!"}),e.jsx("p",{className:"text-text-secondary mt-2",children:"Be the first to share your success story with GreeonFig."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map((s,t)=>e.jsx(R,{review:s,index:t},s.id||t))})]})]})};export{q as default};
