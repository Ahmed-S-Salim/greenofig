import{j as e}from"./vendor-ui-5701c8ab.js";import{u as s,r as t,L as i}from"./vendor-react-c35372bd.js";import{u as a,B as l,H as r,t as n,s as c}from"./index-8b14cb79.js";import{D as d,a as o}from"./dialog-da002b66.js";import{m,b as x,A as h,O as u,L as p,X as g,V as j,a1 as b,D as v,ae as f,aa as y}from"./vendor-utils-278148e0.js";import"./vendor-editor-1616b420.js";const N=({logoUrl:N,isOpen:w,setIsOpen:_,inline:k=!1})=>{const{user:C,userProfile:z,refreshUserProfile:F}=a(),G=s(),[S,L]=t.useState(1),[P,A]=t.useState(!1),[Y,B]=t.useState("metric"),[M,O]=t.useState({age:(null==z?void 0:z.age)||"",gender:(null==z?void 0:z.gender)||"",height_cm:(null==z?void 0:z.height_cm)||"",weight_kg:(null==z?void 0:z.weight_kg)||"",activity_level:(null==z?void 0:z.activity_level)||"",health_goals:(null==z?void 0:z.health_goals)||[]});t.useEffect(()=>{z&&O({age:z.age||"",gender:z.gender||"",height_cm:z.height_cm||"",weight_kg:z.weight_kg||"",activity_level:z.activity_level||"",health_goals:z.health_goals||[]})},[z]);const E=[{id:"sedentary",label:"Sedentary",description:"Little or no exercise"},{id:"lightly_active",label:"Lightly Active",description:"Light exercise/sports 1-3 days/week"},{id:"moderately_active",label:"Moderately Active",description:"Moderate exercise/sports 3-5 days/week"},{id:"very_active",label:"Very Active",description:"Hard exercise/sports 6-7 days a week"},{id:"super_active",label:"Super Active",description:"Very hard exercise & physical job"}],H=[{id:"lose_weight",label:"Lose Weight",icon:b},{id:"build_muscle",label:"Build Muscle",icon:v},{id:"improve_endurance",label:"Improve Endurance",icon:f},{id:"eat_healthier",label:"Eat Healthier",icon:f},{id:"increase_energy",label:"Increase Energy",icon:y}],I=e=>{const{name:s,value:t}=e.target;O(e=>({...e,[s]:t}))},U=e=>{const s=e.target.value;if("metric"===Y)O(e=>({...e,height_cm:s}));else{const e=(2.54*s).toFixed(1);O(s=>({...s,height_cm:e}))}},W=e=>{const s=e.target.value;if("metric"===Y)O(e=>({...e,weight_kg:s}));else{const e=(s/2.20462).toFixed(1);O(s=>({...s,weight_kg:e}))}},q=()=>{S<4&&L(e=>e+1)},D=()=>{S>1&&L(e=>e-1)},V=async()=>{if(!C)return n({title:"Sign Up Required",description:"Please sign up to save your personalized profile"}),void G("/signup");A(!0);try{const{error:e}=await c.from("user_profiles").update(M).eq("id",C.id);if(e)throw e;await F(),n({title:"Success! ðŸŽ‰",description:"Your profile has been updated successfully"}),A(!1),L(e=>e+1)}catch(e){A(!1),n({title:"Error updating profile",description:e.message||"Something went wrong. Please try again.",variant:"destructive"})}},R=()=>{k?L(1):(_&&(_(!1),L(1)),G("/app",{replace:!0}))},J=()=>{_&&(_(!1),L(1))},K=()=>{switch(S){case 1:return e.jsxs(m.div,{className:"space-y-3",children:[e.jsx("h2",{className:"text-lg font-bold",children:"About You"}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Age"}),e.jsx("input",{type:"number",name:"age",value:M.age,onChange:I,className:"w-full bg-background border border-border rounded-md p-2 text-sm",placeholder:"e.g., 28"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Gender"}),e.jsxs("select",{name:"gender",value:M.gender,onChange:I,className:"w-full bg-background border border-border rounded-md p-2 text-sm",children:[e.jsx("option",{value:"",children:"Select gender"}),e.jsx("option",{value:"male",children:"Male"}),e.jsx("option",{value:"female",children:"Female"}),e.jsx("option",{value:"other",children:"Other"}),e.jsx("option",{value:"prefer_not_to_say",children:"Prefer not to say"})]})]})]})]},"step1");case 2:return e.jsxs(m.div,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Your Body Metrics"}),e.jsxs("div",{className:"flex gap-1 bg-muted rounded-md p-0.5",children:[e.jsx("button",{onClick:()=>B("metric"),className:"px-2 py-1 text-xs rounded-md transition-colors "+("metric"===Y?"bg-primary text-primary-foreground":"text-muted-foreground"),children:"Metric"}),e.jsx("button",{onClick:()=>B("imperial"),className:"px-2 py-1 text-xs rounded-md transition-colors "+("imperial"===Y?"bg-primary text-primary-foreground":"text-muted-foreground"),children:"Imperial"})]})]}),e.jsxs("div",{className:"space-y-2.5",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:["Height ","metric"===Y?"(cm)":"(inches)"]}),e.jsx("input",{type:"number",value:M.height_cm?"metric"===Y?M.height_cm:(M.height_cm/2.54).toFixed(1):"",onChange:U,className:"w-full bg-background border border-border rounded-md p-2 text-sm",placeholder:"metric"===Y?"e.g., 175":"e.g., 69",step:"0.1"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:["Weight ","metric"===Y?"(kg)":"(lbs)"]}),e.jsx("input",{type:"number",value:M.weight_kg?"metric"===Y?M.weight_kg:(2.20462*M.weight_kg).toFixed(1):"",onChange:W,className:"w-full bg-background border border-border rounded-md p-2 text-sm",placeholder:"metric"===Y?"e.g., 70":"e.g., 154",step:"0.1"})]})]})]},"step2");case 3:return e.jsxs(m.div,{className:"space-y-3",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Your Lifestyle"}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:"Activity Level"}),E.map(s=>e.jsxs("button",{onClick:()=>O(e=>({...e,activity_level:s.id})),className:"w-full text-left p-2 rounded-md border-2 transition-all "+(M.activity_level===s.id?"border-primary bg-primary/10":"border-border hover:border-primary/50"),children:[e.jsx("p",{className:"text-xs font-semibold",children:s.label}),e.jsx("p",{className:"text-xs text-text-secondary",children:s.description})]},s.id))]})]},"step3");case 4:return e.jsxs(m.div,{className:"space-y-3",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Your Goals"}),e.jsx("p",{className:"text-xs text-text-secondary",children:"Select your primary health and fitness goals. You can select multiple."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:H.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>{return e=s.id,void O(s=>{const t=s.health_goals.includes(e)?s.health_goals.filter(s=>s!==e):[...s.health_goals,e];return{...s,health_goals:t}});var e},className:"flex flex-col items-center justify-center p-2 aspect-square rounded-md border-2 transition-all "+(M.health_goals.includes(s.id)?"border-primary bg-primary/10":"border-border hover:border-primary/50"),children:[e.jsx(t,{className:"w-5 h-5 mb-1 text-primary"}),e.jsx("span",{className:"text-xs font-semibold text-center",children:s.label})]},s.id)})})]},"step4");case 5:return e.jsxs(m.div,{className:"text-center flex flex-col items-center py-3",children:[e.jsx(j,{className:"w-12 h-12 text-green-500 mb-3"}),e.jsx("h2",{className:"text-lg font-bold",children:"Setup Complete!"}),e.jsx("p",{className:"text-xs text-text-secondary mt-1.5 mb-4",children:"Your profile is personalized. Get ready to start your wellness journey."}),e.jsx(l,{onClick:R,size:"sm",children:"Go to Dashboard"})]},"step5");default:return null}};if(k){const s=C&&z;return e.jsx("div",{className:"w-full max-w-4xl mx-auto relative",children:e.jsxs("div",{className:"glass-effect rounded-lg p-4 shadow-lg border border-border",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("img",{src:N,alt:"GreenoFig Logo",className:"w-8 h-8"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-sm font-bold gradient-text",children:s?"Complete Your Profile":"Get Personalized Health Guidance"}),e.jsx("p",{className:"text-xs text-text-secondary",children:s?"Personalize your GreenoFig experience":"Sign up to create your custom health plan"})]}),!s&&e.jsx(l,{size:"sm",onClick:()=>G("/signup"),className:"bg-primary text-primary-foreground text-xs px-3 py-1 h-auto",children:"Sign Up"})]}),e.jsx("div",{className:"mb-3",children:e.jsx("div",{className:"w-full bg-muted rounded-full h-1.5",children:e.jsx(m.div,{className:"bg-primary h-1.5 rounded-full",initial:{width:"0%"},animate:{width:(S-1)/4*100+"%"}})})}),e.jsx(x,{mode:"wait",children:e.jsx(m.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:K()},S)}),S<=4&&e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:D,disabled:1===S||P,className:"text-xs",children:[e.jsx(h,{className:"w-3 h-3 mr-1"})," Back"]}),S<4?e.jsxs(l,{size:"sm",onClick:q,className:"text-xs",children:["Next ",e.jsx(u,{className:"w-3 h-3 ml-1"})]}):e.jsxs(l,{size:"sm",onClick:V,disabled:P,className:"text-xs",children:[P&&e.jsx(p,{className:"w-3 h-3 mr-1 animate-spin"}),"Finish"]})]})]})})}return void 0!==w&&_?e.jsx(e.Fragment,{children:e.jsx(d,{open:w,onOpenChange:_,children:e.jsx(o,{className:"glass-effect custom-scrollbar max-w-md max-h-[90vh] overflow-y-auto p-0",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:N,alt:"GreenoFig Logo",className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-base font-bold gradient-text",children:"Welcome to GreenoFig"}),e.jsx("p",{className:"text-xs text-text-secondary",children:"Let's personalize your experience."})]})]}),e.jsx(l,{variant:"ghost",size:"icon",onClick:J,className:"h-8 w-8",children:e.jsx(g,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"glass-effect rounded-lg p-3 sm:p-4",children:[e.jsx("div",{className:"mb-3",children:S<=4&&e.jsx("div",{className:"w-full bg-muted rounded-full h-1.5",children:e.jsx(m.div,{className:"bg-primary h-1.5 rounded-full",initial:{width:"0%"},animate:{width:(S-1)/4*100+"%"}})})}),e.jsx(x,{mode:"wait",children:e.jsx(m.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:K()},S)}),S<=4&&e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:D,disabled:1===S||P,className:"text-xs",children:[e.jsx(h,{className:"w-3 h-3 mr-1"})," Back"]}),S<4?e.jsxs(l,{size:"sm",onClick:q,className:"text-xs",children:["Next ",e.jsx(u,{className:"w-3 h-3 ml-1"})]}):e.jsxs(l,{size:"sm",onClick:V,disabled:P,className:"text-xs",children:[P&&e.jsx(p,{className:"w-3 h-3 mr-1 animate-spin"}),"Finish"]})]})]})]})})})}):e.jsxs(e.Fragment,{children:[e.jsxs(r,{children:[e.jsx("title",{children:"Onboarding - GreenoFig"}),e.jsx("meta",{name:"description",content:"Personalize your GreenoFig experience."})]}),e.jsx("div",{className:"flex flex-col items-center py-8 px-3 sm:px-4 bg-background text-foreground",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx(i,{to:"/home",className:"inline-block mb-1.5",children:e.jsx("img",{src:N,alt:"GreenoFig Logo",className:"w-10 h-10"})}),e.jsx("h1",{className:"text-xl font-bold gradient-text",children:"Welcome to GreenoFig"}),e.jsx("p",{className:"text-xs text-text-secondary",children:"Let's personalize your experience."})]}),e.jsxs("div",{className:"glass-effect rounded-lg p-3 sm:p-4 shadow-xl",children:[e.jsx("div",{className:"mb-3",children:S<=4&&e.jsx("div",{className:"w-full bg-muted rounded-full h-1.5",children:e.jsx(m.div,{className:"bg-primary h-1.5 rounded-full",initial:{width:"0%"},animate:{width:(S-1)/4*100+"%"}})})}),e.jsx(x,{mode:"wait",children:e.jsx(m.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:K()},S)}),S<=4&&e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:D,disabled:1===S||P,className:"text-xs",children:[e.jsx(h,{className:"w-3 h-3 mr-1"})," Back"]}),S<4?e.jsxs(l,{size:"sm",onClick:q,className:"text-xs",children:["Next ",e.jsx(u,{className:"w-3 h-3 ml-1"})]}):e.jsxs(l,{size:"sm",onClick:V,disabled:P,className:"text-xs",children:[P&&e.jsx(p,{className:"w-3 h-3 mr-1 animate-spin"}),"Finish"]})]})]})]})})]})};export{N as default};
