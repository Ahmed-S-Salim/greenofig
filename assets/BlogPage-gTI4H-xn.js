import{j as e}from"./vendor-ui-gkPPHEPH.js";import{e as s,a as t,u as a}from"./vendor-react-Dds8VpLH.js";import{H as i,B as l,s as r,t as n}from"./index-CKU5P2TY.js";import{C as o,a as c,b as d,c as x,d as m}from"./card-Pj_OUEuM.js";import{T as h,a as p,b as g,c as u}from"./tabs-rmIyZk1l.js";import{S as j}from"./SiteLayout-B0FdKiSe.js";import{c as f,m as y,f as v,U as b,g as N,a as w}from"./vendor-utils-CisQTPNT.js";import"./OnboardingSurvey-C6cZk74l.js";import"./dialog-D_VtZS95.js";import"./vendor-editor-DGqHsWbs.js";const BlogPage=({logoUrl:_})=>{const{postId:k}=s(),[C,F]=t.useState([]),[S,G]=t.useState(null),[T,B]=t.useState(!0),D=a();t.useEffect(()=>{var e,s,t;e=null,s=null,t=function*(){if(B(!0),k){const{data:e,error:s}=yield r.from("blog_posts").select("\n            title,\n            content,\n            featured_image_url,\n            published_at,\n            author_id\n          ").eq("id",k).single();s||!e?(console.error("Post fetch error:",s),n({title:"Error fetching post",description:"This blog post could not be found.",variant:"destructive"}),D("/blog")):G(e)}else{const{data:e,error:s}=yield r.from("blog_posts").select("\n            id,\n            title,\n            content,\n            featured_image_url,\n            published_at,\n            author_id\n          ").eq("status","published").not("published_at","is",null).order("published_at",{ascending:!1});s?(console.error("Blog fetch error:",s),n({title:"Error fetching blog posts",description:s.message,variant:"destructive"}),F([])):F(e||[])}B(!1)},new Promise((a,i)=>{var fulfilled=e=>{try{step(t.next(e))}catch(s){i(s)}},rejected=e=>{try{step(t.throw(e))}catch(s){i(s)}},step=e=>e.done?a(e.value):Promise.resolve(e.value).then(fulfilled,rejected);step((t=t.apply(e,s)).next())})},[k,D]);const L={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.3}}},$={hidden:{y:20,opacity:0},visible:{y:0,opacity:1,transition:{type:"spring",stiffness:100}}},truncateText=(e,s)=>{if(!e)return"";const t=e.replace(/<\/?[^>]+(>|$)/g,"");return t.length<=s?t:t.substring(0,s)+"..."},GridView=()=>C&&0!==C.length?e.jsx(y.div,{variants:L,initial:"hidden",animate:"visible",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:C.map(s=>e.jsx(y.div,{variants:$,children:e.jsxs(o,{className:"h-full flex flex-col glass-effect overflow-hidden group",children:[e.jsx("div",{className:"aspect-video overflow-hidden cursor-pointer",onClick:()=>D(`/blog/${s.id}`),children:e.jsx("img",{alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",src:s.featured_image_url||"https://images.unsplash.com/photo-1504983875-d3b163aba9e6"})}),e.jsxs(c,{children:[e.jsx(d,{className:"text-xl font-bold group-hover:text-primary transition-colors cursor-pointer",onClick:()=>D(`/blog/${s.id}`),children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("img",{alt:"GreenoFig Team",className:"w-6 h-6 rounded-full",src:"https://images.unsplash.com/photo-1652841190565-b96e0acbae17"}),e.jsx("span",{className:"text-sm text-text-secondary",children:"GreenoFig Team"}),e.jsx("span",{className:"text-sm text-text-secondary",children:"Â·"}),e.jsx("span",{className:"text-sm text-text-secondary",children:new Date(s.published_at).toLocaleDateString()})]})]}),e.jsx(x,{className:"flex-grow",children:e.jsx("p",{className:"text-text-secondary",children:truncateText(s.content,100)})}),e.jsx(m,{children:e.jsxs(l,{onClick:()=>D(`/blog/${s.id}`),variant:"link",className:"p-0 text-primary",children:["Read More ",e.jsx(w,{className:"w-4 h-4 ml-2"})]})})]})},s.id))}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"No Posts Yet!"}),e.jsx("p",{className:"text-text-secondary mt-2",children:"Check back soon for exciting articles on health and wellness."})]}),FeaturedView=()=>{if(!C||0===C.length)return e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"No Posts Yet!"}),e.jsx("p",{className:"text-text-secondary mt-2",children:"Check back soon for exciting articles on health and wellness."})]});const s=C[0],t=C.slice(1);return e.jsxs(y.div,{variants:L,initial:"hidden",animate:"visible",className:"space-y-12",children:[s&&e.jsx(y.div,{variants:$,className:"group",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8 items-center glass-effect p-8 rounded-2xl",children:[e.jsx("div",{className:"aspect-video overflow-hidden rounded-lg cursor-pointer",onClick:()=>D(`/blog/${s.id}`),children:e.jsx("img",{alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",src:s.featured_image_url||"https://images.unsplash.com/photo-1543362906-acfc16c67564"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-primary font-semibold mb-2",children:"Featured Article"}),e.jsx("h2",{className:"text-3xl font-bold mb-4 group-hover:text-primary transition-colors cursor-pointer",onClick:()=>D(`/blog/${s.id}`),children:s.title}),e.jsx("p",{className:"text-text-secondary mb-4",children:truncateText(s.content,150)}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-text-secondary",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:"GreenoFig Team"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(s.published_at).toLocaleDateString()})]})]})]})]})}),t.length>0&&e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(s=>e.jsxs(y.div,{variants:$,className:"glass-effect p-6 rounded-2xl group flex flex-col",children:[e.jsx("div",{className:"aspect-video overflow-hidden rounded-lg mb-4 cursor-pointer",onClick:()=>D(`/blog/${s.id}`),children:e.jsx("img",{alt:s.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",src:s.featured_image_url||"https://images.unsplash.com/photo-1490645935967-10de6ba17061"})}),e.jsx("h3",{className:"text-xl font-bold mb-2 flex-grow group-hover:text-primary transition-colors cursor-pointer",onClick:()=>D(`/blog/${s.id}`),children:s.title}),e.jsx("p",{className:"text-text-secondary text-sm mb-4",children:truncateText(s.content,80)}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-text-secondary mt-auto",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-3 h-3"}),e.jsx("span",{children:"GreenoFig Team"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-3 h-3"}),e.jsx("span",{children:new Date(s.published_at).toLocaleDateString()})]})]})]},s.id))})]})};return T?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx(f,{className:"h-12 w-12 animate-spin text-primary"})}):k&&S?e.jsxs(j,{logoUrl:_,children:[e.jsxs(i,{children:[e.jsxs("title",{children:[S.title," - GreenoFig Blog"]}),e.jsx("meta",{name:"description",content:S.content.substring(0,160)})]}),e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs(l,{variant:"ghost",onClick:()=>D("/blog"),className:"mb-8",children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Back to Blog"]}),e.jsxs("article",{children:[e.jsx(y.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-4xl md:text-5xl font-bold tracking-tight mb-4 leading-tight",children:S.title}),e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex items-center gap-6 text-text-secondary mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{children:"GreenoFig Team"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(S.published_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsx(y.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.3},className:"aspect-video rounded-xl overflow-hidden mb-8 glass-effect",children:e.jsx("img",{src:S.featured_image_url||"https://images.unsplash.com/photo-1504983875-d3b163aba9e6",alt:S.title,className:"w-full h-full object-cover"})}),e.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"prose prose-invert max-w-none text-lg leading-relaxed text-text-secondary prose-h2:text-text-primary prose-h3:text-text-primary prose-strong:text-text-primary",dangerouslySetInnerHTML:{__html:S.content.replace(/\n/g,"<br />")}})]})]})]}):e.jsxs(j,{logoUrl:_,children:[e.jsxs(i,{children:[e.jsx("title",{children:"Blog - GreenoFig"}),e.jsx("meta",{name:"description",content:"Latest articles, tips, and insights on health, wellness, and nutrition from the GreenoFig team."}),e.jsx("link",{rel:"canonical",href:"https://greenofig.com/blog"}),e.jsx("meta",{property:"og:title",content:"Blog - GreenoFig"}),e.jsx("meta",{property:"og:description",content:"Latest articles, tips, and insights on health, wellness, and nutrition from the GreenoFig team."}),e.jsx("meta",{property:"og:url",content:"https://greenofig.com/blog"}),e.jsx("meta",{property:"og:type",content:"website"})]}),e.jsxs("div",{className:"container mx-auto px-4 py-16 sm:py-24",children:[e.jsxs(y.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center mb-12",children:[e.jsxs("h1",{className:"text-4xl md:text-6xl font-bold tracking-tight",children:["The ",e.jsx("span",{className:"gradient-text",children:"GreenoFig"})," Blog"]}),e.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-lg text-text-secondary",children:"Insights, tips, and stories on your journey to a healthier life."})]}),0===C.length?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"No Posts Yet!"}),e.jsx("p",{className:"text-text-secondary mt-2",children:"Check back soon for exciting articles on health and wellness."})]}):e.jsxs(h,{defaultValue:"all",className:"w-full",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs(p,{className:"glass-effect",children:[e.jsx(g,{value:"all",children:"All Posts"}),e.jsx(g,{value:"featured",children:"Featured Articles"})]})}),e.jsx(u,{value:"all",children:e.jsx(GridView,{})}),e.jsx(u,{value:"featured",children:e.jsx(FeaturedView,{})})]})]})]})};export{BlogPage as default};
