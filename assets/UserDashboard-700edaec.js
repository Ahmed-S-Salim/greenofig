import{j as e}from"./vendor-ui-5701c8ab.js";import{r as s,u as t}from"./vendor-react-c35372bd.js";import{u as a,B as i,L as l,I as r,s as n,t as d,T as o,a as c,H as m}from"./index-8b14cb79.js";import{C as u,a as x,b as h,c as p}from"./card-dd4d8de1.js";import{D as g,e as j,a as f,b as v,c as y}from"./dialog-da002b66.js";import{a1 as w,D as _,a2 as b,a3 as N,a4 as k,a5 as S,a6 as C,a7 as F,S as P,a8 as D,a9 as M,aa as A,k as q,I,ab as L,ac as T,L as $,E as W,y as G,w as E,Z as B,ad as O,X as Y,m as R,ae as H,af as z,ag as U,ah as V,ai as K,aj as Q}from"./vendor-utils-278148e0.js";import{Q as J}from"./QuickLogMeal-f3f9fab6.js";import{S as Z,a as X,b as ee,c as se,d as te}from"./select-0f6e4c1b.js";import{T as ae,a as ie,b as le,c as re}from"./tabs-70057a82.js";import{g as ne,a as de,c as oe}from"./stripeEnhanced-2c159fc2.js";import{A as ce,a as me,b as ue,c as xe,d as he,e as pe,f as ge,g as je}from"./alert-dialog-d1e0857c.js";import"./vendor-editor-1616b420.js";const fe=({onSuccess:t})=>{const{userProfile:o}=a(),[c,m]=s.useState(!1),[u,x]=s.useState(!1),[h,p]=s.useState({weight_kg:(null==o?void 0:o.weight_kg)||"",body_fat_percentage:"",date:(new Date).toISOString().split("T")[0]});return e.jsxs(g,{open:c,onOpenChange:m,children:[e.jsx(j,{asChild:!0,children:e.jsxs(i,{className:"w-full h-12 min-h-[44px] text-sm sm:text-base",children:[e.jsx(w,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"}),e.jsx("span",{className:"truncate",children:"Log Weight"})]})}),e.jsxs(f,{className:"glass-effect custom-scrollbar sm:max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsx(v,{children:e.jsx(y,{children:"Log Your Weight"})}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),x(!0);try{const e=h.date,{data:s}=await n.from("daily_metrics").select("*").eq("user_id",o.id).eq("date",e).single();if(s){const{error:e}=await n.from("daily_metrics").update({weight_kg:parseFloat(h.weight_kg),body_fat_percentage:h.body_fat_percentage?parseFloat(h.body_fat_percentage):null}).eq("id",s.id);if(e)throw e}else{const{error:s}=await n.from("daily_metrics").insert({user_id:o.id,date:e,weight_kg:parseFloat(h.weight_kg),body_fat_percentage:h.body_fat_percentage?parseFloat(h.body_fat_percentage):null});if(s)throw s}await n.from("user_profiles").update({weight_kg:parseFloat(h.weight_kg)}).eq("id",o.id),await n.from("activity_feed").insert({user_id:o.id,activity_type:"weight_update",activity_title:"Weight Updated",activity_description:`Logged weight: ${h.weight_kg} kg`,metadata:{weight_kg:parseFloat(h.weight_kg)}}),await n.rpc("update_user_streak",{p_user_id:o.id,p_streak_type:"weight_log",p_activity_date:e}),d({title:"Weight Logged!",description:`Successfully logged ${h.weight_kg} kg`}),m(!1),t&&t()}catch(s){d({title:"Error",description:"Failed to log weight. Please try again.",variant:"destructive"})}finally{x(!1)}},className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx(l,{htmlFor:"date",className:"text-sm sm:text-base",children:"Date"}),e.jsx(r,{id:"date",type:"date",value:h.date,onChange:e=>p({...h,date:e.target.value}),max:(new Date).toISOString().split("T")[0],required:!0,className:"mt-1.5 w-full min-w-0"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"weight",className:"text-sm sm:text-base",children:"Weight (kg) *"}),e.jsx(r,{id:"weight",type:"number",step:"0.1",placeholder:"70.5",value:h.weight_kg,onChange:e=>p({...h,weight_kg:e.target.value}),required:!0,className:"mt-1.5"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"body_fat",className:"text-sm sm:text-base",children:"Body Fat % (optional)"}),e.jsx(r,{id:"body_fat",type:"number",step:"0.1",placeholder:"18.5",value:h.body_fat_percentage,onChange:e=>p({...h,body_fat_percentage:e.target.value}),className:"mt-1.5"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 pt-2",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>m(!1),className:"flex-1 h-12 min-h-[44px] text-sm sm:text-base",children:"Cancel"}),e.jsx(i,{type:"submit",disabled:u,className:"flex-1 h-12 min-h-[44px] text-sm sm:text-base",children:u?"Logging...":"Log Weight"})]})]})]})]})},ve=({onSuccess:t})=>{const{userProfile:c}=a(),[m,u]=s.useState(!1),[x,h]=s.useState(!1),[p,w]=s.useState({workout_name:"",workout_type:"cardio",duration_minutes:"",calories_burned:"",intensity:"moderate",notes:"",feeling:"good",date:(new Date).toISOString().split("T")[0]});return e.jsxs(g,{open:m,onOpenChange:u,children:[e.jsx(j,{asChild:!0,children:e.jsxs(i,{className:"w-full",children:[e.jsx(_,{className:"w-10 h-10 mr-2",strokeWidth:3}),"Log Workout"]})}),e.jsxs(f,{className:"glass-effect custom-scrollbar sm:max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsx(v,{children:e.jsx(y,{children:"Log Your Workout"})}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{const e={user_id:c.id,workout_name:p.workout_name,workout_type:p.workout_type,duration_minutes:parseInt(p.duration_minutes),calories_burned:p.calories_burned?parseInt(p.calories_burned):null,intensity:p.intensity,notes:p.notes,feeling:p.feeling,date:p.date},{error:s}=await n.from("workout_logs").insert(e);if(s)throw s;const{data:a}=await n.from("daily_metrics").select("*").eq("user_id",c.id).eq("date",p.date).single(),i=((null==a?void 0:a.calories_burned)||0)+(p.calories_burned?parseInt(p.calories_burned):0),l=((null==a?void 0:a.active_minutes)||0)+parseInt(p.duration_minutes);a?await n.from("daily_metrics").update({calories_burned:i,active_minutes:l}).eq("id",a.id):await n.from("daily_metrics").insert({user_id:c.id,date:p.date,calories_burned:i,active_minutes:l}),await n.from("activity_feed").insert({user_id:c.id,activity_type:"completed_workout",activity_title:"Completed Workout",activity_description:p.workout_name,metadata:{duration:parseInt(p.duration_minutes),calories:p.calories_burned?parseInt(p.calories_burned):0}}),await n.rpc("update_user_streak",{p_user_id:c.id,p_streak_type:"workout",p_activity_date:p.date}),d({title:"Workout Logged!",description:`Great job completing ${p.workout_name}!`}),w({workout_name:"",workout_type:"cardio",duration_minutes:"",calories_burned:"",intensity:"moderate",notes:"",feeling:"good",date:(new Date).toISOString().split("T")[0]}),u(!1),t&&t()}catch(s){d({title:"Error",description:"Failed to log workout. Please try again.",variant:"destructive"})}finally{h(!1)}},className:"space-y-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx(l,{htmlFor:"date",children:"Date"}),e.jsx(r,{id:"date",type:"date",value:p.date,onChange:e=>w({...p,date:e.target.value}),max:(new Date).toISOString().split("T")[0],required:!0,className:"w-full min-w-0"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"workout_name",children:"Workout Name *"}),e.jsx(r,{id:"workout_name",placeholder:"e.g., Morning Run",value:p.workout_name,onChange:e=>w({...p,workout_name:e.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"workout_type",children:"Workout Type *"}),e.jsxs(Z,{value:p.workout_type,onValueChange:e=>w({...p,workout_type:e}),children:[e.jsx(X,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(te,{value:"cardio",children:"Cardio"}),e.jsx(te,{value:"strength",children:"Strength Training"}),e.jsx(te,{value:"yoga",children:"Yoga"}),e.jsx(te,{value:"sports",children:"Sports"}),e.jsx(te,{value:"hiit",children:"HIIT"}),e.jsx(te,{value:"pilates",children:"Pilates"}),e.jsx(te,{value:"swimming",children:"Swimming"}),e.jsx(te,{value:"cycling",children:"Cycling"}),e.jsx(te,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"duration",children:"Duration (minutes) *"}),e.jsx(r,{id:"duration",type:"number",placeholder:"30",value:p.duration_minutes,onChange:e=>w({...p,duration_minutes:e.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"calories",children:"Calories Burned"}),e.jsx(r,{id:"calories",type:"number",placeholder:"300",value:p.calories_burned,onChange:e=>w({...p,calories_burned:e.target.value})})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"intensity",children:"Intensity *"}),e.jsxs(Z,{value:p.intensity,onValueChange:e=>w({...p,intensity:e}),children:[e.jsx(X,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(te,{value:"light",children:"Light"}),e.jsx(te,{value:"moderate",children:"Moderate"}),e.jsx(te,{value:"intense",children:"Intense"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"feeling",children:"How did you feel?"}),e.jsxs(Z,{value:p.feeling,onValueChange:e=>w({...p,feeling:e}),children:[e.jsx(X,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(te,{value:"exhausted",children:"Exhausted"}),e.jsx(te,{value:"tired",children:"Tired"}),e.jsx(te,{value:"good",children:"Good"}),e.jsx(te,{value:"energized",children:"Energized"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"notes",children:"Notes (optional)"}),e.jsx(o,{id:"notes",placeholder:"How was your workout?",value:p.notes,onChange:e=>w({...p,notes:e.target.value}),rows:2})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>u(!1),className:"flex-1",children:"Cancel"}),e.jsx(i,{type:"submit",disabled:x,className:"flex-1",children:x?"Logging...":"Log Workout"})]})]})]})]})},ye=({onSuccess:t})=>{const{userProfile:l}=a(),[r,o]=s.useState(0),[c,m]=s.useState(!1),g=250;s.useEffect(()=>{(null==l?void 0:l.id)&&j()},[null==l?void 0:l.id]);const j=async()=>{try{const e=(new Date).toISOString().split("T")[0],{data:s}=await n.from("daily_metrics").select("water_ml").eq("user_id",l.id).eq("date",e).single();s&&o(s.water_ml||0)}catch(e){}},f=async e=>{m(!0);try{const s=Math.max(0,r+e),a=(new Date).toISOString().split("T")[0],{data:i}=await n.from("daily_metrics").select("*").eq("user_id",l.id).eq("date",a).single();i?await n.from("daily_metrics").update({water_ml:s}).eq("id",i.id):await n.from("daily_metrics").insert({user_id:l.id,date:a,water_ml:s}),o(s),e>0&&(await n.from("activity_feed").insert({user_id:l.id,activity_type:"water_intake",activity_title:"Water Logged",activity_description:`Added ${e}ml of water`,metadata:{water_ml:e}}),await n.rpc("update_user_streak",{p_user_id:l.id,p_streak_type:"water_intake",p_activity_date:a})),t&&t()}catch(s){d({title:"Error",description:"Failed to update water intake.",variant:"destructive"})}finally{m(!1)}},v=Math.min(r/2e3*100,100),y=Math.floor(r/g);return e.jsxs(u,{className:"glass-effect h-full",children:[e.jsx(x,{className:"pb-2",children:e.jsxs(h,{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5 text-blue-500"}),"Water Intake"]})}),e.jsxs(p,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-500",children:[r,"ml"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["/ ",2e3,"ml"]}),e.jsxs("div",{className:"text-xs text-muted-foreground ml-auto",children:[y," glasses"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-3",children:e.jsx("div",{className:"bg-blue-500 h-3 rounded-full transition-all duration-300 flex items-center justify-end pr-2",style:{width:`${v}%`},children:v>15&&e.jsxs("span",{className:"text-[10px] font-semibold text-white",children:[Math.round(v),"%"]})})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>f(-250),disabled:c||0===r,children:[e.jsx(N,{className:"w-4 h-4 mr-1"}),"Remove"]}),e.jsxs(i,{size:"sm",onClick:()=>f(g),disabled:c,className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"Add Glass"]})]}),e.jsxs("div",{className:"text-xs text-center text-muted-foreground pt-1",children:["1 glass = ",g,"ml"]})]})]})},we=({onSuccess:t})=>{const{userProfile:o}=a(),[c,m]=s.useState(!1),[u,x]=s.useState(!1),[h,p]=s.useState({sleep_hours:"",sleep_quality:"good",date:new Date(Date.now()-864e5).toISOString().split("T")[0]});return e.jsxs(g,{open:c,onOpenChange:m,children:[e.jsx(j,{asChild:!0,children:e.jsxs(i,{className:"w-full",children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Log Sleep"]})}),e.jsxs(f,{className:"glass-effect custom-scrollbar sm:max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsx(v,{children:e.jsx(y,{children:"Log Your Sleep"})}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),x(!0);try{const{data:e}=await n.from("daily_metrics").select("*").eq("user_id",o.id).eq("date",h.date).single();e?await n.from("daily_metrics").update({sleep_hours:parseFloat(h.sleep_hours),sleep_quality:h.sleep_quality}).eq("id",e.id):await n.from("daily_metrics").insert({user_id:o.id,date:h.date,sleep_hours:parseFloat(h.sleep_hours),sleep_quality:h.sleep_quality}),await n.from("activity_feed").insert({user_id:o.id,activity_type:"sleep_log",activity_title:"Sleep Logged",activity_description:`${h.sleep_hours}h of ${h.sleep_quality} sleep`,metadata:{hours:parseFloat(h.sleep_hours),quality:h.sleep_quality}}),d({title:"Sleep Logged!",description:`Logged ${h.sleep_hours} hours of sleep`}),p({sleep_hours:"",sleep_quality:"good",date:new Date(Date.now()-864e5).toISOString().split("T")[0]}),m(!1),t&&t()}catch(s){d({title:"Error",description:"Failed to log sleep. Please try again.",variant:"destructive"})}finally{x(!1)}},className:"space-y-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx(l,{htmlFor:"date",children:"Night of"}),e.jsx(r,{id:"date",type:"date",value:h.date,onChange:e=>p({...h,date:e.target.value}),max:(new Date).toISOString().split("T")[0],required:!0,className:"w-full min-w-0"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select the night you went to bed"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"sleep_hours",children:"Hours of Sleep *"}),e.jsx(r,{id:"sleep_hours",type:"number",step:"0.5",placeholder:"7.5",value:h.sleep_hours,onChange:e=>p({...h,sleep_hours:e.target.value}),min:"0",max:"24",required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"sleep_quality",children:"Sleep Quality"}),e.jsxs(Z,{value:h.sleep_quality,onValueChange:e=>p({...h,sleep_quality:e}),children:[e.jsx(X,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(te,{value:"poor",children:"Poor ðŸ˜´"}),e.jsx(te,{value:"fair",children:"Fair ðŸ˜"}),e.jsx(te,{value:"good",children:"Good ðŸ˜Š"}),e.jsx(te,{value:"excellent",children:"Excellent ðŸŒŸ"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>m(!1),className:"flex-1",children:"Cancel"}),e.jsx(i,{type:"submit",disabled:u,className:"flex-1",children:u?"Logging...":"Log Sleep"})]})]})]})]})},_e=()=>{const{userProfile:t}=a(),[i,l]=s.useState([]),[r,d]=s.useState([]),[o,c]=s.useState([]),[m,g]=s.useState(!0),[j,f]=s.useState("7");s.useEffect(()=>{(null==t?void 0:t.id)&&v()},[null==t?void 0:t.id,j]);const v=async()=>{try{const e=new Date;e.setDate(e.getDate()-parseInt(j));const s=e.toISOString().split("T")[0],{data:a}=await n.from("daily_metrics").select("*").eq("user_id",t.id).gte("date",s).order("date",{ascending:!0});a&&(l(a.filter(e=>e.weight_kg).map(e=>({date:e.date,value:e.weight_kg}))),d(a.map(e=>({date:e.date,burned:e.calories_burned||0,consumed:e.calories_consumed||0}))),c(a.filter(e=>e.sleep_hours).map(e=>({date:e.date,value:e.sleep_hours,quality:e.sleep_quality})))),g(!1)}catch(e){g(!1)}},y=(s,t,a="",i="primary")=>{var l,r,n;if(0===s.length)return e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No data yet for the selected period"})});const d=Math.max(...s.map(e=>e.value||0)),o=Math.min(...s.map(e=>e.value||0)),c=d-o,m=(e=>{if(e.length<2)return{trend:"neutral",percent:0};const s=e.slice(-Math.min(3,e.length)),t=e.slice(0,Math.min(3,e.length)),a=s.reduce((e,s)=>e+s.value,0)/s.length,i=t.reduce((e,s)=>e+s.value,0)/t.length,l=(a-i)/i*100;return{trend:l>2?"up":l<-2?"down":"neutral",percent:Math.abs(l).toFixed(1)}})(s);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-3xl font-bold",children:[(null==(r=null==(l=s[s.length-1])?void 0:l.value)?void 0:r.toFixed(1))||"N/A",(null==(n=s[s.length-1])?void 0:n.value)&&a]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Latest ",t]})]}),e.jsxs("div",{className:"flex items-center gap-2 "+("up"===m.trend?"text-green-500":"down"===m.trend?"text-red-500":"text-muted-foreground"),children:["up"===m.trend&&e.jsx(C,{className:"w-5 h-5"}),"down"===m.trend&&e.jsx(F,{className:"w-5 h-5"}),"neutral"===m.trend&&e.jsx(N,{className:"w-5 h-5"}),e.jsxs("span",{className:"text-sm font-semibold",children:[m.percent,"%"]})]})]}),e.jsx("div",{className:"space-y-2",children:s.map((s,t)=>{var i;const l=c>0?(s.value-o)/c*100:50;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-xs text-muted-foreground w-20",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsxs("div",{className:"flex-1 h-8 bg-muted rounded-full overflow-hidden relative",children:[e.jsx("div",{className:"h-full bg-gradient-to-r from-primary to-green-400 rounded-full transition-all duration-300",style:{width:`${Math.max(l,5)}%`}}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-end pr-3",children:e.jsxs("span",{className:"text-xs font-medium",children:[null==(i=s.value)?void 0:i.toFixed(1),a]})})]})]},t)})}),s.length>1&&e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-semibold",children:[d.toFixed(1),a]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Highest"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-semibold",children:[(s.reduce((e,s)=>e+s.value,0)/s.length).toFixed(1),a]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Average"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-semibold",children:[o.toFixed(1),a]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Lowest"})]})]})]})};return m?e.jsx(u,{className:"glass-effect",children:e.jsx(p,{className:"p-8 text-center text-muted-foreground",children:"Loading progress data..."})}):e.jsxs(u,{className:"glass-effect",children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(h,{className:"text-xl font-bold",children:"Progress Tracking"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f("7"),className:"px-3 py-1 rounded text-sm "+("7"===j?"bg-primary text-primary-foreground":"bg-muted"),children:"7D"}),e.jsx("button",{onClick:()=>f("30"),className:"px-3 py-1 rounded text-sm "+("30"===j?"bg-primary text-primary-foreground":"bg-muted"),children:"30D"}),e.jsx("button",{onClick:()=>f("90"),className:"px-3 py-1 rounded text-sm "+("90"===j?"bg-primary text-primary-foreground":"bg-muted"),children:"90D"})]})]})}),e.jsx(p,{children:e.jsxs(ae,{defaultValue:"weight",children:[e.jsxs(ie,{className:"grid w-full grid-cols-3",children:[e.jsx(le,{value:"weight",children:"Weight"}),e.jsx(le,{value:"calories",children:"Calories"}),e.jsx(le,{value:"sleep",children:"Sleep"})]}),e.jsx(re,{value:"weight",className:"mt-6",children:y(i,"weight"," kg")}),e.jsx(re,{value:"calories",className:"mt-6",children:0===r.length?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:e.jsx("p",{children:"No calorie data yet for the selected period"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-500",children:Math.round(r.reduce((e,s)=>e+s.consumed,0)/r.length)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Consumed"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-500",children:Math.round(r.reduce((e,s)=>e+s.burned,0)/r.length)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Burned"})]})]}),e.jsx("div",{className:"space-y-2",children:r.map((s,t)=>{const a=Math.max(s.consumed,s.burned,2e3);return e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs",children:"Consumed"}),e.jsx("span",{className:"text-xs font-semibold",children:s.consumed})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-red-500 rounded-full",style:{width:s.consumed/a*100+"%"}})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs",children:"Burned"}),e.jsx("span",{className:"text-xs font-semibold",children:s.burned})]}),e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:s.burned/a*100+"%"}})})]})]})]},t)})})]})}),e.jsx(re,{value:"sleep",className:"mt-6",children:y(o,"sleep"," hrs")})]})})]})},be=({onSuccess:t})=>{var o;const{userProfile:c}=a(),[m,u]=s.useState(!1),[x,h]=s.useState(!1),[p,w]=s.useState(1),[_,b]=s.useState({plan_type:"daily",target_calories:"",dietary_preferences:"",meals_per_day:"3",allergies:"",cuisine_preference:"",cooking_time:"moderate"}),[N,k]=s.useState(null);return e.jsxs(g,{open:m,onOpenChange:u,children:[e.jsx(j,{asChild:!0,children:e.jsxs(i,{className:"w-full",size:"lg",children:[e.jsx(P,{className:"w-5 h-5 mr-2"}),"Generate AI Meal Plan"]})}),e.jsxs(f,{className:"glass-effect custom-scrollbar max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(v,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-6 h-6 text-primary"}),"AI Meal Plan Generator"]})}),1===p?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"plan_type",children:"Plan Type"}),e.jsxs(Z,{value:_.plan_type,onValueChange:e=>b({..._,plan_type:e}),children:[e.jsx(X,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(te,{value:"daily",children:"Daily Plan"}),e.jsx(te,{value:"weekly",children:"Weekly Plan"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"target_calories",children:"Target Calories"}),e.jsx(r,{id:"target_calories",type:"number",placeholder:(null==c?void 0:c.target_calories)||"2000",value:_.target_calories,onChange:e=>b({..._,target_calories:e.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"meals_per_day",children:"Meals per Day"}),e.jsxs(Z,{value:_.meals_per_day,onValueChange:e=>b({..._,meals_per_day:e}),children:[e.jsx(X,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(te,{value:"2",children:"2 Meals"}),e.jsx(te,{value:"3",children:"3 Meals"}),e.jsx(te,{value:"4",children:"4 Meals"}),e.jsx(te,{value:"5",children:"5 Meals"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"cooking_time",children:"Cooking Time"}),e.jsxs(Z,{value:_.cooking_time,onValueChange:e=>b({..._,cooking_time:e}),children:[e.jsx(X,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(te,{value:"quick",children:"Quick (15-20 min)"}),e.jsx(te,{value:"moderate",children:"Moderate (30-40 min)"}),e.jsx(te,{value:"extended",children:"Extended (1+ hour)"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"dietary_preferences",children:"Dietary Preferences"}),e.jsx(r,{id:"dietary_preferences",placeholder:(null==(o=null==c?void 0:c.dietary_restrictions)?void 0:o.join(", "))||"e.g., Vegetarian, Low-carb, Keto",value:_.dietary_preferences,onChange:e=>b({..._,dietary_preferences:e.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"allergies",children:"Allergies/Restrictions"}),e.jsx(r,{id:"allergies",placeholder:"e.g., Nuts, Dairy, Gluten",value:_.allergies,onChange:e=>b({..._,allergies:e.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"cuisine_preference",children:"Cuisine Preference (optional)"}),e.jsx(r,{id:"cuisine_preference",placeholder:"e.g., Mediterranean, Asian, American",value:_.cuisine_preference,onChange:e=>b({..._,cuisine_preference:e.target.value})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>u(!1),className:"flex-1",children:"Cancel"}),e.jsx(i,{onClick:async()=>{var e,s;h(!0);try{const t=`Create a ${_.plan_type} meal plan for a person with the following requirements:\n- Target Calories: ${_.target_calories||(null==c?void 0:c.target_calories)||2e3} kcal\n- Dietary Preferences: ${_.dietary_preferences||(null==(e=null==c?void 0:c.dietary_restrictions)?void 0:e.join(", "))||"None"}\n- Meals per Day: ${_.meals_per_day}\n- Allergies/Restrictions: ${_.allergies||"None"}\n- Cuisine Preference: ${_.cuisine_preference||"Any"}\n- Cooking Time: ${_.cooking_time}\n- Health Goals: ${(null==(s=null==c?void 0:c.health_goals)?void 0:s.join(", "))||"General wellness"}\n\nPlease provide detailed meal suggestions with ingredients, portions, and nutritional breakdown for each meal.`,a=Ne(_,c),{data:i,error:l}=await n.from("ai_meal_plans").insert({user_id:c.id,plan_name:`${_.plan_type} Meal Plan - ${(new Date).toLocaleDateString()}`,plan_type:_.plan_type,target_date:(new Date).toISOString().split("T")[0],target_calories:parseInt(_.target_calories||2e3),meals:a.meals,ai_prompt:t,ai_model:"gpt-4",status:"active"}).select().single();if(l)throw l;k(a),w(2),d({title:"Meal Plan Generated!",description:"Your personalized meal plan is ready"})}catch(t){d({title:"Error",description:"Failed to generate meal plan. Please try again.",variant:"destructive"})}finally{h(!1)}},disabled:x,className:"flex-1",children:x?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4 mr-2 animate-pulse"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Generate Plan"]})})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-primary/10 rounded-lg border border-primary/20",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Your Personalized Meal Plan"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Calories"}),e.jsx("div",{className:"font-semibold",children:null==N?void 0:N.totalCalories})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Protein"}),e.jsxs("div",{className:"font-semibold",children:[null==N?void 0:N.totalProtein,"g"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Carbs"}),e.jsxs("div",{className:"font-semibold",children:[null==N?void 0:N.totalCarbs,"g"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Fats"}),e.jsxs("div",{className:"font-semibold",children:[null==N?void 0:N.totalFats,"g"]})]})]})]}),e.jsx("div",{className:"space-y-4",children:null==N?void 0:N.meals.map((s,t)=>e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-primary"}),e.jsx("h4",{className:"font-semibold capitalize",children:s.type})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.calories," kcal"]})]}),e.jsx("h5",{className:"font-medium",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.description}),e.jsxs("div",{className:"flex gap-4 mt-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["P: ",s.protein,"g"]}),e.jsxs("span",{children:["C: ",s.carbs,"g"]}),e.jsxs("span",{children:["F: ",s.fats,"g"]})]}),s.ingredients&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("strong",{children:"Ingredients:"})," ",s.ingredients]})]},t))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>w(1),className:"flex-1",children:"Regenerate"}),e.jsx(i,{onClick:async()=>{h(!0);try{const e=(new Date).toISOString().split("T")[0];for(const s of N.meals)await n.from("meal_logs").insert({user_id:c.id,meal_type:s.type.toLowerCase(),meal_name:s.name,description:s.description,calories:s.calories,protein_g:s.protein,carbs_g:s.carbs,fats_g:s.fats,date:e,ai_generated:!0}),await n.from("activity_feed").insert({user_id:c.id,activity_type:"ai_meal_plan",activity_title:"AI Meal Plan Created",activity_description:`Generated ${N.meals.length} meal suggestions`,metadata:{meal_count:N.meals.length}});d({title:"Meals Saved!",description:"Your meal plan has been added to today's log"}),u(!1),w(1),k(null),t&&t()}catch(e){d({title:"Error",description:"Failed to save meals. Please try again.",variant:"destructive"})}finally{h(!1)}},disabled:x,className:"flex-1",children:x?"Saving...":"Save to Today"})]})]})]})]})},Ne=(e,s)=>{const t=parseInt(e.target_calories||2e3),a=parseInt(e.meals_per_day),i=Math.floor(t/a),l=["breakfast","lunch","dinner","snack"],r=[],n={breakfast:[{name:"Greek Yogurt Bowl",desc:"Greek yogurt with berries, granola, and honey",ingredients:"Greek yogurt, mixed berries, granola, honey, almonds"},{name:"Avocado Toast",desc:"Whole grain toast with mashed avocado and poached eggs",ingredients:"Whole grain bread, avocado, eggs, cherry tomatoes, olive oil"},{name:"Protein Smoothie",desc:"Banana, protein powder, spinach, and almond milk",ingredients:"Banana, protein powder, spinach, almond milk, peanut butter"}],lunch:[{name:"Grilled Chicken Salad",desc:"Mixed greens with grilled chicken, quinoa, and vinaigrette",ingredients:"Chicken breast, mixed greens, quinoa, cherry tomatoes, cucumber, olive oil"},{name:"Salmon Bowl",desc:"Brown rice with baked salmon, edamame, and avocado",ingredients:"Salmon fillet, brown rice, edamame, avocado, sesame seeds, soy sauce"},{name:"Turkey Wrap",desc:"Whole wheat wrap with turkey, hummus, and veggies",ingredients:"Whole wheat tortilla, turkey breast, hummus, lettuce, tomato, cucumber"}],dinner:[{name:"Stir-Fry Chicken",desc:"Chicken with colorful vegetables and brown rice",ingredients:"Chicken breast, broccoli, bell peppers, carrots, brown rice, soy sauce"},{name:"Baked Cod",desc:"Lemon herb cod with roasted vegetables",ingredients:"Cod fillet, lemon, herbs, sweet potato, asparagus, olive oil"},{name:"Lean Beef & Quinoa",desc:"Seasoned lean beef with quinoa and steamed broccoli",ingredients:"Lean beef, quinoa, broccoli, garlic, spices"}],snack:[{name:"Apple & Almond Butter",desc:"Sliced apple with natural almond butter",ingredients:"Apple, almond butter"},{name:"Protein Bar",desc:"High-protein, low-sugar protein bar",ingredients:"Protein bar"},{name:"Mixed Nuts",desc:"Handful of mixed nuts and dried fruit",ingredients:"Almonds, cashews, dried cranberries"}]};for(let d=0;d<a;d++){const e=l[d%4],s=n[e],t=s[Math.floor(Math.random()*s.length)];r.push({type:e,name:t.name,description:t.desc,ingredients:t.ingredients,calories:i+Math.floor(100*Math.random()-50),protein:Math.floor(.3*i/4),carbs:Math.floor(.4*i/4),fats:Math.floor(.3*i/9)})}return{meals:r,totalCalories:r.reduce((e,s)=>e+s.calories,0),totalProtein:r.reduce((e,s)=>e+s.protein,0),totalCarbs:r.reduce((e,s)=>e+s.carbs,0),totalFats:r.reduce((e,s)=>e+s.fats,0)}},ke=({onSuccess:t})=>{const{userProfile:r}=a(),[o,c]=s.useState(!1),[m,u]=s.useState(!1),[x,h]=s.useState(1),[p,w]=s.useState({plan_type:"daily",fitness_level:"intermediate",workout_duration:"30",equipment:"bodyweight",focus_area:"full_body",intensity:"moderate"}),[b,N]=s.useState(null);return e.jsxs(g,{open:o,onOpenChange:c,children:[e.jsx(j,{asChild:!0,children:e.jsxs(i,{className:"w-full",size:"lg",variant:"outline",children:[e.jsx(P,{className:"w-5 h-5 mr-2"}),"Generate AI Workout"]})}),e.jsxs(f,{className:"glass-effect custom-scrollbar max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsx(v,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-6 h-6 text-primary"}),"AI Workout Planner"]})}),1===x?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"plan_type",children:"Plan Type"}),e.jsxs(Z,{value:p.plan_type,onValueChange:e=>w({...p,plan_type:e}),children:[e.jsx(X,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(te,{value:"daily",children:"Single Workout"}),e.jsx(te,{value:"weekly",children:"Weekly Program"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"fitness_level",children:"Fitness Level"}),e.jsxs(Z,{value:p.fitness_level,onValueChange:e=>w({...p,fitness_level:e}),children:[e.jsx(X,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(te,{value:"beginner",children:"Beginner"}),e.jsx(te,{value:"intermediate",children:"Intermediate"}),e.jsx(te,{value:"advanced",children:"Advanced"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"duration",children:"Duration (minutes)"}),e.jsxs(Z,{value:p.workout_duration,onValueChange:e=>w({...p,workout_duration:e}),children:[e.jsx(X,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(te,{value:"15",children:"15 minutes"}),e.jsx(te,{value:"30",children:"30 minutes"}),e.jsx(te,{value:"45",children:"45 minutes"}),e.jsx(te,{value:"60",children:"60 minutes"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"intensity",children:"Intensity"}),e.jsxs(Z,{value:p.intensity,onValueChange:e=>w({...p,intensity:e}),children:[e.jsx(X,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(te,{value:"light",children:"Light"}),e.jsx(te,{value:"moderate",children:"Moderate"}),e.jsx(te,{value:"intense",children:"Intense"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"equipment",children:"Available Equipment"}),e.jsxs(Z,{value:p.equipment,onValueChange:e=>w({...p,equipment:e}),children:[e.jsx(X,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(te,{value:"bodyweight",children:"Bodyweight Only"}),e.jsx(te,{value:"dumbbells",children:"Dumbbells"}),e.jsx(te,{value:"gym",children:"Full Gym Access"}),e.jsx(te,{value:"home",children:"Home Equipment (bands, weights)"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"focus_area",children:"Focus Area"}),e.jsxs(Z,{value:p.focus_area,onValueChange:e=>w({...p,focus_area:e}),children:[e.jsx(X,{children:e.jsx(ee,{})}),e.jsxs(se,{children:[e.jsx(te,{value:"full_body",children:"Full Body"}),e.jsx(te,{value:"upper_body",children:"Upper Body"}),e.jsx(te,{value:"lower_body",children:"Lower Body"}),e.jsx(te,{value:"core",children:"Core & Abs"}),e.jsx(te,{value:"cardio",children:"Cardio"}),e.jsx(te,{value:"flexibility",children:"Flexibility & Mobility"})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>c(!1),className:"flex-1",children:"Cancel"}),e.jsx(i,{onClick:async()=>{var e;u(!0);try{const s=`Create a ${p.plan_type} workout plan with:\n- Fitness Level: ${p.fitness_level}\n- Duration: ${p.workout_duration} minutes\n- Equipment: ${p.equipment}\n- Focus Area: ${p.focus_area}\n- Intensity: ${p.intensity}\n- Health Goals: ${(null==(e=null==r?void 0:r.health_goals)?void 0:e.join(", "))||"General fitness"}\n\nProvide detailed exercises with sets, reps, and instructions.`,t=Se(p,r),{data:a,error:i}=await n.from("ai_workout_plans").insert({user_id:r.id,plan_name:`${p.focus_area} Workout - ${(new Date).toLocaleDateString()}`,plan_type:p.plan_type,target_date:(new Date).toISOString().split("T")[0],difficulty:p.fitness_level,workouts:t.workouts,ai_prompt:s,ai_model:"gpt-4",status:"active"}).select().single();if(i)throw i;N(t),h(2),d({title:"Workout Plan Generated!",description:"Your personalized workout is ready"})}catch(s){d({title:"Error",description:"Failed to generate workout. Please try again.",variant:"destructive"})}finally{u(!1)}},disabled:m,className:"flex-1",children:m?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4 mr-2 animate-pulse"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Generate Workout"]})})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-4 bg-primary/10 rounded-lg border border-primary/20",children:[e.jsx("h3",{className:"font-semibold mb-2",children:null==b?void 0:b.name}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Duration"}),e.jsxs("div",{className:"font-semibold",children:[null==b?void 0:b.totalDuration," min"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Exercises"}),e.jsx("div",{className:"font-semibold",children:null==b?void 0:b.workouts.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Est. Calories"}),e.jsx("div",{className:"font-semibold",children:null==b?void 0:b.estimatedCalories})]})]})]}),e.jsx("div",{className:"space-y-3",children:null==b?void 0:b.workouts.map((s,t)=>e.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-primary"}),e.jsx("h4",{className:"font-semibold",children:s.name})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.sets,"x",s.reps]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.instructions}),s.rest&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Rest: ",s.rest,"s"]})]},t))}),e.jsxs("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg text-sm",children:[e.jsx("strong",{children:"ðŸ’¡ Pro Tip:"})," Remember to warm up for 5 minutes before starting and cool down with stretching afterwards!"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{type:"button",variant:"outline",onClick:()=>h(1),className:"flex-1",children:"Regenerate"}),e.jsx(i,{onClick:async()=>{u(!0);try{const e=(new Date).toISOString().split("T")[0];await n.from("workout_logs").insert({user_id:r.id,workout_name:b.name,workout_type:p.focus_area,duration_minutes:b.totalDuration,calories_burned:b.estimatedCalories,intensity:p.intensity,exercises:b.workouts,date:e,ai_generated:!0,notes:"AI Generated Workout"}),await n.from("activity_feed").insert({user_id:r.id,activity_type:"ai_workout_plan",activity_title:"AI Workout Plan Created",activity_description:b.name,metadata:{exercises:b.workouts.length}}),d({title:"Workout Saved!",description:"Your workout has been added to today's log"}),c(!1),h(1),N(null),t&&t()}catch(e){d({title:"Error",description:"Failed to save workout. Please try again.",variant:"destructive"})}finally{u(!1)}},disabled:m,className:"flex-1",children:m?"Saving...":"Save Workout"})]})]})]})]})},Se=(e,s)=>{const t={full_body:[{name:"Push-ups",sets:3,reps:12,instructions:"Keep body straight, lower until chest nearly touches floor",rest:60},{name:"Squats",sets:3,reps:15,instructions:"Feet shoulder-width apart, lower until thighs parallel to ground",rest:60},{name:"Plank",sets:3,reps:"30s",instructions:"Hold body straight in plank position",rest:45},{name:"Lunges",sets:3,reps:"10 each",instructions:"Step forward, lower back knee toward floor",rest:60},{name:"Mountain Climbers",sets:3,reps:20,instructions:"Bring knees to chest alternately in plank position",rest:45}],upper_body:[{name:"Push-ups",sets:4,reps:12,instructions:"Standard push-up form",rest:60},{name:"Dips",sets:3,reps:10,instructions:"Use chair or parallel bars",rest:60},{name:"Pike Push-ups",sets:3,reps:8,instructions:"Hips up, head down between arms",rest:60},{name:"Arm Circles",sets:2,reps:30,instructions:"Small to large circles, both directions",rest:30}],lower_body:[{name:"Squats",sets:4,reps:15,instructions:"Bodyweight squats, full range of motion",rest:60},{name:"Lunges",sets:3,reps:"12 each",instructions:"Alternating forward lunges",rest:60},{name:"Glute Bridges",sets:3,reps:15,instructions:"Lift hips, squeeze glutes at top",rest:45},{name:"Calf Raises",sets:3,reps:20,instructions:"Rise up on toes, slow descent",rest:45}],core:[{name:"Plank",sets:3,reps:"45s",instructions:"Hold strong plank position",rest:45},{name:"Bicycle Crunches",sets:3,reps:20,instructions:"Bring opposite elbow to knee",rest:45},{name:"Russian Twists",sets:3,reps:30,instructions:"Rotate torso side to side",rest:45},{name:"Leg Raises",sets:3,reps:12,instructions:"Lift legs up, control descent",rest:60}],cardio:[{name:"Jumping Jacks",sets:3,reps:30,instructions:"Full range jumping jacks",rest:30},{name:"High Knees",sets:3,reps:40,instructions:"Run in place with high knees",rest:30},{name:"Burpees",sets:3,reps:10,instructions:"Full burpee with jump",rest:60},{name:"Mountain Climbers",sets:3,reps:30,instructions:"Fast-paced mountain climbers",rest:45}]},a=t[e.focus_area]||t.full_body,i=parseInt(e.workout_duration),l="intense"===e.intensity?10:"moderate"===e.intensity?7:5;return{name:`${e.focus_area.replace("_"," ").toUpperCase()} ${e.intensity} Workout`,workouts:a.slice(0,Math.floor(i/5)),totalDuration:i,estimatedCalories:i*l}},Ce=()=>{const{userProfile:t}=a(),[i,l]=s.useState([]),[r,d]=s.useState(!0);s.useEffect(()=>{(null==t?void 0:t.id)&&o()},[null==t?void 0:t.id]);const o=async()=>{try{const e=(new Date).toISOString().split("T")[0],s=new Date;s.setDate(s.getDate()-7);const a=s.toISOString().split("T")[0],{data:i}=await n.from("daily_metrics").select("*").eq("user_id",t.id).gte("date",a).order("date",{ascending:!0}),{data:r}=await n.from("daily_metrics").select("*").eq("user_id",t.id).eq("date",e).single(),{data:o}=await n.from("workout_logs").select("*").eq("user_id",t.id).gte("date",a),{data:m}=await n.from("meal_logs").select("*").eq("user_id",t.id).gte("date",a),u=c(i||[],r,o||[],m||[],t);l(u),d(!1)}catch(e){d(!1)}},c=(e,s,t,a,i)=>{var l,r;const n=[],d=e.filter(e=>e.weight_kg);if(d.length>=2){const e=d[0].weight_kg,s=d[d.length-1].weight_kg-e;Math.abs(s)>.5&&n.push({type:s<0?"success":"info",icon:C,title:s<0?"Weight Loss Progress":"Weight Gain",message:`You've ${s<0?"lost":"gained"} ${Math.abs(s).toFixed(1)}kg this week. ${s<0?"Great work! Keep it up!":"This might be muscle gain if you're strength training."}`})}if(s){const e=s.calories_consumed||0;s.calories_burned;const t=i.target_calories||2e3;e<.8*t?n.push({type:"warning",icon:q,title:"Low Calorie Intake",message:`You've consumed ${e} calories today, which is below your goal of ${t}. Consider adding a healthy snack!`}):e>1.2*t&&n.push({type:"info",icon:I,title:"High Calorie Day",message:`You've consumed ${e} calories today. If this was planned, great! Otherwise, try balancing tomorrow.`})}if(s){const e=s.water_ml||0;e<1500?n.push({type:"warning",icon:q,title:"Hydration Reminder",message:`You've had ${e}ml of water today. Aim for at least 2000ml for optimal hydration!`}):e>=2e3&&n.push({type:"success",icon:L,title:"Great Hydration!",message:`You've hit your water goal with ${e}ml today. Keep up the excellent hydration!`})}const o=e.filter(e=>e.sleep_hours);if(o.length>=3){const e=o.reduce((e,s)=>e+s.sleep_hours,0)/o.length;e<6.5?n.push({type:"warning",icon:q,title:"Insufficient Sleep",message:`Your average sleep is ${e.toFixed(1)} hours. Aim for 7-9 hours for better recovery and health.`}):e>=7&&e<=9&&n.push({type:"success",icon:L,title:"Excellent Sleep Pattern",message:`You're averaging ${e.toFixed(1)} hours of sleep. This is optimal for recovery and performance!`})}if(0===t.length?n.push({type:"info",icon:I,title:"Time to Move",message:"No workouts logged this week. Even a 15-minute walk can make a difference! Try our AI workout generator."}):t.length>=3&&n.push({type:"success",icon:L,title:"Active Week!",message:`You've completed ${t.length} workouts this week. You're crushing your fitness goals!`}),0===a.length&&n.push({type:"info",icon:I,title:"Start Tracking Meals",message:"Logging your meals helps you stay accountable and reach your nutrition goals faster."}),null==(l=i.health_goals)?void 0:l.includes("lose_weight")){(consumed||0)-(burned||0)>0&&s&&n.push({type:"info",icon:I,title:"Calorie Deficit",message:"To lose weight, aim to burn more calories than you consume. Consider adding a workout or reducing portion sizes."})}if(null==(r=i.health_goals)?void 0:r.includes("build_muscle")){const s=1.6*(i.weight_kg||70),t=e.reduce((e,s)=>e+(s.protein_g||0),0)/Math.max(e.length,1);t<.8*s&&n.push({type:"info",icon:I,title:"Increase Protein Intake",message:`For muscle building, aim for ${s.toFixed(0)}g of protein daily. You're averaging ${t.toFixed(0)}g.`})}return 0===n.length&&n.push({type:"success",icon:L,title:"Looking Good!",message:"Keep logging your data to get personalized insights and track your progress effectively."}),n.slice(0,5)},m=e=>{switch(e){case"success":return"text-green-500";case"warning":return"text-yellow-500";case"info":return"text-blue-500";default:return"text-muted-foreground"}},g=e=>{switch(e){case"success":return"bg-green-500/10 border-green-500/20";case"warning":return"bg-yellow-500/10 border-yellow-500/20";case"info":return"bg-blue-500/10 border-blue-500/20";default:return"bg-muted border-border"}};return r?e.jsx(u,{className:"glass-effect",children:e.jsx(p,{className:"p-8 text-center text-muted-foreground",children:"Analyzing your data..."})}):e.jsxs(u,{className:"glass-effect",children:[e.jsx(x,{children:e.jsxs(h,{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(T,{className:"w-5 h-5 text-primary"}),"Personalized Insights"]})}),e.jsx(p,{className:"space-y-3",children:i.map((s,t)=>{const a=s.icon;return e.jsx("div",{className:`p-4 rounded-lg border ${g(s.type)}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(a,{className:`w-5 h-5 flex-shrink-0 mt-0.5 ${m(s.type)}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.message})]})]})},t)})})]})},Fe=()=>{const{user:t}=a(),[l,r]=s.useState(null),[n,o]=s.useState([]),[m,x]=s.useState(!0),[h,p]=s.useState(!1),[g,j]=s.useState(!1);s.useEffect(()=>{t&&f()},[t]);const f=async()=>{try{x(!0);const[e,s]=await Promise.all([ne(t.id),de(t.id)]);r(e),o(s)}catch(e){d({title:"Error",description:"Failed to load subscription data",variant:"destructive"})}finally{x(!1)}},v=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";if(m)return e.jsx(u,{className:"p-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx($,{className:"w-8 h-8 animate-spin text-primary"}),e.jsx("span",{className:"ml-3 text-lg",children:"Loading subscription..."})]})});if(!l)return e.jsx(u,{className:"p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(W,{className:"w-16 h-16 mx-auto text-text-secondary mb-4"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Active Subscription"}),e.jsx("p",{className:"text-text-secondary mb-6",children:"Subscribe to a plan to unlock all features and benefits."}),e.jsx(i,{onClick:()=>window.location.href="/pricing",children:"View Plans"})]})});const y=l.subscription_plans;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",children:y.name}),e.jsx("p",{className:"text-text-secondary",children:y.description})]}),(s=>{const t={active:{variant:"default",label:"Active",color:"bg-green-500"},past_due:{variant:"destructive",label:"Past Due",color:"bg-red-500"},canceled:{variant:"secondary",label:"Canceled",color:"bg-gray-500"},paused:{variant:"secondary",label:"Paused",color:"bg-yellow-500"}},a=t[s]||t.canceled;return e.jsx(c,{className:a.color,children:a.label})})(l.status)]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(G,{className:"w-5 h-5 text-primary mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Billing Amount"}),e.jsxs("p",{className:"text-lg font-semibold",children:["$","yearly"===l.billing_cycle?y.price_yearly:y.price_monthly,e.jsxs("span",{className:"text-sm font-normal text-text-secondary",children:["/","yearly"===l.billing_cycle?"year":"month"]})]})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(E,{className:"w-5 h-5 text-primary mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-text-secondary",children:"Next Billing Date"}),e.jsx("p",{className:"text-lg font-semibold",children:v(l.current_period_end)})]})]})]}),y.features&&y.features.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Included Features"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:y.features.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-green-400 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:s})]},t))})]}),l.cancel_at_period_end&&e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg mb-6",children:[e.jsx(q,{className:"w-5 h-5 text-yellow-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-yellow-500",children:"Subscription Ending"}),e.jsxs("p",{className:"text-sm text-text-secondary",children:["Your subscription will end on ",v(l.current_period_end)]})]})]}),"active"===l.status&&!l.cancel_at_period_end&&e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(i,{variant:"outline",onClick:()=>window.location.href="/pricing",children:"Upgrade Plan"}),e.jsxs(i,{variant:"ghost",onClick:()=>j(!0),className:"text-red-500 hover:text-red-600 hover:bg-red-500/10",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Cancel Subscription"]})]})]}),n.length>0&&e.jsxs(u,{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Payment Methods"}),e.jsx("div",{className:"space-y-3",children:n.map(s=>{var t;return e.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(W,{className:"w-5 h-5 text-text-secondary"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold",children:[null==(t=s.card_brand)?void 0:t.toUpperCase()," â€¢â€¢â€¢â€¢ ",s.card_last4]}),e.jsxs("p",{className:"text-sm text-text-secondary",children:["Expires ",s.card_exp_month,"/",s.card_exp_year]})]})]}),s.is_default&&e.jsx(c,{variant:"outline",children:"Default"})]},s.id)})})]}),e.jsx(ce,{open:g,onOpenChange:j,children:e.jsxs(me,{children:[e.jsxs(ue,{children:[e.jsx(xe,{children:"Cancel Subscription?"}),e.jsxs(he,{children:["Are you sure you want to cancel your subscription? You will continue to have access until ",v(null==l?void 0:l.current_period_end),", but your subscription will not renew after that date."]})]}),e.jsxs(pe,{children:[e.jsx(ge,{children:"Keep Subscription"}),e.jsx(je,{onClick:async()=>{try{p(!0),await oe(t.id),d({title:"Subscription Canceled",description:"Your subscription will remain active until the end of the current billing period."}),j(!1),await f()}catch(e){d({title:"Error",description:"Failed to cancel subscription",variant:"destructive"})}finally{p(!1)}},disabled:h,className:"bg-red-500 hover:bg-red-600",children:h?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4 mr-2 animate-spin"}),"Canceling..."]}):"Yes, Cancel"})]})]})})]})},Pe={free:{basicDashboard:!0,quickLog:!0,progressTracking:!0,hasAds:!0,maxMealPlansPerMonth:2,maxWorkoutsPerMonth:2,aiChatMessages:10,advancedAnalytics:!1,wearableIntegration:!1,photoRecognition:!1,nutritionistAccess:!1,downloadReports:!1,customGoals:!1,prioritySupport:!1},premium:{basicDashboard:!0,quickLog:!0,progressTracking:!0,hasAds:!1,maxMealPlansPerMonth:-1,maxWorkoutsPerMonth:-1,aiChatMessages:-1,advancedAnalytics:!0,wearableIntegration:!1,photoRecognition:!1,nutritionistAccess:!1,downloadReports:!0,customGoals:!0,prioritySupport:!1},pro:{basicDashboard:!0,quickLog:!0,progressTracking:!0,hasAds:!1,maxMealPlansPerMonth:-1,maxWorkoutsPerMonth:-1,aiChatMessages:-1,advancedAnalytics:!0,downloadReports:!0,customGoals:!0,wearableIntegration:!0,photoRecognition:!1,nutritionistAccess:!0,prioritySupport:!0,mealPlanHistory:!0,workoutHistory:!0,biometricTracking:!0},elite:{basicDashboard:!0,quickLog:!0,progressTracking:!0,hasAds:!1,maxMealPlansPerMonth:-1,maxWorkoutsPerMonth:-1,aiChatMessages:-1,advancedAnalytics:!0,downloadReports:!0,customGoals:!0,wearableIntegration:!0,nutritionistAccess:!0,prioritySupport:!0,mealPlanHistory:!0,workoutHistory:!0,biometricTracking:!0,photoRecognition:!0,personalCoach:!0,videoConsultations:!0,dnaAnalysis:!0,premiumRecipes:!0,aiNutritionOptimization:!0}},De=()=>{const{plan:e,isFree:t,isPremium:i,isPro:l,isElite:r,loading:n,isActive:d}=(()=>{var e;const{user:t}=a(),[i,l]=s.useState(null),[r,n]=s.useState(!0);s.useEffect(()=>{t?d():(l(null),n(!1))},[t]);const d=async()=>{try{n(!0);const e=await ne(t.id);l(e)}catch(e){l(null)}finally{n(!1)}},o=null==i?void 0:i.subscription_plans,c=(null==(e=null==o?void 0:o.name)?void 0:e.toLowerCase())||"base";return{subscription:i,plan:o,loading:r,isActive:"active"===(null==i?void 0:i.status),isPremium:"premium"===c,isPro:"ultimate"===c,isElite:"elite"===c,isFree:!i||"base"===c||"free"===c,refresh:d}})(),o=r?"elite":l?"pro":i?"premium":"free",c=Pe[o];return{hasAccess:e=>d||t?c[e]||!1:Pe.free[e]||!1,hasAds:c.hasAds||!1,canUse:(e,s=0)=>{const t=c[e];return-1===t||(!0===t||"number"==typeof t&&s<t)},getRemainingUsage:(e,s=0)=>{const t=c[e];return-1===t||!0===t?-1:"number"==typeof t?Math.max(0,t-s):0},features:c,planKey:o,planName:(null==e?void 0:e.name)||"Free",loading:n}},Me=({onDismiss:s,position:a="top"})=>{const l=t(),{hasAds:r}=De();if(!r)return null;return e.jsx("div",{className:"relative bg-gradient-to-r from-primary/10 to-green-500/10 border-l-4 border-primary p-4 "+("top"===a?"mb-6":"mt-6"),children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx(P,{className:"w-5 h-5 text-primary mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-sm mb-1",children:"Upgrade to Premium for an Ad-Free Experience!"}),e.jsx("p",{className:"text-xs text-text-secondary mb-2",children:"Get unlimited meal plans, AI workouts, advanced analytics, and remove all ads."}),e.jsx(i,{size:"sm",onClick:()=>{l("/pricing")},className:"bg-primary hover:bg-primary/90 text-xs h-8",children:"Upgrade Now - Save 25% on Yearly"})]})]}),s&&e.jsx("button",{onClick:s,className:"text-text-secondary hover:text-foreground transition-colors","aria-label":"Dismiss ad",children:e.jsx(Y,{className:"w-4 h-4"})})]})})},Ae=s.memo(({logoUrl:t})=>{const{userProfile:i}=a(),{hasAds:l,planName:r}=De(),[d,o]=s.useState(null),[c,g]=s.useState([]),[j,f]=s.useState([]),[v,y]=s.useState(!0),[N,k]=s.useState(0),[C,F]=s.useState(!0);s.useEffect(()=>{(null==i?void 0:i.id)&&P()},[null==i?void 0:i.id,N]);const P=async()=>{try{const e=(new Date).toISOString().split("T")[0],{data:s,error:t}=await n.from("daily_metrics").select("*").eq("user_id",i.id).eq("date",e).maybeSingle();t&&t.code,o(s);const{data:a}=await n.from("activity_feed").select("*").eq("user_id",i.id).order("created_at",{ascending:!1}).limit(5);g(a||[]);const{data:l}=await n.from("user_streaks").select("*").eq("user_id",i.id);f(l||[]),y(!1)}catch(e){y(!1)}},D=()=>{k(e=>e+1)},q=s=>{switch(s){case"lose_weight":return e.jsx(w,{className:"w-6 h-6 text-primary"});case"build_muscle":return e.jsx(_,{className:"w-6 h-6 text-primary"});case"improve_endurance":return e.jsx(H,{className:"w-6 h-6 text-primary"});case"eat_healthier":return e.jsx(Q,{className:"w-6 h-6 text-primary"});case"increase_energy":return e.jsx(A,{className:"w-6 h-6 text-primary"});default:return e.jsx(K,{className:"w-6 h-6 text-primary"})}},{bmi:I,category:L}=s.useMemo(()=>((e,s)=>{if(!e||!s)return{bmi:"N/A",category:"N/A"};const t=s/100,a=(e/(t*t)).toFixed(1);let i="";return i=a<18.5?"Underweight":a>=18.5&&a<=24.9?"Normal":a>=25&&a<=29.9?"Overweight":"Obese",{bmi:a,category:i}})(null==i?void 0:i.weight_kg,null==i?void 0:i.height_cm),[null==i?void 0:i.weight_kg,null==i?void 0:i.height_cm]),T=s.useMemo(()=>({hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}}),[]),$=s.useMemo(()=>({hidden:{y:20,opacity:0},visible:{y:0,opacity:1}}),[]);return e.jsxs(e.Fragment,{children:[e.jsxs(m,{children:[e.jsx("title",{children:"Dashboard - GreenoFig"}),e.jsx("meta",{name:"description",content:"Your personal health and wellness dashboard."})]}),e.jsxs(R.div,{variants:T,initial:"hidden",animate:"visible",className:"w-full space-y-6 sm:space-y-8 lg:space-y-10 xl:space-y-12 px-4 sm:px-0",children:[e.jsxs(R.div,{variants:$,children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl font-bold leading-tight",children:["Welcome back, ",e.jsxs("span",{className:"gradient-text",children:[((null==i?void 0:i.full_name)||"User").split(" ")[0],"!"]})]}),e.jsxs("p",{className:"text-sm sm:text-base lg:text-lg xl:text-xl text-text-secondary mt-2",children:["Here's your wellness snapshot for today. Let's make it a great one!",r&&e.jsxs("span",{className:"ml-2 text-xs font-semibold text-primary",children:["(",r," Plan)"]})]})]}),l&&C&&e.jsx(R.div,{variants:$,children:e.jsx(Me,{onDismiss:()=>F(!1)})}),e.jsxs(R.div,{variants:T,className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6 lg:gap-8",children:[e.jsx(R.div,{variants:$,className:"lg:col-span-2",children:e.jsxs(u,{className:"glass-effect",children:[e.jsx(x,{className:"p-4 sm:p-6 lg:p-8",children:e.jsx(h,{className:"text-lg sm:text-xl lg:text-2xl xl:text-3xl font-bold",children:"Quick Actions"})}),e.jsxs(p,{className:"grid grid-cols-2 md:grid-cols-4 gap-2 sm:gap-3 lg:gap-4 p-4 sm:p-6 lg:p-8 pt-0",children:[e.jsx(fe,{onSuccess:D}),e.jsx(J,{onSuccess:D}),e.jsx(ve,{onSuccess:D}),e.jsx(we,{onSuccess:D})]})]})}),e.jsx(R.div,{variants:$,children:e.jsx(ye,{onSuccess:D})})]}),e.jsxs(R.div,{variants:T,className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 lg:gap-8",children:[e.jsx(R.div,{variants:$,children:e.jsxs(u,{className:"glass-effect h-full",children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-4 sm:p-6 lg:p-8 lg:pb-4",children:[e.jsx(h,{className:"text-xs sm:text-sm lg:text-base xl:text-lg font-medium",children:"Weight"}),e.jsx(w,{className:"h-4 w-4 sm:h-5 sm:w-5 lg:h-6 lg:w-6 text-muted-foreground"})]}),e.jsxs(p,{className:"p-4 sm:p-6 lg:p-8 pt-0 lg:pt-0",children:[e.jsxs("div",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold",children:[(null==d?void 0:d.weight_kg)||(null==i?void 0:i.weight_kg)||"N/A",((null==d?void 0:d.weight_kg)||(null==i?void 0:i.weight_kg))&&" kg"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(null==d?void 0:d.weight_kg)?"Today's weight":"Last logged weight"})]})]})}),e.jsx(R.div,{variants:$,children:e.jsxs(u,{className:"glass-effect h-full",children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-4 sm:p-6",children:[e.jsx(h,{className:"text-xs sm:text-sm font-medium",children:"BMI"}),e.jsx(H,{className:"h-4 w-4 sm:h-5 sm:w-5 text-muted-foreground"})]}),e.jsxs(p,{className:"p-4 sm:p-6 pt-0",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:I}),e.jsx("p",{className:"text-xs text-muted-foreground",children:L})]})]})}),e.jsx(R.div,{variants:$,children:e.jsxs(u,{className:"glass-effect h-full",children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-4 sm:p-6",children:[e.jsx(h,{className:"text-xs sm:text-sm font-medium",children:"Calories Today"}),e.jsx(z,{className:"h-4 w-4 sm:h-5 sm:w-5 text-muted-foreground"})]}),e.jsxs(p,{className:"p-4 sm:p-6 pt-0",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:(null==d?void 0:d.calories_burned)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Burned â€¢ ",(null==d?void 0:d.calories_consumed)||0," consumed"]})]})]})}),e.jsx(R.div,{variants:$,children:e.jsxs(u,{className:"glass-effect h-full",children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2 p-4 sm:p-6",children:[e.jsx(h,{className:"text-xs sm:text-sm font-medium",children:"Sleep"}),e.jsx(S,{className:"h-4 w-4 sm:h-5 sm:w-5 text-muted-foreground"})]}),e.jsxs(p,{className:"p-4 sm:p-6 pt-0",children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold",children:(null==d?void 0:d.sleep_hours)?`${d.sleep_hours}h`:"Not logged"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:(null==d?void 0:d.sleep_quality)||"Log your sleep"})]})]})})]}),1===j.length&&e.jsx(R.div,{variants:$,children:e.jsx(u,{className:"glass-effect",children:e.jsx(p,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx(U,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-bold text-primary",children:j[0].current_streak}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"day"}),e.jsxs("span",{className:"text-sm font-medium capitalize",children:[j[0].streak_type.replace(/_/g," ")," streak"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Best: ",j[0].longest_streak," days"]})]})})})}),j.length>=2&&e.jsx(R.div,{variants:$,children:e.jsxs(u,{className:"glass-effect",children:[e.jsx(x,{className:"p-4 sm:p-6",children:e.jsxs(h,{className:"text-lg sm:text-xl font-bold flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500"}),"Your Streaks"]})}),e.jsx(p,{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4 p-4 sm:p-6 pt-0",children:j.map(s=>e.jsxs("div",{className:"text-center p-3 sm:p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-primary",children:s.current_streak}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground capitalize",children:s.streak_type.replace(/_/g," ")}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Best: ",s.longest_streak]})]},s.id))})]})}),e.jsxs(R.div,{variants:T,className:"grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsx(R.div,{variants:$,className:"lg:col-span-2",children:e.jsxs(u,{className:"glass-effect h-full",children:[e.jsx(x,{className:"p-4 sm:p-6",children:e.jsxs(h,{className:"text-lg sm:text-xl font-bold flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4 sm:w-5 sm:h-5"}),"Recent Activity"]})}),e.jsx(p,{className:"space-y-3 p-4 sm:p-6 pt-0",children:c.length>0?c.map(s=>e.jsxs(R.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-start gap-3 p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex-shrink-0 p-2 rounded-full bg-primary/20",children:["logged_meal"===s.activity_type&&e.jsx(M,{className:"w-4 h-4 text-primary"}),"completed_workout"===s.activity_type&&e.jsx(_,{className:"w-4 h-4 text-primary"}),"weight_update"===s.activity_type&&e.jsx(w,{className:"w-4 h-4 text-primary"}),"sleep_log"===s.activity_type&&e.jsx(S,{className:"w-4 h-4 text-primary"}),"water_intake"===s.activity_type&&e.jsx(b,{className:"w-4 h-4 text-primary"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:s.activity_title}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.activity_description}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:new Date(s.created_at).toLocaleString()})]})]},s.id)):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(V,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No activity yet. Start logging your health data!"})]})})]})}),e.jsx(R.div,{variants:$,children:e.jsxs(u,{className:"glass-effect h-full",children:[e.jsx(x,{className:"p-4 sm:p-6",children:e.jsx(h,{className:"text-lg sm:text-xl font-bold",children:"Your Goals"})}),e.jsx(p,{className:"space-y-3 sm:space-y-4 p-4 sm:p-6 pt-0",children:(null==i?void 0:i.health_goals)&&i.health_goals.length>0?i.health_goals.map(s=>e.jsxs(R.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"flex items-center gap-3 sm:gap-4 bg-muted p-3 rounded-lg",children:[q(s),e.jsx("span",{className:"text-sm sm:text-base font-medium text-text-primary capitalize",children:s.replace(/_/g," ")})]},s)):e.jsx("p",{className:"text-sm sm:text-base text-text-secondary",children:"No goals set yet. Update your profile to add goals!"})})]})})]}),e.jsx(R.div,{variants:$,children:e.jsx(_e,{})}),e.jsxs(R.div,{variants:T,className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(R.div,{variants:$,children:e.jsx(Ce,{})}),e.jsx(R.div,{variants:$,children:e.jsxs(u,{className:"glass-effect h-full",children:[e.jsx(x,{className:"p-4 sm:p-6",children:e.jsx(h,{className:"text-lg sm:text-xl font-bold",children:"AI-Powered Tools"})}),e.jsxs(p,{className:"space-y-3 p-4 sm:p-6 pt-0",children:[e.jsx(be,{onSuccess:D}),e.jsx(ke,{onSuccess:D})]})]})})]}),e.jsx(R.div,{variants:$,children:e.jsx(Fe,{})})]})]})});Ae.displayName="UserDashboard";export{Ae as default};
