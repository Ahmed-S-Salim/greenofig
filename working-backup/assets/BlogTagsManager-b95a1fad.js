import{j as e}from"./vendor-ui-8934955f.js";import{r as s}from"./vendor-react-c35372bd.js";import{s as a,B as t,L as l,I as r,T as i,t as c}from"./index-05934966.js";import{C as n,a as d,b as o,c as g}from"./card-5ef2c077.js";import{T as m,a as h,b as x,c as j}from"./tabs-2a9eaf96.js";import{D as u,a as p,b as f,c as v,d as y,f as N}from"./dialog-f70f7e7c.js";import{A as C,a as w,b,c as S,d as T,e as k,f as z,g as E}from"./alert-dialog-a0463d92.js";import{L as _,m as q,aW as A,b5 as F,az as B,aA as D,cl as L}from"./vendor-utils-1c9b7ece.js";import"./vendor-editor-7586347a.js";const O=()=>{const[O,P]=s.useState([]),[I,U]=s.useState([]),[$,H]=s.useState(!0),[J,R]=s.useState(!1),[V,W]=s.useState(!1),[G,K]=s.useState(null),[M,Q]=s.useState(null),[X,Y]=s.useState(!1),[Z,ee]=s.useState(null),[se,ae]=s.useState("tag"),[te,le]=s.useState(""),[re,ie]=s.useState(""),[ce,ne]=s.useState(""),[de,oe]=s.useState(""),[ge,me]=s.useState("");s.useEffect(()=>{he()},[]);const he=async()=>{H(!0);const[e,s]=await Promise.all([a.from("blog_tags").select("*").order("name"),a.from("blog_categories").select("*").order("name")]);e.data&&P(e.data),s.data&&U(s.data),H(!1)},xe=e=>e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),je=(e=null)=>{e?(K(e),le(e.name),ie(e.slug)):(K(null),le(""),ie("")),R(!0)},ue=(e=null)=>{e?(Q(e),ne(e.name),oe(e.slug),me(e.description||"")):(Q(null),ne(""),oe(""),me("")),W(!0)},pe=(e,s)=>{ee(e),ae(s),Y(!0)};return $?e.jsx("div",{className:"flex justify-center items-center py-10",children:e.jsx(_,{className:"h-8 w-8 animate-spin text-primary"})}):e.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h2",{className:"text-3xl font-bold",children:"Tags & Categories"})}),e.jsxs(m,{defaultValue:"tags",className:"w-full",children:[e.jsxs(h,{className:"grid w-full grid-cols-2",children:[e.jsx(x,{value:"tags",children:"Tags"}),e.jsx(x,{value:"categories",children:"Categories"})]}),e.jsx(j,{value:"tags",className:"space-y-4",children:e.jsxs(n,{className:"glass-effect",children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5"}),"Blog Tags (",O.length,")"]}),e.jsxs(t,{onClick:()=>je(),children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"New Tag"]})]})}),e.jsx(g,{children:0===O.length?e.jsx("div",{className:"text-center py-8 text-text-secondary",children:"No tags yet. Create your first tag!"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:O.map(s=>e.jsx(n,{className:"glass-effect",children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsxs("p",{className:"text-sm text-text-secondary",children:["/",s.slug]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>je(s),children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>pe(s,"tag"),className:"text-red-400 hover:text-red-500",children:e.jsx(D,{className:"w-4 h-4"})})]})]})})},s.id))})})]})}),e.jsx(j,{value:"categories",className:"space-y-4",children:e.jsxs(n,{className:"glass-effect",children:[e.jsx(d,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(o,{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-5 h-5"}),"Blog Categories (",I.length,")"]}),e.jsxs(t,{onClick:()=>ue(),children:[e.jsx(F,{className:"w-4 h-4 mr-2"}),"New Category"]})]})}),e.jsx(g,{children:0===I.length?e.jsx("div",{className:"text-center py-8 text-text-secondary",children:"No categories yet. Create your first category!"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:I.map(s=>e.jsx(n,{className:"glass-effect",children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:s.name}),e.jsxs("p",{className:"text-sm text-text-secondary",children:["/",s.slug]}),s.description&&e.jsx("p",{className:"text-sm text-text-secondary mt-2",children:s.description})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>ue(s),children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>pe(s,"category"),className:"text-red-400 hover:text-red-500",children:e.jsx(D,{className:"w-4 h-4"})})]})]})})},s.id))})})]})})]}),e.jsx(u,{open:J,onOpenChange:R,children:e.jsxs(p,{className:"glass-effect",children:[e.jsxs(f,{children:[e.jsx(v,{children:G?"Edit Tag":"Create New Tag"}),e.jsx(y,{children:"Add a tag to organize your blog posts."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"tag-name",children:"Tag Name *"}),e.jsx(r,{id:"tag-name",placeholder:"e.g., React, JavaScript",value:te,onChange:e=>{le(e.target.value),G||ie(xe(e.target.value))}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"tag-slug",children:"Slug *"}),e.jsx(r,{id:"tag-slug",placeholder:"e.g., react, javascript",value:re,onChange:e=>ie(e.target.value)})]})]}),e.jsxs(N,{children:[e.jsx(t,{variant:"ghost",onClick:()=>R(!1),children:"Cancel"}),e.jsx(t,{onClick:async()=>{if(!te||!re)return void c({title:"Name and slug are required",variant:"destructive"});const e={name:te,slug:re};let s;if(G){const{error:t}=await a.from("blog_tags").update(e).eq("id",G.id);s=t}else{const{error:t}=await a.from("blog_tags").insert(e);s=t}s?c({title:"Error saving tag",description:s.message,variant:"destructive"}):(c({title:`Tag ${G?"updated":"created"} successfully`}),R(!1),he())},children:G?"Update":"Create"})]})]})}),e.jsx(u,{open:V,onOpenChange:W,children:e.jsxs(p,{className:"glass-effect",children:[e.jsxs(f,{children:[e.jsx(v,{children:M?"Edit Category":"Create New Category"}),e.jsx(y,{children:"Add a category to organize your blog posts."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"category-name",children:"Category Name *"}),e.jsx(r,{id:"category-name",placeholder:"e.g., Technology, Tutorials",value:ce,onChange:e=>{ne(e.target.value),M||oe(xe(e.target.value))}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"category-slug",children:"Slug *"}),e.jsx(r,{id:"category-slug",placeholder:"e.g., technology, tutorials",value:de,onChange:e=>oe(e.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"category-description",children:"Description"}),e.jsx(i,{id:"category-description",placeholder:"Brief description of this category",value:ge,onChange:e=>me(e.target.value),rows:3})]})]}),e.jsxs(N,{children:[e.jsx(t,{variant:"ghost",onClick:()=>W(!1),children:"Cancel"}),e.jsx(t,{onClick:async()=>{if(!ce||!de)return void c({title:"Name and slug are required",variant:"destructive"});const e={name:ce,slug:de,description:ge||null};let s;if(M){const{error:t}=await a.from("blog_categories").update(e).eq("id",M.id);s=t}else{const{error:t}=await a.from("blog_categories").insert(e);s=t}s?c({title:"Error saving category",description:s.message,variant:"destructive"}):(c({title:`Category ${M?"updated":"created"} successfully`}),W(!1),he())},children:M?"Update":"Create"})]})]})}),e.jsx(C,{open:X,onOpenChange:Y,children:e.jsxs(w,{className:"glass-effect",children:[e.jsxs(b,{children:[e.jsx(S,{children:"Are you sure?"}),e.jsxs(T,{children:["This will delete the ",se,' "',null==Z?void 0:Z.name,'". This action cannot be undone.',"category"===se&&" Posts in this category will become uncategorized.","tag"===se&&" This tag will be removed from all posts."]})]}),e.jsxs(k,{children:[e.jsx(z,{children:"Cancel"}),e.jsx(E,{onClick:()=>"tag"===se?(async e=>{const{error:s}=await a.from("blog_tags").delete().eq("id",e);s?c({title:"Error deleting tag",description:s.message,variant:"destructive"}):(c({title:"Tag deleted successfully"}),he()),Y(!1)})(Z.id):(async e=>{const{error:s}=await a.from("blog_categories").delete().eq("id",e);s?c({title:"Error deleting category",description:s.message,variant:"destructive"}):(c({title:"Category deleted successfully"}),he()),Y(!1)})(Z.id),className:"bg-red-500 hover:bg-red-600",children:"Delete"})]})]})})]})};export{O as default};
