import{j as e,V as t,R as s,A as r,C as i,T as n,D as o,P as a,s as l,S as c,a as u,I as d,F as h,b as p}from"./vendor-ui-8934955f.js";import{a as g,g as f,r as m,R as y,d as v,e as b,u as w,f as x,L as _,O as k,N as j,h as S,i as T,j as P,B as E}from"./vendor-react-c35372bd.js";import{t as C,c as A,X as O,m as N,A as R,L as I,U as D,M as L,a as $,b as F,H as U,B as M,d as B,e as q,f as H,S as z,g as W,h as V,i as G,j as K,C as Y,k as J,D as Q,T as X,l as Z,n as ee,o as te,p as se,q as re,r as ie,s as ne,u as oe,v as ae,F as le,w as ce,x as ue,y as de,z as he,W as pe,E as ge,G as fe,I as me,J as ye,K as ve,N as be,O as we}from"./vendor-utils-1c9b7ece.js";import"./vendor-editor-7586347a.js";function xe(e,t){for(var s=0;s<t.length;s++){const r=t[s];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const s=Object.getOwnPropertyDescriptor(r,t);s&&Object.defineProperty(e,t,s.get?s:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var _e={},ke=g;_e.createRoot=ke.createRoot,_e.hydrateRoot=ke.hydrateRoot;const je={},Se=function(e,t,s){if(!t||0===t.length)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(e=>{if((e=function(e){return"/"+e}(e))in je)return;je[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(!!s)for(let s=r.length-1;s>=0;s--){const i=r[s];if(i.href===e&&(!t||"stylesheet"===i.rel))return}else if(document.querySelector(`link[href="${e}"]${i}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise((t,s)=>{n.addEventListener("load",t),n.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e()).catch(e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e})};var Te={exports:{}};function Pe(){}function Ee(){}Ee.resetWarningCache=Pe;Te.exports=function(){function e(e,t,s,r,i,n){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==n){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Ee,resetWarningCache:Pe};return s.PropTypes=s,s}();const Ce=f(Te.exports);var Ae,Oe=m,Ne=(Ae=Oe)&&"object"==typeof Ae&&"default"in Ae?Ae.default:Ae;function Re(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Ie=!("undefined"==typeof window||!window.document||!window.document.createElement);const De=f(function(e,t,s){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==s&&"function"!=typeof s)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!=typeof r)throw new Error("Expected WrappedComponent to be a React component.");var i,n=[];function o(){i=e(n.map(function(e){return e.props})),a.canUseDOM?t(i):s&&(i=s(i))}var a=function(e){var t,s;function a(){return e.apply(this,arguments)||this}s=e,(t=a).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s,a.peek=function(){return i},a.rewind=function(){if(a.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=i;return i=void 0,n=[],e};var l=a.prototype;return l.UNSAFE_componentWillMount=function(){n.push(this),o()},l.componentDidUpdate=function(){o()},l.componentWillUnmount=function(){var e=n.indexOf(this);n.splice(e,1),o()},l.render=function(){return Ne.createElement(r,this.props)},a}(Oe.PureComponent);return Re(a,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),Re(a,"canUseDOM",Ie),a}});var Le="undefined"!=typeof Element,$e="function"==typeof Map,Fe="function"==typeof Set,Ue="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function Me(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor!==t.constructor)return!1;var s,r,i,n;if(Array.isArray(e)){if((s=e.length)!=t.length)return!1;for(r=s;0!==r--;)if(!Me(e[r],t[r]))return!1;return!0}if($e&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(n=e.entries();!(r=n.next()).done;)if(!t.has(r.value[0]))return!1;for(n=e.entries();!(r=n.next()).done;)if(!Me(r.value[1],t.get(r.value[0])))return!1;return!0}if(Fe&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(n=e.entries();!(r=n.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(Ue&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if((s=e.length)!=t.length)return!1;for(r=s;0!==r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"==typeof e.valueOf&&"function"==typeof t.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&"function"==typeof e.toString&&"function"==typeof t.toString)return e.toString()===t.toString();if((s=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(r=s;0!==r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;if(Le&&e instanceof Element)return!1;for(r=s;0!==r--;)if(("_owner"!==i[r]&&"__v"!==i[r]&&"__o"!==i[r]||!e.$$typeof)&&!Me(e[i[r]],t[i[r]]))return!1;return!0}return e!=e&&t!=t}const Be=f(function(e,t){try{return Me(e,t)}catch(s){if((s.message||"").match(/stack|recursion/i))return!1;throw s}});
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var qe=Object.getOwnPropertySymbols,He=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;const We=f(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},s=0;s<10;s++)t["_"+String.fromCharCode(s)]=s;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var s,r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),n=1;n<arguments.length;n++){for(var o in s=Object(arguments[n]))He.call(s,o)&&(i[o]=s[o]);if(qe){r=qe(s);for(var a=0;a<r.length;a++)ze.call(s,r[a])&&(i[r[a]]=s[r[a]])}}return i});var Ve="bodyAttributes",Ge="htmlAttributes",Ke="titleAttributes",Ye={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Ye).map(function(e){return Ye[e]});var Je,Qe,Xe,Ze,et="charset",tt="cssText",st="href",rt="http-equiv",it="innerHTML",nt="itemprop",ot="name",at="property",lt="rel",ct="src",ut="target",dt={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},ht="defaultTitle",pt="defer",gt="encodeSpecialCharacters",ft="onChangeClientState",mt="titleTemplate",yt=Object.keys(dt).reduce(function(e,t){return e[dt[t]]=t,e},{}),vt=[Ye.NOSCRIPT,Ye.SCRIPT,Ye.STYLE],bt="data-react-helmet",wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt=function(){function e(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,s,r){return s&&e(t.prototype,s),r&&e(t,r),t}}(),_t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},kt=function(e,t){var s={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=e[r]);return s},jt=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},St=function(e){var t=At(e,Ye.TITLE),s=At(e,mt);if(s&&t)return s.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var r=At(e,ht);return t||r||void 0},Tt=function(e){return At(e,ft)||function(){}},Pt=function(e,t){return t.filter(function(t){return void 0!==t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return _t({},e,t)},{})},Et=function(e,t){return t.filter(function(e){return void 0!==e[Ye.BASE]}).map(function(e){return e[Ye.BASE]}).reverse().reduce(function(t,s){if(!t.length)for(var r=Object.keys(s),i=0;i<r.length;i++){var n=r[i].toLowerCase();if(-1!==e.indexOf(n)&&s[n])return t.concat(s)}return t},[])},Ct=function(e,t,s){var r={};return s.filter(function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&Dt("Helmet: "+e+' should be of type "Array". Instead found type "'+wt(t[e])+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,s){var i={};s.filter(function(e){for(var s=void 0,n=Object.keys(e),o=0;o<n.length;o++){var a=n[o],l=a.toLowerCase();-1===t.indexOf(l)||s===lt&&"canonical"===e[s].toLowerCase()||l===lt&&"stylesheet"===e[l].toLowerCase()||(s=l),-1===t.indexOf(a)||a!==it&&a!==tt&&a!==nt||(s=a)}if(!s||!e[s])return!1;var c=e[s].toLowerCase();return r[s]||(r[s]={}),i[s]||(i[s]={}),!r[s][c]&&(i[s][c]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var n=Object.keys(i),o=0;o<n.length;o++){var a=n[o],l=We({},r[a],i[a]);r[a]=l}return e},[]).reverse()},At=function(e,t){for(var s=e.length-1;s>=0;s--){var r=e[s];if(r.hasOwnProperty(t))return r[t]}return null},Ot=(Je=Date.now(),function(e){var t=Date.now();t-Je>16?(Je=t,e(t)):setTimeout(function(){Ot(e)},0)}),Nt=function(e){return clearTimeout(e)},Rt="undefined"!=typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Ot:global.requestAnimationFrame||Ot,It="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||Nt:global.cancelAnimationFrame||Nt,Dt=function(e){return console&&"function"==typeof console.warn&&void 0},Lt=null,$t=function(e,t){var s=e.baseTag,r=e.bodyAttributes,i=e.htmlAttributes,n=e.linkTags,o=e.metaTags,a=e.noscriptTags,l=e.onChangeClientState,c=e.scriptTags,u=e.styleTags,d=e.title,h=e.titleAttributes;Mt(Ye.BODY,r),Mt(Ye.HTML,i),Ut(d,h);var p={baseTag:Bt(Ye.BASE,s),linkTags:Bt(Ye.LINK,n),metaTags:Bt(Ye.META,o),noscriptTags:Bt(Ye.NOSCRIPT,a),scriptTags:Bt(Ye.SCRIPT,c),styleTags:Bt(Ye.STYLE,u)},g={},f={};Object.keys(p).forEach(function(e){var t=p[e],s=t.newTags,r=t.oldTags;s.length&&(g[e]=s),r.length&&(f[e]=p[e].oldTags)}),t&&t(),l(e,g,f)},Ft=function(e){return Array.isArray(e)?e.join(""):e},Ut=function(e,t){void 0!==e&&document.title!==e&&(document.title=Ft(e)),Mt(Ye.TITLE,t)},Mt=function(e,t){var s=document.getElementsByTagName(e)[0];if(s){for(var r=s.getAttribute(bt),i=r?r.split(","):[],n=[].concat(i),o=Object.keys(t),a=0;a<o.length;a++){var l=o[a],c=t[l]||"";s.getAttribute(l)!==c&&s.setAttribute(l,c),-1===i.indexOf(l)&&i.push(l);var u=n.indexOf(l);-1!==u&&n.splice(u,1)}for(var d=n.length-1;d>=0;d--)s.removeAttribute(n[d]);i.length===n.length?s.removeAttribute(bt):s.getAttribute(bt)!==o.join(",")&&s.setAttribute(bt,o.join(","))}},Bt=function(e,t){var s=document.head||document.querySelector(Ye.HEAD),r=s.querySelectorAll(e+"["+bt+"]"),i=Array.prototype.slice.call(r),n=[],o=void 0;return t&&t.length&&t.forEach(function(t){var s=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===it)s.innerHTML=t.innerHTML;else if(r===tt)s.styleSheet?s.styleSheet.cssText=t.cssText:s.appendChild(document.createTextNode(t.cssText));else{var a=void 0===t[r]?"":t[r];s.setAttribute(r,a)}s.setAttribute(bt,"true"),i.some(function(e,t){return o=t,s.isEqualNode(e)})?i.splice(o,1):n.push(s)}),i.forEach(function(e){return e.parentNode.removeChild(e)}),n.forEach(function(e){return s.appendChild(e)}),{oldTags:i,newTags:n}},qt=function(e){return Object.keys(e).reduce(function(t,s){var r=void 0!==e[s]?s+'="'+e[s]+'"':""+s;return t?t+" "+r:r},"")},Ht=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,s){return t[dt[s]||s]=e[s],t},t)},zt=function(e,t,s){switch(e){case Ye.TITLE:return{toComponent:function(){return e=t.title,s=t.titleAttributes,(r={key:e})[bt]=!0,i=Ht(s,r),[y.createElement(Ye.TITLE,i,e)];var e,s,r,i},toString:function(){return function(e,t,s,r){var i=qt(s),n=Ft(t);return i?"<"+e+" "+bt+'="true" '+i+">"+jt(n,r)+"</"+e+">":"<"+e+" "+bt+'="true">'+jt(n,r)+"</"+e+">"}(e,t.title,t.titleAttributes,s)}};case Ve:case Ge:return{toComponent:function(){return Ht(t)},toString:function(){return qt(t)}};default:return{toComponent:function(){return function(e,t){return t.map(function(t,s){var r,i=((r={key:s})[bt]=!0,r);return Object.keys(t).forEach(function(e){var s=dt[e]||e;if(s===it||s===tt){var r=t.innerHTML||t.cssText;i.dangerouslySetInnerHTML={__html:r}}else i[s]=t[e]}),y.createElement(e,i)})}(e,t)},toString:function(){return function(e,t,s){return t.reduce(function(t,r){var i=Object.keys(r).filter(function(e){return!(e===it||e===tt)}).reduce(function(e,t){var i=void 0===r[t]?t:t+'="'+jt(r[t],s)+'"';return e?e+" "+i:i},""),n=r.innerHTML||r.cssText||"",o=-1===vt.indexOf(e);return t+"<"+e+" "+bt+'="true" '+i+(o?"/>":">"+n+"</"+e+">")},"")}(e,t,s)}}}},Wt=function(e){var t=e.baseTag,s=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,n=e.linkTags,o=e.metaTags,a=e.noscriptTags,l=e.scriptTags,c=e.styleTags,u=e.title,d=void 0===u?"":u,h=e.titleAttributes;return{base:zt(Ye.BASE,t,r),bodyAttributes:zt(Ve,s,r),htmlAttributes:zt(Ge,i,r),link:zt(Ye.LINK,n,r),meta:zt(Ye.META,o,r),noscript:zt(Ye.NOSCRIPT,a,r),script:zt(Ye.SCRIPT,l,r),style:zt(Ye.STYLE,c,r),title:zt(Ye.TITLE,{title:d,titleAttributes:h},r)}},Vt=De(function(e){return{baseTag:Et([st,ut],e),bodyAttributes:Pt(Ve,e),defer:At(e,pt),encode:At(e,gt),htmlAttributes:Pt(Ge,e),linkTags:Ct(Ye.LINK,[lt,st],e),metaTags:Ct(Ye.META,[ot,et,rt,at,nt],e),noscriptTags:Ct(Ye.NOSCRIPT,[it],e),onChangeClientState:Tt(e),scriptTags:Ct(Ye.SCRIPT,[ct,it],e),styleTags:Ct(Ye.STYLE,[tt],e),title:St(e),titleAttributes:Pt(Ke,e)}},function(e){Lt&&It(Lt),e.defer?Lt=Rt(function(){$t(e,function(){Lt=null})}):($t(e),Lt=null)},Wt)(function(){return null}),Gt=(Qe=Vt,Ze=Xe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!Be(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case Ye.SCRIPT:case Ye.NOSCRIPT:return{innerHTML:t};case Ye.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,s=e.child,r=e.arrayTypeChildren,i=e.newChildProps,n=e.nestedChildren;return _t({},r,((t={})[s.type]=[].concat(r[s.type]||[],[_t({},i,this.mapNestedChildrenToProps(s,n))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,s,r=e.child,i=e.newProps,n=e.newChildProps,o=e.nestedChildren;switch(r.type){case Ye.TITLE:return _t({},i,((t={})[r.type]=o,t.titleAttributes=_t({},n),t));case Ye.BODY:return _t({},i,{bodyAttributes:_t({},n)});case Ye.HTML:return _t({},i,{htmlAttributes:_t({},n)})}return _t({},i,((s={})[r.type]=_t({},n),s))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var s=_t({},t);return Object.keys(e).forEach(function(t){var r;s=_t({},s,((r={})[t]=e[t],r))}),s},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var s=this,r={};return y.Children.forEach(e,function(e){if(e&&e.props){var i=e.props,n=i.children,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,s){return t[yt[s]||s]=e[s],t},t)}(kt(i,["children"]));switch(s.warnOnInvalidChildren(e,n),e.type){case Ye.LINK:case Ye.META:case Ye.NOSCRIPT:case Ye.SCRIPT:case Ye.STYLE:r=s.flattenArrayTypeChildren({child:e,arrayTypeChildren:r,newChildProps:o,nestedChildren:n});break;default:t=s.mapObjectTypeChildren({child:e,newProps:t,newChildProps:o,nestedChildren:n})}}}),t=this.mapArrayTypeChildrenToProps(r,t)},t.prototype.render=function(){var e=this.props,t=e.children,s=kt(e,["children"]),r=_t({},s);return t&&(r=this.mapChildrenToProps(t,r)),y.createElement(Qe,r)},xt(t,null,[{key:"canUseDOM",set:function(e){Qe.canUseDOM=e}}]),t}(y.Component),Xe.propTypes={base:Ce.object,bodyAttributes:Ce.object,children:Ce.oneOfType([Ce.arrayOf(Ce.node),Ce.node]),defaultTitle:Ce.string,defer:Ce.bool,encodeSpecialCharacters:Ce.bool,htmlAttributes:Ce.object,link:Ce.arrayOf(Ce.object),meta:Ce.arrayOf(Ce.object),noscript:Ce.arrayOf(Ce.object),onChangeClientState:Ce.func,script:Ce.arrayOf(Ce.object),style:Ce.arrayOf(Ce.object),title:Ce.string,titleAttributes:Ce.object,titleTemplate:Ce.string},Xe.defaultProps={defer:!0,encodeSpecialCharacters:!0},Xe.peek=Qe.peek,Xe.rewind=function(){var e=Qe.rewind();return e||(e=Wt({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},Ze);function Kt(...e){return C(A(e))}Gt.renderStatic=Gt.rewind;const Yt=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,Jt=A,Qt=(e,t)=>s=>{var r;if(null==(null==t?void 0:t.variants))return Jt(e,null==s?void 0:s.class,null==s?void 0:s.className);const{variants:i,defaultVariants:n}=t,o=Object.keys(i).map(e=>{const t=null==s?void 0:s[e],r=null==n?void 0:n[e];if(null===t)return null;const o=Yt(t)||Yt(r);return i[e][o]}),a=s&&Object.entries(s).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:s,className:r,...i}=t;return Object.entries(i).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...n,...a}[t]):{...n,...a}[t]===s})?[...e,s,r]:e},[]);return Jt(e,o,l,null==s?void 0:s.class,null==s?void 0:s.className)},Xt=a,Zt=y.forwardRef(({className:s,...r},i)=>e.jsx(t,{ref:i,className:Kt("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...r}));Zt.displayName=t.displayName;const es=Qt("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-background border",destructive:"group destructive border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),ts=y.forwardRef(({className:t,variant:r,...i},n)=>e.jsx(s,{ref:n,className:Kt(es({variant:r}),t),...i}));ts.displayName=s.displayName;y.forwardRef(({className:t,...s},i)=>e.jsx(r,{ref:i,className:Kt("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s})).displayName=r.displayName;const ss=y.forwardRef(({className:t,...s},r)=>e.jsx(i,{ref:r,className:Kt("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(O,{className:"h-4 w-4"})}));ss.displayName=i.displayName;const rs=y.forwardRef(({className:t,...s},r)=>e.jsx(n,{ref:r,className:Kt("text-sm font-semibold",t),...s}));rs.displayName=n.displayName;const is=y.forwardRef(({className:t,...s},r)=>e.jsx(o,{ref:r,className:Kt("text-sm opacity-90",t),...s}));is.displayName=o.displayName;let ns=0;const os={state:{toasts:[]},listeners:[],getState:()=>os.state,setState:e=>{os.state="function"==typeof e?e(os.state):{...os.state,...e},os.listeners.forEach(e=>e(os.state))},subscribe:e=>(os.listeners.push(e),()=>{os.listeners=os.listeners.filter(t=>t!==e)})},as=({...e})=>{const t=(ns=(ns+1)%Number.MAX_VALUE,ns.toString()),s=()=>os.setState(e=>({...e,toasts:e.toasts.filter(e=>e.id!==t)}));return os.setState(r=>({...r,toasts:[{...e,id:t,dismiss:s},...r.toasts].slice(0,1)})),{id:t,dismiss:s,update:e=>os.setState(s=>({...s,toasts:s.toasts.map(s=>s.id===t?{...s,...e}:s)}))}};function ls(){const[e,t]=m.useState(os.getState());return m.useEffect(()=>os.subscribe(e=>{t(e)}),[]),m.useEffect(()=>{const t=[];return e.toasts.forEach(e=>{if(e.duration===1/0)return;const s=setTimeout(()=>{e.dismiss()},e.duration||5e3);t.push(s)}),()=>{t.forEach(e=>clearTimeout(e))}},[e.toasts]),{toast:as,toasts:e.toasts}}function cs(){const{toasts:t}=ls();return e.jsxs(Xt,{children:[t.map(({id:t,title:s,description:r,action:i,...n})=>e.jsxs(ts,{...n,children:[e.jsxs("div",{className:"grid gap-1",children:[s&&e.jsx(rs,{children:s}),r&&e.jsx(is,{children:r})]}),i,e.jsx(ss,{})]},t)),e.jsx(Zt,{})]})}class us extends Error{constructor(e,t="FunctionsError",s){super(e),this.name=t,this.context=s}}class ds extends us{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class hs extends us{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ps extends us{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var gs,fs;(fs=gs||(gs={})).Any="any",fs.ApNortheast1="ap-northeast-1",fs.ApNortheast2="ap-northeast-2",fs.ApSouth1="ap-south-1",fs.ApSoutheast1="ap-southeast-1",fs.ApSoutheast2="ap-southeast-2",fs.CaCentral1="ca-central-1",fs.EuCentral1="eu-central-1",fs.EuWest1="eu-west-1",fs.EuWest2="eu-west-2",fs.EuWest3="eu-west-3",fs.SaEast1="sa-east-1",fs.UsEast1="us-east-1",fs.UsWest1="us-west-1",fs.UsWest2="us-west-2";var ms=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};class ys{constructor(e,{headers:t={},customFetch:s,region:r=gs.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Se(()=>Promise.resolve().then(()=>As),void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(s)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ms(this,arguments,void 0,function*(e,t={}){var s;try{const{headers:r,method:i,body:n,signal:o}=t;let a={},{region:l}=t;l||(l=this.region);const c=new URL(`${this.url}/${e}`);let u;l&&"any"!==l&&(a["x-region"]=l,c.searchParams.set("forceFunctionRegion",l)),n&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&("undefined"!=typeof Blob&&n instanceof Blob||n instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=n):"string"==typeof n?(a["Content-Type"]="text/plain",u=n):"undefined"!=typeof FormData&&n instanceof FormData?u=n:(a["Content-Type"]="application/json",u=JSON.stringify(n)));const d=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:u,signal:o}).catch(e=>{if("AbortError"===e.name)throw e;throw new ds(e)}),h=d.headers.get("x-relay-error");if(h&&"true"===h)throw new hs(d);if(!d.ok)throw new ps(d);let p,g=(null!==(s=d.headers.get("Content-Type"))&&void 0!==s?s:"text/plain").split(";")[0].trim();return p="application/json"===g?yield d.json():"application/octet-stream"===g?yield d.blob():"text/event-stream"===g?d:"multipart/form-data"===g?yield d.formData():yield d.text(),{data:p,error:null,response:d}}catch(r){return r instanceof Error&&"AbortError"===r.name?{data:null,error:new ds(r)}:{data:null,error:r,response:r instanceof ps||r instanceof hs?r.context:void 0}}})}}var vs={},bs={},ws={},xs={},_s={},ks={},js=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const Ss=js.fetch,Ts=js.fetch.bind(js),Ps=js.Headers,Es=js.Request,Cs=js.Response,As=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ps,Request:Es,Response:Cs,default:Ts,fetch:Ss},Symbol.toStringTag,{value:"Module"})),Os=v(As);var Ns={};Object.defineProperty(Ns,"__esModule",{value:!0});let Rs=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ns.default=Rs;var Is=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ks,"__esModule",{value:!0});const Ds=Is(Os),Ls=Is(Ns);ks.default=class{constructor(e){var t,s;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(s=e.isMaybeSingle)&&void 0!==s&&s,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=Ds.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,s,r,i;let n=null,o=null,a=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const s=await e.text();""===s||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?s:JSON.parse(s))}const i=null===(s=this.headers.get("Prefer"))||void 0===s?void 0:s.match(/count=(exact|planned|estimated)/),u=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");i&&u&&u.length>1&&(a=parseInt(u[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(n={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,a=null,l=406,c="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{n=JSON.parse(t),Array.isArray(n)&&404===e.status&&(o=[],n=null,l=200,c="OK")}catch(u){404===e.status&&""===t?(l=204,c="No Content"):n={message:t}}if(n&&this.isMaybeSingle&&(null===(i=null==n?void 0:n.details)||void 0===i?void 0:i.includes("0 rows"))&&(n=null,l=200,c="OK"),n&&this.shouldThrowOnError)throw new Ls.default(n)}return{error:n,data:o,count:a,status:l,statusText:c}});return this.shouldThrowOnError||(s=s.catch(e=>{var t,s,r;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(s=null==e?void 0:e.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(r=null==e?void 0:e.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};var $s=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_s,"__esModule",{value:!0});const Fs=$s(ks);let Us=class extends Fs.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:i=r}={}){const n=i?`${i}.order`:"order",o=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:s=t}={}){const r=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:s,referencedTable:r=s}={}){const i=void 0===r?"offset":`${r}.offset`,n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(n,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:n="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(o=this.headers.get("Accept"))&&void 0!==o?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${l}"; options=${a};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};_s.default=Us;var Ms=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(xs,"__esModule",{value:!0});const Bs=Ms(_s);let qs=class extends Bs.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const s=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${s})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:s,type:r}={}){let i="";"plain"===r?i="pl":"phrase"===r?i="ph":"websearch"===r&&(i="w");const n=void 0===s?"":`(${s})`;return this.url.searchParams.append(e,`${i}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,s){return this.url.searchParams.append(e,`not.${t}.${s}`),this}or(e,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,s){return this.url.searchParams.append(e,`${t}.${s}`),this}};xs.default=qs;var Hs=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ws,"__esModule",{value:!0});const zs=Hs(xs);ws.default=class{constructor(e,{headers:t={},schema:s,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=s,this.fetch=r}select(e,{head:t=!1,count:s}={}){const r=t?"HEAD":"GET";let i=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",n),s&&this.headers.append("Prefer",`count=${s}`),new zs.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:s=!0}={}){var r;if(t&&this.headers.append("Prefer",`count=${t}`),s||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new zs.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:i=!0}={}){var n;if(this.headers.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),void 0!==t&&this.url.searchParams.set("on_conflict",t),r&&this.headers.append("Prefer",`count=${r}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new zs.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}update(e,{count:t}={}){var s;return t&&this.headers.append("Prefer",`count=${t}`),new zs.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}delete({count:e}={}){var t;return e&&this.headers.append("Prefer",`count=${e}`),new zs.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}};var Ws=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bs,"__esModule",{value:!0});const Vs=Ws(ws),Gs=Ws(xs);bs.default=class e{constructor(e,{headers:t={},schema:s,fetch:r}={}){this.url=e,this.headers=new Headers(t),this.schemaName=s,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new Vs.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:s=!1,get:r=!1,count:i}={}){var n;let o;const a=new URL(`${this.url}/rpc/${e}`);let l;s||r?(o=s?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{a.searchParams.append(e,t)})):(o="POST",l=t);const c=new Headers(this.headers);return i&&c.set("Prefer",`count=${i}`),new Gs.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}};var Ks=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vs,"__esModule",{value:!0}),vs.PostgrestError=vs.PostgrestBuilder=vs.PostgrestTransformBuilder=vs.PostgrestFilterBuilder=vs.PostgrestQueryBuilder=vs.PostgrestClient=void 0;const Ys=Ks(bs);vs.PostgrestClient=Ys.default;const Js=Ks(ws);vs.PostgrestQueryBuilder=Js.default;const Qs=Ks(xs);vs.PostgrestFilterBuilder=Qs.default;const Xs=Ks(_s);vs.PostgrestTransformBuilder=Xs.default;const Zs=Ks(ks);vs.PostgrestBuilder=Zs.default;const er=Ks(Ns);vs.PostgrestError=er.default;var tr=vs.default={PostgrestClient:Ys.default,PostgrestQueryBuilder:Js.default,PostgrestFilterBuilder:Qs.default,PostgrestTransformBuilder:Xs.default,PostgrestBuilder:Zs.default,PostgrestError:er.default};const{PostgrestClient:sr,PostgrestQueryBuilder:rr,PostgrestFilterBuilder:ir,PostgrestTransformBuilder:nr,PostgrestBuilder:or,PostgrestError:ar}=tr;class lr{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,s=parseInt(t.replace(/^v/,"").split(".")[0]);return s>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const cr=1e4;var ur,dr,hr,pr,gr,fr,mr,yr,vr,br,wr;(dr=ur||(ur={}))[dr.connecting=0]="connecting",dr[dr.open=1]="open",dr[dr.closing=2]="closing",dr[dr.closed=3]="closed",(pr=hr||(hr={})).closed="closed",pr.errored="errored",pr.joined="joined",pr.joining="joining",pr.leaving="leaving",(fr=gr||(gr={})).close="phx_close",fr.error="phx_error",fr.join="phx_join",fr.reply="phx_reply",fr.leave="phx_leave",fr.access_token="access_token",(mr||(mr={})).websocket="websocket",(vr=yr||(yr={})).Connecting="connecting",vr.Open="open",vr.Closing="closing",vr.Closed="closed";class xr{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),s=new TextDecoder;return this._decodeBroadcast(e,t,s)}_decodeBroadcast(e,t,s){const r=t.getUint8(1),i=t.getUint8(2);let n=this.HEADER_LENGTH+2;const o=s.decode(e.slice(n,n+r));n+=r;const a=s.decode(e.slice(n,n+i));n+=i;return{ref:null,topic:o,event:a,payload:JSON.parse(s.decode(e.slice(n,e.byteLength)))}}}class _r{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(wr=br||(br={})).abstime="abstime",wr.bool="bool",wr.date="date",wr.daterange="daterange",wr.float4="float4",wr.float8="float8",wr.int2="int2",wr.int4="int4",wr.int4range="int4range",wr.int8="int8",wr.int8range="int8range",wr.json="json",wr.jsonb="jsonb",wr.money="money",wr.numeric="numeric",wr.oid="oid",wr.reltime="reltime",wr.text="text",wr.time="time",wr.timestamp="timestamp",wr.timestamptz="timestamptz",wr.timetz="timetz",wr.tsrange="tsrange",wr.tstzrange="tstzrange";const kr=(e,t,s={})=>{var r;const i=null!==(r=s.skipTypes)&&void 0!==r?r:[];return t?Object.keys(t).reduce((s,r)=>(s[r]=jr(r,e,t,i),s),{}):{}},jr=(e,t,s,r)=>{const i=t.find(t=>t.name===e),n=null==i?void 0:i.type,o=s[e];return n&&!r.includes(n)?Sr(n,o):Tr(o)},Sr=(e,t)=>{if("_"===e.charAt(0)){const s=e.slice(1,e.length);return Ar(t,s)}switch(e){case br.bool:return Pr(t);case br.float4:case br.float8:case br.int2:case br.int4:case br.int8:case br.numeric:case br.oid:return Er(t);case br.json:case br.jsonb:return Cr(t);case br.timestamp:return Or(t);case br.abstime:case br.date:case br.daterange:case br.int4range:case br.int8range:case br.money:case br.reltime:case br.text:case br.time:case br.timestamptz:case br.timetz:case br.tsrange:case br.tstzrange:default:return Tr(t)}},Tr=e=>e,Pr=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Er=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Cr=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},Ar=(e,t)=>{if("string"!=typeof e)return e;const s=e.length-1,r=e[s];if("{"===e[0]&&"}"===r){let r;const n=e.slice(1,s);try{r=JSON.parse("["+n+"]")}catch(i){r=n?n.split(","):[]}return r.map(e=>Sr(t,e))}return e},Or=e=>"string"==typeof e?e.replace(" ","T"):e,Nr=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class Rr{constructor(e,t,s={},r=1e4){this.channel=e,this.event=t,this.payload=s,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var s;return this._hasReceived(e)&&t(null===(s=this.receivedResp)||void 0===s?void 0:s.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ir,Dr,Lr,$r,Fr,Ur,Mr,Br;(Dr=Ir||(Ir={})).SYNC="sync",Dr.JOIN="join",Dr.LEAVE="leave";class qr{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qr.syncState(this.state,e,t,s),this.pendingDiffs.forEach(e=>{this.state=qr.syncDiff(this.state,e,t,s)}),this.pendingDiffs=[],r()}),this.channel._on(s.diff,{},e=>{const{onJoin:t,onLeave:s,onSync:r}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=qr.syncDiff(this.state,e,t,s),r())}),this.onJoin((e,t,s)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:s})}),this.onLeave((e,t,s)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,s,r){const i=this.cloneDeep(e),n=this.transformState(t),o={},a={};return this.map(i,(e,t)=>{n[e]||(a[e]=t)}),this.map(n,(e,t)=>{const s=i[e];if(s){const r=t.map(e=>e.presence_ref),i=s.map(e=>e.presence_ref),n=t.filter(e=>i.indexOf(e.presence_ref)<0),l=s.filter(e=>r.indexOf(e.presence_ref)<0);n.length>0&&(o[e]=n),l.length>0&&(a[e]=l)}else o[e]=t}),this.syncDiff(i,{joins:o,leaves:a},s,r)}static syncDiff(e,t,s,r){const{joins:i,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return s||(s=()=>{}),r||(r=()=>{}),this.map(i,(t,r)=>{var i;const n=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(r),n.length>0){const s=e[t].map(e=>e.presence_ref),r=n.filter(e=>s.indexOf(e.presence_ref)<0);e[t].unshift(...r)}s(t,n,r)}),this.map(n,(t,s)=>{let i=e[t];if(!i)return;const n=s.map(e=>e.presence_ref);i=i.filter(e=>n.indexOf(e.presence_ref)<0),e[t]=i,r(t,i,s),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(s=>t(s,e[s]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,s)=>{const r=e[s];return t[s]="metas"in r?r.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}($r=Lr||(Lr={})).ALL="*",$r.INSERT="INSERT",$r.UPDATE="UPDATE",$r.DELETE="DELETE",(Ur=Fr||(Fr={})).BROADCAST="broadcast",Ur.PRESENCE="presence",Ur.POSTGRES_CHANGES="postgres_changes",Ur.SYSTEM="system",(Br=Mr||(Mr={})).SUBSCRIBED="SUBSCRIBED",Br.TIMED_OUT="TIMED_OUT",Br.CLOSED="CLOSED",Br.CHANNEL_ERROR="CHANNEL_ERROR";class Hr{constructor(e,t={config:{}},s){var r,i;if(this.topic=e,this.params=t,this.socket=s,this.bindings={},this.state=hr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Rr(this,gr.join,this.params,this.timeout),this.rejoinTimer=new _r(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=hr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=hr.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=hr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=hr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=hr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gr.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new qr(this),this.broadcastEndpointURL=Nr(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(i=null===(r=this.params.config)||void 0===r?void 0:r.broadcast)||void 0===i?void 0:i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var s,r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==hr.closed){const{config:{broadcast:n,presence:o,private:a}}=this.params,l=null!==(r=null===(s=this.bindings.postgres_changes)||void 0===s?void 0:s.map(e=>e.filter))&&void 0!==r?r:[],c=!!this.bindings[Fr.PRESENCE]&&this.bindings[Fr.PRESENCE].length>0||!0===(null===(i=this.params.config.presence)||void 0===i?void 0:i.enabled),u={},d={broadcast:n,presence:Object.assign(Object.assign({},o),{enabled:c}),postgres_changes:l,private:a};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(Mr.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(Mr.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var s;if(this.socket.setAuth(),void 0!==t){const r=this.bindings.postgres_changes,i=null!==(s=null==r?void 0:r.length)&&void 0!==s?s:0,n=[];for(let s=0;s<i;s++){const i=r[s],{filter:{event:o,schema:a,table:l,filter:c}}=i,u=t&&t[s];if(!u||u.event!==o||u.schema!==a||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=hr.errored,void(null==e||e(Mr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));n.push(Object.assign(Object.assign({},i),{id:u.id}))}return this.bindings.postgres_changes=n,void(e&&e(Mr.SUBSCRIBED))}null==e||e(Mr.SUBSCRIBED)}).receive("error",t=>{this.state=hr.errored,null==e||e(Mr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(Mr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,s){return this.state===hr.joined&&e===Fr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,s)}async send(e,t={}){var s,r;if(this._canPush()||"broadcast"!==e.type)return new Promise(s=>{var r,i,n;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(n=null===(i=null===(r=this.params)||void 0===r?void 0:r.config)||void 0===i?void 0:i.broadcast)||void 0===n?void 0:n.ack)||s("ok"),o.receive("ok",()=>s("ok")),o.receive("error",()=>s("error")),o.receive("timeout",()=>s("timed out"))});{const{event:n,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:o,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(s=t.timeout)&&void 0!==s?s:this.timeout);return await(null===(r=e.body)||void 0===r?void 0:r.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=hr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gr.close,"leave",this._joinRef())};this.joinPush.destroy();let s=null;return new Promise(r=>{s=new Rr(this,gr.leave,{},e),s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})}).finally(()=>{null==s||s.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=hr.closed,this.bindings={}}async _fetchWithTimeout(e,t,s){const r=new AbortController,i=setTimeout(()=>r.abort(),s),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),n}_push(e,t,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Rr(this,e,t,s);return this._canPush()?r.send():this._addToPushBuffer(r),r}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,s){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,s){var r,i;const n=e.toLocaleLowerCase(),{close:o,error:a,leave:l,join:c}=gr;if(s&&[o,a,l,c].indexOf(n)>=0&&s!==this._joinRef())return;let u=this._onMessage(n,t,s);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null===(r=this.bindings.postgres_changes)||void 0===r||r.filter(e=>{var t,s,r;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(r=null===(s=e.filter)||void 0===s?void 0:s.event)||void 0===r?void 0:r.toLocaleLowerCase())===n}).map(e=>e.callback(u,s)):null===(i=this.bindings[n])||void 0===i||i.filter(e=>{var s,r,i,o,a,l;if(["broadcast","presence","postgres_changes"].includes(n)){if("id"in e){const n=e.id,o=null===(s=e.filter)||void 0===s?void 0:s.event;return n&&(null===(r=t.ids)||void 0===r?void 0:r.includes(n))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const s=null===(a=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===s||s===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===n}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:s,commit_timestamp:r,type:i,errors:n}=e,o={schema:t,table:s,commit_timestamp:r,eventType:i,new:{},old:{},errors:n};u=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(u,s)})}_isClosed(){return this.state===hr.closed}_isJoined(){return this.state===hr.joined}_isJoining(){return this.state===hr.joining}_isLeaving(){return this.state===hr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,s){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:s};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const s=e.toLocaleLowerCase();return this.bindings[s]&&(this.bindings[s]=this.bindings[s].filter(e=>{var r;return!((null===(r=e.type)||void 0===r?void 0:r.toLocaleLowerCase())===s&&Hr.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gr.close,{},e)}_onError(e){this._on(gr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=hr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=kr(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=kr(e.columns,e.old_record)),t}}const zr=()=>{},Wr=25e3,Vr=10,Gr=100,Kr=[1e3,2e3,5e3,1e4];class Yr{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=cr,this.transport=null,this.heartbeatIntervalMs=Wr,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=zr,this.ref=0,this.reconnectTimer=null,this.logger=zr,this.conn=null,this.sendBuffer=[],this.serializer=new xr,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Se(()=>Promise.resolve().then(()=>As),void 0).then(({default:t})=>t(...e)).catch(e=>{throw new Error(`Failed to load @supabase/node-fetch: ${e.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):fetch),(...e)=>t(...e)},!(null===(s=null==t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${mr.websocket}`,this.httpEndpoint=Nr(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=lr.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const s=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(s),this._setConnectionState("disconnected")},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,s){this.logger(e,t,s)}connectionState(){switch(this.conn&&this.conn.readyState){case ur.connecting:return yr.Connecting;case ur.open:return yr.Open;case ur.closing:return yr.Closing;default:return yr.Closed}}isConnected(){return this.connectionState()===yr.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const s=`realtime:${e}`,r=this.getChannels().find(e=>e.topic===s);if(r)return r;{const s=new Hr(`realtime:${e}`,t,this);return this.channels.push(s),s}}push(e){const{topic:t,event:s,payload:r,ref:i}=e,n=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${s} (${i})`,r),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},Gr)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(a){this.log("error","error in heartbeat callback",a)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:s,payload:r,ref:i}=e,n=i?`(${i})`:"",o=r.status||"";this.log("receive",`${o} ${t} ${s} ${n}`.trim(),r),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(s,r,i)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(gr.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const s=e.match(/\?/)?"&":"?";return`${e}${s}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const s={access_token:t,version:"realtime-js/2.75.0"};t&&e.updateJoinPayload(s),e.joinedOnce&&e._isJoined()&&e._push(gr.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(s=>{try{s(t)}catch(r){this.log("error",`error in ${e} callback`,r)}})}catch(s){this.log("error",`error triggering ${e} callbacks`,s)}}_setupReconnectionTimer(){this.reconnectTimer=new _r(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Vr)},this.reconnectAfterMs)}_initializeOptions(e){var t,s,r,i,n,o,a,l,c;if(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(s=null==e?void 0:e.timeout)&&void 0!==s?s:cr,this.heartbeatIntervalMs=null!==(r=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==r?r:Wr,this.worker=null!==(i=null==e?void 0:e.worker)&&void 0!==i&&i,this.accessToken=null!==(n=null==e?void 0:e.accessToken)&&void 0!==n?n:null,this.heartbeatCallback=null!==(o=null==e?void 0:e.heartbeatCallback)&&void 0!==o?o:zr,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(a=null==e?void 0:e.reconnectAfterMs)&&void 0!==a?a:e=>Kr[e-1]||1e4,this.encode=null!==(l=null==e?void 0:e.encode)&&void 0!==l?l:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(c=null==e?void 0:e.decode)&&void 0!==c?c:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class Jr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Qr(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Xr extends Jr{constructor(e,t,s){super(e),this.name="StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Zr extends Jr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var ei=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};const ti=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>Se(()=>Promise.resolve().then(()=>As),void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},si=e=>{if(Array.isArray(e))return e.map(e=>si(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,s])=>{const r=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=si(s)}),t};var ri=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};const ii=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ni=(e,t,s)=>ri(void 0,void 0,void 0,function*(){const r=yield ei(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield Se(()=>Promise.resolve().then(()=>As),void 0)).Response:Response});e instanceof r&&!(null==s?void 0:s.noResolveJson)?e.json().then(s=>{const r=e.status||500,i=(null==s?void 0:s.statusCode)||r+"";t(new Xr(ii(s),r,i))}).catch(e=>{t(new Zr(ii(e),e))}):t(new Zr(ii(e),e))}),oi=(e,t,s,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&r?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(r)?(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(r)):i.body=r,(null==t?void 0:t.duplex)&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),s)):i};function ai(e,t,s,r,i,n){return ri(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(s,oi(t,r,i,n)).then(e=>{if(!e.ok)throw e;return(null==r?void 0:r.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(e=>ni(e,a,r))})})}function li(e,t,s,r){return ri(this,void 0,void 0,function*(){return ai(e,"GET",t,s,r)})}function ci(e,t,s,r,i){return ri(this,void 0,void 0,function*(){return ai(e,"POST",t,r,i,s)})}function ui(e,t,s,r,i){return ri(this,void 0,void 0,function*(){return ai(e,"PUT",t,r,i,s)})}function di(e,t,s,r,i){return ri(this,void 0,void 0,function*(){return ai(e,"DELETE",t,r,i,s)})}var hi=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};class pi{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return hi(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qr(e))return{data:null,error:e};throw e}})}}var gi=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};class fi{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}asStream(){return new pi(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.execute().then(e,t)}execute(){return gi(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qr(e))return{data:null,error:e};throw e}})}}var mi=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};const yi={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vi={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class bi{constructor(e,t={},s,r){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=s,this.fetch=ti(r)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,s,r){return mi(this,void 0,void 0,function*(){try{let i;const n=Object.assign(Object.assign({},vi),r);let o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)});const a=n.metadata;"undefined"!=typeof Blob&&s instanceof Blob?(i=new FormData,i.append("cacheControl",n.cacheControl),a&&i.append("metadata",this.encodeMetadata(a)),i.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(i=s,i.append("cacheControl",n.cacheControl),a&&i.append("metadata",this.encodeMetadata(a))):(i=s,o["cache-control"]=`max-age=${n.cacheControl}`,o["content-type"]=n.contentType,a&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null==r?void 0:r.headers)&&(o=Object.assign(Object.assign({},o),r.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?ui:ci)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:o},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Qr(i))return{data:null,error:i};throw i}})}upload(e,t,s){return mi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,s)})}uploadToSignedUrl(e,t,s,r){return mi(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),n=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${n}`);o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:vi.upsert},r),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&s instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",s)):"undefined"!=typeof FormData&&s instanceof FormData?(e=s,e.append("cacheControl",t.cacheControl)):(e=s,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);return{data:{path:i,fullPath:(yield ui(this.fetch,o.toString(),e,{headers:n})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qr(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,t){return mi(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e);const r=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(r["x-upsert"]="true");const i=yield ci(this.fetch,`${this.url}/object/upload/sign/${s}`,{},{headers:r}),n=new URL(this.url+i.url),o=n.searchParams.get("token");if(!o)throw new Jr("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:o},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Qr(s))return{data:null,error:s};throw s}})}update(e,t,s){return mi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,s)})}move(e,t,s){return mi(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}copy(e,t,s){return mi(this,void 0,void 0,function*(){try{return{data:{path:(yield ci(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==s?void 0:s.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,s){return mi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield ci(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},(null==s?void 0:s.transform)?{transform:s.transform}:{}),{headers:this.headers});const n=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${n}`)},{data:i,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,s){return mi(this,void 0,void 0,function*(){try{const r=yield ci(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==s?void 0:s.download)?`&download=${!0===s.download?"":s.download}`:"";return{data:r.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}download(e,t){const s=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",r=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=r?`?${r}`:"",n=this._getFinalPath(e);return new fi(()=>li(this.fetch,`${this.url}/${s}/${n}${i}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return mi(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield li(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:si(e),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Qr(s))return{data:null,error:s};throw s}})}exists(e){return mi(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,s,r){return ri(this,void 0,void 0,function*(){return ai(e,"HEAD",t,Object.assign(Object.assign({},s),{noResolveJson:!0}),r)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Qr(s)&&s instanceof Zr){const e=s.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:s}}throw s}})}getPublicUrl(e,t){const s=this._getFinalPath(e),r=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&r.push(i);const n=void 0!==(null==t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&r.push(o);let a=r.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${s}${a}`)}}}remove(e){return mi(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}list(e,t,s){return mi(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},yi),t),{prefix:e||""});return{data:yield ci(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},s),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qr(r))return{data:null,error:r};throw r}})}listV2(e,t){return mi(this,void 0,void 0,function*(){try{const s=Object.assign({},e);return{data:yield ci(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,s,{headers:this.headers},t),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Qr(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const wi={"X-Client-Info":"storage-js/2.75.0"};var xi=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};class _i{constructor(e,t={},s,r){this.shouldThrowOnError=!1;const i=new URL(e);if(null==r?void 0:r.useNewHostname){/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."))}this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},wi),t),this.fetch=ti(s)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return xi(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qr(e))return{data:null,error:e};throw e}})}getBucket(e){return xi(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}createBucket(e){return xi(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield ci(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Qr(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return xi(this,void 0,void 0,function*(){try{return{data:yield ui(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Qr(s))return{data:null,error:s};throw s}})}emptyBucket(e){return xi(this,void 0,void 0,function*(){try{return{data:yield ci(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return xi(this,void 0,void 0,function*(){try{return{data:yield di(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Qr(t))return{data:null,error:t};throw t}})}}class ki extends _i{constructor(e,t={},s,r){super(e,t,s,r)}from(e){return new bi(this.url,this.headers,e,this.fetch)}}const ji={"X-Client-Info":"supabase-js/2.30.0"};var Si={exports:{}};!function(e,t){var s,r="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==b&&b,i=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();s=i,function(e){var t=void 0!==s&&s||"undefined"!=typeof self&&self||void 0!==b&&b||{},r="URLSearchParams"in t,i="Symbol"in t&&"iterator"in Symbol,n="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in t,a="ArrayBuffer"in t;if(a)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&l.indexOf(Object.prototype.toString.call(e))>-1};function u(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return i&&(t[Symbol.iterator]=function(){return t}),t}function p(e){this.map={},e instanceof p?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function g(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function f(e){return new Promise(function(t,s){e.onload=function(){t(e.result)},e.onerror=function(){s(e.error)}})}function m(e){var t=new FileReader,s=f(t);return t.readAsArrayBuffer(e),s}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function v(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:n&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():a&&n&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=g(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(n)return this.blob().then(m);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,s,r,i,n=g(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,s=f(t),r=/charset=([A-Za-z0-9_-]+)/.exec(e.type),i=r?r[1]:"utf-8",t.readAsText(e,i),s;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),s=new Array(t.length),r=0;r<t.length;r++)s[r]=String.fromCharCode(t[r]);return s.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}p.prototype.append=function(e,t){e=u(e),t=d(t);var s=this.map[e];this.map[e]=s?s+", "+t:t},p.prototype.delete=function(e){delete this.map[u(e)]},p.prototype.get=function(e){return e=u(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(u(e))},p.prototype.set=function(e,t){this.map[u(e)]=d(t)},p.prototype.forEach=function(e,t){for(var s in this.map)this.map.hasOwnProperty(s)&&e.call(t,this.map[s],s,this)},p.prototype.keys=function(){var e=[];return this.forEach(function(t,s){e.push(s)}),h(e)},p.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),h(e)},p.prototype.entries=function(){var e=[];return this.forEach(function(t,s){e.push([s,t])}),h(e)},i&&(p.prototype[Symbol.iterator]=p.prototype.entries);var w=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function x(e,s){if(!(this instanceof x))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,n=(s=s||{}).body;if(e instanceof x){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,s.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=s.credentials||this.credentials||"same-origin",!s.headers&&this.headers||(this.headers=new p(s.headers)),this.method=(r=s.method||this.method||"GET",i=r.toUpperCase(),w.indexOf(i)>-1?i:r),this.mode=s.mode||this.mode||null,this.signal=s.signal||this.signal||function(){if("AbortController"in t)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==s.cache&&"no-cache"!==s.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function _(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var s=e.split("="),r=s.shift().replace(/\+/g," "),i=s.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function k(e,t){if(!(this instanceof k))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new p(t.headers),this.url=t.url||"",this._initBody(e)}x.prototype.clone=function(){return new x(this,{body:this._bodyInit})},v.call(x.prototype),v.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},k.error=function(){var e=new k(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var j=[301,302,303,307,308];k.redirect=function(e,t){if(-1===j.indexOf(t))throw new RangeError("Invalid status code");return new k(null,{status:t,headers:{location:e}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(T){e.DOMException=function(e,t){this.message=e,this.name=t;var s=Error(e);this.stack=s.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function S(s,r){return new Promise(function(i,o){var l=new x(s,r);if(l.signal&&l.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function h(){c.abort()}if(c.onload=function(){var e,t,s={statusText:c.statusText,headers:(e=c.getAllResponseHeaders()||"",t=new p,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var s=e.split(":"),r=s.shift().trim();if(r){var i=s.join(":").trim();try{t.append(r,i)}catch(n){}}}),t)};0===l.url.indexOf("file://")&&(c.status<200||c.status>599)?s.status=200:s.status=c.status,s.url="responseURL"in c?c.responseURL:s.headers.get("X-Request-URL");var r="response"in c?c.response:c.responseText;setTimeout(function(){i(new k(r,s))},0)},c.onerror=function(){setTimeout(function(){o(new TypeError("Network request failed"))},0)},c.ontimeout=function(){setTimeout(function(){o(new TypeError("Network request timed out"))},0)},c.onabort=function(){setTimeout(function(){o(new e.DOMException("Aborted","AbortError"))},0)},c.open(l.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(s){return e}}(l.url),!0),"include"===l.credentials?c.withCredentials=!0:"omit"===l.credentials&&(c.withCredentials=!1),"responseType"in c&&(n?c.responseType="blob":a&&(c.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof p||t.Headers&&r.headers instanceof t.Headers)){var g=[];Object.getOwnPropertyNames(r.headers).forEach(function(e){g.push(u(e)),c.setRequestHeader(e,d(r.headers[e]))}),l.headers.forEach(function(e,t){-1===g.indexOf(t)&&c.setRequestHeader(t,e)})}else l.headers.forEach(function(e,t){c.setRequestHeader(t,e)});l.signal&&(l.signal.addEventListener("abort",h),c.onreadystatechange=function(){4===c.readyState&&l.signal.removeEventListener("abort",h)}),c.send(void 0===l._bodyInit?null:l._bodyInit)})}S.polyfill=!0,t.fetch||(t.fetch=S,t.Headers=p,t.Request=x,t.Response=k),e.Headers=p,e.Request=x,e.Response=k,e.fetch=S,Object.defineProperty(e,"__esModule",{value:!0})}({}),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var n=r.fetch?r:i;(t=n.fetch).default=n.fetch,t.fetch=n.fetch,t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response,e.exports=t}(Si,Si.exports);var Ti=Si.exports;const Pi=f(Ti),Ei=xe({__proto__:null,default:Pi},[Ti]);var Ci=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};const Ai=(e,t,s)=>{const r=(e=>{let t;return t=e||("undefined"==typeof fetch?Pi:fetch),(...e)=>t(...e)})(s),i="undefined"==typeof Headers?Ti.Headers:Headers;return(s,n)=>Ci(void 0,void 0,void 0,function*(){var o;const a=null!==(o=yield t())&&void 0!==o?o:e;let l=new i(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${a}`),r(s,Object.assign(Object.assign({},n),{headers:l}))})};const Oi=()=>"undefined"!=typeof document,Ni={tested:!1,writable:!1},Ri=()=>{if(!Oi())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(Ni.tested)return Ni.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ni.tested=!0,Ni.writable=!0}catch(t){Ni.tested=!0,Ni.writable=!1}return Ni.writable};function Ii(e,t){var s;t||(t=(null===(s=null===window||void 0===window?void 0:window.location)||void 0===s?void 0:s.href)||""),e=e.replace(/[\[\]]/g,"\\$&");const r=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)").exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}const Di=e=>{let t;return t=e||("undefined"==typeof fetch?async(...e)=>await(await Se(()=>Promise.resolve().then(()=>Ei),void 0)).fetch(...e):fetch),(...e)=>t(...e)},Li=async(e,t,s)=>{await e.setItem(t,JSON.stringify(s))},$i=async(e,t)=>{const s=await e.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch(r){return s}},Fi=async(e,t)=>{await e.removeItem(t)};class Ui{constructor(){this.promise=new Ui.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Mi(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const s=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s,r,i,n,o,a,l,c="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)n=t.indexOf(e.charAt(u++)),o=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),s=n<<2|o>>4,r=(15&o)<<4|a>>2,i=(3&a)<<6|l,c+=String.fromCharCode(s),64!=a&&0!=r&&(c+=String.fromCharCode(r)),64!=l&&0!=i&&(c+=String.fromCharCode(i));return c}(s))}function Bi(e){return("0"+e.toString(16)).substr(-2)}function qi(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let s="";for(let r=0;r<56;r++)s+=e.charAt(Math.floor(Math.random()*t));return s}return crypto.getRandomValues(e),Array.from(e,Bi).join("")}async function Hi(e){if("undefined"==typeof crypto)return e;const t=await async function(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(s);return Array.from(r).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}Ui.promiseConstructor=Promise;const zi=/__stack_guard__([a-zA-Z0-9_-]+)__/;let Wi,Vi=!1;function Gi(e){var t,s;let r;Wi();try{throw new Error}catch(n){r=n}const i=null!==(s=null===(t=r.stack)||void 0===t?void 0:t.split("\n"))&&void 0!==s?s:[];for(let o=0;o<i.length;o+=1){const t=i[o].match(zi);if(t&&t[1]===e)return!0}return!1}async function Ki(e,t){await Wi();const s=`__stack_guard__${e}__`,r={[s]:async()=>await t()};return await r[s]()}Wi=async()=>{Vi||(Vi=!0,await Ki("ENV_CHECK",async()=>{const e=Gi("ENV_CHECK");return e}))};class Yi extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function Ji(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Qi extends Yi{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Xi extends Yi{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Zi extends Yi{constructor(e,t,s){super(e),this.name=t,this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class en extends Zi{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class tn extends Zi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}class sn extends Zi{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class rn extends Zi{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class nn extends Zi{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class on extends Zi{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}function an(e){return Ji(e)&&"AuthRetryableFetchError"===e.name}var ln=globalThis&&globalThis.__rest||function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]])}return s};const cn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),un=[502,503,504];async function dn(e){if(!("object"==typeof(t=e)&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"==typeof t.json))throw new on(cn(e),0);var t;if(un.includes(e.status))throw new on(cn(e),e.status);let s;try{s=await e.json()}catch(r){throw new Xi(cn(r),r)}throw new Qi(cn(s),e.status||500)}async function hn(e,t,s,r){var i;const n=Object.assign({},null==r?void 0:r.headers);(null==r?void 0:r.jwt)&&(n.Authorization=`Bearer ${r.jwt}`);const o=null!==(i=null==r?void 0:r.query)&&void 0!==i?i:{};(null==r?void 0:r.redirectTo)&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await async function(e,t,s,r,i,n){const o=((e,t,s,r)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),s))})(t,r,i,n);let a;try{a=await e(s,o)}catch(l){throw new on(cn(l),0)}a.ok||await dn(a);if(null==r?void 0:r.noResolveJson)return a;try{return await a.json()}catch(l){await dn(l)}}(e,t,s+a,{headers:n,noResolveJson:null==r?void 0:r.noResolveJson},{},null==r?void 0:r.body);return(null==r?void 0:r.xform)?null==r?void 0:r.xform(l):{data:Object.assign({},l),error:null}}function pn(e){var t;let s=null;var r;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(s=Object.assign({},e),s.expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r));return{data:{session:s,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function gn(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function fn(e){return{data:e,error:null}}function mn(e){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:i,verification_type:n}=e,o=ln(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:s,hashed_token:r,redirect_to:i,verification_type:n},user:Object.assign({},o)},error:null}}function yn(e){return e}var vn=globalThis&&globalThis.__rest||function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(s[r[i]]=e[r[i]])}return s};class bn{constructor({url:e="",headers:t={},fetch:s}){this.url=e,this.headers=t,this.fetch=Di(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await hn(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(s){if(Ji(s))return{data:null,error:s};throw s}}async inviteUserByEmail(e,t={}){try{return await hn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:gn})}catch(s){if(Ji(s))return{data:{user:null},error:s};throw s}}async generateLink(e){try{const{options:t}=e,s=vn(e,["options"]),r=Object.assign(Object.assign({},s),t);return"newEmail"in s&&(r.new_email=null==s?void 0:s.newEmail,delete r.newEmail),await hn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:mn,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Ji(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await hn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:gn})}catch(t){if(Ji(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,s,r,i,n,o,a;try{const l={nextPage:null,lastPage:0,total:0},c=await hn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(s=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==s?s:"",per_page:null!==(i=null===(r=null==e?void 0:e.perPage)||void 0===r?void 0:r.toString())&&void 0!==i?i:""},xform:yn});if(c.error)throw c.error;const u=await c.json(),d=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,h=null!==(a=null===(o=c.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),s=JSON.parse(e.split(";")[1].split("=")[1]);l[`${s}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(Ji(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await hn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:gn})}catch(t){if(Ji(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await hn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:gn})}catch(s){if(Ji(s))return{data:{user:null},error:s};throw s}}async deleteUser(e,t=!1){try{return await hn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:gn})}catch(s){if(Ji(s))return{data:{user:null},error:s};throw s}}async _listFactors(e){try{const{data:t,error:s}=await hn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:s}}catch(t){if(Ji(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await hn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ji(t))return{data:null,error:t};throw t}}}const wn={"X-Client-Info":"gotrue-js/2.43.1"},xn={getItem:e=>Ri()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Ri()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Ri()&&globalThis.localStorage.removeItem(e)}};!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const _n={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:wn,flowType:"implicit",debug:!1},kn=3e4;class jn{constructor(e){var t;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=jn.nextInstanceID,jn.nextInstanceID+=1,this.instanceID>0&&Oi();const s=Object.assign(Object.assign({},_n),e);if(this.logDebugMessages=s.debug,this.inMemorySession=null,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.persistSession=s.persistSession,this.storage=s.storage||xn,this.admin=new bn({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Di(s.fetch),this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===xn&&Ri(),Oi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){}null===(t=this.broadcastChannel)||void 0===t||t.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages,this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=Ki("_initialize",async()=>{try{const e=!!Oi()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:t,error:s}=await this._getSessionFromUrl(e);if(s)return this._debug("#_initialize()","error detecting session from URL",s),await this._removeSession(),{error:s};const{session:r,redirectType:i}=t;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),await this._saveSession(r),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return Ji(e)?{error:e}:{error:new Xi("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}),await this.initializePromise}async signUp(e){var t,s,r;try{let i;if(await this._removeSession(),"email"in e){const{email:s,password:r,options:n}=e;let o=null,a=null;if("pkce"===this.flowType){const e=qi();await Li(this.storage,`${this.storageKey}-code-verifier`,e),o=await Hi(e),a=e===o?"plain":"s256"}i=await hn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:s,password:r,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:o,code_challenge_method:a},xform:pn})}else{if(!("phone"in e))throw new sn("You must provide either an email or phone number and a password");{const{phone:t,password:n,options:o}=e;i=await hn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!==(s=null==o?void 0:o.data)&&void 0!==s?s:{},channel:null!==(r=null==o?void 0:o.channel)&&void 0!==r?r:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:pn})}}const{data:n,error:o}=i;if(o||!n)return{data:{user:null,session:null},error:o};const a=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(i){if(Ji(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if(await this._removeSession(),"email"in e){const{email:s,password:r,options:i}=e;t=await hn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:pn})}else{if(!("phone"in e))throw new sn("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:i}=e;t=await hn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:pn})}}const{data:s,error:r}=t;return r?{data:{user:null,session:null},error:r}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:{user:s.user,session:s.session},error:r}):{data:{user:null,session:null},error:new tn}}catch(t){if(Ji(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,s,r,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){const t=await $i(this.storage,`${this.storageKey}-code-verifier`),{data:s,error:r}=await hn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:pn});return await Fi(this.storage,`${this.storageKey}-code-verifier`),r?{data:{user:null,session:null},error:r}:s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:r}):{data:{user:null,session:null},error:new tn}}async signInWithIdToken(e){await this._removeSession();try{const{options:t,provider:s,token:r,access_token:i,nonce:n}=e,o=await hn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:s,id_token:r,access_token:i,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:pn}),{data:a,error:l}=o;return l?{data:{user:null,session:null},error:l}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l}):{data:{user:null,session:null},error:new tn}}catch(t){if(Ji(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,s,r,i,n;try{if(await this._removeSession(),"email"in e){const{email:r,options:i}=e;let n=null,o=null;if("pkce"===this.flowType){const e=qi();await Li(this.storage,`${this.storageKey}-code-verifier`,e),n=await Hi(e),o=e===n?"plain":"s256"}const{error:a}=await hn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(s=null==i?void 0:i.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:n,code_challenge_method:o},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:s}=e,{data:o,error:a}=await hn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(r=null==s?void 0:s.data)&&void 0!==r?r:{},create_user:null===(i=null==s?void 0:s.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},channel:null!==(n=null==s?void 0:s.channel)&&void 0!==n?n:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new sn("You must provide either an email or phone number.")}catch(o){if(Ji(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,s;try{"email_change"!==e.type&&"phone_change"!==e.type&&await this._removeSession();const{data:r,error:i}=await hn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:null===(t=e.options)||void 0===t?void 0:t.captchaToken}}),redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,xform:pn});if(i)throw i;if(!r)throw new Error("An error occurred on token verification.");const n=r.session,o=r.user;return(null==n?void 0:n.access_token)&&(await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)),{data:{user:o,session:n},error:null}}catch(r){if(Ji(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,s,r;try{return await this._removeSession(),await hn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==s?s:void 0}),(null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:fn})}catch(i){if(Ji(i))return{data:null,error:i};throw i}}async reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:s}=e;if(s)throw s;if(!t)throw new en;const{error:r}=await hn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Ji(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{"email_change"!=e.type&&"phone_change"!=e.type&&await this._removeSession();const t=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:i}=e,{error:n}=await hn(this.fetch,"POST",t,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:n}}if("phone"in e){const{phone:s,type:r,options:i}=e,{data:n,error:o}=await hn(this.fetch,"POST",t,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:o}}throw new sn("You must provide either an email or phone number and a type")}catch(t){if(Ji(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return this._useSession(async e=>e)}async _useSession(e){return await Ki("_useSession",async()=>{const t=await this.__loadSession();return await e(t)})}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!Gi("_useSession"))throw new Error("Please use #_useSession()");Gi("_initialize")||await this.initializePromise;try{let e=null;if(this.persistSession){const t=await $i(this.storage,this.storageKey);this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const t=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t)return{data:{session:e},error:null};const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){try{return await this._useSession(async t=>{var s,r;if(!e){const{data:i,error:n}=t;if(n)throw n;e=null!==(r=null===(s=i.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0}return await hn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:gn})})}catch(t){if(Ji(t))return{data:{user:null},error:t};throw t}}async updateUser(e,t={}){try{return await this._useSession(async s=>{const{data:r,error:i}=s;if(i)throw i;if(!r.session)throw new en;const n=r.session,{data:o,error:a}=await hn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:e,jwt:n.access_token,xform:gn});if(a)throw a;return n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}})}catch(s){if(Ji(s))return{data:{user:null},error:s};throw s}}_decodeJWT(e){return Mi(e)}async setSession(e){try{if(!e.access_token||!e.refresh_token)throw new en;const t=Date.now()/1e3;let s=t,r=!0,i=null;const n=Mi(e.access_token);if(n.exp&&(s=n.exp,r=s<=t),r){const{session:t,error:s}=await this._callRefreshToken(e.refresh_token);if(s)return{data:{user:null,session:null},error:s};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:r,error:n}=await this.getUser(e.access_token);if(n)throw n;i={access_token:e.access_token,refresh_token:e.refresh_token,user:r.user,token_type:"bearer",expires_in:s-t,expires_at:s},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Ji(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){try{return await this._useSession(async t=>{var s;if(!e){const{data:r,error:i}=t;if(i)throw i;e=null!==(s=r.session)&&void 0!==s?s:void 0}if(!(null==e?void 0:e.refresh_token))throw new en;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ji(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromUrl(e){try{if(!Oi())throw new rn("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new rn("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!e)throw new nn("Not a valid PKCE flow url.");if(e){const e=Ii("code");if(!e)throw new nn("No code detected.");const{data:t,error:s}=await this.exchangeCodeForSession(e);if(s)throw s;if(!t.session)throw new nn("No session detected.");let r=new URL(window.location.href);return r.searchParams.delete("code"),window.history.replaceState(window.history.state,"",r.toString()),{data:{session:t.session,redirectType:null},error:null}}const t=Ii("error_description");if(t){const e=Ii("error_code");if(!e)throw new rn("No error_code detected.");const s=Ii("error");if(!s)throw new rn("No error detected.");throw new rn(t,{error:s,code:e})}const s=Ii("provider_token"),r=Ii("provider_refresh_token"),i=Ii("access_token");if(!i)throw new rn("No access_token detected.");const n=Ii("expires_in");if(!n)throw new rn("No expires_in detected.");const o=Ii("refresh_token");if(!o)throw new rn("No refresh_token detected.");const a=Ii("token_type");if(!a)throw new rn("No token_type detected.");const l=Math.round(Date.now()/1e3)+parseInt(n),{data:c,error:u}=await this.getUser(i);if(u)throw u;const d=c.user,h={provider_token:s,provider_refresh_token:r,access_token:i,expires_in:parseInt(n),expires_at:l,refresh_token:o,token_type:a,user:d},p=Ii("type");return window.location.hash="",this._debug("#_getSessionFromUrl()","clearing window.location.hash"),{data:{session:h,redirectType:p},error:null}}catch(t){if(Ji(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantFlow(){return Oi()&&(Boolean(Ii("access_token"))||Boolean(Ii("error_description")))}async _isPKCEFlow(){const e=await $i(this.storage,`${this.storageKey}-code-verifier`);return Boolean(Ii("code"))&&Boolean(e)}async signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{error:i};const n=null===(s=r.session)||void 0===s?void 0:s.access_token;if(n){const{error:t}=await this.admin.signOut(n,e);if(t&&(!function(e){return Ji(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Fi(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),s={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,s),this._emitInitialSession(t),{data:{subscription:s}}}async _emitInitialSession(e){return await this._useSession(async t=>{var s,r;try{const{data:{session:r},error:i}=t;if(i)throw i;await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",r)),this._debug("INITIAL_SESSION","callback id",e,"session",r)}catch(i){await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i)}})}async resetPasswordForEmail(e,t={}){let s=null,r=null;if("pkce"===this.flowType){const e=qi();await Li(this.storage,`${this.storageKey}-code-verifier`,e),s=await Hi(e),r=e===s?"plain":"s256"}try{return await hn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Ji(i))return{data:null,error:i};throw i}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await(s=async s=>{var r;return await(r=200*s,new Promise(e=>{setTimeout(()=>e(null),r)})),this._debug(t,"refreshing attempt",s),await hn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:pn})},r=(e,t,s)=>s&&s.error&&an(s.error)&&Date.now()+200*(e+1)-i<kn,new Promise((e,t)=>{(async()=>{for(let n=0;n<1/0;n++)try{const t=await s(n);if(!r(n,null,t))return void e(t)}catch(i){if(!r(n,i))return void t(i)}})()}))}catch(i){if(this._debug(t,"error",i),Ji(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}var s,r}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const s=await this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",s),Oi()&&!t.skipBrowserRedirect&&window.location.assign(s),{data:{provider:e,url:s},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const s=await $i(this.storage,this.storageKey);if(this._debug(t,"session from storage",s),!this._isValidSession(s))return this._debug(t,"session is not valid"),void(null!==s&&await this._removeSession());const r=Math.round(Date.now()/1e3),i=(null!==(e=s.expires_at)&&void 0!==e?e:1/0)<r+10;if(this._debug(t,`session has${i?"":" not"} expired with margin of 10s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:e}=await this._callRefreshToken(s.refresh_token);e&&(an(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return void this._debug(t,"error",s)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,s;if(!e)throw new en;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Ui;const{data:t,error:s}=await this._refreshAccessToken(e);if(s)throw s;if(!t.session)throw new en;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const r={session:t.session,error:null};return this.refreshingDeferred.resolve(r),r}catch(i){if(this._debug(r,"error",i),Ji(i)){const e={session:null,error:i};return null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(s=this.refreshingDeferred)||void 0===s||s.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,s=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${s}`);try{this.broadcastChannel&&s&&this.broadcastChannel.postMessage({event:e,session:t});const r=[],i=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,t)}catch(i){r.push(i)}});if(await Promise.all(i),r.length>0){for(let e=0;e<r.length;e+=1);throw r[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),Li(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await Fi(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Oi()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),kn);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),await this._autoRefreshTokenTick()}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:s}}=e;if(!s||!s.refresh_token||!s.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const r=Math.floor((1e3*s.expires_at-t)/kn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),r<=3&&await this._callRefreshToken(s.refresh_token)})}catch(e){}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Oi()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t){const s=[`provider=${encodeURIComponent(e)}`];if((null==t?void 0:t.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(null==t?void 0:t.scopes)&&s.push(`scopes=${encodeURIComponent(t.scopes)}`),"pkce"===this.flowType){const e=qi();await Li(this.storage,`${this.storageKey}-code-verifier`,e);const t=await Hi(e),r=e===t?"plain":"s256";this._debug("PKCE","code verifier",`${e.substring(0,5)}...`,"code challenge",t,"method",r);const i=new URLSearchParams({code_challenge:`${encodeURIComponent(t)}`,code_challenge_method:`${encodeURIComponent(r)}`});s.push(i.toString())}if(null==t?void 0:t.queryParams){const e=new URLSearchParams(t.queryParams);s.push(e.toString())}return`${this.url}/authorize?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await hn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(Ji(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var s,r;const{data:i,error:n}=t;if(n)return{data:null,error:n};const{data:o,error:a}=await hn(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(s=null==i?void 0:i.session)||void 0===s?void 0:s.access_token});return a?{data:null,error:a}:((null===(r=null==o?void 0:o.totp)||void 0===r?void 0:r.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(Ji(t))return{data:null,error:t};throw t}}async _verify(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:n,error:o}=await hn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+n.expires_in},n)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",n),{data:n,error:o})})}catch(t){if(Ji(t))return{data:null,error:t};throw t}}async _challenge(e){try{return await this._useSession(async t=>{var s;const{data:r,error:i}=t;return i?{data:null,error:i}:await hn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:null===(s=null==r?void 0:r.session)||void 0===s?void 0:s.access_token})})}catch(t){if(Ji(t))return{data:null,error:t};throw t}}async _challengeAndVerify(e){const{data:t,error:s}=await this._challenge({factorId:e.factorId});return s?{data:null,error:s}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const s=(null==e?void 0:e.factors)||[],r=s.filter(e=>"totp"===e.factor_type&&"verified"===e.status);return{data:{all:s,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var t,s;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const n=this._decodeJWT(r.access_token);let o=null;n.aal&&(o=n.aal);let a=o;(null!==(s=null===(t=r.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==s?s:[]).length>0&&(a="aal2");return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:n.amr||[]},error:null}})}}jn.nextInstanceID=0;class Sn extends jn{constructor(e){super(e)}}var Tn=globalThis&&globalThis.__awaiter||function(e,t,s,r){return new(s||(s=Promise))(function(i,n){function o(e){try{l(r.next(e))}catch(t){n(t)}}function a(e){try{l(r.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})};const Pn={headers:ji},En={schema:"public"},Cn={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},An={};class On{constructor(e,t,s){var r,i,n,o,a,l,c,u;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const d=e.replace(/\/$/,"");this.realtimeUrl=`${d}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${d}/auth/v1`,this.storageUrl=`${d}/storage/v1`,this.functionsUrl=`${d}/functions/v1`;const h=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,p=function(e,t){const{db:s,auth:r,realtime:i,global:n}=e,{db:o,auth:a,realtime:l,global:c}=t;return{db:Object.assign(Object.assign({},o),s),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),n)}}(null!=s?s:{},{db:En,realtime:An,auth:Object.assign(Object.assign({},Cn),{storageKey:h}),global:Pn});this.storageKey=null!==(i=null===(r=p.auth)||void 0===r?void 0:r.storageKey)&&void 0!==i?i:"",this.headers=null!==(o=null===(n=p.global)||void 0===n?void 0:n.headers)&&void 0!==o?o:{},this.auth=this._initSupabaseAuthClient(null!==(a=p.auth)&&void 0!==a?a:{},this.headers,null===(l=p.global)||void 0===l?void 0:l.fetch),this.fetch=Ai(t,this._getAccessToken.bind(this),null===(c=p.global)||void 0===c?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},p.realtime)),this.rest=new sr(`${d}/rest/v1`,{headers:this.headers,schema:null===(u=p.db)||void 0===u?void 0:u.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new ys(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ki(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},s){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Tn(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,storageKey:i,flowType:n,debug:o},a,l){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Sn({url:this.authUrl,headers:Object.assign(Object.assign({},c),a),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:r,flowType:n,debug:o,fetch:l})}_initRealtimeClient(e){return new Yr(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=s?s:null),this.changedAccessToken=s)}}const Nn=(Rn="https://xdzoikocriuvgkoenjqk.supabase.co",In="sb_publishable_VXiUtpRKA79e51E2p2csvw_vmmek-LL",Dn={auth:{storage:window.localStorage,storageKey:"greenofig-auth",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},realtime:{params:{eventsPerSecond:10}},global:{headers:{"X-Client-Info":"greenofig-web"}}},new On(Rn,In,Dn));var Rn,In,Dn;const Ln=m.createContext(null),$n=({children:t})=>{const[s,r]=m.useState(null),[i,n]=m.useState(null),[o,a]=m.useState(!0),{toast:l}=ls(),c=m.useCallback(async e=>{var t,s,r,i,o;if(!e)return n(null),null;try{let{data:a,error:l}=await Nn.from("user_profiles").select("*").eq("id",e.id).single();if(l&&"PGRST116"===l.code){const n=(null==(t=e.user_metadata)?void 0:t.full_name)||(null==(s=e.user_metadata)?void 0:s.name)||(null==(r=e.email)?void 0:r.split("@")[0])||"User",l=(null==(i=e.user_metadata)?void 0:i.avatar_url)||(null==(o=e.user_metadata)?void 0:o.picture),{data:c,error:u}=await Nn.from("user_profiles").insert({id:e.id,full_name:n,email:e.email,role:"user",profile_picture_url:l}).select().single();if(u)throw u;a=c}else if(l)throw l;return n(a),a}catch(a){return l({variant:"destructive",title:"Error Loading Profile",description:a.message||"Could not load profile. Please refresh the page."}),null}},[l]),u=m.useCallback(()=>s?c(s):Promise.resolve(null),[s,c]);m.useEffect(()=>{(async()=>{a(!0);const{data:{session:e}}=await Nn.auth.getSession();r((null==e?void 0:e.user)??null),(null==e?void 0:e.user)&&await c(e.user),a(!1)})();const{data:e}=Nn.auth.onAuthStateChange(async(e,t)=>{const s=(null==t?void 0:t.user)??null;if(r(s),"SIGNED_IN"===e&&window.location.search.includes("code=")){const e=new URL(window.location.href);return e.searchParams.delete("code"),void(window.location.href=e.toString())}s?await c(s):n(null),a(!1)});return()=>{var t;null==(t=null==e?void 0:e.subscription)||t.unsubscribe()}},[c]);const d=m.useCallback(async e=>{const{data:t,error:s}=await Nn.auth.signInWithPassword(e);if(s)return l({variant:"destructive",title:"Login Failed",description:s.message}),{error:s};const i=await c(t.user);return r(t.user),n(i),l({title:"Login Successful",description:`Welcome back${(null==i?void 0:i.full_name)?", "+i.full_name:""}!`}),{error:null,profile:i}},[c,l]),h=m.useCallback(async()=>{a(!0);const e=`${window.location.origin}/app`,{error:t}=await Nn.auth.signInWithOAuth({provider:"google",options:{redirectTo:e}});t&&(a(!1),l({variant:"destructive",title:"Google Sign-In Failed",description:t.message}))},[l]),p=m.useCallback(async e=>{const{email:t,password:s,full_name:i}=e,{data:o,error:a}=await Nn.auth.signUp({email:t,password:s,options:{data:{full_name:i,role:"user"}}});if(a)return l({variant:"destructive",title:"Sign Up Failed",description:a.message}),{user:null,error:a};const{data:u,error:d}=await Nn.auth.signInWithPassword({email:t,password:s});if(d)return l({variant:"destructive",title:"Sign-in after sign-up failed.",description:d.message}),{user:null,error:d};await new Promise(e=>setTimeout(e,1500));const h=await c(u.user);return r(u.user),n(h),{user:u.user,error:null,profile:h}},[c,l]),g=m.useCallback(async()=>{a(!0);try{await Nn.auth.signOut(),r(null),n(null),localStorage.clear(),sessionStorage.clear(),l({title:"Signed Out",description:"You have been successfully signed out."})}catch(e){}window.location.replace("/home")},[l]),f=m.useMemo(()=>({user:s,userProfile:i,loading:o,signIn:d,signInWithGoogle:h,signUp:p,signOut:g,refreshUserProfile:u}),[s,i,o,d,h,p,g,u]);return e.jsx(Ln.Provider,{value:f,children:t})},Fn=()=>{const e=m.useContext(Ln);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e},Un="/assets/Remove background project-af9f111b.png",Mn=e=>"string"==typeof e,Bn=()=>{let e,t;const s=new Promise((s,r)=>{e=s,t=r});return s.resolve=e,s.reject=t,s},qn=e=>null==e?"":""+e,Hn=/###/g,zn=e=>e&&e.indexOf("###")>-1?e.replace(Hn,"."):e,Wn=e=>!e||Mn(e),Vn=(e,t,s)=>{const r=Mn(t)?t.split("."):t;let i=0;for(;i<r.length-1;){if(Wn(e))return{};const t=zn(r[i]);!e[t]&&s&&(e[t]=new s),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++i}return Wn(e)?{}:{obj:e,k:zn(r[i])}},Gn=(e,t,s)=>{const{obj:r,k:i}=Vn(e,t,Object);if(void 0!==r||1===t.length)return void(r[i]=s);let n=t[t.length-1],o=t.slice(0,t.length-1),a=Vn(e,o,Object);for(;void 0===a.obj&&o.length;)n=`${o[o.length-1]}.${n}`,o=o.slice(0,o.length-1),a=Vn(e,o,Object),(null==a?void 0:a.obj)&&void 0!==a.obj[`${a.k}.${n}`]&&(a.obj=void 0);a.obj[`${a.k}.${n}`]=s},Kn=(e,t)=>{const{obj:s,k:r}=Vn(e,t);if(s&&Object.prototype.hasOwnProperty.call(s,r))return s[r]},Yn=(e,t,s)=>{for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?Mn(e[r])||e[r]instanceof String||Mn(t[r])||t[r]instanceof String?s&&(e[r]=t[r]):Yn(e[r],t[r],s):e[r]=t[r]);return e},Jn=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Qn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Xn=e=>Mn(e)?e.replace(/[&<>"'\/]/g,e=>Qn[e]):e;const Zn=[" ",",","?","!",";"],eo=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const s=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,s),this.regExpQueue.push(e),s}}(20),to=(e,t,s=".")=>{if(!e)return;if(e[t]){if(!Object.prototype.hasOwnProperty.call(e,t))return;return e[t]}const r=t.split(s);let i=e;for(let n=0;n<r.length;){if(!i||"object"!=typeof i)return;let e,t="";for(let o=n;o<r.length;++o)if(o!==n&&(t+=s),t+=r[o],e=i[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&o<r.length-1)continue;n+=o-n+1;break}i=e}return i},so=e=>null==e?void 0:e.replace("_","-"),ro={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){var s,r;null==(r=null==(s=null==console?void 0:console[e])?void 0:s.apply)||r.call(s,console,t)}};class io{constructor(e,t={}){this.init(e,t)}init(e,t={}){this.prefix=t.prefix||"i18next:",this.logger=e||ro,this.options=t,this.debug=t.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,s,r){return r&&!this.debug?null:(Mn(e[0])&&(e[0]=`${s}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new io(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new io(this.logger,e)}}var no=new io;class oo{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const s=this.observers[e].get(t)||0;this.observers[e].set(t,s+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e,...t){if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(([e,s])=>{for(let r=0;r<s;r++)e(...t)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(([s,r])=>{for(let i=0;i<r;i++)s.apply(s,[e,...t])})}}}class ao extends oo{constructor(e,t={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,s,r={}){var i,n;const o=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,a=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],s&&(Array.isArray(s)?l.push(...s):Mn(s)&&o?l.push(...s.split(o)):l.push(s)));const c=Kn(this.data,l);return!c&&!t&&!s&&e.indexOf(".")>-1&&(e=l[0],t=l[1],s=l.slice(2).join(".")),!c&&a&&Mn(s)?to(null==(n=null==(i=this.data)?void 0:i[e])?void 0:n[t],s,o):c}addResource(e,t,s,r,i={silent:!1}){const n=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let o=[e,t];s&&(o=o.concat(n?s.split(n):s)),e.indexOf(".")>-1&&(o=e.split("."),r=t,t=o[1]),this.addNamespaces(t),Gn(this.data,o,r),i.silent||this.emit("added",e,t,s,r)}addResources(e,t,s,r={silent:!1}){for(const i in s)(Mn(s[i])||Array.isArray(s[i]))&&this.addResource(e,t,i,s[i],{silent:!0});r.silent||this.emit("added",e,t,s)}addResourceBundle(e,t,s,r,i,n={silent:!1,skipCopy:!1}){let o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),r=s,s=t,t=o[1]),this.addNamespaces(t);let a=Kn(this.data,o)||{};n.skipCopy||(s=JSON.parse(JSON.stringify(s))),r?Yn(a,s,i):a={...a,...s},Gn(this.data,o,a),n.silent||this.emit("added",e,t,s)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var lo={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,s,r,i){return e.forEach(e=>{var n;t=(null==(n=this.processors[e])?void 0:n.process(t,s,r,i))??t}),t}};const co=Symbol("i18next/PATH_KEY");function uo(e,t){const{[co]:s}=e(function(){const e=[],t=Object.create(null);let s;return t.get=(r,i)=>{var n;return null==(n=null==s?void 0:s.revoke)||n.call(s),i===co?e:(e.push(i),s=Proxy.revocable(r,t),s.proxy)},Proxy.revocable(Object.create(null),t).proxy}());return s.join((null==t?void 0:t.keySeparator)??".")}const ho={},po=e=>!Mn(e)&&"boolean"!=typeof e&&"number"!=typeof e;class go extends oo{constructor(e,t={}){var s,r;super(),s=e,r=this,["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"].forEach(e=>{s[e]&&(r[e]=s[e])}),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=no.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,t={interpolation:{}}){const s={...t};if(null==e)return!1;const r=this.resolve(e,s);if(void 0===(null==r?void 0:r.res))return!1;const i=po(r.res);return!1!==s.returnObjects||!i}extractFromKey(e,t){let s=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===s&&(s=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const n=s&&e.indexOf(s)>-1,o=!(this.options.userDefinedKeySeparator||t.keySeparator||this.options.userDefinedNsSeparator||t.nsSeparator||((e,t,s)=>{t=t||"",s=s||"";const r=Zn.filter(e=>t.indexOf(e)<0&&s.indexOf(e)<0);if(0===r.length)return!0;const i=eo.getRegExp(`(${r.map(e=>"?"===e?"\\?":e).join("|")})`);let n=!i.test(e);if(!n){const t=e.indexOf(s);t>0&&!i.test(e.substring(0,t))&&(n=!0)}return n})(e,s,r));if(n&&!o){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:Mn(i)?[i]:i};const n=e.split(s);(s!==r||s===r&&this.options.ns.indexOf(n[0])>-1)&&(i=n.shift()),e=n.join(r)}return{key:e,namespaces:Mn(i)?[i]:i}}translate(e,t,s){let r="object"==typeof t?{...t}:t;if("object"!=typeof r&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof r&&(r={...r}),r||(r={}),null==e)return"";"function"==typeof e&&(e=uo(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const i=void 0!==r.returnDetails?r.returnDetails:this.options.returnDetails,n=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,{key:o,namespaces:a}=this.extractFromKey(e[e.length-1],r),l=a[a.length-1];let c=void 0!==r.nsSeparator?r.nsSeparator:this.options.nsSeparator;void 0===c&&(c=":");const u=r.lng||this.language,d=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if("cimode"===(null==u?void 0:u.toLowerCase()))return d?i?{res:`${l}${c}${o}`,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:`${l}${c}${o}`:i?{res:o,usedKey:o,exactUsedKey:o,usedLng:u,usedNS:l,usedParams:this.getUsedParamsDetails(r)}:o;const h=this.resolve(e,r);let p=null==h?void 0:h.res;const g=(null==h?void 0:h.usedKey)||o,f=(null==h?void 0:h.exactUsedKey)||o,m=void 0!==r.joinArrays?r.joinArrays:this.options.joinArrays,y=!this.i18nFormat||this.i18nFormat.handleAsObject,v=void 0!==r.count&&!Mn(r.count),b=go.hasDefaultValue(r),w=v?this.pluralResolver.getSuffix(u,r.count,r):"",x=r.ordinal&&v?this.pluralResolver.getSuffix(u,r.count,{ordinal:!1}):"",_=v&&!r.ordinal&&0===r.count,k=_&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${w}`]||r[`defaultValue${x}`]||r.defaultValue;let j=p;y&&!p&&b&&(j=k);const S=po(j),T=Object.prototype.toString.apply(j);if(!(y&&j&&S&&["[object Number]","[object Function]","[object RegExp]"].indexOf(T)<0)||Mn(m)&&Array.isArray(j))if(y&&Mn(m)&&Array.isArray(p))p=p.join(m),p&&(p=this.extendTranslation(p,e,r,s));else{let t=!1,i=!1;!this.isValidLookup(p)&&b&&(t=!0,p=k),this.isValidLookup(p)||(i=!0,p=o);const a=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&i?void 0:p,d=b&&k!==p&&this.options.updateMissing;if(i||t||d){if(this.logger.log(d?"updateKey":"missingKey",u,l,o,d?k:p),n){const e=this.resolve(o,{...r,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const t=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if("fallback"===this.options.saveMissingTo&&t&&t[0])for(let r=0;r<t.length;r++)e.push(t[r]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(r.lng||this.language):e.push(r.lng||this.language);const s=(e,t,s)=>{var i;const n=b&&s!==p?s:a;this.options.missingKeyHandler?this.options.missingKeyHandler(e,l,t,n,d,r):(null==(i=this.backendConnector)?void 0:i.saveMissing)&&this.backendConnector.saveMissing(e,l,t,n,d,r),this.emit("missingKey",e,l,t,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&v?e.forEach(e=>{const t=this.pluralResolver.getSuffixes(e,r);_&&r[`defaultValue${this.options.pluralSeparator}zero`]&&t.indexOf(`${this.options.pluralSeparator}zero`)<0&&t.push(`${this.options.pluralSeparator}zero`),t.forEach(t=>{s([e],o+t,r[`defaultValue${t}`]||k)})}):s(e,o,k))}p=this.extendTranslation(p,e,r,h,s),i&&p===o&&this.options.appendNamespaceToMissingKey&&(p=`${l}${c}${o}`),(i||t)&&this.options.parseMissingKeyHandler&&(p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${c}${o}`:o,t?p:void 0,r))}else{if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,j,{...r,ns:a}):`key '${o} (${this.language})' returned an object instead of string.`;return i?(h.res=e,h.usedParams=this.getUsedParamsDetails(r),h):e}if(n){const e=Array.isArray(j),t=e?[]:{},s=e?f:g;for(const i in j)if(Object.prototype.hasOwnProperty.call(j,i)){const e=`${s}${n}${i}`;t[i]=b&&!p?this.translate(e,{...r,defaultValue:po(k)?k[i]:void 0,joinArrays:!1,ns:a}):this.translate(e,{...r,joinArrays:!1,ns:a}),t[i]===e&&(t[i]=j[i])}p=t}}return i?(h.res=p,h.usedParams=this.getUsedParamsDetails(r),h):p}extendTranslation(e,t,s,r,i){var n,o;if(null==(n=this.i18nFormat)?void 0:n.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...s},s.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!s.skipInterpolation){s.interpolation&&this.interpolator.init({...s,interpolation:{...this.options.interpolation,...s.interpolation}});const n=Mn(e)&&(void 0!==(null==(o=null==s?void 0:s.interpolation)?void 0:o.skipOnVariables)?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(n){const t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let l=s.replace&&!Mn(s.replace)?s.replace:s;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,s.lng||this.language||r.usedLng,s),n){const t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(s.nest=!1)}!s.lng&&r&&r.res&&(s.lng=this.language||r.usedLng),!1!==s.nest&&(e=this.interpolator.nest(e,(...e)=>(null==i?void 0:i[0])!==e[0]||s.context?this.translate(...e,t):(this.logger.warn(`It seems you are nesting recursively key: ${e[0]} in key: ${t[0]}`),null),s)),s.interpolation&&this.interpolator.reset()}const a=s.postProcess||this.options.postProcess,l=Mn(a)?[a]:a;return null!=e&&(null==l?void 0:l.length)&&!1!==s.applyPostProcessor&&(e=lo.handle(l,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(s)},...s}:s,this)),e}resolve(e,t={}){let s,r,i,n,o;return Mn(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(s))return;const a=this.extractFromKey(e,t),l=a.key;r=l;let c=a.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const u=void 0!==t.count&&!Mn(t.count),d=u&&!t.ordinal&&0===t.count,h=void 0!==t.context&&(Mn(t.context)||"number"==typeof t.context)&&""!==t.context,p=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);c.forEach(e=>{var a,c;this.isValidLookup(s)||(o=e,ho[`${p[0]}-${e}`]||!(null==(a=this.utils)?void 0:a.hasLoadedNamespace)||(null==(c=this.utils)?void 0:c.hasLoadedNamespace(o))||(ho[`${p[0]}-${e}`]=!0,this.logger.warn(`key "${r}" for languages "${p.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(r=>{var o;if(this.isValidLookup(s))return;n=r;const a=[l];if(null==(o=this.i18nFormat)?void 0:o.addLookupKeys)this.i18nFormat.addLookupKeys(a,l,r,e,t);else{let e;u&&(e=this.pluralResolver.getSuffix(r,t.count,t));const s=`${this.options.pluralSeparator}zero`,i=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(u&&(t.ordinal&&0===e.indexOf(i)&&a.push(l+e.replace(i,this.options.pluralSeparator)),a.push(l+e),d&&a.push(l+s)),h){const r=`${l}${this.options.contextSeparator||"_"}${t.context}`;a.push(r),u&&(t.ordinal&&0===e.indexOf(i)&&a.push(r+e.replace(i,this.options.pluralSeparator)),a.push(r+e),d&&a.push(r+s))}}let c;for(;c=a.pop();)this.isValidLookup(s)||(i=c,s=this.getResource(r,e,c,t))}))})}),{res:s,usedKey:r,exactUsedKey:i,usedLng:n,usedNS:o}}isValidLookup(e){return!(void 0===e||!this.options.returnNull&&null===e||!this.options.returnEmptyString&&""===e)}getResource(e,t,s,r={}){var i;return(null==(i=this.i18nFormat)?void 0:i.getResource)?this.i18nFormat.getResource(e,t,s,r):this.resourceStore.getResource(e,t,s,r)}getUsedParamsDetails(e={}){const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],s=e.replace&&!Mn(e.replace);let r=s?e.replace:e;if(s&&void 0!==e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!s){r={...r};for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t===s.substring(0,12)&&void 0!==e[s])return!0;return!1}}class fo{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=no.create("languageUtils")}getScriptPartFromCode(e){if(!(e=so(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=so(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Mn(e)&&e.indexOf("-")>-1){let s;try{s=Intl.getCanonicalLocales(e)[0]}catch(t){}return s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const s=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(s)||(t=s)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const s=this.getScriptPartFromCode(e);if(this.isSupportedCode(s))return t=s;const r=this.getLanguagePartFromCode(e);if(this.isSupportedCode(r))return t=r;t=this.options.supportedLngs.find(e=>e===r?e:e.indexOf("-")<0&&r.indexOf("-")<0?void 0:e.indexOf("-")>0&&r.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===r||0===e.indexOf(r)&&r.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"==typeof e&&(e=e(t)),Mn(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let s=e[t];return s||(s=e[this.getScriptPartFromCode(t)]),s||(s=e[this.formatLanguageCode(t)]),s||(s=e[this.getLanguagePartFromCode(t)]),s||(s=e.default),s||[]}toResolveHierarchy(e,t){const s=this.getFallbackCodes((!1===t?[]:t)||this.options.fallbackLng||[],e),r=[],i=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return Mn(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):Mn(e)&&i(this.formatLanguageCode(e)),s.forEach(e=>{r.indexOf(e)<0&&i(this.formatLanguageCode(e))}),r}}const mo={zero:0,one:1,two:2,few:3,many:4,other:5},yo={select:e=>1===e?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class vo{constructor(e,t={}){this.languageUtils=e,this.options=t,this.logger=no.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e,t={}){const s=so("dev"===e?"en":e),r=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:s,type:r});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let n;try{n=new Intl.PluralRules(s,{type:r})}catch(o){if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),yo;if(!e.match(/-|_/))return yo;const s=this.languageUtils.getLanguagePartFromCode(e);n=this.getRule(s,t)}return this.pluralRulesCache[i]=n,n}needsPlural(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),(null==s?void 0:s.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,t,s={}){return this.getSuffixes(e,s).map(e=>`${t}${e}`)}getSuffixes(e,t={}){let s=this.getRule(e,t);return s||(s=this.getRule("dev",t)),s?s.resolvedOptions().pluralCategories.sort((e,t)=>mo[e]-mo[t]).map(e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`):[]}getSuffix(e,t,s={}){const r=this.getRule(e,s);return r?`${this.options.prepend}${s.ordinal?`ordinal${this.options.prepend}`:""}${r.select(t)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",t,s))}}const bo=(e,t,s,r=".",i=!0)=>{let n=((e,t,s)=>{const r=Kn(e,s);return void 0!==r?r:Kn(t,s)})(e,t,s);return!n&&i&&Mn(s)&&(n=to(e,s,r),void 0===n&&(n=to(t,s,r))),n},wo=e=>e.replace(/\$/g,"$$$$");class xo{constructor(e={}){var t;this.logger=no.create("interpolator"),this.options=e,this.format=(null==(t=null==e?void 0:e.interpolation)?void 0:t.format)||(e=>e),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:s,useRawValueToEscape:r,prefix:i,prefixEscaped:n,suffix:o,suffixEscaped:a,formatSeparator:l,unescapeSuffix:c,unescapePrefix:u,nestingPrefix:d,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:g,nestingOptionsSeparator:f,maxReplaces:m,alwaysFormat:y}=e.interpolation;this.escape=void 0!==t?t:Xn,this.escapeValue=void 0===s||s,this.useRawValueToEscape=void 0!==r&&r,this.prefix=i?Jn(i):n||"{{",this.suffix=o?Jn(o):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":u||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=d?Jn(d):h||Jn("$t("),this.nestingSuffix=p?Jn(p):g||Jn(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=m||1e3,this.alwaysFormat=void 0!==y&&y,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>(null==e?void 0:e.source)===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,t,s,r){var i;let n,o,a;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=e=>{if(e.indexOf(this.formatSeparator)<0){const i=bo(t,l,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,s,{...r,...t,interpolationkey:e}):i}const i=e.split(this.formatSeparator),n=i.shift().trim(),o=i.join(this.formatSeparator).trim();return this.format(bo(t,l,n,this.options.keySeparator,this.options.ignoreJSONStructure),o,s,{...r,...t,interpolationkey:n})};this.resetRegExp();const u=(null==r?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,d=void 0!==(null==(i=null==r?void 0:r.interpolation)?void 0:i.skipOnVariables)?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>wo(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?wo(this.escape(e)):wo(e)}].forEach(t=>{for(a=0;n=t.regex.exec(e);){const s=n[1].trim();if(o=c(s),void 0===o)if("function"==typeof u){const t=u(e,n,r);o=Mn(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,s))o="";else{if(d){o=n[0];continue}this.logger.warn(`missed to pass in variable ${s} for interpolating ${e}`),o=""}else Mn(o)||this.useRawValueToEscape||(o=qn(o));const i=t.safeValue(o);if(e=e.replace(n[0],i),d?(t.regex.lastIndex+=o.length,t.regex.lastIndex-=n[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t,s={}){let r,i,n;const o=(e,t)=>{const s=this.nestingOptionsSeparator;if(e.indexOf(s)<0)return e;const r=e.split(new RegExp(`${s}[ ]*{`));let i=`{${r[1]}`;e=r[0],i=this.interpolate(i,n);const o=i.match(/'/g),a=i.match(/"/g);(((null==o?void 0:o.length)??0)%2==0&&!a||a.length%2!=0)&&(i=i.replace(/'/g,'"'));try{n=JSON.parse(i),t&&(n={...t,...n})}catch(l){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,l),`${e}${s}${i}`}return n.defaultValue&&n.defaultValue.indexOf(this.prefix)>-1&&delete n.defaultValue,e};for(;r=this.nestingRegexp.exec(e);){let a=[];n={...s},n=n.replace&&!Mn(n.replace)?n.replace:n,n.applyPostProcessor=!1,delete n.defaultValue;const l=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(-1!==l&&(a=r[1].slice(l).split(this.formatSeparator).map(e=>e.trim()).filter(Boolean),r[1]=r[1].slice(0,l)),i=t(o.call(this,r[1].trim(),n),n),i&&r[0]===e&&!Mn(i))return i;Mn(i)||(i=qn(i)),i||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),i=""),a.length&&(i=a.reduce((e,t)=>this.format(e,t,s.lng,{...s,interpolationkey:r[1].trim()}),i.trim())),e=e.replace(r[0],i),this.regexp.lastIndex=0}return e}}const _o=e=>{const t={};return(s,r,i)=>{let n=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(n={...n,[i.interpolationkey]:void 0});const o=r+JSON.stringify(n);let a=t[o];return a||(a=e(so(r),i),t[o]=a),a(s)}},ko=e=>(t,s,r)=>e(so(s),r)(t);class jo{constructor(e={}){this.logger=no.create("formatter"),this.options=e,this.init(e)}init(e,t={interpolation:{}}){this.formatSeparator=t.interpolation.formatSeparator||",";const s=t.cacheInBuiltFormats?_o:ko;this.formats={number:s((e,t)=>{const s=new Intl.NumberFormat(e,{...t});return e=>s.format(e)}),currency:s((e,t)=>{const s=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>s.format(e)}),datetime:s((e,t)=>{const s=new Intl.DateTimeFormat(e,{...t});return e=>s.format(e)}),relativetime:s((e,t)=>{const s=new Intl.RelativeTimeFormat(e,{...t});return e=>s.format(e,t.range||"day")}),list:s((e,t)=>{const s=new Intl.ListFormat(e,{...t});return e=>s.format(e)})}}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=_o(t)}format(e,t,s,r={}){const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(e=>e.indexOf(")")>-1)){const e=i.findIndex(e=>e.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}return i.reduce((e,t)=>{var i;const{formatName:n,formatOptions:o}=(e=>{let t=e.toLowerCase().trim();const s={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?s.currency||(s.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?s.range||(s.range=i.trim()):i.split(";").forEach(e=>{if(e){const[t,...r]=e.split(":"),i=r.join(":").trim().replace(/^'+|'+$/g,""),n=t.trim();s[n]||(s[n]=i),"false"===i&&(s[n]=!1),"true"===i&&(s[n]=!0),isNaN(i)||(s[n]=parseInt(i,10))}})}return{formatName:t,formatOptions:s}})(t);if(this.formats[n]){let t=e;try{const a=(null==(i=null==r?void 0:r.formatParams)?void 0:i[r.interpolationkey])||{},l=a.locale||a.lng||r.locale||r.lng||s;t=this.formats[n](e,l,{...o,...r,...a})}catch(a){this.logger.warn(a)}return t}return this.logger.warn(`there was no format function for ${n}`),e},e)}}class So extends oo{constructor(e,t,s,r={}){var i,n;super(),this.backend=e,this.store=t,this.services=s,this.languageUtils=s.languageUtils,this.options=r,this.logger=no.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],null==(n=null==(i=this.backend)?void 0:i.init)||n.call(i,s,r.backend,r)}queueLoad(e,t,s,r){const i={},n={},o={},a={};return e.forEach(e=>{let r=!0;t.forEach(t=>{const o=`${e}|${t}`;!s.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===n[o]&&(n[o]=!0):(this.state[o]=1,r=!1,void 0===n[o]&&(n[o]=!0),void 0===i[o]&&(i[o]=!0),void 0===a[t]&&(a[t]=!0)))}),r||(o[e]=!0)}),(Object.keys(i).length||Object.keys(n).length)&&this.queue.push({pending:n,pendingCount:Object.keys(n).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(n),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(a)}}loaded(e,t,s){const r=e.split("|"),i=r[0],n=r[1];t&&this.emit("failedLoading",i,n,t),!t&&s&&this.store.addResourceBundle(i,n,s,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&s&&(this.state[e]=0);const o={};this.queue.forEach(s=>{((e,t,s)=>{const{obj:r,k:i}=Vn(e,t,Object);r[i]=r[i]||[],r[i].push(s)})(s.loaded,[i],n),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(s,e),t&&s.errors.push(t),0!==s.pendingCount||s.done||(Object.keys(s.loaded).forEach(e=>{o[e]||(o[e]={});const t=s.loaded[e];t.length&&t.forEach(t=>{void 0===o[e][t]&&(o[e][t]=!0)})}),s.done=!0,s.errors.length?s.callback(s.errors):s.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(e=>!e.done)}read(e,t,s,r=0,i=this.retryTimeout,n){if(!e.length)return n(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:s,tried:r,wait:i,callback:n});this.readingCalls++;const o=(o,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&a&&r<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,s,r+1,2*i,n)},i):n(o,a)},a=this.backend[s].bind(this.backend);if(2!==a.length)return a(e,t,o);try{const s=a(e,t);s&&"function"==typeof s.then?s.then(e=>o(null,e)).catch(o):o(null,s)}catch(l){o(l)}}prepareLoading(e,t,s={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Mn(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Mn(t)&&(t=[t]);const i=this.queueLoad(e,t,s,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,s){this.prepareLoading(e,t,{},s)}reload(e,t,s){this.prepareLoading(e,t,{reload:!0},s)}loadOne(e,t=""){const s=e.split("|"),r=s[0],i=s[1];this.read(r,i,"read",void 0,void 0,(s,n)=>{s&&this.logger.warn(`${t}loading namespace ${i} for language ${r} failed`,s),!s&&n&&this.logger.log(`${t}loaded namespace ${i} for language ${r}`,n),this.loaded(e,s,n)})}saveMissing(e,t,s,r,i,n={},o=()=>{}){var a,l,c,u,d;if(!(null==(l=null==(a=this.services)?void 0:a.utils)?void 0:l.hasLoadedNamespace)||(null==(u=null==(c=this.services)?void 0:c.utils)?void 0:u.hasLoadedNamespace(t))){if(null!=s&&""!==s){if(null==(d=this.backend)?void 0:d.create){const a={...n,isUpdate:i},l=this.backend.create.bind(this.backend);if(l.length<6)try{let i;i=5===l.length?l(e,t,s,r,a):l(e,t,s,r),i&&"function"==typeof i.then?i.then(e=>o(null,e)).catch(o):o(null,i)}catch(h){o(h)}else l(e,t,s,r,o,a)}e&&e[0]&&this.store.addResource(e[0],t,s,r)}}else this.logger.warn(`did not save key "${s}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")}}const To=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"==typeof e[1]&&(t=e[1]),Mn(e[1])&&(t.defaultValue=e[1]),Mn(e[2])&&(t.tDescription=e[2]),"object"==typeof e[2]||"object"==typeof e[3]){const s=e[3]||e[2];Object.keys(s).forEach(e=>{t[e]=s[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),Po=e=>{var t,s;return Mn(e.ns)&&(e.ns=[e.ns]),Mn(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Mn(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),(null==(s=null==(t=e.supportedLngs)?void 0:t.indexOf)?void 0:s.call(t,"cimode"))<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),"boolean"==typeof e.initImmediate&&(e.initAsync=e.initImmediate),e},Eo=()=>{};class Co extends oo{constructor(e={},t){var s;if(super(),this.options=Po(e),this.services={},this.logger=no,this.modules={external:[]},s=this,Object.getOwnPropertyNames(Object.getPrototypeOf(s)).forEach(e=>{"function"==typeof s[e]&&(s[e]=s[e].bind(s))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(e={},t){this.isInitializing=!0,"function"==typeof e&&(t=e,e={}),null==e.defaultNS&&e.ns&&(Mn(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const s=To();this.options={...s,...this.options,...Po(e)},this.options.interpolation={...s.interpolation,...this.options.interpolation},void 0!==e.keySeparator&&(this.options.userDefinedKeySeparator=e.keySeparator),void 0!==e.nsSeparator&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=e=>e?"function"==typeof e?new e:e:null;if(!this.options.isClone){let e;this.modules.logger?no.init(r(this.modules.logger),this.options):no.init(null,this.options),e=this.modules.formatter?this.modules.formatter:jo;const t=new fo(this.options);this.store=new ao(this.options.resources,this.options);const i=this.services;i.logger=no,i.resourceStore=this.store,i.languageUtils=t,i.pluralResolver=new vo(t,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix});this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),!e||this.options.interpolation.format&&this.options.interpolation.format!==s.interpolation.format||(i.formatter=r(e),i.formatter.init&&i.formatter.init(i,this.options),this.options.interpolation.format=i.formatter.format.bind(i.formatter)),i.interpolator=new xo(this.options),i.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},i.backendConnector=new So(r(this.modules.backend),i.resourceStore,i,this.options),i.backendConnector.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.languageDetector&&(i.languageDetector=r(this.modules.languageDetector),i.languageDetector.init&&i.languageDetector.init(i,this.options.detection,this.options)),this.modules.i18nFormat&&(i.i18nFormat=r(this.modules.i18nFormat),i.i18nFormat.init&&i.i18nFormat.init(this)),this.translator=new go(this.services,this.options),this.translator.on("*",(e,...t)=>{this.emit(e,...t)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,t||(t=Eo),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(e=>{this[e]=(...t)=>this.store[e](...t)});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(e=>{this[e]=(...t)=>(this.store[e](...t),this)});const i=Bn(),n=()=>{const e=(e,s)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),i.resolve(s),t(e,s)};if(this.languages&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initAsync?n():setTimeout(n,0),i}loadResources(e,t=Eo){var s,r;let i=t;const n=Mn(e)?e:this.language;if("function"==typeof e&&(i=e),!this.options.resources||this.options.partialBundledLanguages){if("cimode"===(null==n?void 0:n.toLowerCase())&&(!this.options.preload||0===this.options.preload.length))return i();const e=[],t=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(n)t(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>t(e))}null==(r=null==(s=this.options.preload)?void 0:s.forEach)||r.call(s,e=>t(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),i(e)})}else i(null)}reloadResources(e,t,s){const r=Bn();return"function"==typeof e&&(s=e,e=void 0),"function"==typeof t&&(s=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),s||(s=Eo),this.services.backendConnector.reload(e,t,e=>{r.resolve(),s(e)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&lo.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1)){for(let e=0;e<this.languages.length;e++){const t=this.languages[e];if(!(["cimode","dev"].indexOf(t)>-1)&&this.store.hasLanguageSomeTranslations(t)){this.resolvedLanguage=t;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,t){this.isLanguageChangingTo=e;const s=Bn();this.emit("languageChanging",e);const r=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},i=(i,n)=>{n?this.isLanguageChangingTo===e&&(r(n),this.translator.changeLanguage(n),this.isLanguageChangingTo=void 0,this.emit("languageChanged",n),this.logger.log("languageChanged",n)):this.isLanguageChangingTo=void 0,s.resolve((...e)=>this.t(...e)),t&&t(i,(...e)=>this.t(...e))},n=t=>{var s,n;e||t||!this.services.languageDetector||(t=[]);const o=Mn(t)?t:t&&t[0],a=this.store.hasLanguageSomeTranslations(o)?o:this.services.languageUtils.getBestMatchFromCodes(Mn(t)?[t]:t);a&&(this.language||r(a),this.translator.language||this.translator.changeLanguage(a),null==(n=null==(s=this.services.languageDetector)?void 0:s.cacheUserLanguage)||n.call(s,a)),this.loadResources(a,e=>{i(e,a)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(n):this.services.languageDetector.detect(n):n(e):n(this.services.languageDetector.detect()),s}getFixedT(e,t,s){const r=(e,t,...i)=>{let n;n="object"!=typeof t?this.options.overloadTranslationOptionHandler([e,t].concat(i)):{...t},n.lng=n.lng||r.lng,n.lngs=n.lngs||r.lngs,n.ns=n.ns||r.ns,""!==n.keyPrefix&&(n.keyPrefix=n.keyPrefix||s||r.keyPrefix);const o=this.options.keySeparator||".";let a;return n.keyPrefix&&Array.isArray(e)?a=e.map(e=>("function"==typeof e&&(e=uo(e,{...this.options,...t})),`${n.keyPrefix}${o}${e}`)):("function"==typeof e&&(e=uo(e,{...this.options,...t})),a=n.keyPrefix?`${n.keyPrefix}${o}${e}`:e),this.t(a,n)};return Mn(e)?r.lng=e:r.lngs=e,r.ns=t,r.keyPrefix=s,r}t(...e){var t;return null==(t=this.translator)?void 0:t.translate(...e)}exists(...e){var t;return null==(t=this.translator)?void 0:t.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,t={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const s=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===s.toLowerCase())return!0;const n=(e,t)=>{const s=this.services.backendConnector.state[`${e}|${t}`];return-1===s||0===s||2===s};if(t.precheck){const e=t.precheck(this,n);if(void 0!==e)return e}return!!this.hasResourceBundle(s,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!n(s,e)||r&&!n(i,e)))}loadNamespaces(e,t){const s=Bn();return this.options.ns?(Mn(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{s.resolve(),t&&t(e)}),s):(t&&t(),Promise.resolve())}loadLanguages(e,t){const s=Bn();Mn(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter(e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return i.length?(this.options.preload=r.concat(i),this.loadResources(e=>{s.resolve(),t&&t(e)}),s):(t&&t(),Promise.resolve())}dir(e){var t,s;if(e||(e=this.resolvedLanguage||((null==(t=this.languages)?void 0:t.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const t=new Intl.Locale(e);if(t&&t.getTextInfo){const e=t.getTextInfo();if(e&&e.direction)return e.direction}}catch(i){}const r=(null==(s=this.services)?void 0:s.languageUtils)||new fo(To());return e.toLowerCase().indexOf("-latn")>1?"ltr":["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},t){const s=new Co(e,t);return s.createInstance=Co.createInstance,s}cloneInstance(e={},t=Eo){const s=e.forkResourceStore;s&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},i=new Co(r);void 0===e.debug&&void 0===e.prefix||(i.logger=i.logger.clone(e));if(["store","services","language"].forEach(e=>{i[e]=this[e]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},s){const e=Object.keys(this.store.data).reduce((e,t)=>(e[t]={...this.store.data[t]},e[t]=Object.keys(e[t]).reduce((s,r)=>(s[r]={...e[t][r]},s),e[t]),e),{});i.store=new ao(e,r),i.services.resourceStore=i.store}return i.translator=new go(i.services,r),i.translator.on("*",(e,...t)=>{i.emit(e,...t)}),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ao=Co.createInstance();Ao.createInstance,Ao.dir,Ao.init,Ao.loadResources,Ao.reloadResources,Ao.use,Ao.changeLanguage,Ao.getFixedT,Ao.t,Ao.exists,Ao.setDefaultNamespace,Ao.hasLoadedNamespace,Ao.loadNamespaces,Ao.loadLanguages;const Oo={},No=(e,t,s,r)=>{Lo(s)&&Oo[s]||(Lo(s)&&(Oo[s]=new Date),((e,t,s,r)=>{var i,n,o,a;const l=[s,{code:t,...r||{}}];if(null==(n=null==(i=null==e?void 0:e.services)?void 0:i.logger)?void 0:n.forward)return e.services.logger.forward(l,"warn","react-i18next::",!0);Lo(l[0])&&(l[0]=`react-i18next:: ${l[0]}`),(null==(a=null==(o=null==e?void 0:e.services)?void 0:o.logger)?void 0:a.warn)?e.services.logger.warn(...l):null==console||console.warn})(e,t,s,r))},Ro=(e,t)=>()=>{if(e.isInitialized)t();else{const s=()=>{setTimeout(()=>{e.off("initialized",s)},0),t()};e.on("initialized",s)}},Io=(e,t,s)=>{e.loadNamespaces(t,Ro(e,s))},Do=(e,t,s,r)=>{if(Lo(s)&&(s=[s]),e.options.preload&&e.options.preload.indexOf(t)>-1)return Io(e,s,r);s.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,Ro(e,r))},Lo=e=>"string"==typeof e,$o=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Fo={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Uo=e=>Fo[e];let Mo={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace($o,Uo)};let Bo;const qo={type:"3rdParty",init(e){((e={})=>{Mo={...Mo,...e}})(e.options.react),(e=>{Bo=e})(e)}},Ho=m.createContext();class zo{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Wo={t:(e,t)=>{return Lo(t)?t:"object"==typeof(s=t)&&null!==s&&Lo(t.defaultValue)?t.defaultValue:Array.isArray(e)?e[e.length-1]:e;var s},ready:!1},Vo=()=>()=>{},Go=(e,t={})=>{var s,r,i;const{i18n:n}=t,{i18n:o,defaultNS:a}=m.useContext(Ho)||{},c=n||o||Bo;c&&!c.reportNamespaces&&(c.reportNamespaces=new zo),c||No(c,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const u=m.useMemo(()=>{var e;return{...Mo,...null==(e=null==c?void 0:c.options)?void 0:e.react,...t}},[c,t]),{useSuspense:d,keyPrefix:h}=u,p=e||a||(null==(s=null==c?void 0:c.options)?void 0:s.defaultNS),g=Lo(p)?[p]:p||["translation"],f=m.useMemo(()=>g,g);null==(i=null==(r=null==c?void 0:c.reportNamespaces)?void 0:r.addUsedNamespaces)||i.call(r,f);const y=m.useRef(0),v=m.useCallback(e=>{if(!c)return Vo;const{bindI18n:t,bindI18nStore:s}=u,r=()=>{y.current+=1,e()};return t&&c.on(t,r),s&&c.store.on(s,r),()=>{t&&t.split(" ").forEach(e=>c.off(e,r)),s&&s.split(" ").forEach(e=>c.store.off(e,r))}},[c,u]),b=m.useRef(),w=m.useCallback(()=>{if(!c)return Wo;const e=!(!c.isInitialized&&!c.initializedStoreOnce)&&f.every(e=>((e,t,s={})=>t.languages&&t.languages.length?t.hasLoadedNamespace(e,{lng:s.lng,precheck:(t,r)=>{if(s.bindI18n&&s.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):(No(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0))(e,c,u)),s=t.lng||c.language,r=y.current,i=b.current;if(i&&i.ready===e&&i.lng===s&&i.keyPrefix===h&&i.revision===r)return i;const n={t:c.getFixedT(s,"fallback"===u.nsMode?f:f[0],h),ready:e,lng:s,keyPrefix:h,revision:r};return b.current=n,n},[c,f,h,u,t.lng]),[x,_]=m.useState(0),{t:k,ready:j}=l.useSyncExternalStore(v,w,w);m.useEffect(()=>{if(c&&!j&&!d){const e=()=>_(e=>e+1);t.lng?Do(c,t.lng,f,e):Io(c,f,e)}},[c,t.lng,f,j,d,x]);const S=c||{},T=m.useRef(null),P=m.useRef(),E=e=>{const t=Object.getOwnPropertyDescriptors(e);t.__original&&delete t.__original;const s=Object.create(Object.getPrototypeOf(e),t);if(!Object.prototype.hasOwnProperty.call(s,"__original"))try{Object.defineProperty(s,"__original",{value:e,writable:!1,enumerable:!1,configurable:!1})}catch(r){}return s},C=m.useMemo(()=>{const e=S,t=null==e?void 0:e.language;let s=e;e&&(T.current&&T.current.__original===e?P.current!==t?(s=E(e),T.current=s,P.current=t):s=T.current:(s=E(e),T.current=s,P.current=t));const r=[k,s,j];return r.t=k,r.i18n=s,r.ready=j,r},[k,S,j,S.resolvedLanguage,S.language,S.languages]);if(c&&d&&!j)throw new Promise(e=>{const s=()=>e();t.lng?Do(c,t.lng,f,s):Io(c,f,s)});return C},Ko=Qt("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-semibold ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 hover:shadow-lg hover:shadow-primary/20",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:shadow-lg hover:shadow-destructive/20",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground hover:border-primary/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:shadow-md",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline focus-visible:ring-offset-0"},size:{default:"h-9 px-3 text-sm",sm:"h-9 px-3 text-sm",lg:"h-11 px-4 text-base",icon:"h-9 w-9 p-0"}},defaultVariants:{variant:"default",size:"sm"}}),Yo=m.forwardRef(({className:t,variant:s,size:r,asChild:i=!1,...n},o)=>{const a=i?c:"button";return e.jsx(a,{className:Kt(Ko({variant:s,size:r,className:t})),ref:o,type:"button"!==a||n.type?n.type:"button",...n})});Yo.displayName="Button";const Jo=t=>e.jsxs("svg",{viewBox:"0 0 48 48",...t,children:[e.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),e.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),e.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.222,0-9.651-3.356-11.303-8H6.306C9.656,39.663,16.318,44,24,44z"}),e.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571l6.19,5.238C44.572,34.046,48,27.461,48,20C48,17.222,47.113,14.69,45.54,12.591L39.9,18.335C42.128,20.45,43.611,20.083,43.611,20.083z"})]}),Qo=({logoUrl:t,initialIsLogin:s=!0})=>{const{t:r}=Go(),{signIn:i,signUp:n,signInWithGoogle:o,user:a,userProfile:l}=Fn(),c=w(),u=x(),[d,h]=m.useState(s),[p,g]=m.useState(""),[f,y]=m.useState(""),[v,b]=m.useState(""),[k,j]=m.useState(!1),[S,T]=m.useState(!1),[P,E]=m.useState(null);m.useEffect(()=>{var e;(null==(e=u.state)?void 0:e.selectedPlan)&&E(u.state.selectedPlan)},[u.state]),m.useEffect(()=>{h("/login"===u.pathname)},[u.pathname]);return e.jsx("div",{className:"h-screen flex items-center justify-center p-2 bg-background touch-auto overflow-hidden",children:e.jsx(N.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"w-full max-w-md h-full max-h-[98vh] flex items-center",children:e.jsxs("div",{className:"glass-effect rounded-lg p-3 shadow-2xl w-full",children:[e.jsxs("button",{onClick:()=>c(-1),className:"flex items-center gap-1 text-text-secondary hover:text-primary transition-colors mb-2 group",children:[e.jsx(R,{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform"}),e.jsx("span",{className:"text-xs font-medium",children:r("auth.back")})]}),e.jsxs("div",{className:"text-center mb-3",children:[e.jsx(_,{to:"/home",className:"inline-block mb-2",children:e.jsx("img",{src:t,alt:"GreenoFig Logo",className:"w-12 h-12"})}),e.jsx("h1",{className:"text-2xl font-bold gradient-text mb-1",children:"GreenoFig"}),e.jsx("p",{className:"text-text-secondary text-xs",children:r("auth.tagline")}),P&&!d&&e.jsxs("div",{className:"mt-4 bg-primary/10 text-primary font-semibold p-2 rounded-lg",children:[r("auth.signUpForPlan")," ",e.jsx("span",{className:"font-bold",children:P})," ",r("auth.plan")]})]}),e.jsxs(Yo,{variant:"outline",className:"w-full py-2 min-h-[36px] rounded-lg shadow-lg flex items-center justify-center gap-2 touch-manipulation active:scale-95 transition-transform text-xs",onClick:async()=>{k||S||(T(!0),await o(),setTimeout(()=>T(!1),5e3))},disabled:S||k,type:"button",children:[S?e.jsx(I,{className:"h-4 w-4 animate-spin"}):e.jsx(Jo,{className:"w-4 h-4"}),e.jsx("span",{children:r(d?"auth.signInWithGoogle":"auth.signUpWithGoogle")})]}),e.jsxs("div",{className:"my-2 flex items-center",children:[e.jsx("div",{className:"flex-grow border-t border-border"}),e.jsx("span",{className:"flex-shrink mx-2 text-[10px] text-text-secondary uppercase",children:r("auth.orContinueWith")}),e.jsx("div",{className:"flex-grow border-t border-border"})]}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!k&&!S)if(p&&f&&(d||v))if(j(!0),d){const{error:e,profile:t}=await i({email:p,password:f});if(!e&&t){const e=t.role;let s="/app/user";return"admin"===e||"super_admin"===e?s="/app/admin":"nutritionist"===e&&(s="/app/nutritionist"),void c(s,{replace:!0,state:{skipLoading:!0}})}j(!1)}else{const{user:e,error:t,profile:s}=await n({email:p,password:f,full_name:v});if(!t&&e&&s){as({title:r("auth.accountCreated"),description:r("auth.welcomeSetup")});const e=s.role;let t="/app/user";return"admin"===e||"super_admin"===e?t="/app/admin":"nutritionist"===e&&(t="/app/nutritionist"),void c(t,{replace:!0,state:{skipLoading:!0}})}j(!1)}else as({title:r("auth.missingFields"),description:r("auth.fillAllFields"),variant:"destructive"})},className:"space-y-2",children:[!d&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:r("auth.fullName")}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-primary"}),e.jsx("input",{type:"text",value:v,onChange:e=>b(e.target.value),className:"w-full pl-8 pr-3 py-2 min-h-[36px] bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring touch-manipulation text-xs",placeholder:"John Doe",disabled:k||S,required:!0,autoComplete:"name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:r("auth.email")}),e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-primary"}),e.jsx("input",{type:"email",value:p,onChange:e=>g(e.target.value),className:"w-full pl-8 pr-3 py-2 min-h-[36px] bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring touch-manipulation text-xs",placeholder:"you@example.com",disabled:k||S,required:!0,autoComplete:"email",inputMode:"email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1",children:r("auth.password")}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-primary"}),e.jsx("input",{type:"password",value:f,onChange:e=>y(e.target.value),className:"w-full pl-8 pr-3 py-2 min-h-[36px] bg-background border border-border rounded-lg text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring touch-manipulation text-xs",placeholder:"",disabled:k||S,required:!0,autoComplete:d?"current-password":"new-password"})]})]}),e.jsxs(Yo,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground font-semibold py-2 min-h-[36px] rounded-lg shadow-lg touch-manipulation active:scale-95 transition-transform text-xs",disabled:k||S,children:[k&&e.jsx(I,{className:"mr-2 h-3 w-3 animate-spin"}),r(k?"auth.processing":d?"auth.login":"auth.signup")]})]}),e.jsx("div",{className:"mt-3 text-center",children:e.jsx("button",{onClick:()=>{k||S||c(d?"/signup":"/login")},type:"button",className:"text-text-secondary hover:text-primary transition-colors disabled:opacity-50 min-h-[32px] py-1 px-3 touch-manipulation text-xs",disabled:k||S,children:d?`${r("auth.dontHaveAccount")} ${r("auth.signup")}`:`${r("auth.alreadyHaveAccount")} ${r("auth.login")}`})})]})})})},Xo=m.forwardRef(({className:t,...s},r)=>e.jsx(u,{ref:r,className:Kt("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...s}));Xo.displayName=u.displayName;const Zo=m.forwardRef(({className:t,...s},r)=>e.jsx(d,{ref:r,className:Kt("aspect-square h-full w-full",t),...s}));Zo.displayName=d.displayName;const ea=m.forwardRef(({className:t,...s},r)=>e.jsx(h,{ref:r,className:Kt("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));ea.displayName=h.displayName;const ta=Qt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"text-foreground hover:bg-accent"}},defaultVariants:{variant:"default"}});function sa({className:t,variant:s,...r}){return e.jsx("div",{className:Kt(ta({variant:s}),t),...r})}const ra=m.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:Kt("flex min-h-[120px] w-full rounded-2xl border border-input bg-background/50 backdrop-blur-sm px-4 py-3 text-base text-foreground ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 hover:border-primary/50 resize-y",t),style:{fontSize:"16px"},ref:r,"aria-invalid":s["aria-invalid"],...s}));ra.displayName="Textarea";const ia=m.forwardRef(({className:t,type:s,...r},i)=>e.jsx("input",{type:s,className:Kt("flex h-12 lg:h-14 w-full min-w-0 max-w-full rounded-2xl border border-input bg-background/50 backdrop-blur-sm px-4 lg:px-5 py-3 lg:py-3.5 text-base lg:text-lg text-foreground ring-offset-background file:border-0 file:bg-transparent file:text-base lg:file:text-lg file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:border-primary disabled:cursor-not-allowed disabled:opacity-50 transition-all duration-200 hover:border-primary/50",t),style:{fontSize:"16px"},ref:i,"aria-invalid":r["aria-invalid"],...r}));ia.displayName="Input";const na=Qt("text-sm font-semibold text-foreground mb-2 block tracking-wide leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),oa=m.forwardRef(({className:t,...s},r)=>e.jsx(p,{ref:r,className:Kt(na(),t),...s}));oa.displayName=p.displayName;const aa=e=>{if(!e||0===e.trim().length)return"en";const t=(e=>/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/.test(e))(e),s=(e=>/[a-zA-Z]/.test(e))(e);if(t&&!s)return"ar";if(t&&s){return(e.match(/[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]/g)||[]).length>(e.match(/[a-zA-Z]/g)||[]).length?"ar":"en"}return"en"},la=()=>{var t,s,r,i;const{userProfile:n,user:o}=Fn(),{toast:a}=ls(),[l,c]=m.useState(!1),[u,d]=m.useState(!1),[h,p]=m.useState("ai"),[g,f]=m.useState([]),[y,v]=m.useState(""),[b,w]=m.useState(!1),[x,_]=m.useState(!1),[k,j]=m.useState([]),[S,T]=m.useState(null),[P,E]=m.useState([]),[C,A]=m.useState(0),[I,D]=m.useState(!0),[$,K]=m.useState(window.innerHeight),[Y,J]=m.useState(()=>localStorage.getItem("chatButtonPosition")||"right"),[Q,X]=m.useState(!1),[Z,ee]=m.useState(""),[te,se]=m.useState(""),[re,ie]=m.useState(""),[ne,oe]=m.useState(!1),[ae,le]=m.useState(!1),[ce,ue]=m.useState([]),[de,he]=m.useState(""),pe=m.useRef(null),ge=m.useRef(null),fe=m.useRef(null),me=!o;m.useEffect(()=>{const e=new(window.AudioContext||window.webkitAudioContext);return fe.current=e,()=>{e&&"closed"!==e.state&&e.close()}},[]),m.useEffect(()=>{const e=()=>{window.visualViewport?K(window.visualViewport.height):K(window.innerHeight)};return window.visualViewport?(window.visualViewport.addEventListener("resize",e),window.visualViewport.addEventListener("scroll",e)):window.addEventListener("resize",e),()=>{window.visualViewport?(window.visualViewport.removeEventListener("resize",e),window.visualViewport.removeEventListener("scroll",e)):window.removeEventListener("resize",e)}},[]);m.useEffect(()=>{if((null==o?void 0:o.id)&&(null==n?void 0:n.role)){ye();const e=Nn.channel("messages-changes").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},e=>{if(e.new.recipient_id===o.id||e.new.sender_id===o.id){if(ye(),S){const t=null==n?void 0:n.role;let s=!1;s="nutritionist"===t||"admin"===t||"super_admin"===t?e.new.sender_id===S||e.new.recipient_id===S:e.new.conversation_id===S,s&&ve(S)}e.new.recipient_id===o.id&&e.new.sender_id!==o.id&&((()=>{if(I&&fe.current)try{const e=fe.current.createOscillator(),t=fe.current.createGain();e.connect(t),t.connect(fe.current.destination),e.frequency.value=800,e.type="sine",t.gain.setValueAtTime(.3,fe.current.currentTime),t.gain.exponentialRampToValueAtTime(.01,fe.current.currentTime+.3),e.start(fe.current.currentTime),e.stop(fe.current.currentTime+.3)}catch(e){}})(),a({title:" New Message",description:"You have received a new message",duration:3e3}))}}).subscribe();return()=>{Nn.removeChannel(e)}}},[null==o?void 0:o.id,null==n?void 0:n.role,S]);const ye=async()=>{if(null==o?void 0:o.id)try{const e=null==n?void 0:n.role,{data:t,error:s}=await Nn.from("messages").select("\n          *,\n          sender:user_profiles!messages_sender_id_fkey(id, full_name, email, profile_picture_url),\n          recipient:user_profiles!messages_recipient_id_fkey(id, full_name, email, profile_picture_url)\n        ").or(`sender_id.eq.${o.id},recipient_id.eq.${o.id}`).order("created_at",{ascending:!1});if(s)return j([]),void A(0);const r=new Map;(t||[]).forEach(t=>{if(!t||!t.sender_id||!t.recipient_id)return;const s=t.sender_id===o.id?t.recipient_id:t.sender_id,i=t.sender_id===o.id?t.recipient||{}:t.sender||{};if(i&&i.id&&("user"!==e||"user"!==i.role))if(r.has(s)){const e=r.get(s);new Date(t.created_at)>new Date(e.lastMessage.created_at)&&(e.lastMessage=t),t.recipient_id!==o.id||t.is_read||e.unreadCount++}else r.set(s,{id:s,partner:i,lastMessage:t,unreadCount:t.recipient_id!==o.id||t.is_read?0:1})}),j(Array.from(r.values())),A(Array.from(r.values()).reduce((e,t)=>e+t.unreadCount,0))}catch(e){j([]),A(0)}},ve=async e=>{try{const{data:t,error:s}=await Nn.from("messages").select("*").or(`and(sender_id.eq.${o.id},recipient_id.eq.${e}),and(sender_id.eq.${e},recipient_id.eq.${o.id})`).order("created_at",{ascending:!0});if(s)throw s;E(t||[]),await Nn.from("messages").update({is_read:!0}).eq("recipient_id",o.id).eq("sender_id",e),ye()}catch(t){}},be=(()=>{if(me)return["What features does GreenoFig offer?","Tell me about the pricing plans","I'd like to speak with someone from your team"];const e=null==n?void 0:n.role;return"admin"===e||"super_admin"===e?["Show me platform analytics overview","What are the best practices for user engagement?","Help me analyze subscription trends"]:"nutritionist"===e?["Suggest evidence-based nutrition strategies","Help me create a client meal plan template","What are current nutrition research trends?"]:["Give me a healthy breakfast idea","Suggest a quick 15-minute workout","How can I improve my sleep quality?"]})();m.useEffect(()=>{const e=setTimeout(()=>_(!0),3e3),t=setTimeout(()=>_(!1),8e3);return()=>{clearTimeout(e),clearTimeout(t)}},[]),m.useEffect(()=>{const e=e=>{ge.current&&!ge.current.contains(e.target)&&l&&c(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[l]);m.useEffect(()=>{var e;null==(e=pe.current)||e.scrollIntoView({behavior:"smooth"})},[g,P]),m.useEffect(()=>{var e,t,s;if(l&&0===g.length&&"ai"===h){let r="";if(me)r="Hi there!  Welcome to GreenoFig! I'm your Website Assistant. I can help answer questions about our platform, features, pricing, and how we can support your health journey. If you'd like to speak with our team, just let me know!";else{const i=null==n?void 0:n.role;r="admin"===i||"super_admin"===i?`Hi ${(null==(e=null==n?void 0:n.full_name)?void 0:e.split(" ")[0])||"Admin"}!  I'm your AI Business Assistant. I can help with analytics, strategies, and platform insights.`:"nutritionist"===i?`Hi ${(null==(t=null==n?void 0:n.full_name)?void 0:t.split(" ")[0])||"there"}!  I'm your AI Nutrition Assistant. I can help with evidence-based strategies, client plans, and research.`:`Hi ${(null==(s=null==n?void 0:n.full_name)?void 0:s.split(" ")[0])||"there"}!  I'm your AI Health Coach. How can I help you today?`}const i={id:Date.now(),text:r,sender:"ai"};f([i])}},[l,me,n,h]);const we=async(e,t)=>{if(e&&e.preventDefault(),"messages"===h)return void(async()=>{if(!y.trim()||!S)return;const e=y.trim();v("");try{const t={message_text:e,sender_id:o.id,recipient_id:S,is_read:!1,created_at:(new Date).toISOString()},{error:s}=await Nn.from("messages").insert([t]);if(s)throw s;await ve(S)}catch(t){a({title:"Error",description:"Failed to send message",variant:"destructive"})}})();const s=t||y;if(!s.trim()||b)return;const r={...{text:s,sender:"user",user_id:null==o?void 0:o.id},id:Date.now(),created_at:(new Date).toISOString()},i=[...g,r];f(i),v(""),w(!0);try{if(me&&(s.toLowerCase().includes("talk to someone")||s.toLowerCase().includes("speak with")||s.toLowerCase().includes("contact")||s.toLowerCase().includes("representative")||s.toLowerCase().includes("human")||s.toLowerCase().includes("real person")||s.toLowerCase().includes("team member"))){const e={text:"I'd be happy to connect you with our team! Please provide your name and email address, and someone from our team will reach out to you shortly.",sender:"ai",id:Date.now()+1};return f(t=>[...t,e]),X(!0),void w(!1)}const e=aa(s),t=((e,t=[])=>{if(!e&&t.length>0){const s=t.slice(-3).filter(e=>"user"===e.sender||"user"===e.role).map(e=>e.text||e.content).join(" ");e=aa(s)}const s={ar:{language:"ar",languageName:"Arabic",systemPrompt:"      GreenoFig.       .\n\n :\n- **   ** -         \n-    \n-        \n-          \n-        \n\n:\n-  \n-   \n-    \n-   \n-     ",responseFormat:"      ",greeting:"!       "},en:{language:"en",languageName:"English",systemPrompt:"You are GreenoFig AI Health Coach, a friendly and knowledgeable wellness assistant.\n\nImportant Rules:\n- **Always respond in English** - The user is speaking English, so your responses must be in English only\n- Be friendly, encouraging, and professional\n- Provide evidence-based nutrition and fitness advice\n- If asked about medical information, remind users to consult healthcare professionals\n- Never provide medical diagnoses or specific treatment recommendations\n\nYour capabilities:\n- Meal planning\n- Workout suggestions\n- Calorie and nutrition tracking\n- Motivating and encouraging users\n- Answering general health questions",responseFormat:"All responses must be in English",greeting:"Hello! How can I help you with your health journey today?"}};return s[e=e||"en"]||s.en})(e,i),{data:r,error:a}=await Nn.functions.invoke("ai-coach-memory",{body:JSON.stringify({messages:i.slice(-10),language:e,languageInstructions:t,userProfile:me?{isVisitor:!0,role:"visitor",systemPrompt:"ar"===e?"   GreenoFig     .      :                 .                       .          . **  .**":"You are a helpful Website Assistant for GreenoFig, an AI-powered health and wellness platform. You can ONLY answer questions about: the website features, pricing plans, how the platform works, subscription details, privacy and security, payment methods, and general information about our services. If asked about personal health advice, meal plans, or fitness routines, politely explain that users need to sign up to access our AI Health Coach. Keep responses friendly, concise, and focused on helping visitors understand our platform. **Always respond in English.**"}:{...n,isAdmin:"admin"===(null==n?void 0:n.role)||"super_admin"===(null==n?void 0:n.role),isNutritionist:"nutritionist"===(null==n?void 0:n.role)}})});if(a)throw a;const l={text:r.reply,sender:"ai",user_id:null==o?void 0:o.id,id:Date.now()+1,created_at:(new Date).toISOString()};f(e=>[...e,l])}catch(l){const e={text:"I'm having trouble connecting right now. Please try again! ",sender:"ai",id:Date.now()+1};f(t=>[...t,e]),a({title:"Error",description:"Failed to get AI response. Please try again.",variant:"destructive"})}finally{w(!1)}},xe=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),we())},_e=()=>{c(!l),d(!1)};return e.jsxs("div",{ref:ge,children:[e.jsx(F,{children:!l&&e.jsxs(N.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1,[Y]:16},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:500,damping:30,mass:.8},className:"fixed bottom-6 z-[9999]",style:{[Y]:"16px"},children:[e.jsx(F,{children:x&&e.jsxs(N.div,{initial:{opacity:0,x:"right"===Y?20:-20,scale:.8},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:"right"===Y?20:-20,scale:.8},className:"absolute bottom-20 bg-card rounded-lg shadow-xl p-3 w-56 border border-primary/20 "+("right"===Y?"right-0":"left-0"),children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-primary shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-card-foreground",children:"Need help?"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Chat with AI Coach or message your nutritionist!"})]})]}),e.jsx("div",{className:"absolute -bottom-2 w-4 h-4 bg-card border-r border-b border-primary/20 transform rotate-45 "+("right"===Y?"right-6":"left-6")})]})}),e.jsxs(N.div,{drag:"x",dragConstraints:{left:-(window.innerWidth-96),right:window.innerWidth-96},dragElastic:.1,dragMomentum:!1,onDragEnd:(e,t)=>{const s=window.innerWidth,r=e.target.getBoundingClientRect(),i=r.left+r.width/2<s/2?"left":"right";J(i),localStorage.setItem("chatButtonPosition",i)},onClick:_e,whileHover:{scale:1.05},whileTap:{scale:.95},className:"h-16 w-16 rounded-full shadow-2xl cursor-grab active:cursor-grabbing relative bg-gradient-to-br from-primary to-green-400 touch-none select-none",children:[C>0&&e.jsx(N.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 h-6 w-6 rounded-full bg-red-500 flex items-center justify-center text-white text-xs font-bold shadow-lg z-10",children:C>9?"9+":C}),e.jsx(N.div,{animate:{boxShadow:["0 0 10px hsl(var(--primary) / 0.3)","0 0 20px hsl(var(--primary) / 0.4)","0 0 10px hsl(var(--primary) / 0.3)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 rounded-full"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-2",children:e.jsx("img",{src:Un,alt:"GreenoFig AI Coach",className:"h-12 w-12 object-contain drop-shadow-lg",style:{filter:"brightness(0.75) contrast(1.15)"}})})]})]})}),e.jsx(F,{children:l&&e.jsxs(N.div,{initial:{opacity:0,y:50,scale:.9},animate:{opacity:1,y:0,scale:1,[Y]:16},exit:{opacity:0,y:50,scale:.9},transition:{type:"spring",stiffness:300,damping:30},className:"fixed w-[calc(100vw-32px)] max-w-[320px] md:max-w-[340px] bg-card rounded-2xl shadow-2xl z-[9999] border border-border overflow-hidden flex flex-col",style:{[Y]:"16px",bottom:"16px",height:u?"60px":"auto",maxHeight:u?"60px":"550px"},children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary to-green-400 p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0 overflow-hidden",children:[e.jsx("div",{className:"rounded-full bg-white/20 flex items-center justify-center overflow-hidden flex-shrink-0 "+(u?"h-8 w-8":"h-10 w-10"),children:e.jsx("img",{src:Un,alt:"GreenoFig",className:"rounded-full object-cover "+(u?"h-6 w-6":"h-8 w-8")})}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsx("h3",{className:"font-semibold text-white text-sm truncate whitespace-nowrap",children:me?"Website Assistant":"ai"===h?"AI Health Coach":"Messages"}),!u&&e.jsx("p",{className:"text-xs text-white/80 truncate whitespace-nowrap",children:me?"Ask me about GreenoFig!":"ai"===h?b?"Thinking...":"Online":`${k.length} conversations`})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yo,{variant:"ghost",size:"sm",onClick:()=>D(!I),className:"h-8 w-8 p-0 text-white hover:bg-white/20",title:I?"Mute notifications":"Unmute notifications",children:I?e.jsx(M,{className:"h-4 w-4"}):e.jsx(B,{className:"h-4 w-4"})}),e.jsx(Yo,{variant:"ghost",size:"sm",onClick:()=>{d(!u)},className:"h-8 w-8 p-0 text-white hover:bg-white/20",children:u?e.jsx(q,{className:"h-4 w-4"}):e.jsx(H,{className:"h-4 w-4"})}),e.jsx(Yo,{variant:"ghost",size:"sm",onClick:_e,className:"h-8 w-8 p-0 text-white hover:bg-white/20",children:e.jsx(O,{className:"h-4 w-4"})})]})]}),!u&&!me&&!S&&e.jsxs("div",{className:"flex border-b border-border bg-muted/30",children:[e.jsxs("button",{onClick:()=>p("ai"),className:"flex-1 py-3 px-4 flex items-center justify-center gap-2 font-medium text-sm transition-all "+("ai"===h?"bg-background text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground hover:bg-muted/50"),children:[e.jsx(z,{className:"h-4 w-4"}),"AI Coach"]}),e.jsxs("button",{onClick:()=>p("messages"),className:"flex-1 py-3 px-4 flex items-center justify-center gap-2 font-medium text-sm transition-all relative "+("messages"===h?"bg-background text-primary border-b-2 border-primary":"text-muted-foreground hover:text-foreground hover:bg-muted/50"),children:[e.jsx(W,{className:"h-4 w-4"}),"Messages",C>0&&e.jsx(sa,{variant:"destructive",className:"h-5 min-w-[20px] px-1.5 text-[10px]",children:C>9?"9+":C})]})]}),!u&&"ai"===h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 bg-muted/30",style:{maxHeight:"320px"},children:[e.jsx(F,{children:g.map((t,s)=>e.jsx(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex "+("user"===t.sender?"justify-end":"justify-start"),children:e.jsx("div",{className:"max-w-[85%] rounded-xl px-3 py-2.5 shadow-sm "+("user"===t.sender?"bg-gradient-to-br from-primary to-green-400 text-primary-foreground":"bg-card border border-border text-card-foreground"),children:e.jsx("p",{className:"text-[13px] leading-relaxed whitespace-pre-wrap break-words",children:t.text})})},t.id||s))}),b&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:e.jsx("div",{className:"bg-muted rounded-xl px-4 py-3 shadow-sm",children:e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("span",{className:"w-2 h-2 bg-primary/60 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),e.jsx("div",{ref:pe})]}),g.length<=1&&!b&&!Q&&e.jsx("div",{className:"px-3 pb-2 pt-1",children:e.jsx("div",{className:"space-y-2",children:be.map((t,s)=>e.jsx(N.button,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},transition:{delay:.1*s},onClick:e=>we(e,t),className:"w-full p-2 bg-muted hover:bg-accent rounded-lg text-left text-xs transition-colors",children:t},s))})}),e.jsx("div",{className:"p-4 bg-card border-t border-border",children:Q?e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),te.trim()&&Z.trim()){oe(!0);try{const{error:e}=await Nn.from("visitor_inquiries").insert([{name:Z,email:te,question:re||y,conversation_history:JSON.stringify(g),status:"pending",created_at:(new Date).toISOString()}]);if(e)throw e;a({title:"Thank you!",description:"Our team will get back to you shortly via email."});const t={id:Date.now(),text:`Thank you, ${Z}! I've forwarded your information to our team. Someone will reach out to you at ${te} shortly. Is there anything else I can help you with about our website?`,sender:"ai"};f(e=>[...e,t]),X(!1),ee(""),se(""),ie("")}catch(t){a({title:"Error",description:"Failed to submit your information. Please try again or email us directly at support@greenofig.com",variant:"destructive"})}finally{oe(!1)}}else a({title:"Missing Information",description:"Please provide your name and email",variant:"destructive"})},className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(oa,{htmlFor:"visitor-name",className:"text-xs font-medium",children:"Name *"}),e.jsx(ia,{id:"visitor-name",type:"text",value:Z,onChange:e=>ee(e.target.value),placeholder:"Your name",className:"mt-1 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx(oa,{htmlFor:"visitor-email",className:"text-xs font-medium",children:"Email *"}),e.jsx(ia,{id:"visitor-email",type:"email",value:te,onChange:e=>se(e.target.value),placeholder:"your@email.com",className:"mt-1 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx(oa,{htmlFor:"visitor-question",className:"text-xs font-medium",children:"Question (Optional)"}),e.jsx(ra,{id:"visitor-question",value:re,onChange:e=>ie(e.target.value),placeholder:"Tell us how we can help...",className:"mt-1 text-sm resize-none",rows:2})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Yo,{type:"button",variant:"outline",onClick:()=>X(!1),className:"flex-1",disabled:ne,children:"Cancel"}),e.jsx(Yo,{type:"submit",disabled:ne,className:"flex-1 bg-gradient-to-br from-primary to-green-400",children:ne?"Sending...":"Submit"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("form",{onSubmit:we,className:"flex gap-3 items-end",children:[e.jsx(ra,{value:y,onChange:e=>v(e.target.value),onKeyPress:xe,placeholder:me?"Ask about our platform...":"Ask me anything...",className:"flex-1 min-h-[48px] max-h-[120px] resize-none text-sm bg-background border-input focus:border-ring focus:ring-2 focus:ring-primary/20 rounded-lg p-3",rows:2}),e.jsx(Yo,{type:"submit",disabled:!y.trim()||b,size:"icon",className:"h-12 w-12 bg-gradient-to-br from-primary to-green-400 hover:from-primary/90 hover:to-green-400/90 shrink-0 shadow-md transition-all",children:e.jsx(V,{className:"h-5 w-5"})})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-2 text-center",children:"Press Enter to send  Shift+Enter for new line"})]})})]}),!u&&"messages"===h&&e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[!S&&!ae&&("admin"===(null==n?void 0:n.role)||"super_admin"===(null==n?void 0:n.role)||"nutritionist"===(null==n?void 0:n.role))&&e.jsx("div",{className:"p-3 border-b border-border",children:e.jsxs(Yo,{onClick:()=>{le(!0),(async()=>{try{const{data:e,error:t}=await Nn.from("user_profiles").select("id, full_name, email, profile_picture_url, role").neq("id",o.id).order("full_name");if(t)throw t;ue(e||[])}catch(e){}})()},className:"w-full bg-gradient-to-br from-primary to-green-400",size:"sm",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"New Message"]})}),ae&&e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-3 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Yo,{variant:"ghost",size:"sm",onClick:()=>{le(!1),he("")},className:"h-8 w-8 p-0",title:"Back to conversations",children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx("h3",{className:"text-sm font-semibold",children:"Select User to Message"})]}),e.jsx(ia,{placeholder:"Search users...",value:de,onChange:e=>he(e.target.value),className:"text-sm"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto divide-y divide-border",children:ce.filter(e=>{var t,s;return(null==(t=e.full_name)?void 0:t.toLowerCase().includes(de.toLowerCase()))||(null==(s=e.email)?void 0:s.toLowerCase().includes(de.toLowerCase()))}).map(t=>{var s;return e.jsxs(N.button,{onClick:()=>{return e=t.id,T(e),le(!1),he(""),void ve(e);var e},className:"w-full p-3 hover:bg-muted/50 transition-colors text-left flex items-center gap-3",whileHover:{backgroundColor:"rgba(0,0,0,0.02)"},children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:t.profile_picture_url?e.jsx("img",{src:t.profile_picture_url,alt:t.full_name,className:"h-full w-full rounded-full object-cover"}):e.jsx("span",{className:"text-sm font-semibold text-primary",children:(null==(s=t.full_name)?void 0:s.charAt(0))||"?"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground truncate",children:t.full_name||"Unknown"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t.email})]}),e.jsx(sa,{variant:"outline",className:"text-[10px]",children:t.role})]},t.id)})})]}),!S&&!ae&&e.jsx("div",{className:"flex-1 overflow-y-auto",children:0===k.length?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-6 text-center",children:[e.jsx(W,{className:"h-12 w-12 text-muted-foreground mb-3"}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No conversations yet"}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Start chatting with your ","user"===(null==n?void 0:n.role)?"nutritionist":"clients","!"]})]}):e.jsx("div",{className:"divide-y divide-border",children:k.map(t=>{var s;const r=t.partner||t.nutritionist,i=t.lastMessage||{message_text:t.last_message,created_at:t.last_message_at},n=t.unreadCount||t.unread_count||0;return e.jsxs(N.button,{onClick:()=>{return e=t.id,T(e),void ve(e);var e},className:"w-full p-3 hover:bg-muted/50 transition-colors text-left flex items-start gap-3",whileHover:{backgroundColor:"rgba(0,0,0,0.02)"},children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center flex-shrink-0",children:(null==r?void 0:r.profile_picture_url)?e.jsx("img",{src:r.profile_picture_url,alt:r.full_name,className:"h-full w-full rounded-full object-cover"}):e.jsx("span",{className:"text-sm font-semibold text-primary",children:(null==(s=null==r?void 0:r.full_name)?void 0:s.charAt(0))||"?"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[e.jsx("p",{className:"text-sm font-semibold text-foreground truncate",children:(null==r?void 0:r.full_name)||"Unknown"}),(null==i?void 0:i.created_at)&&e.jsx("span",{className:"text-[10px] text-muted-foreground whitespace-nowrap ml-2",children:G(new Date(i.created_at),"MMM d")})]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:(null==i?void 0:i.message_text)||"No messages yet"})]}),n>0&&e.jsx(sa,{variant:"destructive",className:"h-5 min-w-[20px] px-1.5 text-[10px] flex-shrink-0",children:n})]},t.id)})})}),S&&e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"p-3 border-b border-border flex items-center gap-3 bg-muted/30",children:[e.jsx(Yo,{variant:"ghost",size:"sm",onClick:()=>{T(null),E([])},className:"h-8 w-8 p-0",title:"Back to conversations",children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm font-semibold",children:(null==(s=null==(t=k.find(e=>e.id===S))?void 0:t.partner)?void 0:s.full_name)||(null==(i=null==(r=k.find(e=>e.id===S))?void 0:r.nutritionist)?void 0:i.full_name)||"Conversation"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 bg-muted/30",style:{maxHeight:"320px"},children:[P.map(t=>e.jsx(N.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex "+(t.sender_id===o.id?"justify-end":"justify-start"),children:e.jsxs("div",{className:"max-w-[85%] rounded-xl px-3 py-2 shadow-sm "+(t.sender_id===o.id?"bg-gradient-to-br from-primary to-green-400 text-primary-foreground":"bg-card border border-border text-card-foreground"),children:[e.jsx("p",{className:"text-[13px] leading-relaxed whitespace-pre-wrap break-words",children:t.message_text}),e.jsx("span",{className:"text-[10px] opacity-70 mt-1 block",children:G(new Date(t.created_at),"h:mm a")})]})},t.id)),e.jsx("div",{ref:pe})]}),e.jsx("div",{className:"p-4 bg-card border-t border-border",children:e.jsxs("form",{onSubmit:we,className:"flex gap-3 items-end",children:[e.jsx(ra,{value:y,onChange:e=>v(e.target.value),onKeyPress:xe,placeholder:"Type a message...",className:"flex-1 min-h-[48px] max-h-[120px] resize-none text-sm bg-background border-input focus:border-ring focus:ring-2 focus:ring-primary/20 rounded-lg p-3",rows:2}),e.jsx(Yo,{type:"submit",disabled:!y.trim(),size:"icon",className:"h-12 w-12 bg-gradient-to-br from-primary to-green-400 hover:from-primary/90 hover:to-green-400/90 shrink-0 shadow-md transition-all",children:e.jsx(V,{className:"h-5 w-5"})})]})})]})]})]})})]})},ca=({targetId:t="main-content"})=>{const[s,r]=m.useState(!1);m.useEffect(()=>{document.getElementById(t)||window;const e=t?document.getElementById(t):null,s=()=>{e?e.scrollTop>300?r(!0):r(!1):window.pageYOffset>300?r(!0):r(!1)};return e?e.addEventListener("scroll",s):window.addEventListener("scroll",s),()=>{e?e.removeEventListener("scroll",s):window.removeEventListener("scroll",s)}},[t]);return e.jsx(F,{children:s&&e.jsx(N.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},className:"fixed bottom-6 left-1/2 -translate-x-1/2 md:left-6 md:translate-x-0 z-40",children:e.jsx(Yo,{onClick:()=>{const e=t?document.getElementById(t):null;e?e.scrollTo({top:0,behavior:"smooth"}):window.scrollTo({top:0,behavior:"smooth"})},size:"icon",className:"h-12 w-12 rounded-full shadow-lg bg-primary/60 hover:bg-primary/80 backdrop-blur-sm text-primary-foreground border border-primary/20","aria-label":"Scroll to top",children:e.jsx(K,{className:"h-5 w-5"})})})})},ua=m.createContext(),da=({children:t})=>{const{userProfile:s}=Fn(),[r,i]=m.useState(0),[n,o]=m.useState([]),a=m.useRef(null);m.useEffect(()=>{a.current=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuEzvLaizsIGmi77eamUBELTKXh8bllHAU2jdXyzn0vBSR2xe/glEILElyx6OyrWBQLRp3e8cFuJAUpgs/z3I4+CRhnvO7op1YSCEE=")},[]),m.useEffect(()=>{if(!(null==s?void 0:s.id))return;const e=[];return e.push(Nn.channel("user_messages").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`recipient_id=eq.${s.id}`},e=>{l(),c(" New Message","You have a new message"),u()}).subscribe()),e.push(Nn.channel("user_meal_plans").on("postgres_changes",{event:"INSERT",schema:"public",table:"ai_meal_plans",filter:`user_id=eq.${s.id}`},e=>{l(),c(" New Meal Plan","A new meal plan has been assigned to you!")}).subscribe()),e.push(Nn.channel("user_workout_plans").on("postgres_changes",{event:"INSERT",schema:"public",table:"workout_plans",filter:`user_id=eq.${s.id}`},e=>{l(),c(" New Workout Plan","Your trainer assigned you a new workout!")}).subscribe()),e.push(Nn.channel("user_achievements").on("postgres_changes",{event:"INSERT",schema:"public",table:"user_achievements",filter:`user_id=eq.${s.id}`},e=>{l(),c(" Achievement Unlocked!","You earned a new badge!","success")}).subscribe()),e.push(Nn.channel("user_levels").on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_gamification",filter:`user_id=eq.${s.id}`},e=>{if(e.new.level>e.old.level&&(l(),c(" Level Up!",`You reached level ${e.new.level}!`,"success")),e.new.total_points>e.old.total_points){const t=e.new.total_points-e.old.total_points;l(),c(" Points Earned!",`+${t} points!`)}}).subscribe()),e.push(Nn.channel("user_goals").on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_goals",filter:`user_id=eq.${s.id}`},e=>{"completed"===e.new.status&&"completed"!==e.old.status&&(l(),c(" Goal Completed!",`You completed: ${e.new.goal_name}`))}).subscribe()),e.push(Nn.channel("user_weight_logs").on("postgres_changes",{event:"INSERT",schema:"public",table:"weight_logs",filter:`user_id=eq.${s.id}`},e=>{l(),c(" Weight Logged","Great job tracking your progress!")}).subscribe()),e.push(Nn.channel("user_subscriptions").on("postgres_changes",{event:"INSERT",schema:"public",table:"user_subscriptions",filter:`user_id=eq.${s.id}`},e=>{l(),c(" Subscription Active!",`Welcome to ${e.new.tier_name} tier!`)}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_subscriptions",filter:`user_id=eq.${s.id}`},e=>{"cancelled"===e.new.status&&"active"===e.old.status&&(l(),c(" Subscription Cancelled","Your subscription has been cancelled"))}).subscribe()),"nutritionist"!==s.role&&"admin"!==s.role&&"super_admin"!==s.role||e.push(Nn.channel("nutritionist_appointments").on("postgres_changes",{event:"INSERT",schema:"public",table:"appointments",filter:`nutritionist_id=eq.${s.id}`},e=>{l(),c(" New Appointment","A client booked an appointment with you!")}).subscribe()),"nutritionist"!==s.role&&"admin"!==s.role&&"super_admin"!==s.role||e.push(Nn.channel("new_users").on("postgres_changes",{event:"INSERT",schema:"public",table:"user_profiles",filter:"role=eq.user"},e=>{l(),c(" New Client","A new user signed up!")}).subscribe()),e.push(Nn.channel("user_streaks").on("postgres_changes",{event:"UPDATE",schema:"public",table:"user_profiles",filter:`id=eq.${s.id}`},e=>{e.new.current_streak&&e.new.current_streak%7==0&&e.new.current_streak>e.old.current_streak&&(l(),c(" Streak Milestone!",`${e.new.current_streak} day streak! Keep it up!`,"success"))}).subscribe()),e.push(Nn.channel("user_meal_logs").on("postgres_changes",{event:"INSERT",schema:"public",table:"meal_logs",filter:`user_id=eq.${s.id}`},e=>{l(),c(" Meal Logged","Great job tracking your nutrition!")}).subscribe()),e.push(Nn.channel("user_workout_logs").on("postgres_changes",{event:"INSERT",schema:"public",table:"workout_logs",filter:`user_id=eq.${s.id}`},e=>{l(),c(" Workout Logged","Awesome workout! Keep pushing!")}).subscribe()),e.push(Nn.channel("user_comments").on("postgres_changes",{event:"INSERT",schema:"public",table:"comments"},e=>{l(),c(" New Comment","Someone commented on your post!")}).subscribe()),e.push(Nn.channel("shared_recipes").on("postgres_changes",{event:"INSERT",schema:"public",table:"shared_recipes",filter:`shared_with_user_id=eq.${s.id}`},e=>{l(),c(" Recipe Shared","Your nutritionist shared a recipe with you!")}).subscribe()),e.push(Nn.channel("user_payments").on("postgres_changes",{event:"INSERT",schema:"public",table:"payments",filter:`user_id=eq.${s.id}`},e=>{"succeeded"===e.new.status&&(l(),c(" Payment Successful","Your payment was processed successfully!"))}).subscribe()),u(),()=>{e.forEach(e=>Nn.removeChannel(e))}},[null==s?void 0:s.id,null==s?void 0:s.role]);const l=()=>{a.current&&a.current.play().catch(e=>{})},c=(e,t,s="default")=>{"Notification"in window&&"granted"===Notification.permission&&new Notification(e,{body:t,icon:"/logo.png",badge:"/logo.png"}),as({title:e,description:t,variant:s,duration:5e3})},u=async()=>{if(null==s?void 0:s.id)try{const{count:e}=await Nn.from("messages").select("*",{count:"exact",head:!0}).eq("recipient_id",s.id).eq("is_read",!1);i(e||0)}catch(e){}},d={unreadCount:r,notifications:n,playNotificationSound:l,showNotification:c,requestNotificationPermission:async()=>{if("Notification"in window&&"default"===Notification.permission){return"granted"===await Notification.requestPermission()}return"granted"===Notification.permission},updateUnreadCount:u};return e.jsx(ua.Provider,{value:d,children:t})},ha=()=>{const{unreadCount:t,requestNotificationPermission:s,updateUnreadCount:r}=(()=>{const e=m.useContext(ua);if(!e)throw new Error("useNotifications must be used within NotificationProvider");return e})(),{userProfile:i}=Fn(),n=w(),[o,a]=m.useState(!1),[l,c]=m.useState([]),[u,d]=m.useState(!1),[h,p]=m.useState(0),g=m.useRef(null);m.useEffect(()=>{s()},[]),m.useEffect(()=>{(null==i?void 0:i.id)&&f()},[null==i?void 0:i.id]),m.useEffect(()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const f=async()=>{if(null==i?void 0:i.id)try{const{count:e,error:t}=await Nn.from("messages").select("*",{count:"exact",head:!0}).eq("recipient_id",i.id).eq("is_read",!1);t||p(e||0)}catch(e){}},y=e=>{(async e=>{try{await Nn.from("messages").update({is_read:!0}).eq("id",e),c(t=>t.map(t=>t.id===e?{...t,isRead:!0}:t)),f(),r()}catch(t){}})(e.id),a(!1),"nutritionist"===(null==i?void 0:i.role)||"admin"===(null==i?void 0:i.role)||"super_admin"===(null==i?void 0:i.role)?n(`/app/nutritionist/messages?conversation=${e.senderId}`):n(`/app/messages?conversation=${e.senderId}`)},v=t=>{switch(t){case"message":return e.jsx(W,{className:"h-4 w-4 text-blue-500"});case"achievement":return e.jsx(X,{className:"h-4 w-4 text-yellow-500"});case"workout":return e.jsx(Q,{className:"h-4 w-4 text-green-500"});case"meal":return e.jsx(J,{className:"h-4 w-4 text-orange-500"});default:return e.jsx(M,{className:"h-4 w-4 text-primary"})}},b=t+h;return e.jsxs("div",{className:"relative",ref:g,children:[e.jsxs(Yo,{variant:"ghost",size:"icon",className:"relative min-h-[44px] min-w-[44px]",onClick:()=>{o||((async()=>{if(null==i?void 0:i.id){d(!0);try{const{data:e,error:t}=await Nn.from("messages").select("\n          id,\n          message_text,\n          created_at,\n          is_read,\n          sender_id,\n          sender:user_profiles!messages_sender_id_fkey(id, full_name, profile_picture_url)\n        ").eq("recipient_id",i.id).order("created_at",{ascending:!1}).limit(10);if(t)c([]);else{const t=(e||[]).map(e=>{var t,s,r,i,n;return{id:e.id,type:"message",title:`New message from ${(null==(t=e.sender)?void 0:t.full_name)||"Unknown"}`,description:(null==(s=e.message_text)?void 0:s.substring(0,50))+((null==(r=e.message_text)?void 0:r.length)>50?"...":""),createdAt:e.created_at,isRead:e.is_read,senderId:e.sender_id,senderName:null==(i=e.sender)?void 0:i.full_name,senderPicture:null==(n=e.sender)?void 0:n.profile_picture_url}});c(t)}}catch(e){c([])}finally{d(!1)}}})(),f()),a(!o)},children:[e.jsx(M,{className:"h-5 w-5"}),b>0&&e.jsx(sa,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs animate-pulse",children:b>9?"9+":b})]}),e.jsx(F,{children:o&&e.jsxs(N.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},className:"absolute right-0 mt-2 w-80 max-w-[calc(100vw-32px)] bg-card rounded-lg shadow-xl border border-border z-50 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"h-4 w-4 text-primary"}),e.jsx("h3",{className:"font-semibold text-sm",children:"Notifications"}),h>0&&e.jsxs(sa,{variant:"secondary",className:"text-xs",children:[h," new"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[h>0&&e.jsxs(Yo,{variant:"ghost",size:"sm",onClick:async()=>{try{await Nn.from("messages").update({is_read:!0}).eq("recipient_id",i.id).eq("is_read",!1),c(e=>e.map(e=>({...e,isRead:!0}))),p(0),r()}catch(e){}},className:"text-xs h-7 px-2",children:[e.jsx(Y,{className:"h-3 w-3 mr-1"}),"Mark all read"]}),e.jsx(Yo,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:()=>a(!1),children:e.jsx(O,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto",children:u?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(I,{className:"h-6 w-6 animate-spin text-primary"})}):0===l.length?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 px-4 text-center",children:[e.jsx(L,{className:"h-10 w-10 text-muted-foreground mb-2 opacity-50"}),e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"No notifications yet"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"You'll see messages and updates here"})]}):e.jsx("div",{className:"divide-y divide-border",children:l.map(t=>e.jsxs(N.button,{onClick:()=>y(t),className:"w-full p-3 text-left hover:bg-muted/50 transition-colors flex items-start gap-3 "+(t.isRead?"":"bg-primary/5"),whileHover:{backgroundColor:"rgba(0,0,0,0.02)"},children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center "+(t.isRead?"bg-muted":"bg-primary/10"),children:v(t.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm truncate "+(t.isRead?"font-medium":"font-semibold"),children:t.title}),!t.isRead&&e.jsx("span",{className:"w-2 h-2 bg-primary rounded-full flex-shrink-0"})]}),e.jsx("p",{className:"text-xs text-muted-foreground truncate mt-0.5",children:t.description}),e.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:G(new Date(t.createdAt),"MMM d, h:mm a")})]})]},t.id))})}),l.length>0&&e.jsx("div",{className:"p-2 border-t border-border bg-muted/30",children:e.jsx(Yo,{variant:"ghost",size:"sm",className:"w-full text-xs",onClick:()=>{a(!1),"nutritionist"===(null==i?void 0:i.role)||"admin"===(null==i?void 0:i.role)||"super_admin"===(null==i?void 0:i.role)?n("/app/nutritionist/messages"):n("/app/messages")},children:"View all messages"})})]})})]})},pa=({logoUrl:t})=>{const{userProfile:s,signOut:r}=Fn();w();const i=x(),[n,o]=m.useState(!1),[a,l]=m.useState(0);m.useEffect(()=>{if(null==s?void 0:s.id){c();try{const e=Nn.channel("conversations-changes").on("postgres_changes",{event:"*",schema:"public",table:"conversations",filter:"user"===s.role?`user_id=eq.${s.id}`:`nutritionist_id=eq.${s.id}`},()=>{c()}).subscribe(e=>{});return()=>{try{Nn.removeChannel(e)}catch(t){}}}catch(e){const t=setInterval(c,3e4);return()=>clearInterval(t)}}},[null==s?void 0:s.id]);const c=async()=>{if(null==s?void 0:s.id)try{if("user"===s.role){const{data:e,error:t}=await Nn.rpc("get_unread_message_count",{p_user_id:s.id});t||l(e||0)}else if(["nutritionist","admin","super_admin"].includes(s.role)){const{data:e,error:t}=await Nn.rpc("get_nutritionist_unread_count",{p_nutritionist_id:s.id});t||l(e||0)}}catch(e){}},u=async()=>{await r()},d=[{icon:se,label:"Dashboard",path:"/app/user"},{icon:re,label:"AI Coach",path:"/app/ai-coach"},{icon:ie,label:"Nutrition",path:"/app/nutrition"},{icon:Q,label:"Fitness",path:"/app/fitness"},{icon:ne,label:"Progress",path:"/app/progress"},{icon:L,label:"Messages",path:"/app/messages"},{icon:W,label:"Support",path:"/app/support"}],h=[{icon:se,label:"Dashboard",path:"/app/nutritionist/dashboard"},{icon:oe,label:"Clients",path:"/app/nutritionist/clients"},{icon:ie,label:"Meal Plans",path:"/app/nutritionist/meals"},{icon:ae,label:"Schedule",path:"/app/nutritionist/schedule"},{icon:W,label:"Messages",path:"/app/nutritionist/messages"},{icon:ne,label:"Analytics",path:"/app/nutritionist/analytics"},{icon:le,label:"Resources",path:"/app/nutritionist/resources"},{icon:le,label:"Blog",path:"/app/nutritionist/blog"},{icon:ce,label:"Settings",path:"/app/nutritionist/settings"}],p=[{icon:se,label:"Dashboard",path:"/app/admin"},{icon:D,label:"Tier Preview",path:"/app/admin/tier-preview"},{icon:ne,label:"Analytics",path:"/app/admin/analytics"},{icon:ue,label:"Revenue",path:"/app/admin/revenue"},{icon:de,label:"AI Errors",path:"/app/admin/errors"},{icon:oe,label:"User Management",path:"/app/admin/customers"},{icon:he,label:"Subscriptions",path:"/app/admin/subscriptions"},{icon:pe,label:"Payments",path:"/app/admin/payments"},{icon:ge,label:"Coupons",path:"/app/admin/coupons"},{icon:fe,label:"Referrals",path:"/app/admin/referrals"},{icon:me,label:"Support",path:"/app/admin/issues"},{icon:W,label:"Messaging",path:"/app/admin/messaging"},{icon:le,label:"Blog",path:"/app/admin/blog"},{icon:ye,label:"Website",path:"/app/admin/website"},{icon:ve,label:"Ad Management",path:"/app/admin/ads"},{icon:re,label:"AI Coach",path:"/app/admin/ai-coach"},{icon:be,label:"Database",path:"/app/admin/studio"}],g=(()=>{switch(null==s?void 0:s.role){case"admin":case"super_admin":return p;case"nutritionist":return h;default:return d}})(),f=({link:t,isActive:s})=>{const[r,i]=m.useState(!1),l=("/app/messages"===t.path||"/app/nutritionist/messages"===t.path||"/app/admin/messaging"===t.path)&&a>0;return e.jsxs(j,{to:t.path,end:!0,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),className:`flex items-center gap-2 px-2 py-2 sm:py-1.5 rounded-md transition-all duration-200 text-sm sm:text-xs font-medium border min-h-[44px] sm:min-h-0 ${s||r?"bg-gradient-to-r from-primary to-green-400 text-primary-foreground border-primary/30":"bg-transparent text-muted-foreground border-transparent hover:border-primary/30"} ${r?"translate-x-1":"translate-x-0"}`,onClick:()=>n&&o(!1),children:[e.jsx(t.icon,{className:"w-4 h-4 sm:w-3.5 sm:h-3.5 flex-shrink-0"}),e.jsx("span",{className:"flex-1 truncate",children:t.label}),l&&e.jsx(sa,{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 min-w-[20px] h-5 sm:h-4 flex items-center justify-center animate-pulse",children:a>99?"99+":a})]})},y=()=>{return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"p-3 sm:p-2.5 border-b border-border flex items-center gap-2",children:e.jsxs(_,{to:"/home",className:"flex items-center gap-1.5",children:[e.jsx("img",{src:t,alt:"GreenoFig Logo",className:"w-7 h-7 sm:w-6 sm:h-6"}),e.jsx("span",{className:"text-base sm:text-sm font-bold gradient-text",children:"GreenoFig"})]})}),e.jsx("nav",{className:"flex-1 p-2 space-y-0.5 overflow-y-auto",children:g.map(t=>{let s=!1;return s=t.path.includes("?")?i.pathname+i.search===t.path:"/app/admin"===t.path?i.pathname===t.path&&!i.search:i.pathname===t.path,e.jsx(f,{link:t,isActive:s},t.path)})}),e.jsxs("div",{className:"p-3 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsxs(Xo,{className:"w-9 h-9 sm:w-8 sm:h-8",children:[e.jsx(Zo,{src:null==s?void 0:s.profile_picture_url}),e.jsx(ea,{className:"text-xs sm:text-[10px]",children:(r=null==s?void 0:s.full_name,r?r.split(" ").map(e=>e[0]).join("").toUpperCase():"?")})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[e.jsx("p",{className:"text-sm sm:text-xs font-semibold truncate",children:null==s?void 0:s.full_name}),e.jsx("p",{className:"text-xs sm:text-[10px] text-text-secondary truncate",children:null==s?void 0:s.email})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(j,{to:"/app/profile",className:({isActive:e})=>"flex items-center gap-3 px-3 py-2.5 sm:py-2 rounded-lg transition-colors text-sm font-medium min-h-[44px] sm:min-h-0 "+(e?"bg-muted text-foreground":"text-text-secondary hover:bg-muted hover:text-foreground"),onClick:()=>n&&o(!1),children:[e.jsx(D,{className:"w-4 h-4"}),"Profile"]}),e.jsxs("button",{onClick:u,className:"w-full flex items-center gap-3 px-3 py-2.5 sm:py-2 rounded-lg transition-colors text-sm font-medium text-text-secondary hover:bg-muted hover:text-foreground min-h-[44px] sm:min-h-0",children:[e.jsx(te,{className:"w-4 h-4"}),"Sign Out"]})]})]})]});var r};return e.jsxs("div",{className:"flex h-screen bg-background text-foreground overflow-hidden",children:[e.jsx("aside",{className:"hidden lg:block w-64 bg-card border-r border-border flex-shrink-0",children:e.jsx(y,{})}),e.jsx(F,{children:n&&e.jsxs(e.Fragment,{children:[e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>o(!1)}),e.jsx(N.aside,{variants:{open:{x:0,transition:{type:"spring",stiffness:300,damping:30}},closed:{x:"100%",transition:{type:"spring",stiffness:300,damping:30}}},initial:"closed",animate:"open",exit:"closed",className:"fixed top-0 right-0 h-full w-72 sm:w-64 bg-card z-50 lg:hidden shadow-2xl",children:e.jsx(y,{})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden min-w-0",children:[e.jsx("header",{className:"sticky top-0 z-30 flex items-center justify-end h-14 sm:h-16 px-4 border-b border-border bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/60 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[e.jsx(ha,{user:s}),"admin"===(null==s?void 0:s.role)||"super_admin"===(null==s?void 0:s.role)?e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 text-xs sm:text-sm font-semibold text-primary",children:[e.jsx(Z,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Admin Mode"}),e.jsx("span",{className:"sm:hidden",children:"Admin"})]}):null,e.jsx(Yo,{variant:"ghost",size:"icon",className:"lg:hidden min-h-[44px] min-w-[44px]",onClick:()=>o(!0),children:e.jsx(ee,{className:"w-6 h-6"})})]})}),e.jsx("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8",id:"main-content",children:e.jsx(k,{})})]}),e.jsx(la,{}),e.jsx(ca,{targetId:"main-content"})]})};var ga,fa="clover",ma="https://js.stripe.com",ya="".concat(ma,"/").concat(fa,"/stripe.js"),va=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,ba=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,wa=function(e){return va.test(e)||ba.test(e)},xa=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",s=document.createElement("script");s.src="".concat(ya).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(s),s},_a=null,ka=null,ja=null,Sa=function(e){return null!==_a?_a:(_a=new Promise(function(t,s){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe,window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(ma,'"]')),t=0;t<e.length;t++){var s=e[t];if(wa(s.src))return s}return null}();if(r&&e);else if(r){if(r&&null!==ja&&null!==ka){var i;r.removeEventListener("load",ja),r.removeEventListener("error",ka),null===(i=r.parentNode)||void 0===i||i.removeChild(r),r=xa(e)}}else r=xa(e);ja=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,s),ka=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(s),r.addEventListener("load",ja),r.addEventListener("error",ka)}catch(n){return void s(n)}else t(null)})).catch(function(e){return _a=null,Promise.reject(e)})},Ta=function(){return ga||(ga=Sa(null).catch(function(e){return ga=null,Promise.reject(e)}))};Promise.resolve().then(function(){return Ta()}).catch(function(e){});var Pa=function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];0;var r=Date.now();return Ta().then(function(e){return function(e,t,s){if(null===e)return null;t[0].match(/^pk_test/),e.version;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"8.1.0",startTime:t})}(r,s),r}(e,t,r)})};const Ea=async e=>{try{const{data:t,error:s}=await Nn.from("user_subscriptions").select("\n        *,\n        subscription_plans (*)\n      ").eq("user_id",e).single();if(s&&"PGRST116"!==s.code)throw s;return t}catch(t){return null}},Ca=async(e,t=null,s=null)=>{try{const{data:r,error:i}=await Nn.from("user_subscriptions").update({cancel_at_period_end:!0,status:"canceled",canceled_at:(new Date).toISOString(),cancellation_reason:t,cancellation_feedback:s}).eq("user_id",e).select().single();if(i)throw i;return r}catch(r){throw r}},Aa=async e=>{try{const{data:t,error:s}=await Nn.from("payment_methods").select("*").eq("user_id",e).eq("status","active").order("is_default",{ascending:!1}).order("created_at",{ascending:!1});if(s)throw s;return t||[]}catch(t){return[]}},Oa=async(e,t)=>{try{await Nn.from("payment_methods").update({is_default:!1}).eq("user_id",e);const{data:s,error:r}=await Nn.from("payment_methods").update({is_default:!0}).eq("id",t).eq("user_id",e).select().single();if(r)throw r;return s}catch(s){throw s}},Na=async(e,t)=>{try{const{data:s,error:r}=await Nn.from("payment_methods").update({status:"inactive"}).eq("id",t).eq("user_id",e).select().single();if(r)throw r;return s}catch(s){throw s}},Ra=async({userId:e,paymentTransactionId:t,amount:s,reason:r,refundType:i="full",customerNotes:n=null})=>{try{const{data:o,error:a}=await Nn.from("refunds").insert([{user_id:e,payment_transaction_id:t,amount:s,reason:r,refund_type:i,customer_notes:n,status:"pending",requested_by:e}]).select().single();if(a)throw a;return o}catch(o){throw o}},Ia=async e=>{try{const{data:t,error:s}=await Nn.from("refunds").select("\n        *,\n        payment_transactions (*)\n      ").eq("user_id",e).order("created_at",{ascending:!1});if(s)throw s;return t||[]}catch(t){return[]}},Da={free:{basicDashboard:!0,quickLog:!0,progressTracking:!0,hasAds:!0,maxMealPlansPerMonth:2,maxWorkoutsPerMonth:2,aiChatMessages:10,advancedAnalytics:!1,wearableIntegration:!1,photoRecognition:!1,nutritionistAccess:!1,downloadReports:!1,customGoals:!1,prioritySupport:!1},premium:{basicDashboard:!0,quickLog:!0,progressTracking:!0,hasAds:!1,maxMealPlansPerMonth:-1,maxWorkoutsPerMonth:-1,aiChatMessages:-1,advancedAnalytics:!0,wearableIntegration:!1,photoRecognition:!1,nutritionistAccess:!1,downloadReports:!0,customGoals:!0,prioritySupport:!1},pro:{basicDashboard:!0,quickLog:!0,progressTracking:!0,hasAds:!1,maxMealPlansPerMonth:-1,maxWorkoutsPerMonth:-1,aiChatMessages:-1,advancedAnalytics:!0,downloadReports:!0,customGoals:!0,wearableIntegration:!0,photoRecognition:!1,nutritionistAccess:!0,prioritySupport:!0,mealPlanHistory:!0,workoutHistory:!0,biometricTracking:!0},elite:{basicDashboard:!0,quickLog:!0,progressTracking:!0,hasAds:!1,maxMealPlansPerMonth:-1,maxWorkoutsPerMonth:-1,aiChatMessages:-1,advancedAnalytics:!0,downloadReports:!0,customGoals:!0,wearableIntegration:!0,nutritionistAccess:!0,prioritySupport:!0,mealPlanHistory:!0,workoutHistory:!0,biometricTracking:!0,photoRecognition:!0,personalCoach:!0,videoConsultations:!0,dnaAnalysis:!0,premiumRecipes:!0,aiNutritionOptimization:!0}},La=()=>{const{plan:e,isFree:t,isPremium:s,isPro:r,isElite:i,loading:n,isActive:o}=(()=>{var e;const{user:t}=Fn(),[s,r]=m.useState(null),[i,n]=m.useState(!0);m.useEffect(()=>{t?o():(r(null),n(!1))},[t]);const o=async()=>{try{n(!0);const e=await Ea(t.id);r(e)}catch(e){r(null)}finally{n(!1)}},a=null==s?void 0:s.subscription_plans,l=(null==(e=null==a?void 0:a.name)?void 0:e.toLowerCase())||"base";return{subscription:s,plan:a,loading:i,isActive:"active"===(null==s?void 0:s.status),isPremium:"premium"===l,isPro:"ultimate"===l,isElite:"elite"===l,isFree:!s||"base"===l||"free"===l,refresh:o}})(),a=i?"elite":r?"pro":s?"premium":"free",l=Da[a];return{hasAccess:e=>o||t?l[e]||!1:Da.free[e]||!1,hasAds:l.hasAds||!1,canUse:(e,t=0)=>{const s=l[e];return-1===s||(!0===s||"number"==typeof s&&t<s)},getRemainingUsage:(e,t=0)=>{const s=l[e];return-1===s||!0===s?-1:"number"==typeof s?Math.max(0,s-t):0},features:l,planKey:a,planName:(null==e?void 0:e.name)||"Free",loading:n}},$a=()=>{const{user:e}=Fn(),{hasAds:t,planKey:s}=La(),[r,i]=m.useState({}),[n,o]=m.useState(!1),a=m.useRef(new Set),l=!e||t,c=l,u=m.useCallback(async t=>{if(!l)return null;try{const r=e?"free"===s?"Base":s:"Base",{data:i,error:n}=await Nn.from("ad_campaigns").select("\n          *,\n          ad_placements!inner(*)\n        ").eq("ad_placements.name",t).eq("is_active",!0).eq("status","active").lte("start_date",(new Date).toISOString()).or(`end_date.is.null,end_date.gt.${(new Date).toISOString()}`).contains("target_plans",[r]).order("cost_per_click",{ascending:!1}).limit(1).single();return n&&"PGRST116"!==n.code?null:i||null}catch(r){return null}},[l,s,e]),d=m.useCallback(async(t,s,r)=>{if(!l||!t)return null;const i=`${t}-${r}`;if(a.current.has(i))return null;a.current.add(i);try{const{data:i,error:n}=await Nn.from("ad_impressions").insert({campaign_id:t,placement_id:s,user_id:(null==e?void 0:e.id)||null,page_path:r,referrer:document.referrer,user_agent:navigator.userAgent,device_type:f(),viewed_at:(new Date).toISOString()}).select().single();if(n)throw n;return await Nn.rpc("increment_campaign_impressions",{campaign_uuid:t}),i}catch(n){return null}},[l,e]),h=m.useCallback(async(t,s,r)=>{if(!l||!t)return null;try{const{data:i,error:n}=await Nn.from("ad_clicks").insert({campaign_id:t,impression_id:s,user_id:(null==e?void 0:e.id)||null,page_path:r}).select().single();if(n)throw n;return await Nn.rpc("increment_campaign_clicks",{campaign_uuid:t}),i}catch(i){return null}},[l,e]),p=m.useCallback(async(t,s,r,i=0)=>{if(!t)return null;try{const{data:n,error:o}=await Nn.from("ad_conversions").insert({campaign_id:t,click_id:s,user_id:(null==e?void 0:e.id)||null,conversion_type:r,conversion_value:i}).select().single();if(o)throw o;return await Nn.rpc("increment_campaign_conversions",{campaign_uuid:t}),n}catch(n){return null}},[e]),g=m.useCallback(async t=>{if((null==e?void 0:e.id)&&t)try{await Nn.from("user_ad_interactions").upsert({user_id:e.id,campaign_id:t,dismissed:!0,date:(new Date).toISOString().split("T")[0]},{onConflict:"user_id,campaign_id,date"})}catch(s){}},[e]),f=()=>{const e=navigator.userAgent;return/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(e)?"tablet":/Mobile|Android|iP(hone|od)|IEMobile|BlackBerry|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(e)?"mobile":"desktop"};return{hasAds:c,campaigns:r,loading:n,fetchCampaignForPlacement:u,trackImpression:d,trackClick:h,trackConversion:p,dismissAd:g}},Fa=()=>{const[e,t]=m.useState([]),[s,r]=m.useState([]),[i,n]=m.useState(null),[o,a]=m.useState(!1),l=m.useCallback(async()=>{a(!0);try{const{data:e,error:s}=await Nn.from("ad_placements").select("*").order("priority",{ascending:!1});if(s)throw s;t(e||[])}catch(e){}finally{a(!1)}},[]),c=m.useCallback(async()=>{a(!0);try{const{data:e,error:t}=await Nn.from("ad_campaigns").select("\n          *,\n          ad_placements(name, display_name, placement_type)\n        ").order("created_at",{ascending:!1});if(t)throw t;r(e||[])}catch(e){}finally{a(!1)}},[]),u=m.useCallback(async e=>{try{const{data:t,error:s}=await Nn.from("ad_campaigns").insert(e).select().single();if(s)throw s;return await c(),{success:!0,data:t}}catch(t){return{success:!1,error:t.message}}},[c]),d=m.useCallback(async(e,t)=>{try{const{data:s,error:r}=await Nn.from("ad_campaigns").update({...t,updated_at:(new Date).toISOString()}).eq("id",e).select().single();if(r)throw r;return await c(),{success:!0,data:s}}catch(s){return{success:!1,error:s.message}}},[c]),h=m.useCallback(async e=>{try{const{error:t}=await Nn.from("ad_campaigns").delete().eq("id",e);if(t)throw t;return await c(),{success:!0}}catch(t){return{success:!1,error:t.message}}},[c]),p=m.useCallback(async(e,t)=>d(e,{is_active:t}),[d]),g=m.useCallback(async(e=30)=>{a(!0);try{const t=new Date;t.setDate(t.getDate()-e);const{count:s}=await Nn.from("ad_impressions").select("*",{count:"exact",head:!0}).gte("viewed_at",t.toISOString()),{count:r}=await Nn.from("ad_clicks").select("*",{count:"exact",head:!0}).gte("clicked_at",t.toISOString()),{count:i}=await Nn.from("ad_conversions").select("*",{count:"exact",head:!0}).gte("converted_at",t.toISOString()),{data:o}=await Nn.from("ad_campaigns").select("id, name, total_impressions, total_clicks, total_conversions, cost_per_click, cost_per_impression").eq("is_active",!0).order("total_impressions",{ascending:!1}).limit(10),a=s>0?r/s*100:0,l=r>0?i/r*100:0;let c=0;o&&o.forEach(e=>{c+=e.total_impressions*(e.cost_per_impression||.005),c+=e.total_clicks*(e.cost_per_click||.5)}),n({totalImpressions:s||0,totalClicks:r||0,totalConversions:i||0,ctr:a.toFixed(2),cvr:l.toFixed(2),estimatedRevenue:c.toFixed(2),campaignPerformance:o||[],dateRange:e})}catch(t){}finally{a(!1)}},[]);return{placements:e,campaigns:s,analytics:i,loading:o,fetchPlacements:l,fetchCampaigns:c,createCampaign:u,updateCampaign:d,deleteCampaign:h,toggleCampaignStatus:p,fetchAnalytics:g}},Ua=()=>{const t=x(),{hasAds:s,fetchCampaignForPlacement:r,trackImpression:i,trackClick:n,dismissAd:o}=$a(),[a,l]=m.useState(null),[c,u]=m.useState(null),[d,h]=m.useState(!1),[p,g]=m.useState(!0),f=["/app/admin","/login","/signup","/auth"].some(e=>t.pathname.startsWith(e));m.useEffect(()=>{(async()=>{if(!s||f)return void g(!1);const e=await r("bottom_banner");l(e),g(!1)})()},[s,f,r]),m.useEffect(()=>{if(!a||c)return;(async()=>{const e=await i(a.id,a.placement_id,t.pathname);u(e)})()},[a,c,i,t.pathname]);return m.useEffect(()=>{sessionStorage.getItem("bottom_banner_dismissed")&&h(!0)},[]),!s||f||d||p?null:a?e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50",children:e.jsx("div",{className:"backdrop-blur-sm border-t border-primary/30 shadow-lg",style:{backgroundColor:a.background_color||"rgba(22, 163, 74, 0.95)",color:a.text_color||"#ffffff"},children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.image_url&&e.jsx("img",{src:a.image_url,alt:"",className:"w-10 h-10 object-cover rounded flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[9px] uppercase tracking-wider opacity-70 font-medium",children:"Ad"}),e.jsx("p",{className:"font-medium text-sm",children:a.title})]}),a.subtitle&&e.jsx("p",{className:"text-xs opacity-80",children:a.subtitle})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Yo,{size:"sm",onClick:async()=>{a&&(await n(a.id,null==c?void 0:c.id,t.pathname),a.cta_url&&(a.cta_url.startsWith("/")?window.location.href=a.cta_url:window.open(a.cta_url,"_blank","noopener,noreferrer")))},className:"bg-white text-black hover:bg-white/90 font-semibold text-xs h-8 gap-1",children:[a.cta_text,e.jsx(we,{className:"w-3 h-3"})]}),e.jsx("button",{onClick:async()=>{a&&await o(a.id),h(!0),sessionStorage.setItem("bottom_banner_dismissed","true")},className:"opacity-80 hover:opacity-100 p-1","aria-label":"Close",children:e.jsx(O,{className:"w-4 h-4"})})]})]})})})}):e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50",children:e.jsx("div",{className:"bg-gradient-to-r from-primary/95 to-green-600/95 backdrop-blur-sm border-t border-primary/30 shadow-lg",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(z,{className:"w-5 h-5 text-white flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-white font-medium text-sm",children:"Upgrade to Premium for ad-free experience & unlimited features!"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Yo,{size:"sm",onClick:()=>window.location.href="/pricing",className:"bg-white text-primary hover:bg-white/90 font-semibold text-xs h-8",children:"Upgrade Now"}),e.jsx("button",{onClick:()=>h(!0),className:"text-white/80 hover:text-white p-1","aria-label":"Close",children:e.jsx(O,{className:"w-4 h-4"})})]})]})})})})},Ma=()=>{const{pathname:e}=x();return m.useEffect(()=>{window.scrollTo({top:0,left:0,behavior:"instant"})},[e]),null},Ba=m.lazy(()=>Se(()=>import("./HomePage-cf4d8883.js"),["assets/HomePage-cf4d8883.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a1dab2c4.js","assets/OnboardingSurvey-c214c47f.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js","assets/CheckoutDialog-a346ec16.js","assets/AdContainer-25659e4c.js","assets/switch-6cba4f79.js","assets/select-b96110db.js","assets/table-a5ec2ee9.js","assets/card-5ef2c077.js","assets/tabs-2a9eaf96.js"])),qa=m.lazy(()=>Se(()=>import("./FeaturesPage-9da945db.js"),["assets/FeaturesPage-9da945db.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js","assets/SiteLayout-a1dab2c4.js","assets/OnboardingSurvey-c214c47f.js","assets/dialog-f70f7e7c.js","assets/FloatingFruits-609761b3.js","assets/AdContainer-25659e4c.js","assets/switch-6cba4f79.js","assets/select-b96110db.js","assets/table-a5ec2ee9.js","assets/card-5ef2c077.js","assets/tabs-2a9eaf96.js"])),Ha=m.lazy(()=>Se(()=>import("./PricingPage-ffb69b52.js"),["assets/PricingPage-ffb69b52.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a1dab2c4.js","assets/OnboardingSurvey-c214c47f.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js","assets/CheckoutDialog-a346ec16.js"])),za=m.lazy(()=>Se(()=>import("./BlogPage-d6e9ecf6.js"),["assets/BlogPage-d6e9ecf6.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/card-5ef2c077.js","assets/tabs-2a9eaf96.js","assets/SiteLayout-a1dab2c4.js","assets/OnboardingSurvey-c214c47f.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js","assets/purify.es-3247f85f.js","assets/FloatingFruits-609761b3.js","assets/AdContainer-25659e4c.js"])),Wa=m.lazy(()=>Se(()=>import("./ReviewsPage-ac7d5613.js"),["assets/ReviewsPage-ac7d5613.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a1dab2c4.js","assets/OnboardingSurvey-c214c47f.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js","assets/card-5ef2c077.js"])),Va=m.lazy(()=>Se(()=>import("./ContactPage-11cb1673.js"),["assets/ContactPage-11cb1673.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a1dab2c4.js","assets/OnboardingSurvey-c214c47f.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js","assets/AdContainer-25659e4c.js","assets/switch-6cba4f79.js","assets/select-b96110db.js","assets/table-a5ec2ee9.js","assets/card-5ef2c077.js","assets/tabs-2a9eaf96.js"])),Ga=m.lazy(()=>Se(()=>import("./FaqPage-b87a7c71.js"),["assets/FaqPage-b87a7c71.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a1dab2c4.js","assets/OnboardingSurvey-c214c47f.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),Ka=m.lazy(()=>Se(()=>import("./AboutPage-eeb70a81.js"),["assets/AboutPage-eeb70a81.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a1dab2c4.js","assets/OnboardingSurvey-c214c47f.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),Ya=m.lazy(()=>Se(()=>import("./UserDashboard-fbc4c453.js").then(e=>e.a),["assets/UserDashboard-fbc4c453.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/card-5ef2c077.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js","assets/QuickLogMeal-f5a50606.js","assets/select-b96110db.js","assets/tabs-2a9eaf96.js","assets/alert-dialog-a0463d92.js","assets/AdContainer-25659e4c.js","assets/progress-4bfc6d82.js","assets/switch-6cba4f79.js","assets/MessagingCenter-0ba46e90.js","assets/checkbox-50f8b8bc.js"])),Ja=m.lazy(()=>Se(()=>import("./NutritionistDashboardV2-c82ec9b9.js"),["assets/NutritionistDashboardV2-c82ec9b9.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/EnhancedBlogManager-8bca7b42.js","assets/card-5ef2c077.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js","assets/tabs-2a9eaf96.js","assets/checkbox-50f8b8bc.js","assets/dialog-f70f7e7c.js","assets/dropdown-menu-0d9d9d7b.js","assets/progress-4bfc6d82.js","assets/select-b96110db.js","assets/switch-6cba4f79.js"])),Qa=m.lazy(()=>Se(()=>import("./AdminDashboard-85a1a93e.js"),["assets/AdminDashboard-85a1a93e.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/EnhancedBlogManager-8bca7b42.js","assets/card-5ef2c077.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js","assets/tabs-2a9eaf96.js","assets/checkbox-50f8b8bc.js","assets/select-b96110db.js","assets/dialog-f70f7e7c.js","assets/alert-dialog-a0463d92.js","assets/table-a5ec2ee9.js","assets/dropdown-menu-0d9d9d7b.js","assets/separator-62a3502a.js","assets/switch-6cba4f79.js","assets/RevenueAnalyticsPage-f612ba6b.js","assets/UserDashboard-fbc4c453.js","assets/QuickLogMeal-f5a50606.js","assets/AdContainer-25659e4c.js","assets/progress-4bfc6d82.js","assets/MessagingCenter-0ba46e90.js"])),Xa=m.lazy(()=>Se(()=>import("./OnboardingSurvey-c214c47f.js"),["assets/OnboardingSurvey-c214c47f.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),Za=m.lazy(()=>Se(()=>import("./ProfilePage-91fa939b.js"),["assets/ProfilePage-91fa939b.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/card-5ef2c077.js","assets/checkbox-50f8b8bc.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),el=m.lazy(()=>Se(()=>import("./EnhancedBlogPostEditor-62b3e364.js"),["assets/EnhancedBlogPostEditor-62b3e364.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/card-5ef2c077.js","assets/switch-6cba4f79.js","assets/tabs-2a9eaf96.js","assets/select-b96110db.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js","assets/dropdown-menu-0d9d9d7b.js","assets/dialog-f70f7e7c.js","assets/separator-62a3502a.js"])),tl=m.lazy(()=>Se(()=>import("./BlogTagsManager-b95a1fad.js"),["assets/BlogTagsManager-b95a1fad.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/card-5ef2c077.js","assets/tabs-2a9eaf96.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js","assets/alert-dialog-a0463d92.js"])),sl=m.lazy(()=>Se(()=>import("./AiCoachPage-52dd2ec3.js"),["assets/AiCoachPage-52dd2ec3.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),rl=m.lazy(()=>Se(()=>import("./SurveyPage-b566fee8.js"),["assets/SurveyPage-b566fee8.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),il=m.lazy(()=>Se(()=>import("./RevenueAnalyticsPage-f612ba6b.js"),["assets/RevenueAnalyticsPage-f612ba6b.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/card-5ef2c077.js","assets/tabs-2a9eaf96.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),nl=m.lazy(()=>Se(()=>import("./BillingPage-e5d16031.js"),["assets/BillingPage-e5d16031.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/card-5ef2c077.js","assets/tabs-2a9eaf96.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js","assets/dialog-f70f7e7c.js"])),ol=m.lazy(()=>Se(()=>import("./SupportPage-a1ee357a.js"),["assets/SupportPage-a1ee357a.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/card-5ef2c077.js","assets/select-b96110db.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js","assets/tabs-2a9eaf96.js"])),al=m.lazy(()=>Se(()=>import("./ResetPasswordPage-30536700.js"),["assets/ResetPasswordPage-30536700.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),ll=m.lazy(()=>Se(()=>import("./NutritionPageFunctional-08d6e72f.js"),["assets/NutritionPageFunctional-08d6e72f.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/QuickLogMeal-f5a50606.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js","assets/select-b96110db.js"])),cl=m.lazy(()=>Se(()=>import("./FitnessPage-c08b75a1.js"),["assets/FitnessPage-c08b75a1.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),ul=m.lazy(()=>Se(()=>import("./ProgressPage-5026b47c.js"),["assets/ProgressPage-5026b47c.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),dl=m.lazy(()=>Se(()=>import("./MessagingCenter-0ba46e90.js"),["assets/MessagingCenter-0ba46e90.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/card-5ef2c077.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),hl=m.lazy(()=>Se(()=>import("./PrivacyPolicyPage-b6677feb.js"),["assets/PrivacyPolicyPage-b6677feb.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a1dab2c4.js","assets/OnboardingSurvey-c214c47f.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),pl=m.lazy(()=>Se(()=>import("./TermsOfServicePage-d22497e7.js"),["assets/TermsOfServicePage-d22497e7.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a1dab2c4.js","assets/OnboardingSurvey-c214c47f.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),gl=m.lazy(()=>Se(()=>import("./AdminFAQPage-f651705f.js"),["assets/AdminFAQPage-f651705f.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/card-5ef2c077.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),fl=m.lazy(()=>Se(()=>import("./DownloadPage-06eb5001.js"),["assets/DownloadPage-06eb5001.js","assets/vendor-ui-8934955f.js","assets/vendor-react-c35372bd.js","assets/SiteLayout-a1dab2c4.js","assets/OnboardingSurvey-c214c47f.js","assets/dialog-f70f7e7c.js","assets/vendor-utils-1c9b7ece.js","assets/vendor-editor-7586347a.js"])),ml=()=>e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("img",{src:Un,alt:"GreenoFig Logo",className:"w-24 h-24 animate-pulse"})}),yl=({children:t})=>{const{user:s,userProfile:r,loading:i}=Fn(),n=x();return s&&r?t:i&&!s?e.jsx(ml,{}):s?t:e.jsx(P,{to:"/login",state:{from:n},replace:!0})},vl=({children:t})=>{const{user:s,userProfile:r,loading:i}=Fn();return i&&!s?e.jsx(ml,{}):"admin"!==(null==r?void 0:r.role)&&"super_admin"!==(null==r?void 0:r.role)?e.jsx(P,{to:"/app",replace:!0}):t},bl=({children:t})=>{const{user:s,userProfile:r,loading:i}=Fn();return i&&!s?e.jsx(ml,{}):["admin","super_admin","nutritionist"].includes(null==r?void 0:r.role)?t:e.jsx(P,{to:"/app",replace:!0})},wl=()=>{const{user:t,userProfile:s,loading:r}=Fn();if(r||t&&!s)return e.jsx(ml,{});if(!t)return e.jsx(P,{to:"/login",replace:!0});if(!s)return e.jsx(P,{to:"/login",replace:!0});const i=s.username;if(i)return e.jsx(P,{to:`/app/${i}`,replace:!0});const n=s.role;return"admin"===n||"super_admin"===n?e.jsx(P,{to:"/app/admin",replace:!0}):"nutritionist"===n?e.jsx(P,{to:"/app/nutritionist",replace:!0}):e.jsx(P,{to:"/app/user",replace:!0})},xl=()=>{const{user:t,loading:s}=Fn();return s?e.jsx(ml,{}):t?e.jsx(P,{to:"/app",replace:!0}):e.jsx(P,{to:"/home",replace:!0})};function _l(){const t=x();return e.jsxs(e.Fragment,{children:[e.jsx(Ma,{}),e.jsxs(Gt,{children:[e.jsx("title",{children:"GreenoFig - AI-Powered Health & Wellness"}),e.jsx("meta",{name:"description",content:"Your AI-Powered Health Companion. Achieve your wellness goals with personalized nutrition, fitness, and lifestyle coaching."})]}),e.jsx(m.Suspense,{fallback:e.jsx(ml,{}),children:e.jsx(F,{mode:"wait",children:e.jsxs(S,{location:t,children:[e.jsx(T,{path:"/login",element:e.jsx(Qo,{logoUrl:Un})}),e.jsx(T,{path:"/signup",element:e.jsx(Qo,{logoUrl:Un,initialIsLogin:!1})}),e.jsx(T,{path:"/reset-password",element:e.jsx(al,{})}),e.jsxs(T,{path:"/app",element:e.jsx(yl,{children:e.jsx(pa,{logoUrl:Un})}),children:[e.jsx(T,{index:!0,element:e.jsx(wl,{})}),e.jsx(T,{path:"user",element:e.jsx(Ya,{logoUrl:Un})}),e.jsx(T,{path:"nutritionist",element:e.jsx(Ja,{logoUrl:Un})}),e.jsx(T,{path:"nutritionist/dashboard",element:e.jsx(Ja,{logoUrl:Un})}),e.jsx(T,{path:"nutritionist/clients",element:e.jsx(Ja,{logoUrl:Un})}),e.jsx(T,{path:"nutritionist/onboarding",element:e.jsx(Ja,{logoUrl:Un})}),e.jsx(T,{path:"nutritionist/goals",element:e.jsx(Ja,{logoUrl:Un})}),e.jsx(T,{path:"nutritionist/meals",element:e.jsx(Ja,{logoUrl:Un})}),e.jsx(T,{path:"nutritionist/schedule",element:e.jsx(Ja,{logoUrl:Un})}),e.jsx(T,{path:"nutritionist/messages",element:e.jsx(Ja,{logoUrl:Un})}),e.jsx(T,{path:"nutritionist/analytics",element:e.jsx(Ja,{logoUrl:Un})}),e.jsx(T,{path:"nutritionist/payments",element:e.jsx(Ja,{logoUrl:Un})}),e.jsx(T,{path:"nutritionist/resources",element:e.jsx(Ja,{logoUrl:Un})}),e.jsx(T,{path:"nutritionist/blog",element:e.jsx(Ja,{logoUrl:Un})}),e.jsx(T,{path:"nutritionist/settings",element:e.jsx(Ja,{logoUrl:Un})}),e.jsx(T,{path:"admin",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/tier-preview",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/analytics",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/revenue",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/errors",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/customers",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/subscriptions",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/payments",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/coupons",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/referrals",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/issues",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/messaging",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/blog",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/website",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/ads",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/ai-coach",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"admin/studio",element:e.jsx(Qa,{logoUrl:Un})}),e.jsx(T,{path:"profile",element:e.jsx(Za,{logoUrl:Un})}),e.jsx(T,{path:"billing",element:e.jsx(nl,{})}),e.jsx(T,{path:"support",element:e.jsx(ol,{})}),e.jsx(T,{path:"ai-coach",element:e.jsx(sl,{})}),e.jsx(T,{path:"nutrition",element:e.jsx(ll,{})}),e.jsx(T,{path:"fitness",element:e.jsx(cl,{})}),e.jsx(T,{path:"progress",element:e.jsx(ul,{})}),e.jsx(T,{path:"messages",element:e.jsx(dl,{})}),e.jsx(T,{path:"admin/blog/new",element:e.jsx(bl,{children:e.jsx(el,{logoUrl:Un})})}),e.jsx(T,{path:"admin/blog/edit/:postId",element:e.jsx(bl,{children:e.jsx(el,{logoUrl:Un})})}),e.jsx(T,{path:"admin/blog/tags",element:e.jsx(vl,{children:e.jsx(tl,{logoUrl:Un})})}),e.jsx(T,{path:"nutritionist/blog/new",element:e.jsx(bl,{children:e.jsx(el,{logoUrl:Un})})}),e.jsx(T,{path:"nutritionist/blog/edit/:postId",element:e.jsx(bl,{children:e.jsx(el,{logoUrl:Un})})}),e.jsx(T,{path:"admin/faq",element:e.jsx(vl,{children:e.jsx(gl,{})})}),e.jsx(T,{path:"admin/revenue",element:e.jsx(vl,{children:e.jsx(il,{})})})]}),e.jsx(T,{path:"/onboarding",element:e.jsx(yl,{children:e.jsx(Xa,{logoUrl:Un})})}),e.jsx(T,{path:"/survey",element:e.jsx(rl,{logoUrl:Un})}),e.jsx(T,{path:"/home",element:e.jsx(Ba,{logoUrl:Un})}),e.jsx(T,{path:"/features",element:e.jsx(qa,{logoUrl:Un})}),e.jsx(T,{path:"/pricing",element:e.jsx(Ha,{logoUrl:Un})}),e.jsx(T,{path:"/download",element:e.jsx(fl,{logoUrl:Un})}),e.jsx(T,{path:"/blog",element:e.jsx(za,{logoUrl:Un})}),e.jsx(T,{path:"/blog/:postId",element:e.jsx(za,{logoUrl:Un})}),e.jsx(T,{path:"/reviews",element:e.jsx(Wa,{logoUrl:Un})}),e.jsx(T,{path:"/contact",element:e.jsx(Va,{logoUrl:Un})}),e.jsx(T,{path:"/faq",element:e.jsx(Ga,{logoUrl:Un})}),e.jsx(T,{path:"/about",element:e.jsx(Ka,{logoUrl:Un})}),e.jsx(T,{path:"/privacy-policy",element:e.jsx(hl,{logoUrl:Un})}),e.jsx(T,{path:"/terms-of-service",element:e.jsx(pl,{logoUrl:Un})}),e.jsx(T,{path:"/",element:e.jsx(xl,{})}),e.jsx(T,{path:"/*",element:e.jsx(P,{to:"/home",replace:!0})})]},t.pathname)})}),e.jsx(cs,{}),e.jsx(Ua,{})]})}const kl=new class{constructor(){this.isInitialized=!1}init(){this.isInitialized||(window.onerror=(e,t,s,r,i)=>(this.logError({message:e.toString(),stack:null==i?void 0:i.stack,type:"runtime_error",url:window.location.href,source:t,line:s,column:r}),!1),window.addEventListener("unhandledrejection",e=>{var t;this.logError({message:`Unhandled Promise Rejection: ${e.reason}`,stack:null==(t=e.reason)?void 0:t.stack,type:"promise_rejection",url:window.location.href})}),this.isInitialized=!0)}async logError({message:e,stack:t="",type:s="unknown",componentName:r="unknown",severity:i="medium",url:n=window.location.href,source:o="",line:a=null,column:l=null,userId:c=null}){try{if(!c){const{data:{user:e}}=await Nn.auth.getUser();c=(null==e?void 0:e.id)||null}const u={error_message:e,error_stack:t,error_type:s,component_name:r,user_id:c,user_agent:navigator.userAgent,url:n,severity:i,status:"open",source_file:o,line_number:a,column_number:l,browser_info:{language:navigator.language,platform:navigator.platform,screen:{width:window.screen.width,height:window.screen.height}}},{error:d}=await Nn.from("error_logs").insert([u])}catch(u){}}log(e,t="unknown",s="medium"){this.logError({message:e.message||e.toString(),stack:e.stack,type:"manual_log",componentName:t,severity:s})}};"undefined"!=typeof window&&kl.init();const{slice:jl,forEach:Sl}=[];const Tl=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Pl={create(e,t,s,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};s&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+60*s*1e3)),r&&(i.domain=r),document.cookie=function(e,t){const s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"};let r=`${e}=${encodeURIComponent(t)}`;if(s.maxAge>0){const e=s.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(e)}`}if(s.domain){if(!Tl.test(s.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${s.domain}`}if(s.path){if(!Tl.test(s.path))throw new TypeError("option path is invalid");r+=`; Path=${s.path}`}if(s.expires){if("function"!=typeof s.expires.toUTCString)throw new TypeError("option expires is invalid");r+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(r+="; HttpOnly"),s.secure&&(r+="; Secure"),s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(r+="; Partitioned"),r}(e,t,i)},read(e){const t=`${e}=`,s=document.cookie.split(";");for(let r=0;r<s.length;r++){let e=s[r];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var El={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!=typeof document)return Pl.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:s,cookieMinutes:r,cookieDomain:i,cookieOptions:n}=t;s&&"undefined"!=typeof document&&Pl.create(s,e,r,i,n)}},Cl={name:"querystring",lookup(e){var t;let s,{lookupQuerystring:r}=e;if("undefined"!=typeof window){let{search:e}=window.location;!window.location.search&&(null==(t=window.location.hash)?void 0:t.indexOf("?"))>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const i=e.substring(1).split("&");for(let t=0;t<i.length;t++){const e=i[t].indexOf("=");if(e>0){i[t].substring(0,e)===r&&(s=i[t].substring(e+1))}}}return s}},Al={name:"hash",lookup(e){var t;let s,{lookupHash:r,lookupFromHashIndex:i}=e;if("undefined"!=typeof window){const{hash:e}=window.location;if(e&&e.length>2){const n=e.substring(1);if(r){const e=n.split("&");for(let t=0;t<e.length;t++){const i=e[t].indexOf("=");if(i>0){e[t].substring(0,i)===r&&(s=e[t].substring(i+1))}}}if(s)return s;if(!s&&i>-1){const s=e.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(s))return;return null==(t=s["number"==typeof i?i:0])?void 0:t.replace("/","")}}}return s}};let Ol=null;const Nl=()=>{if(null!==Ol)return Ol;try{if(Ol="undefined"!=typeof window&&null!==window.localStorage,!Ol)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(e){Ol=!1}return Ol};var Rl={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Nl())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:s}=t;s&&Nl()&&window.localStorage.setItem(s,e)}};let Il=null;const Dl=()=>{if(null!==Il)return Il;try{if(Il="undefined"!=typeof window&&null!==window.sessionStorage,!Il)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(e){Il=!1}return Il};var Ll={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&Dl())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:s}=t;s&&Dl()&&window.sessionStorage.setItem(s,e)}},$l={name:"navigator",lookup(e){const t=[];if("undefined"!=typeof navigator){const{languages:e,userLanguage:s,language:r}=navigator;if(e)for(let i=0;i<e.length;i++)t.push(e[i]);s&&t.push(s),r&&t.push(r)}return t.length>0?t:void 0}},Fl={name:"htmlTag",lookup(e){let t,{htmlTag:s}=e;const r=s||("undefined"!=typeof document?document.documentElement:null);return r&&"function"==typeof r.getAttribute&&(t=r.getAttribute("lang")),t}},Ul={name:"path",lookup(e){var t;let{lookupFromPathIndex:s}=e;if("undefined"==typeof window)return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(r))return;return null==(t=r["number"==typeof s?s:0])?void 0:t.replace("/","")}},Ml={name:"subdomain",lookup(e){var t,s;let{lookupFromSubdomainIndex:r}=e;const i="number"==typeof r?r+1:1,n="undefined"!=typeof window&&(null==(s=null==(t=window.location)?void 0:t.hostname)?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(n)return n[i]}};let Bl=!1;try{document.cookie,Bl=!0}catch(Kl){}const ql=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Bl||ql.splice(1,1);class Hl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return Sl.call(jl.call(arguments,1),t=>{if(t)for(const s in t)void 0===e[s]&&(e[s]=t[s])}),e}(t,this.options||{},{order:ql,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"==typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(El),this.addDetector(Cl),this.addDetector(Rl),this.addDetector(Ll),this.addDetector($l),this.addDetector(Fl),this.addDetector(Ul),this.addDetector(Ml),this.addDetector(Al)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach(e=>{if(this.detectors[e]){let s=this.detectors[e].lookup(this.options);s&&"string"==typeof s&&(s=[s]),s&&(t=t.concat(s))}}),t=t.filter(e=>{return null!=e&&!("string"==typeof(t=e)&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(e=>e.test(t)));var t}).map(e=>this.options.convertDetectedLanguage(e)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)}))}}Hl.type="languageDetector";const zl={en:{translation:{nav:{home:"Home",features:"Features",pricing:"Pricing",blog:"Blog",reviews:"Reviews",contact:"Contact",faq:"FAQ",about:"About",download:"Download",login:"Login",signup:"Sign Up",dashboard:"Dashboard",logout:"Logout"},home:{hero:{title:"Your Professional Health Companion",subtitle:"Achieve your wellness goals with hyper-personalized nutrition, fitness, and lifestyle coaching guided by certified nutritionists and registered dietitians.",getStarted:"Get Started",learnMore:"Explore Features"},features:{title:"Transform Your Health Journey",subtitle:"Unlock your full potential with our suite of professionally designed features.",aiMealPlans:"Expert Meal Plans",aiMealPlansDesc:"Get delicious, easy-to-make meal plans tailored to your goals and dietary preferences by certified nutritionists.",personalizedWorkouts:"Personalized Workouts",personalizedWorkoutsDesc:"Custom-built exercise routines that adapt to your progress and keep you challenged.",aiCoach:"Your Professional Coach",aiCoachDesc:"24/7 guidance and motivation from your certified nutrition team."},pricing:{title:"Choose Your Perfect Plan",subtitle:"Simple, transparent pricing. Save 25% with any yearly plan!",mostPopular:"Most Popular",perMonth:"/mo",choosePlan:"Choose",viewAllPlans:"View All Plans & Features"},howItWorks:{title:"How It Works",subtitle:"Start your transformation in three simple steps.",step1Title:"Tell Us Your Goals",step1Text:"Complete a quick survey to help our nutritionists understand you.",step2Title:"Get Your Personalized Plan",step2Text:"Receive your unique fitness and nutrition plan instantly.",step3Title:"Achieve Your Best Self",step3Text:"Track your progress, adapt, and reach your wellness goals."},whyChoose:{title:"Why Choose GreenoFig?",subtitle:"Join thousands of users transforming their health",scienceBacked:"Science-Backed",scienceBackedDesc:"Plans built on the latest nutrition and exercise research.",personalizedAI:"Personalized Coaching",personalizedAIDesc:"Evidence-based methods that adapt to your unique needs.",support247:"24/7 Support",support247Desc:"Get help whenever you need it from our expert team."},reviews:{title:"Loved by users worldwide",review1:"GreenoFig changed my life. I've lost 20 pounds and have never felt more energetic. The professional coach is like having a personal cheerleader!",review2:"As a busy professional, the meal plans are a lifesaver. Healthy eating has never been so easy and delicious.",review3:"I love how it syncs with my watch. Seeing all my health data in one place is incredibly motivating. Highly recommend!",author1:"Sarah L.",author2:"Mike T.",author3:"Jessica P."},cta:{title:"Ready to Transform Your Health?",subtitle:"Join thousands of users already on their wellness journey",button:"Start Your Free Trial"}},pricing:{title:"Choose Your Perfect Plan",subtitle:"Simple, transparent pricing. Save 25% with any yearly plan!",monthly:"Monthly",yearly:"Yearly",mostPopular:"Most Popular",perMonth:"/mo",perYear:"/yr",selectPlan:"Select Plan",currentPlan:"Current Plan",upgrade:"Upgrade",viewAllPlans:"View All Plans & Features",freePlan:"Free",basicPlan:"Basic",premiumPlan:"Premium",ultimatePlan:"Ultimate",elitePlan:"Elite",planDescriptions:{Base:"Get started with essential health tracking features",Premium:"Advanced features for serious fitness enthusiasts",Ultimate:"Everything you need to reach peak performance",Elite:"The ultimate wellness experience with VIP support"},save25:"Save 25%",billed:"Billed",billedMonthly:"Billed monthly",billedYearly:"Billed yearly",features:"Features",popularChoice:"Popular Choice",bestValue:"Best Value",planFeatures:{base:{mealPlans:"2 AI meal plans per month",workoutPlans:"2 AI workout plans per month",chatMessages:"10 AI chat messages per month",basicTracking:"Basic progress tracking",communityAccess:"Community access",mobileAccess:"Mobile app access",smartLogging:"Smart meal logging"},premium:{adFree:" Ad-free experience",unlimitedMeals:"Unlimited AI meal plans",unlimitedWorkouts:"Unlimited AI workout plans",unlimitedChat:"Unlimited AI chat support",analytics:"Advanced progress analytics",goalTracking:"Goal tracking & insights",customPreferences:"Custom meal preferences",wearableSync:"Wearable device sync",reports:"Weekly & monthly reports",communityAccess:"Community access",mobileAccess:"Mobile app access"},ultimate:{everythingPremium:" Everything in Premium",nutritionists:"Access to certified nutritionists",prioritySupport:"Priority customer support",videoConsultations:"Video consultations (2/month)",mealPlanningTools:"Advanced meal planning tools",workoutBuilder:"Custom workout builder",performanceOptimization:"Performance optimization",bodyAnalysis:"Body composition analysis",exclusiveChallenges:"Exclusive challenges"},elite:{everythingUltimate:" Everything in Ultimate",photoRecognition:" Photo food recognition & logging",unlimitedCoaching:"Unlimited video coaching",doctorConsultations:"Schedule virtual consultations with licensed doctors for health concerns and medical advice (2/month)",appointmentScheduling:"Book appointments with health professionals directly through the platform",priority247:"Priority 24/7 support",supplementPlan:"Personalized supplement plan",vipAccess:"VIP community access",concierge:"Concierge service"}}},features:{title:"Powerful Features for Your Health",subtitle:"Everything you need to achieve your health goals",aiCoach:"AI Coach",aiCoachDesc:"24/7 personalized coaching powered by advanced AI",mealPlanning:"Meal Planning",mealPlanningDesc:"Custom meal plans tailored to your dietary needs",workoutTracking:"Workout Tracking",workoutTrackingDesc:"Track your exercises and monitor progress",progressMonitoring:"Progress Monitoring",progressMonitoringDesc:"Detailed analytics and insights on your journey",nutritionAnalysis:"Nutrition Analysis",nutritionAnalysisDesc:"Deep dive into your nutritional intake",smartRecommendations:"Smart Recommendations",smartRecommendationsDesc:"AI-powered suggestions based on your goals",wearableSync:"Wearable Sync",wearableSyncDesc:"Seamlessly integrate with your fitness devices",expertSupport:"Expert Support",expertSupportDesc:"Get help from certified nutritionists and trainers"},blog:{title:"Health & Wellness Blog",subtitle:"Expert insights, tips, and inspiration for your wellness journey",readMore:"Read More",backToBlog:"Back to Blog",relatedPosts:"Related Posts",tableOfContents:"Table of Contents",shareArticle:"Share Article",noPostsFound:"No posts found",loadingPosts:"Loading posts..."},contact:{title:"Get In Touch",subtitle:"Have questions? We'd love to hear from you.",pageDescription:"Have questions or feedback? We'd love to hear from you. Reach out and we'll get back to you shortly.",metaDescription:"Get in touch with the GreenoFig team. We're here to answer your questions and help with your health journey.",name:"Name",fullName:"Full Name",email:"Email",subject:"Subject",message:"Message",send:"Send Message",sending:"Sending...",successMessage:"Thank you for your message! We'll get back to you soon.",errorMessage:"Something went wrong. Please try again.",generalInquiry:"General Inquiry",supportEmail:"support@greenofig.com",salesEmail:"sales@greenofig.com",namePlaceholder:"John Doe",emailPlaceholder:"you@example.com",messagePlaceholder:"Your message...",messageSent:"Message Sent! (Just Kidding )",demoMessage:"This is a demo, but in a real app, your message would be on its way!"},faq:{title:"Frequently Asked Questions",subtitle:"Find answers to common questions about GreenoFig",pageDescription:"Have questions? We've got answers. If you can't find what you're looking for, feel free to contact us.",metaDescription:"Find answers to frequently asked questions about GreenoFig's services, plans, and features.",generalQuestions:"General Questions",subscriptionQuestions:"Subscription & Billing",technicalQuestions:"Technical Support",searchPlaceholder:"Search FAQs...",errorFetching:"Error fetching FAQs",noFaqsFound:"No FAQs Found.",checkBackSoon:"Check back soon or contact support if you have questions."},about:{title:"About GreenoFig",subtitle:"Empowering your health journey with AI",metaDescription:"Learn about the mission, philosophy, and story behind GreenoFig.",ourMission:"Our Mission",ourMissionText:"To make personalized health and wellness accessible to everyone through cutting-edge AI technology.",ourStory:"Our Story",ourTeam:"Our Team",ourValues:"Our Values",errorFetchingContent:"Error fetching page content",contentNotAvailable:"Content not available.",checkBackLater:"Please check back later or contact support."},reviews:{title:"User Reviews",subtitle:"See what our community has to say",verified:"Verified User",writeReview:"Write a Review",allReviews:"All Reviews",rating:"Rating",pageTitle:"Success Stories from Our Community",pageDescription:"See how GreenoFig is helping people just like you achieve their health and wellness goals.",metaDescription:"See what our members are saying about their success with GreenoFig. Real stories from real people transforming their health.",shareYourStory:"Share Your Story",experienceDescription:"We'd love to hear about your experience with GreenoFig.",yourName:"Your Name",namePlaceholder:"John Doe",reviewTitle:"Review Title",reviewTitlePlaceholder:"An amazing experience!",yourReview:"Your Review",reviewPlaceholder:"Tell us what you think...",ratingRequired:"Rating *",submitting:"Submitting...",submitReview:"Submit Review",noReviewsYet:"No Reviews Yet!",beTheFirst:"Be the first to share your success story with GreenoFig.",ratingRequiredError:"Rating Required",ratingRequiredMessage:"Please select a star rating before submitting.",reviewSubmitted:"Review Submitted!",thankYou:"Thank you for sharing your experience with us.",submissionFailed:"Submission Failed",tryAgainLater:"Please try again later.",errorLoadingReviews:"Error loading reviews"},download:{title:"Download GreenoFig",subtitle:"Get the app on your device",downloadIOS:"Download on App Store",downloadAndroid:"Get it on Google Play",comingSoon:"Coming Soon",getToday:"Get GreenoFig Today",appDescription:"Transform your health with AI-powered coaching. Available now on iOS, coming soon to Android.",joinBeta:"Join Beta Testing",betaDescription:"Want early access? Install directly on your iPhone using TestFlight.",contactInvite:"Contact us for invite",iosVersion:"iOS 14.0 or later",androidVersion:"Android 8.0 or later",seeInAction:"See It In Action",sneakPeek:"A sneak peek at what awaits you inside the app",screenshots:{dashboard:"Dashboard",dashboardDesc:"Track your daily health metrics",mealPlans:"Meal Plans",mealPlansDesc:"Delicious recipes personalized for you",workouts:"Workouts",workoutsDesc:"Exercise plans that work",aiCoach:"AI Coach",aiCoachDesc:"Chat with your personal coach"},powerfulFeatures:"Powerful Features",featuresDescription:"Everything you need to achieve your health goals in one app",appFeatures:{aiMealPlans:"AI Meal Plans",aiMealPlansDesc:"Personalized nutrition tailored to your goals",customWorkouts:"Custom Workouts",customWorkoutsDesc:"Exercise routines that adapt to your progress",aiCoach247:"24/7 AI Coach",aiCoach247Desc:"Your personal health companion",foodRecognition:"Food Recognition",foodRecognitionDesc:"Snap photos to log meals instantly",progressTracking:"Progress Tracking",progressTrackingDesc:"Watch your transformation in real-time",smartReminders:"Smart Reminders",smartRemindersDesc:"Never miss a meal or workout"},lovedByThousands:"Loved by Thousands",rating:"4.9",basedOnReviews:"Based on 10,000+ reviews",userReviews:{review1:"GreenoFig changed my life! Lost 20 pounds and feel amazing.",review2:"Best health app I've ever used. The AI coach is incredible!",review3:"So easy to use and the results speak for themselves!"},readyToTransform:"Ready to Transform Your Health?",joinThousands:"Join thousands of users who have already started their journey to a healthier life",downloadNow:"Download Now"},dashboard:{title:"Dashboard",welcome:"Welcome",overview:"Overview",myProgress:"My Progress",meals:"Meals",workouts:"Workouts",analytics:"Analytics",settings:"Settings",profile:"Profile",billing:"Billing",support:"Support",todaysMeals:"Today's Meals",todaysWorkout:"Today's Workout",weeklyProgress:"Weekly Progress",goals:"Goals",achievements:"Achievements",recentActivity:"Recent Activity",quickActions:"Quick Actions",generateMealPlan:"Generate Meal Plan",generateWorkout:"Generate Workout",trackProgress:"Track Progress",viewReports:"View Reports"},userDashboard:{welcome:"Welcome back",todayOverview:"Today's Overview",premiumFeatures:"Premium Features",unlockPowerfulTools:"Unlock powerful tools to supercharge your health journey",advancedToolsAvailable:"Advanced tools available in your plan",upgradeButton:"Upgrade",photoFoodRecognition:"Photo Food Recognition",photoFoodRecognitionTier:"Elite",barcodeScanner:"Barcode Scanner",barcodeScannerTier:"Premium+",wearableDevices:"Wearable Devices",wearableDevicesTier:"Premium+",foodDatabase:"Food Database",foodDatabaseTier:"Premium+",messageNutritionist:"Message Nutritionist",messageNutritionistTier:"Ultimate+",nutritionistMessaging:"Nutritionist Messaging",connectWithNutritionist:"Connect with your personal nutritionist for guidance and support",calories:"Calories",protein:"Protein",carbs:"Carbs",fats:"Fats",waterIntake:"Water Intake",stepsToday:"Steps Today",activeMinutes:"Active Minutes",sleepHours:"Sleep Hours",currentWeight:"Current Weight",targetWeight:"Target Weight",bmi:"BMI",bodyFat:"Body Fat %"},nutritionistDashboard:{title:"Nutritionist Dashboard",myClients:"My Clients",activeClients:"Active Clients",pendingRequests:"Pending Requests",totalConsultations:"Total Consultations",clientProgress:"Client Progress",upcomingAppointments:"Upcoming Appointments",recentMessages:"Recent Messages",createMealPlan:"Create Meal Plan",scheduleConsultation:"Schedule Consultation",viewClientHistory:"View Client History"},adminDashboard:{title:"Admin Dashboard",totalUsers:"Total Users",activeSubscriptions:"Active Subscriptions",revenue:"Revenue",newUsersToday:"New Users Today",userManagement:"User Management",subscriptionManagement:"Subscription Management",contentManagement:"Content Management",analyticsReports:"Analytics & Reports",systemSettings:"System Settings",supportTickets:"Support Tickets"},auth:{login:"Login",signup:"Sign Up",logout:"Logout",email:"Email",password:"Password",confirmPassword:"Confirm Password",forgotPassword:"Forgot Password?",resetPassword:"Reset Password",rememberMe:"Remember me",dontHaveAccount:"Don't have an account?",alreadyHaveAccount:"Already have an account?",signInWithGoogle:"Sign in with Google",signUpWithGoogle:"Sign up with Google",signInWithFacebook:"Sign in with Facebook",orContinueWith:"Or continue with",createAccount:"Create Account",verifyEmail:"Verify Email",resendVerification:"Resend Verification",back:"Back",fullName:"Full Name",processing:"Processing...",tagline:"Your Personal Wellness Companion",signUpForPlan:"Signing up for the",plan:"plan",missingFields:"Missing fields",fillAllFields:"Please fill in all required fields",accountCreated:"Account created! ",welcomeSetup:"Welcome! Let's get you set up."},profile:{title:"My Profile",personalInfo:"Personal Information",firstName:"First Name",lastName:"Last Name",dateOfBirth:"Date of Birth",gender:"Gender",height:"Height",weight:"Weight",targetWeight:"Target Weight",activityLevel:"Activity Level",dietaryPreferences:"Dietary Preferences",allergies:"Allergies",healthGoals:"Health Goals",updateProfile:"Update Profile",changePassword:"Change Password",deleteAccount:"Delete Account"},billing:{title:"Billing & Subscription",currentPlan:"Current Plan",billingCycle:"Billing Cycle",nextBillingDate:"Next Billing Date",paymentMethod:"Payment Method",billingHistory:"Billing History",invoices:"Invoices",updatePaymentMethod:"Update Payment Method",cancelSubscription:"Cancel Subscription",upgradePlan:"Upgrade Plan",downgradePlan:"Downgrade Plan"},footer:{tagline:"Your AI-Powered Health & Wellness Companion",contactUs:"Contact Us",platform:"Platform",updates:"Updates",products:"Products",company:"Company",legal:"Legal",privacyPolicy:"Privacy Policy",termsOfService:"Terms of Service",support:"Support",allRightsReserved:"All rights reserved"},common:{loading:"Loading...",error:"Error",success:"Success",cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",close:"Close",submit:"Submit",search:"Search",filter:"Filter",viewAll:"View All",readMore:"Read More",backToHome:"Back to Home",welcome:"Welcome",getStarted:"Get Started",learnMore:"Learn More",tryFree:"Try Free",comingSoon:"Coming Soon",yes:"Yes",no:"No",confirm:"Confirm",back:"Back",next:"Next",previous:"Previous",finish:"Finish",skip:"Skip",all:"All",none:"None",select:"Select",clear:"Clear",apply:"Apply",reset:"Reset",export:"Export",import:"Import",download:"Download",upload:"Upload",share:"Share",copy:"Copy",copied:"Copied!",print:"Print",refresh:"Refresh",sortBy:"Sort by",showMore:"Show More",showLess:"Show Less",expand:"Expand",collapse:"Collapse"},support:{title:"Support Center",subtitle:"Need help? Submit a ticket and our team will assist you.",quickFeedback:"Quick Feedback",quickFeedbackDesc:"Share your thoughts, suggestions, or report issues quickly",createTicket:"Create Ticket",myTickets:"My Tickets",submitTicket:"Submit a Support Ticket",submitTicketDesc:"Describe your issue and we'll get back to you within 24 hours",myTicketsTitle:"My Support Tickets",myTicketsDesc:"View and track your submitted support tickets",rateExperience:"How would you rate your experience?",ratingExcellent:" Excellent!",ratingGreat:" Great!",ratingGood:" Good",ratingCouldBeBetter:" Could be better",ratingNeedsImprovement:" Needs improvement",feedbackType:"What type of feedback is this?",suggestion:"Suggestion",issue:"Issue",praise:"Praise",tellUsMore:"Tell us more",required:"*",feedbackPlaceholderSuggestion:"What feature or improvement would you like to see?",feedbackPlaceholderIssue:"What issue did you encounter? Please provide details...",feedbackPlaceholderPraise:"What did you love about your experience?",conversationInfo:"Direct conversation with our team",conversationInfoDesc:"Your feedback will create a conversation with our support team. You'll be able to chat with them in the Messages section.",sendFeedback:"Send Feedback",submitting:"Submitting...",subject:"Subject",subjectPlaceholder:"Brief description of your issue",category:"Category",categoryPlaceholder:"Select a category",priority:"Priority",priorityLow:"Low - General inquiry",priorityMedium:"Medium - Standard issue",priorityHigh:"High - Affects my work",priorityUrgent:"Urgent - Critical issue",description:"Description",descriptionPlaceholder:"Please provide as much detail as possible about your issue...",descriptionHelper:"Include steps to reproduce the issue, error messages, or screenshots if applicable",submitButton:"Submit Ticket",statusOpen:"Open",statusInProgress:"In Progress",statusResolved:"Resolved",statusClosed:"Closed",priorityUrgentBadge:"Urgent",priorityHighBadge:"High",priorityMediumBadge:"Medium",priorityLowBadge:"Low",noTicketsYet:"You haven't submitted any tickets yet",ticketNumber:"Ticket #",categoryLabel:"Category:",created:"Created:",updated:"Updated:",resolved:" This issue has been resolved. If you need further assistance, please create a new ticket.",missingInfo:"Missing Information",missingInfoDesc:"Please fill in all required fields",missingFeedbackDesc:"Please provide your feedback",errorCreating:"Error Creating Ticket",ticketCreated:"Support Ticket Created!",ticketCreatedDesc:"A conversation has been started with our support team. Check the Messages page for updates.",errorSubmitting:"Error Submitting Feedback",feedbackSubmitted:"Feedback Submitted! ",feedbackSubmittedDesc:"Thank you! A conversation has been created with our team. Check Messages for any follow-up."},privacy:{title:"Privacy Policy",pageDescription:"Learn how GreenoFig collects, uses, and protects your personal information.",metaDescription:"GreenoFig's privacy policy explains how we collect, use, and protect your personal information.",lastUpdated:"Last Updated:",lastUpdatedDate:"October 24, 2025",intro:"At GreenoFig, we are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, disclose, and safeguard your data when you use our website and services.",section1:{title:"1. Information We Collect",intro:"We collect information that you provide directly to us, including:",items:["Personal information (name, email address, phone number)","Health and wellness data (dietary preferences, fitness goals, health metrics)","Payment information (processed securely through third-party payment processors)","Usage data (how you interact with our platform)","Device information (IP address, browser type, operating system)"]},section2:{title:"2. How We Use Your Information",intro:"We use your information to:",items:["Provide and personalize our health and wellness services","Generate AI-powered meal plans and fitness recommendations","Process payments and manage subscriptions","Send important updates, notifications, and promotional materials","Improve our services and develop new features","Ensure security and prevent fraud","Comply with legal obligations"]},section3:{title:"3. Information Sharing and Disclosure",intro:"We do not sell your personal information. We may share your information with:",items:["Service providers who assist in operating our platform","Payment processors for transaction processing","AI service providers for generating personalized recommendations","Legal authorities when required by law","Healthcare professionals (only with your explicit consent)"]},section4:{title:"4. Data Security",content:"We implement industry-standard security measures to protect your data, including encryption, secure servers, and regular security audits. However, no method of transmission over the internet is 100% secure, and we cannot guarantee absolute security."},section5:{title:"5. Your Rights and Choices",intro:"You have the right to:",items:["Access, update, or delete your personal information","Opt-out of marketing communications","Request a copy of your data","Withdraw consent for data processing","Lodge a complaint with a data protection authority"]},section6:{title:"6. Cookies and Tracking Technologies",intro:"We use cookies and similar technologies to enhance your experience, analyze usage patterns, and deliver personalized content.",whatAreCookies:{title:"What Are Cookies?",content:"Cookies are small text files stored on your device that help us remember your preferences and improve your experience on our platform."},typesTitle:"Types of Cookies We Use:",types:{essential:{title:"Essential Cookies (Required)",content:"These cookies are necessary for the website to function properly. They enable core functionality such as security, authentication, and accessibility features. These cannot be disabled."},functional:{title:"Functional Cookies",content:"These cookies enable enhanced functionality and personalization, such as remembering your preferences, language settings, and customized content."},analytics:{title:"Analytics Cookies",content:"We use analytics tools to understand how visitors interact with our website, helping us improve our services. These cookies collect anonymous data about page visits, session duration, and user behavior."},marketing:{title:"Marketing Cookies",content:"These cookies track your browsing habits to provide you with relevant advertisements and measure the effectiveness of our marketing campaigns."}},managing:{title:"Managing Your Cookie Preferences",intro:"You can control and manage cookies in several ways:",items:["Browser Settings: Most browsers allow you to refuse cookies or delete cookies already stored","Third-party Tools: You can use browser extensions or privacy tools to manage cookies","Opt-out Links: For marketing cookies, you can opt out through industry opt-out pages"],note:"Please note that disabling certain cookies may affect the functionality of our website and limit your access to certain features."}},section7:{title:"7. Children's Privacy",content:"Our services are not intended for individuals under the age of 18. We do not knowingly collect personal information from children. If you believe we have inadvertently collected such information, please contact us immediately."},section8:{title:"8. Changes to This Policy",content:'We may update this Privacy Policy from time to time. We will notify you of any significant changes by posting the new policy on this page and updating the "Last Updated" date.'},section9:{title:"9. International Data Transfers",content:"Your information may be transferred to and processed in countries other than your country of residence. We ensure that all such transfers comply with applicable data protection laws and that your data receives adequate protection."},section10:{title:"10. GDPR Compliance (For EU Users)",intro:"If you are located in the European Economic Area (EEA), you have additional rights under the General Data Protection Regulation (GDPR):",rights:{access:"Right to Access: You can request a copy of your personal data",rectification:"Right to Rectification: You can request correction of inaccurate data",erasure:'Right to Erasure: You can request deletion of your data ("right to be forgotten")',restrict:"Right to Restrict Processing: You can limit how we use your data",portability:"Right to Data Portability: You can receive your data in a structured format",object:"Right to Object: You can object to certain data processing activities"},contact:"To exercise any of these rights, please contact us at privacy@greenofig.com"},section11:{title:"11. CCPA Rights (For California Users)",intro:"If you are a California resident, you have specific rights under the California Consumer Privacy Act (CCPA):",rights:{know:"Right to Know: You can request what personal information we collect, use, and share",delete:"Right to Delete: You can request deletion of your personal information",optOut:"Right to Opt-Out: You can opt-out of the sale of your personal information (Note: We do not sell personal information)",nonDiscrimination:"Right to Non-Discrimination: We will not discriminate against you for exercising your privacy rights"},contact:'To submit a request, email privacy@greenofig.com with "CCPA Request" in the subject line.'},section12:{title:"12. Data Retention",content:"We retain your personal information for as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce our agreements. When you delete your account, we will delete or anonymize your data within 90 days, except where we are required to retain it by law."},section13:{title:"13. Contact Us",intro:"If you have any questions or concerns about this Privacy Policy or our data practices, please contact us at:",email:"Email:",support:"Support:",address:"Address:",addressValue:"GreenoFig Inc., Health & Wellness Division",responseTime:"Response Time:",responseTimeValue:"We aim to respond to all privacy inquiries within 30 days"}},terms:{title:"Terms of Service",pageDescription:"Please read these terms and conditions carefully before using GreenoFig services.",metaDescription:"Terms and conditions for using GreenoFig's AI-powered health and wellness platform.",lastUpdated:"Last Updated:",lastUpdatedDate:"October 24, 2025"},onboarding:{welcomeTitle:"Welcome to GreenoFig",welcomeSubtitle:"Let's personalize your experience.",completeProfile:"Complete Your Profile",personalizeExperience:"Personalize your GreenoFig experience",getPersonalizedGuidance:"Get Personalized Health Guidance",signUpToPlan:"Sign up to create your custom health plan",signUp:"Sign Up",aboutYou:"About You",age:"Age",agePlaceholder:"e.g., 28",gender:"Gender",selectGender:"Select gender",male:"Male",female:"Female",other:"Other",preferNotToSay:"Prefer not to say",bodyMetrics:"Your Body Metrics",metric:"Metric",imperial:"Imperial",height:"Height",weight:"Weight",heightPlaceholderMetric:"e.g., 175",heightPlaceholderImperial:"e.g., 69",weightPlaceholderMetric:"e.g., 70",weightPlaceholderImperial:"e.g., 154",lifestyle:"Your Lifestyle",activityLevel:"Activity Level",activitySedentary:"Sedentary",activitySedentaryDesc:"Little or no exercise",activityLightlyActive:"Lightly Active",activityLightlyActiveDesc:"Light exercise/sports 1-3 days/week",activityModeratelyActive:"Moderately Active",activityModeratelyActiveDesc:"Moderate exercise/sports 3-5 days/week",activityVeryActive:"Very Active",activityVeryActiveDesc:"Hard exercise/sports 6-7 days a week",activitySuperActive:"Super Active",activitySuperActiveDesc:"Very hard exercise & physical job",goals:"Your Goals",goalsSubtitle:"Select your primary health and fitness goals. You can select multiple.",goalLoseWeight:"Lose Weight",goalBuildMuscle:"Build Muscle",goalImproveEndurance:"Improve Endurance",goalEatHealthier:"Eat Healthier",goalIncreaseEnergy:"Increase Energy",setupComplete:"Setup Complete!",setupCompleteDesc:"Your profile is personalized. Get ready to start your wellness journey.",goToDashboard:"Go to Dashboard",back:"Back",next:"Next",finish:"Finish",dietaryPreferences:"Dietary Preferences",dietaryPreferencesSubtitle:"Select any dietary restrictions or preferences you follow. You can select multiple.",dietNone:"No restrictions",dietVegetarian:"Vegetarian",dietVegan:"Vegan",dietGlutenFree:"Gluten-Free",dietDairyFree:"Dairy-Free",dietKeto:"Keto",dietPaleo:"Paleo",dietHalal:"Halal",dietKosher:"Kosher",healthConditions:"Health Conditions",healthConditionsSubtitle:"Do you have any health conditions we should know about? You can select multiple.",conditionNone:"None",conditionDiabetes:"Diabetes",conditionHighBloodPressure:"High Blood Pressure",conditionHeartDisease:"Heart Disease",conditionAsthma:"Asthma",conditionArthritis:"Arthritis",conditionThyroid:"Thyroid Issues",conditionFoodAllergies:"Food Allergies"},survey:{title:"Find Your Perfect Plan",subtitle:"Answer a few questions to get your personalized plan recommendation.",stepProgress:"Step {{step}} of {{total}}",back:"Back",next:"Next",findMyPlan:"Find My Plan",step1:{question:"What is your primary health goal?",description:"This will help us recommend the best starting point for you.",loseWeight:"Lose Weight",buildMuscle:"Build Muscle",improveEndurance:"Improve Endurance",eatHealthier:"Eat Healthier",increaseEnergy:"Increase Energy"},step2:{question:"What's your fitness experience level?",beginner:"Beginner",beginnerDesc:"Just starting my fitness journey.",intermediate:"Intermediate",intermediateDesc:"I work out regularly.",advanced:"Advanced",advancedDesc:"I'm very experienced and train hard."},step3:{question:"What's your budget for a health plan?",description:"Choose a range that works for you.",budgetFriendly:"Budget-Friendly",budgetFriendlyDesc:"Under $10/month",moderate:"Moderate",moderateDesc:"$10-$20/month",premium:"Premium",premiumDesc:"$20-$30/month"},step4:{question:"Any dietary preferences or restrictions?",description:"Select all that apply.",noRestrictions:"No Restrictions",vegetarian:"Vegetarian",vegan:"Vegan",glutenFree:"Gluten-Free",keto:"Keto",halal:"Halal"},step5:{question:"How much time can you dedicate daily?",description:"For workouts and meal preparation.",minimal:"15-30 min/day",minimalDesc:"I have limited time",moderate:"30-60 min/day",moderateDesc:"I can dedicate some time",extensive:"60+ min/day",extensiveDesc:"I have plenty of time"},step6:{question:"What type of guidance do you prefer?",selfGuided:"Self-Guided",selfGuidedDesc:"I prefer to work independently",aiCoach:"AI Coach",aiCoachDesc:"I want AI-powered guidance",professional:"Professional Support",professionalDesc:"I need expert nutritionist help"},step7:{question:"Which features interest you most?",description:"Select all that appeal to you.",mealPlanning:"Meal Planning",workoutPlans:"Workout Plans",progressTracking:"Progress Tracking",aiChat:"AI Chat Support",photoRecognition:"Photo Food Recognition",expertConsultation:"Expert Consultation"},step8:{question:"How would you describe your current health?",excellent:"Excellent",excellentDesc:"No health concerns",good:"Good",goodDesc:"Minor concerns, generally healthy",fair:"Fair",fairDesc:"Managing some health conditions",needsAttention:"Needs Attention",needsAttentionDesc:"Require professional guidance"},step9:{question:"What's your timeline for achieving your goals?",description:"How soon do you want to see results?",relaxed:"Relaxed",relaxedDesc:"6+ months",moderate:"Moderate",moderateDesc:"3-6 months",urgent:"Urgent",urgentDesc:"Within 3 months"}}}},ar:{translation:{nav:{home:"",features:"",pricing:"",blog:"",reviews:"",contact:" ",faq:" ",about:" ",download:"",login:" ",signup:" ",dashboard:" ",logout:" "},home:{hero:{title:"  ",subtitle:"                   .",getStarted:" ",learnMore:" "},features:{title:"  ",subtitle:"         .",aiMealPlans:"  ",aiMealPlansDesc:"                .",personalizedWorkouts:" ",personalizedWorkoutsDesc:"       .",aiCoach:" ",aiCoachDesc:"            ."},pricing:{title:"  ",subtitle:"  .  25%    !",mostPopular:" ",perMonth:"/",choosePlan:"",viewAllPlans:"   "},howItWorks:{title:" ",subtitle:"     .",step1Title:" ",step1Text:"        .",step2Title:"   ",step2Text:"       .",step3Title:"   ",step3Text:"       ."},whyChoose:{title:"  GreenoFig",subtitle:"      ",scienceBacked:" ",scienceBackedDesc:"      .",personalizedAI:" ",personalizedAIDesc:"       .",support247:" 24/7",support247Desc:"        ."},reviews:{title:"       ",review1:" GreenoFig .   20      .      !",review2:"     .        .",review3:"    .         .  !",author1:" .",author2:" .",author3:" ."},cta:{title:"    ",subtitle:"         ",button:"  "}},pricing:{title:"  ",subtitle:"  .  25%    !",monthly:"",yearly:"",mostPopular:" ",perMonth:"/",perYear:"/",selectPlan:" ",currentPlan:" ",upgrade:"",viewAllPlans:"   ",freePlan:"Free",basicPlan:"Basic",premiumPlan:"Premium",ultimatePlan:"Ultimate",elitePlan:"Elite",planDescriptions:{Base:"    ",Premium:"     ",Ultimate:"       ",Elite:"     VIP"},save25:" 25%",billed:" ",billedMonthly:"  ",billedYearly:"  ",features:"",popularChoice:" ",bestValue:" ",planFeatures:{base:{mealPlans:"    ",workoutPlans:"    ",chatMessages:"10    ",basicTracking:"  ",communityAccess:"  ",mobileAccess:"  ",smartLogging:"  "},premium:{adFree:"    ",unlimitedMeals:"     ",unlimitedWorkouts:"     ",unlimitedChat:"    ",analytics:"  ",goalTracking:"  ",customPreferences:"  ",wearableSync:"   ",reports:"  ",communityAccess:"  ",mobileAccess:"  "},ultimate:{everythingPremium:"    ",nutritionists:"    ",prioritySupport:"   ",videoConsultations:"  (2 )",mealPlanningTools:"   ",workoutBuilder:"  ",performanceOptimization:" ",bodyAnalysis:"  ",exclusiveChallenges:" "},elite:{everythingUltimate:"    ",photoRecognition:"     ",unlimitedCoaching:"   ",doctorConsultations:"          (2 )",appointmentScheduling:"        ",priority247:"     ",supplementPlan:"   ",vipAccess:"   VIP",concierge:" "}}},features:{title:"  ",subtitle:"     ",aiCoach:" ",aiCoachDesc:"        ",mealPlanning:" ",mealPlanningDesc:"      ",workoutTracking:" ",workoutTrackingDesc:"   ",progressMonitoring:" ",progressMonitoringDesc:"    ",nutritionAnalysis:" ",nutritionAnalysisDesc:"   ",smartRecommendations:" ",smartRecommendationsDesc:"      ",wearableSync:"   ",wearableSyncDesc:"       ",expertSupport:" ",expertSupportDesc:"       "},blog:{title:"  ",subtitle:"     ",readMore:" ",backToBlog:"  ",relatedPosts:"  ",tableOfContents:" ",shareArticle:" ",noPostsFound:"    ",loadingPosts:"  ..."},contact:{title:" ",subtitle:"      .",pageDescription:"       .     .",metaDescription:"   GreenoFig.         .",name:"",fullName:" ",email:" ",subject:"",message:"",send:" ",sending:" ...",successMessage:" !   .",errorMessage:"  .    .",generalInquiry:" ",supportEmail:"support@greenofig.com",salesEmail:"sales@greenofig.com",namePlaceholder:" ",emailPlaceholder:"you@example.com",messagePlaceholder:"...",messageSent:"  ! (  )",demoMessage:"          !"},faq:{title:" ",subtitle:"      GreenoFig",pageDescription:"   .           .",metaDescription:"         GreenoFig.",generalQuestions:" ",subscriptionQuestions:" ",technicalQuestions:" ",searchPlaceholder:"   ...",errorFetching:"    ",noFaqsFound:"     .",checkBackSoon:"          ."},about:{title:" GreenoFig",subtitle:"    ",metaDescription:"      GreenoFig.",ourMission:"",ourMissionText:"           .",ourStory:"",ourTeam:"",ourValues:"",errorFetchingContent:"    ",contentNotAvailable:"  .",checkBackLater:"       ."},reviews:{title:" ",subtitle:"    ",verified:" ",writeReview:" ",allReviews:" ",rating:"",pageTitle:"   ",pageDescription:"   GreenoFig       .",metaDescription:"        GreenoFig.       .",shareYourStory:" ",experienceDescription:"      GreenoFig.",yourName:"",namePlaceholder:" ",reviewTitle:" ",reviewTitlePlaceholder:" !",yourReview:"",reviewPlaceholder:" ...",ratingRequired:" *",submitting:" ...",submitReview:" ",noReviewsYet:"   !",beTheFirst:"       GreenoFig.",ratingRequiredError:" ",ratingRequiredMessage:"     .",reviewSubmitted:"  !",thankYou:"   .",submissionFailed:" ",tryAgainLater:"    .",errorLoadingReviews:"   "},download:{title:" GreenoFig",subtitle:"    ",downloadIOS:"  App Store",downloadAndroid:"  Google Play",comingSoon:"",getToday:"  GreenoFig ",appDescription:"      .    iOS   Android.",joinBeta:"  ",betaDescription:"       iPhone  TestFlight.",contactInvite:"    ",iosVersion:"iOS 14.0  ",androidVersion:"Android 8.0  ",seeInAction:"  ",sneakPeek:"      ",screenshots:{dashboard:" ",dashboardDesc:"   ",mealPlans:" ",mealPlansDesc:"   ",workouts:"",workoutsDesc:"  ",aiCoach:" ",aiCoachDesc:"   "},powerfulFeatures:" ",featuresDescription:"        ",appFeatures:{aiMealPlans:"   ",aiMealPlansDesc:"    ",customWorkouts:" ",customWorkoutsDesc:"    ",aiCoach247:"  24/7",aiCoach247Desc:"  ",foodRecognition:"  ",foodRecognitionDesc:"    ",progressTracking:" ",progressTrackingDesc:"    ",smartReminders:" ",smartRemindersDesc:"     "},lovedByThousands:"   ",rating:"4.9",basedOnReviews:"    10,000 ",userReviews:{review1:" GreenoFig !  20    .",review2:"     .   !",review3:"      !"},readyToTransform:"    ",joinThousands:"           ",downloadNow:" "},dashboard:{title:" ",welcome:"",overview:" ",myProgress:"",meals:"",workouts:"",analytics:"",settings:"",profile:" ",billing:"",support:"",todaysMeals:" ",todaysWorkout:" ",weeklyProgress:" ",goals:"",achievements:"",recentActivity:" ",quickActions:" ",generateMealPlan:"  ",generateWorkout:" ",trackProgress:" ",viewReports:" "},userDashboard:{welcome:" ",todayOverview:"   ",premiumFeatures:" ",unlockPowerfulTools:"     ",advancedToolsAvailable:"    ",upgradeButton:"",photoFoodRecognition:"   ",photoFoodRecognitionTier:"",barcodeScanner:" ",barcodeScannerTier:"+",wearableDevices:"  ",wearableDevicesTier:"+",foodDatabase:"  ",foodDatabaseTier:"+",messageNutritionist:"  ",messageNutritionistTier:"+",nutritionistMessaging:"  ",connectWithNutritionist:"         ",calories:" ",protein:"",carbs:"",fats:"",waterIntake:" ",stepsToday:" ",activeMinutes:" ",sleepHours:" ",currentWeight:" ",targetWeight:" ",bmi:"  ",bodyFat:"   "},nutritionistDashboard:{title:"   ",myClients:"",activeClients:" ",pendingRequests:" ",totalConsultations:" ",clientProgress:" ",upcomingAppointments:" ",recentMessages:" ",createMealPlan:"  ",scheduleConsultation:" ",viewClientHistory:"  "},adminDashboard:{title:"  ",totalUsers:" ",activeSubscriptions:" ",revenue:"",newUsersToday:"  ",userManagement:" ",subscriptionManagement:" ",contentManagement:" ",analyticsReports:" ",systemSettings:" ",supportTickets:" "},auth:{login:" ",signup:" ",logout:" ",email:" ",password:" ",confirmPassword:"  ",forgotPassword:"  ",resetPassword:"   ",rememberMe:"",dontHaveAccount:"  ",alreadyHaveAccount:"  ",signInWithGoogle:"   Google",signUpWithGoogle:"   Google",signInWithFacebook:"   Facebook",orContinueWith:"  ",createAccount:" ",verifyEmail:"   ",resendVerification:"  ",back:"",fullName:" ",processing:" ...",tagline:"  ",signUpForPlan:"  ",plan:"",missingFields:" ",fillAllFields:"    ",accountCreated:"  ! ",welcomeSetup:"!  ."},profile:{title:" ",personalInfo:" ",firstName:" ",lastName:" ",dateOfBirth:" ",gender:"",height:"",weight:"",targetWeight:" ",activityLevel:" ",dietaryPreferences:" ",allergies:"",healthGoals:" ",updateProfile:"  ",changePassword:"  ",deleteAccount:" "},billing:{title:" ",currentPlan:" ",billingCycle:" ",nextBillingDate:"  ",paymentMethod:" ",billingHistory:" ",invoices:"",updatePaymentMethod:"  ",cancelSubscription:" ",upgradePlan:" ",downgradePlan:" "},footer:{tagline:"     ",contactUs:" ",platform:"",updates:"",products:"",company:"",legal:"",privacyPolicy:" ",termsOfService:" ",support:"",allRightsReserved:"  "},common:{loading:" ...",error:"",success:"",cancel:"",save:"",delete:"",edit:"",close:"",submit:"",search:"",filter:"",viewAll:" ",readMore:" ",backToHome:" ",welcome:"",getStarted:" ",learnMore:" ",tryFree:" ",comingSoon:"",yes:"",no:"",confirm:"",back:"",next:"",previous:"",finish:"",skip:"",all:"",none:" ",select:"",clear:"",apply:"",reset:" ",export:"",import:"",download:"",upload:"",share:"",copy:"",copied:" !",print:"",refresh:"",sortBy:" ",showMore:" ",showLess:" ",expand:"",collapse:""},support:{title:" ",subtitle:"     .",quickFeedback:" ",quickFeedbackDesc:"        ",createTicket:" ",myTickets:"",submitTicket:"  ",submitTicketDesc:"      24 ",myTicketsTitle:"   ",myTicketsDesc:"    ",rateExperience:"  ",ratingExcellent:" !",ratingGreat:" !",ratingGood:" ",ratingCouldBeBetter:"    ",ratingNeedsImprovement:"   ",feedbackType:"   ",suggestion:"",issue:"",praise:"",tellUsMore:" ",required:"*",feedbackPlaceholderSuggestion:"       ",feedbackPlaceholderIssue:"       ...",feedbackPlaceholderPraise:"    ",conversationInfo:"   ",conversationInfoDesc:"      .       .",sendFeedback:" ",submitting:" ...",subject:"",subjectPlaceholder:"  ",category:"",categoryPlaceholder:" ",priority:"",priorityLow:" -  ",priorityMedium:" -  ",priorityHigh:" -   ",priorityUrgent:" -  ",description:"",descriptionPlaceholder:"        ...",descriptionHelper:"             ",submitButton:" ",statusOpen:"",statusInProgress:" ",statusResolved:" ",statusClosed:"",priorityUrgentBadge:"",priorityHighBadge:"",priorityMediumBadge:"",priorityLowBadge:"",noTicketsYet:"    ",ticketNumber:" #",categoryLabel:":",created:" :",updated:" :",resolved:"    .           .",missingInfo:" ",missingInfoDesc:"    ",missingFeedbackDesc:"  ",errorCreating:"   ",ticketCreated:"   !",ticketCreatedDesc:"      .       .",errorSubmitting:"   ",feedbackSubmitted:"  ! ",feedbackSubmittedDesc:" !     .     ."},privacy:{title:" ",pageDescription:"    GreenoFig    .",metaDescription:"     GreenoFig      .",lastUpdated:" :",lastUpdatedDate:"24  2025",intro:" GreenoFig       .               .",section1:{title:"1.   ",intro:"        :",items:["  (     )","   (     )","  (          )","  (   )","  ( IP    )"]},section2:{title:"2.   ",intro:"   :",items:["    ","        ","   ","     ","    ","   ","  "]},section3:{title:"3.    ",intro:"    .    :",items:["      ","   ","      ","     ","  (  )"]},section4:{title:"4.  ",content:"                 .           100     ."},section5:{title:"5.  ",intro:"  :",items:["       ","    ","   ","    ","     "]},section6:{title:"6.     ",intro:"             .",whatAreCookies:{title:"    ",content:"                 ."},typesTitle:"     :",types:{essential:{title:"    ()",content:"       .          .   ."},functional:{title:"   ",content:"            ."},analytics:{title:"   ",content:"             .            ."},marketing:{title:"   ",content:"              ."}},managing:{title:"      ",intro:"        :",items:[" :            ","  :           ","  :              "],note:"                  ."}},section7:{title:"7.  ",content:"        18 .         .                ."},section8:{title:"8.    ",content:'        .               " ".'},section9:{title:"9.   ",content:"          .                   ."},section10:{title:"10.      (  )",intro:"       (EEA)         (GDPR):",rights:{access:"  :      ",rectification:"  :      ",erasure:'  :     ("  ")',restrict:"   :      ",portability:"   :     ",object:"  :       "},contact:"         privacy@greenofig.com"},section11:{title:"11.       ( )",intro:"              (CCPA):",rights:{know:"  :         ",delete:"  :     ",optOut:"   :        (:     )",nonDiscrimination:"   :        "},contact:'      privacy@greenofig.com  " CCPA"   .'},section12:{title:"12.  ",content:"               .            90         ."},section13:{title:"13.  ",intro:"                   :",email:" :",support:":",address:":",addressValue:"GreenoFig Inc.   ",responseTime:" :",responseTimeValue:"         30 "}},terms:{title:" ",pageDescription:"         GreenoFig.",metaDescription:"    GreenoFig     .",lastUpdated:" :",lastUpdatedDate:"24  2025"},onboarding:{welcomeTitle:"   GreenoFig",welcomeSubtitle:" .",completeProfile:"  ",personalizeExperience:"   GreenoFig",getPersonalizedGuidance:"    ",signUpToPlan:"    ",signUp:"",aboutYou:"",age:"",agePlaceholder:": 28",gender:"",selectGender:" ",male:"",female:"",other:"",preferNotToSay:"  ",bodyMetrics:" ",metric:"",imperial:"",height:"",weight:"",heightPlaceholderMetric:": 175",heightPlaceholderImperial:": 69",weightPlaceholderMetric:": 70",weightPlaceholderImperial:": 154",lifestyle:" ",activityLevel:" ",activitySedentary:"",activitySedentaryDesc:"     ",activityLightlyActive:" ",activityLightlyActiveDesc:" / 1-3 /",activityModeratelyActive:" ",activityModeratelyActiveDesc:" / 3-5 /",activityVeryActive:" ",activityVeryActiveDesc:" / 6-7   ",activitySuperActive:" ",activitySuperActiveDesc:"    ",goals:"",goalsSubtitle:"     .    .",goalLoseWeight:" ",goalBuildMuscle:" ",goalImproveEndurance:"   ",goalEatHealthier:"  ",goalIncreaseEnergy:" ",setupComplete:" !",setupCompleteDesc:"  .    .",goToDashboard:"   ",back:"",next:"",finish:"",dietaryPreferences:" ",dietaryPreferencesSubtitle:"      .    .",dietNone:"  ",dietVegetarian:"",dietVegan:" ",dietGlutenFree:"  ",dietDairyFree:"   ",dietKeto:"",dietPaleo:"",dietHalal:"",dietKosher:"",healthConditions:" ",healthConditionsSubtitle:"            .",conditionNone:" ",conditionDiabetes:"",conditionHighBloodPressure:"  ",conditionHeartDisease:" ",conditionAsthma:"",conditionArthritis:" ",conditionThyroid:"  ",conditionFoodAllergies:" "},survey:{title:"    ",subtitle:"         .",stepProgress:" {{step}}  {{total}}",back:"",next:"",findMyPlan:"  ",step1:{question:"    ",description:"       .",loseWeight:" ",buildMuscle:" ",improveEndurance:"   ",eatHealthier:" ",increaseEnergy:" "},step2:{question:"      ",beginner:"",beginnerDesc:"    .",intermediate:"",intermediateDesc:" .",advanced:"",advancedDesc:"    ."},step3:{question:"    ",description:"  .",budgetFriendly:"",budgetFriendlyDesc:"  10  ",moderate:"",moderateDesc:"10-20  ",premium:"",premiumDesc:"20-30  "},step4:{question:"      ",description:"   .",noRestrictions:" ",vegetarian:"",vegan:" ",glutenFree:"  ",keto:"",halal:""},step5:{question:"     ",description:"  .",minimal:"15-30  ",minimalDesc:"  ",moderate:"30-60  ",moderateDesc:"   ",extensive:"  60  ",extensiveDesc:"   "},step6:{question:"    ",selfGuided:" ",selfGuidedDesc:"   ",aiCoach:"  ",aiCoachDesc:"    ",professional:" ",professionalDesc:"   "},step7:{question:"     ",description:"   .",mealPlanning:" ",workoutPlans:" ",progressTracking:" ",aiChat:"   ",photoRecognition:"   ",expertConsultation:" "},step8:{question:"   ",excellent:"",excellentDesc:"   ",good:"",goodDesc:"     ",fair:"",fairDesc:"    ",needsAttention:"  ",needsAttentionDesc:"   "},step9:{question:"     ",description:"   ",relaxed:"",relaxedDesc:"6  ",moderate:"",moderateDesc:"3-6 ",urgent:"",urgentDesc:" 3 "}}}}},Wl=()=>{const e=localStorage.getItem("language");return e||"en"};Ao.use(Hl).use(qo).init({resources:zl,fallbackLng:"en",lng:Wl(),debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","cookie","navigator"],caches:["localStorage","cookie"]},react:{useSuspense:!1}});const Vl=Wl();var Gl;document.documentElement.dir="ar"===Vl?"rtl":"ltr",document.documentElement.lang=Vl,kl.init(),_e.createRoot(document.getElementById("root")).render(e.jsx(y.StrictMode,{children:e.jsx($n,{children:e.jsx(da,{children:e.jsx(E,{children:e.jsx(_l,{})})})})})),(Gl=e=>{})&&Gl instanceof Function&&Se(()=>import("./web-vitals-22b21531.js"),[]).then(({getCLS:e,getFID:t,getFCP:s,getLCP:r,getTTFB:i})=>{e(Gl),t(Gl),s(Gl),r(Gl),i(Gl)}).catch(()=>{}),"serviceWorker"in navigator&&(window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(e=>{setInterval(()=>{e.update()},3e4)}).catch(e=>{})}),navigator.serviceWorker.addEventListener("message",e=>{e.data&&"CACHE_UPDATED"===e.data.type&&setTimeout(()=>{window.location.reload()},1e3)}));export{Xo as A,Yo as B,la as F,Gt as H,ia as I,oa as L,ra as T,Se as _,Fn as a,sa as b,Kt as c,La as d,Zo as e,ea as f,ls as g,Fa as h,Ao as i,$a as j,Ea as k,Pa as l,Aa as m,Ca as n,Ko as o,Ia as p,Oa as q,Ra as r,Nn as s,as as t,Go as u,Na as v,Un as w,ca as x};
