import{j as e}from"./vendor-ui-8934955f.js";import{f as s,r as a}from"./vendor-react-c35372bd.js";import{j as t,c as r,B as l}from"./index-05934966.js";import{O as i,X as n}from"./vendor-utils-1c9b7ece.js";const o=({placementName:l,className:i="",onClose:n,showCloseButton:o=!0,autoTrack:x=!0})=>{var p;const u=s(),{hasAds:h,fetchCampaignForPlacement:b,trackImpression:g,trackClick:j,dismissAd:v}=t(),[N,f]=a.useState(null),[y,_]=a.useState(null),[k,w]=a.useState(!0),[C,S]=a.useState(!1),D=a.useRef(null);a.useEffect(()=>{(async()=>{if(!h)return void w(!1);w(!0);const e=await b(l);f(e),w(!1)})()},[h,l,b]),a.useEffect(()=>{if(!N||!x||y)return;(async()=>{const e=await g(N.id,N.placement_id,u.pathname);_(e)})()},[N,x,g,u.pathname,y]);const A=async e=>{N&&(await j(N.id,null==y?void 0:y.id,u.pathname),N.cta_url&&(N.cta_url.startsWith("/")?window.location.href=N.cta_url:window.open(N.cta_url,"_blank","noopener,noreferrer")))},z=async()=>{N&&await v(N.id),S(!0),n&&n()};if(!h||C||k||!N)return null;const B=(null==(p=N.ad_placements)?void 0:p.placement_type)||"banner";return e.jsxs("div",{ref:D,className:r("ad-container relative","banner"===B&&"ad-banner-container","sidebar"===B&&"ad-sidebar-container","native"===B&&"ad-native-container",i),"data-ad-placement":l,"data-ad-campaign":N.id,children:["banner"===B&&e.jsx(c,{campaign:N,onDismiss:o?z:null,onClick:A}),"sidebar"===B&&e.jsx(d,{campaign:N,onDismiss:o?z:null,onClick:A}),"native"===B&&e.jsx(m,{campaign:N,onDismiss:o?z:null,onClick:A})]})},c=({campaign:s,onDismiss:a,onClick:t})=>e.jsxs("div",{className:"relative bg-gradient-to-r from-primary/10 via-green-500/10 to-emerald-500/10 border border-primary/20 rounded-lg p-4 shadow-sm hover:shadow-md transition-all duration-300",style:{backgroundColor:s.background_color||void 0,color:s.text_color||void 0},children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[s.image_url&&e.jsx("img",{src:s.image_url,alt:s.title,className:"w-16 h-16 object-cover rounded-lg flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-primary/60 font-medium",children:"Sponsored"})}),e.jsx("h4",{className:"font-semibold text-sm mb-1 truncate",children:s.title}),s.subtitle&&e.jsx("p",{className:"text-xs text-text-secondary mb-2 line-clamp-2",children:s.subtitle}),e.jsxs(l,{size:"sm",onClick:t,className:"bg-primary hover:bg-primary/90 text-xs h-7 gap-1",children:[s.cta_text,e.jsx(i,{className:"w-3 h-3"})]})]})]}),a&&e.jsx("button",{onClick:a,className:"text-text-secondary hover:text-foreground transition-colors p-1","aria-label":"Close ad",children:e.jsx(n,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"absolute bottom-1 right-2",children:e.jsx("span",{className:"text-[8px] text-text-secondary/50",children:"Ad"})})]}),d=({campaign:s,onDismiss:a,onClick:t})=>e.jsxs("div",{className:"relative bg-card border border-border rounded-xl p-4 shadow-lg hover:shadow-xl transition-all duration-300",style:{backgroundColor:s.background_color||void 0,color:s.text_color||void 0},children:[a&&e.jsx("button",{onClick:a,className:"absolute top-2 right-2 text-text-secondary hover:text-foreground transition-colors p-1 z-10","aria-label":"Close ad",children:e.jsx(n,{className:"w-4 h-4"})}),e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-primary/60 font-medium mb-3",children:"Sponsored"}),s.image_url&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:s.image_url,alt:s.title,className:"w-full h-40 object-cover rounded-lg"})}),e.jsx("h4",{className:"font-bold text-base mb-2",children:s.title}),s.subtitle&&e.jsx("p",{className:"text-sm text-text-secondary mb-3",children:s.subtitle}),s.body_text&&e.jsx("p",{className:"text-xs text-text-secondary mb-4 line-clamp-3",children:s.body_text}),e.jsxs(l,{onClick:t,className:"w-full bg-primary hover:bg-primary/90 gap-2",children:[s.cta_text,e.jsx(i,{className:"w-4 h-4"})]}),e.jsx("div",{className:"mt-3 text-center",children:e.jsx("span",{className:"text-[9px] text-text-secondary/50",children:s.advertiser_name||"Advertisement"})})]}),m=({campaign:s,onDismiss:a,onClick:t})=>e.jsxs("div",{className:"relative bg-card/50 border border-border/50 rounded-xl p-6 hover:bg-card/80 transition-all duration-300 cursor-pointer",onClick:t,style:{backgroundColor:s.background_color||void 0,color:s.text_color||void 0},children:[a&&e.jsx("button",{onClick:e=>{e.stopPropagation(),a()},className:"absolute top-3 right-3 text-text-secondary hover:text-foreground transition-colors p-1","aria-label":"Close ad",children:e.jsx(n,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex gap-4",children:[s.image_url&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:s.image_url,alt:s.title,className:"w-24 h-24 object-cover rounded-lg"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-[10px] uppercase tracking-wider text-primary/60 font-medium bg-primary/10 px-2 py-0.5 rounded",children:"Sponsored"}),s.advertiser_name&&e.jsxs("span",{className:"text-xs text-text-secondary",children:["by ",s.advertiser_name]})]}),e.jsx("h4",{className:"font-bold text-lg mb-2",children:s.title}),s.subtitle&&e.jsx("p",{className:"text-sm text-text-secondary mb-2",children:s.subtitle}),s.body_text&&e.jsx("p",{className:"text-sm text-text-secondary line-clamp-2",children:s.body_text}),e.jsx("div",{className:"mt-4",children:e.jsxs("span",{className:"inline-flex items-center gap-1 text-primary font-medium text-sm hover:underline",children:[s.cta_text,e.jsx(i,{className:"w-4 h-4"})]})})]})]})]});export{o as A};
