import{j as e}from"./vendor-ui-8934955f.js";import{k as t,r as s,u as a}from"./vendor-react-c35372bd.js";import{u as l,d as r,H as i,B as o,i as n,s as c,t as d}from"./index-05934966.js";import{C as m,a as x,b as h,c as p,d as g}from"./card-5ef2c077.js";import"./tabs-2a9eaf96.js";import{S as u}from"./SiteLayout-a1dab2c4.js";import f from"./purify.es-3247f85f.js";import{F as b}from"./FloatingFruits-609761b3.js";import{A as j}from"./AdContainer-25659e4c.js";import{A as v,U as N,v as w,_ as y,P as _,$ as k,L as F}from"./vendor-utils-1c9b7ece.js";import"./vendor-editor-7586347a.js";import"./OnboardingSurvey-c214c47f.js";import"./dialog-f70f7e7c.js";const S=({logoUrl:S})=>{const{t:C}=l(),A=t(),{hasAds:L}=r(),[E,T]=s.useState([]),[D,I]=s.useState(null),[q,B]=s.useState(!0),[$,G]=s.useState(!1),[z,H]=s.useState([]),[O,U]=s.useState([]),[P,R]=s.useState(""),W=s.useRef(null),M=a(),Y=(e,t)=>{if(!e)return"";const s=`${t}_ar`;return"ar"===(localStorage.getItem("language")||"en")&&e[s]?e[s]:e[t]},J=e=>{if(!e)return"";const t=["the","a","an","and","or","but","in","on","at","to","for","of","with","by","from","as","is","was","are","were","be","been","being","have","has","had","do","does","did","will","would","should","could","may","might","must","can","your","you","how"];return e.toLowerCase().replace(/[^a-z0-9\s-]/g,"").split(/\s+/).filter(e=>e.length>0&&!t.includes(e)).slice(0,3).join("-")},K=e=>{if(!e)return"#";return`/blog/${J(e.title)}`};s.useEffect(()=>{(async()=>{D?G(!0):B(!0);let e=null,t=null;var s;if(A.postId?(s=A.postId)&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(s)?(e=A.postId,t=A.slug):t=A.postId:A.slug&&(t=A.slug),e||t){if(t&&!e){const{data:e,error:s}=await c.from("blog_posts").select("\n              id,\n              title,\n              title_ar,\n              content,\n              content_ar,\n              featured_image_url,\n              published_at,\n              author_id\n            ").eq("status","published").not("published_at","is",null);if(s||!e)d({title:"Error fetching post",description:"This blog post could not be found.",variant:"destructive"}),M("/blog");else{const s=e.find(e=>J(e.title)===t);if(s){I(s);const{data:e}=await c.from("blog_posts").select("id, title, title_ar, featured_image_url, published_at").eq("status","published").neq("id",s.id).not("published_at","is",null).order("published_at",{ascending:!1}).limit(3);e&&H(e)}else d({title:"Post not found",description:"This blog post could not be found.",variant:"destructive"}),M("/blog")}}else if(e){const{data:t,error:s}=await c.from("blog_posts").select("\n              title,\n              title_ar,\n              content,\n              content_ar,\n              featured_image_url,\n              published_at,\n              author_id\n            ").eq("id",e).single();if(s||!t)d({title:"Error fetching post",description:"This blog post could not be found.",variant:"destructive"}),M("/blog");else{I(t);const{data:s}=await c.from("blog_posts").select("id, title, title_ar, featured_image_url, published_at").eq("status","published").neq("id",e).not("published_at","is",null).order("published_at",{ascending:!1}).limit(3);s&&H(s)}}}else{const{data:e,error:t}=await c.from("blog_posts").select("\n            id,\n            title,\n            title_ar,\n            featured_image_url,\n            published_at,\n            author_id\n          ").eq("status","published").not("published_at","is",null).order("published_at",{ascending:!1}).limit(12);t?(d({title:"Error fetching blog posts",description:t.message,variant:"destructive"}),T([])):T(e||[])}B(!1),G(!1)})()},[A.postId,A.slug,M]),s.useEffect(()=>{D&&!$&&window.scrollTo({top:0,behavior:"smooth"})},[D,$]),s.useEffect(()=>{if(D&&D.content){const e=document.createElement("div");e.innerHTML=D.content;const t=e.querySelectorAll("h2, h3"),s=Array.from(t).map((e,t)=>({id:`section-${t}`,text:e.textContent,level:e.tagName.toLowerCase()}));U(s)}},[D]),s.useEffect(()=>{if(W.current&&O.length>0){const e=W.current.querySelectorAll("h2, h3");e.forEach((e,t)=>{e.id=`section-${t}`});const t=()=>{const t=window.scrollY+100;for(let s=e.length-1;s>=0;s--){const a=e[s];if(a.offsetTop<=t){R(a.id);break}}};return window.addEventListener("scroll",t),t(),()=>window.removeEventListener("scroll",t)}},[O]);const V=()=>E&&0!==E.length?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:E.map((t,s)=>e.jsx("div",{className:"animate-item",children:e.jsxs(m,{className:"card card-scale h-full flex flex-col glass-effect overflow-hidden group rounded-2xl",style:{backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)"},children:[e.jsx("div",{className:"aspect-video overflow-hidden cursor-pointer img-zoom",onClick:()=>M(K(t)),children:e.jsx("img",{alt:Y(t,"title"),className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",src:t.featured_image_url||"https://images.unsplash.com/photo-1504983875-d3b163aba9e6"})}),e.jsxs(x,{children:[e.jsx(h,{className:"text-xl font-bold group-hover:text-primary transition-colors cursor-pointer",onClick:()=>M(K(t)),children:Y(t,"title")}),e.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[e.jsx("img",{alt:"GreenoFig Team",className:"w-6 h-6 rounded-full",src:"https://images.unsplash.com/photo-1652841190565-b96e0acbae17"}),e.jsx("span",{className:"text-sm text-text-secondary",children:"GreenoFig Team"}),e.jsx("span",{className:"text-sm text-text-secondary",children:"·"}),e.jsx("span",{className:"text-sm text-text-secondary",children:new Date(t.published_at).toLocaleDateString()})]})]}),e.jsx(p,{className:"flex-grow",children:e.jsx("p",{className:"text-text-secondary",children:"Click to read this article about health and wellness."})}),e.jsx(g,{children:e.jsxs(o,{onClick:()=>M(K(t)),variant:"link",className:"p-0 text-primary",children:[C("blog.readMore")," ",e.jsx(_,{className:"w-4 h-4 ml-2"})]})})]})},t.id))}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:C("blog.noPostsFound")}),e.jsx("p",{className:"text-text-secondary mt-2",children:C("blog.subtitle")})]});return A.postId||A.slug?D?e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsxs(u,{logoUrl:S,children:[e.jsxs(i,{children:[e.jsxs("title",{children:[Y(D,"title")," - GreenoFig Blog"]}),e.jsx("meta",{name:"description",content:Y(D,"content").substring(0,160)})]}),e.jsxs("div",{className:"page-section max-w-7xl mx-auto px-4 py-8",children:[e.jsxs(o,{variant:"ghost",onClick:()=>M("/blog"),className:"mb-8",children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),C("blog.backToBlog")]}),e.jsxs("div",{className:"grid lg:grid-cols-[1fr_300px] gap-8",children:[e.jsxs("article",{children:[e.jsx("h1",{className:"hero-content text-4xl md:text-5xl font-bold tracking-tight mb-4 leading-tight",children:Y(D,"title")}),e.jsxs("div",{className:"section-content flex items-center gap-6 text-text-secondary mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),e.jsx("span",{children:"GreenoFig Team"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(D.published_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{children:"4 min read"})]})]}),e.jsx("div",{className:"animate-item aspect-video rounded-xl overflow-hidden mb-8 glass-effect img-zoom",children:e.jsx("img",{src:D.featured_image_url||"https://images.unsplash.com/photo-1504983875-d3b163aba9e6",alt:Y(D,"title"),className:"w-full h-full object-cover"})}),e.jsx("div",{ref:W,className:"section-content prose prose-invert max-w-none text-lg leading-relaxed text-text-secondary prose-h2:text-text-primary prose-h3:text-text-primary prose-strong:text-text-primary prose-a:text-primary prose-a:no-underline hover:prose-a:text-primary/80 prose-a:transition-colors prose-a:duration-200 glass-effect rounded-xl p-8 border border-border/50",dangerouslySetInnerHTML:{__html:f.sanitize(Y(D,"content").replace(/\n/g,"<br />"),{ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","p","br","strong","em","u","a","ul","ol","li","blockquote","img","span","div"],ALLOWED_ATTR:["href","src","alt","class","id","target","rel"],ADD_ATTR:["target"],FORCE_BODY:!0})}}),z.length>0&&e.jsxs("div",{className:"mt-16 pt-8 border-t border-border/50",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[e.jsx(_,{className:"w-6 h-6 text-primary"}),C("blog.relatedPosts")]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:z.map(t=>e.jsxs(m,{className:"card card-scale glass-effect overflow-hidden group cursor-pointer",onClick:()=>M(K(t)),children:[e.jsx("div",{className:"aspect-video overflow-hidden",children:e.jsx("img",{src:t.featured_image_url||"https://images.unsplash.com/photo-1504983875-d3b163aba9e6",alt:Y(t,"title"),className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"})}),e.jsxs(x,{children:[e.jsx(h,{className:"text-base group-hover:text-primary transition-colors",children:Y(t,"title")}),e.jsx("p",{className:"text-xs text-text-secondary",children:new Date(t.published_at).toLocaleDateString()})]})]},t.id))})]})]}),O.length>0&&e.jsx("aside",{className:"hidden lg:block",children:e.jsxs("div",{className:"sticky top-24 glass-effect rounded-xl p-6 border border-border/50",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-primary"}),C("blog.tableOfContents")]}),e.jsx("nav",{className:"space-y-2",children:O.map(t=>e.jsx("a",{href:`#${t.id}`,onClick:e=>{var s;e.preventDefault(),null==(s=document.getElementById(t.id))||s.scrollIntoView({behavior:"smooth"})},className:`block text-sm transition-all duration-200 ${"h3"===t.level?"pl-4":""} ${P===t.id?"text-primary font-semibold":"text-text-secondary hover:text-primary"}`,children:t.text},t.id))})]})})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsx(u,{logoUrl:S,children:e.jsxs("div",{className:"page-section max-w-7xl mx-auto px-4 py-8",children:[e.jsxs(o,{variant:"ghost",onClick:()=>M("/blog"),className:"mb-8",children:[e.jsx(v,{className:"mr-2 h-4 w-4"}),"Back to Blog"]}),e.jsx("div",{className:"text-center py-20",children:q&&e.jsx(F,{className:"h-8 w-8 animate-spin text-primary mx-auto"})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsxs(u,{logoUrl:S,children:[e.jsxs(i,{children:[e.jsxs("title",{children:[C("blog.title")," - GreenoFig"]}),e.jsx("meta",{name:"description",content:C("blog.subtitle")}),e.jsx("link",{rel:"canonical",href:"https://greenofig.com/blog"}),e.jsx("meta",{property:"og:title",content:`${C("blog.title")} - GreenoFig`}),e.jsx("meta",{property:"og:description",content:C("blog.subtitle")}),e.jsx("meta",{property:"og:url",content:"https://greenofig.com/blog"}),e.jsx("meta",{property:"og:type",content:"website"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"hero-section relative overflow-hidden w-full pb-6 z-20",style:{background:"rgba(125, 230, 75, 0.2)",backdropFilter:"blur(20px) saturate(180%)",WebkitBackdropFilter:"blur(20px) saturate(180%)",boxShadow:"0 8px 32px 0 rgba(125, 230, 75, 0.2)",border:"1px solid rgba(255, 255, 255, 0.18)"},children:e.jsxs("div",{className:"hero-content relative z-10 text-center py-10 px-4 flex flex-col justify-center min-h-[200px]",children:[e.jsx("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight mb-3 text-white",children:"ar"===n.language?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"gradient-text",children:"مدونة"})," الصحة والعافية"]}):e.jsxs(e.Fragment,{children:["Health & Wellness ",e.jsx("span",{className:"gradient-text",children:"Blog"})]})}),e.jsx("p",{className:"max-w-2xl mx-auto text-base md:text-lg text-gray-200",children:C("blog.subtitle")})]})}),!q&&E.length>0&&e.jsx("div",{className:"w-full relative px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"section-content w-full mx-auto -mt-4 relative z-0",children:e.jsxs("div",{className:"card card-scale grid lg:grid-cols-2 gap-0 glass-effect rounded-2xl border border-green-500/30 overflow-hidden",style:{minHeight:"210px"},children:[e.jsx("div",{className:"cursor-pointer h-full",onClick:()=>M(K(E[0])),children:e.jsx("img",{alt:Y(E[0],"title"),className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300",src:E[0].featured_image_url||"https://images.unsplash.com/photo-1543362906-acfc16c67564"})}),e.jsxs("div",{className:"p-8 flex flex-col justify-center",children:[e.jsx("p",{className:"text-sm text-primary font-semibold mb-3",children:"Latest Article"}),e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4 text-white hover:text-primary transition-colors cursor-pointer leading-tight",onClick:()=>M(K(E[0])),children:Y(E[0],"title")}),e.jsx("p",{className:"text-text-secondary text-sm md:text-base mb-6 leading-relaxed",children:"Discover the latest insights on health, wellness, and nutrition from the GreenoFig team."}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-text-secondary mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(E[0].published_at).toLocaleDateString()})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:"4 min read"})})]}),e.jsxs(o,{onClick:()=>M(K(E[0])),className:"btn-primary",children:["Read Full Article ",e.jsx(_,{className:"w-4 h-4 ml-2"})]})]})]})})})]}),e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[L&&e.jsx("div",{className:"mb-8",children:e.jsx(j,{placementName:"blog_inline"})}),e.jsx("h2",{className:"text-3xl font-bold mb-8 text-center",children:"More Articles"}),q?e.jsx("div",{className:"text-center py-12",children:e.jsx(F,{className:"h-8 w-8 animate-spin text-primary mx-auto"})}):0===E.length?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"No Posts Yet!"}),e.jsx("p",{className:"text-text-secondary mt-2",children:"Check back soon for exciting articles on health and wellness."})]}):e.jsx(V,{})]})})]})]})};export{S as default};
