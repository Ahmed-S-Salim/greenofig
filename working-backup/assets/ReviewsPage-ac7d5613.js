import{j as e}from"./vendor-ui-8934955f.js";import{r as s}from"./vendor-react-c35372bd.js";import{u as r,H as i,B as t,A as a,e as l,f as n,L as o,I as c,T as d,s as m,t as x}from"./index-05934966.js";import{S as v}from"./SiteLayout-a1dab2c4.js";import{C as h,c as p}from"./card-5ef2c077.js";import{D as j,e as w,a as g,b as u,c as y,d as f,f as N}from"./dialog-f70f7e7c.js";import{a0 as b,L as _,m as S,V as q,h as F}from"./vendor-utils-1c9b7ece.js";import"./vendor-editor-7586347a.js";import"./OnboardingSurvey-c214c47f.js";const C=({review:s,index:i})=>{const{i18n:t}=r(),o={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{delay:.1*i}}},c=t.language,d="ar"===c&&s.customer_title_ar?s.customer_title_ar:s.customer_title,m="ar"===c&&s.quote_ar?s.quote_ar:s.quote;return e.jsx(S.div,{variants:o,initial:"hidden",animate:"visible",children:e.jsx(h,{className:"glass-effect h-full flex flex-col",children:e.jsxs(p,{className:"p-6 flex flex-col flex-grow",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs(a,{className:"h-12 w-12 border-2 border-primary",children:[e.jsx(l,{src:s.avatar_url||s.customer_image,alt:s.customer_name}),e.jsx(n,{children:(x=s.customer_name,x?x.split(" ").map(e=>e[0]).join("").toUpperCase():"U")})]}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-bold text-lg",children:s.customer_name}),d&&e.jsx("p",{className:"text-xs text-text-secondary",children:d}),e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((r,i)=>e.jsx(q,{className:"w-4 h-4 "+(i<s.rating?"text-yellow-400 fill-yellow-400":"text-gray-500")},i))})]})]}),e.jsx("p",{className:"text-text-secondary text-sm flex-grow",children:m})]})})});var x},D=({setOpen:i})=>{const{t:a}=r(),[l,n]=s.useState({name:"",title:"",review:"",rating:0}),[v,h]=s.useState(!1);return e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),0!==l.rating){h(!0);try{const{error:e}=await m.from("testimonials").insert([{customer_name:l.name,customer_title:l.title,quote:l.review,rating:l.rating,is_featured:!1,is_approved:!0,display_order:9999,created_at:(new Date).toISOString()}]);if(e)throw e;x({title:a("reviews.reviewSubmitted"),description:a("reviews.thankYou")}),i(!1),window.location.reload()}catch(s){x({title:a("reviews.submissionFailed"),description:s.message||a("reviews.tryAgainLater"),variant:"destructive"})}finally{h(!1)}}else x({title:a("reviews.ratingRequiredError"),description:a("reviews.ratingRequiredMessage"),variant:"destructive"})},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",children:a("reviews.yourName")}),e.jsx(c,{id:"name",placeholder:a("reviews.namePlaceholder"),value:l.name,onChange:e=>n({...l,name:e.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"review-title",children:a("reviews.reviewTitle")}),e.jsx(c,{id:"review-title",placeholder:a("reviews.reviewTitlePlaceholder"),value:l.title,onChange:e=>n({...l,title:e.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"review",children:a("reviews.yourReview")}),e.jsx(d,{id:"review",placeholder:a("reviews.reviewPlaceholder"),value:l.review,onChange:e=>n({...l,review:e.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:a("reviews.ratingRequired")}),e.jsx("div",{className:"flex items-center space-x-1",children:[...Array(5)].map((s,r)=>e.jsx(q,{className:"w-6 h-6 cursor-pointer transition-colors "+(r<l.rating?"text-yellow-400 fill-yellow-400":"text-gray-300 hover:text-yellow-400"),onClick:()=>n({...l,rating:r+1})},r))})]}),e.jsx(N,{children:e.jsx(t,{type:"submit",disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"mr-2 h-4 w-4 animate-spin"}),a("reviews.submitting")]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),a("reviews.submitReview")]})})})]})},R=({logoUrl:a})=>{const{t:l,i18n:n}=r(),[o,c]=s.useState(!1),[d,h]=s.useState([]),[p,N]=s.useState(!0);return s.useEffect(()=>{(async()=>{N(!0);const{data:e,error:s}=await m.from("testimonials").select("*").eq("is_approved",!0).order("created_at",{ascending:!1});s?(x({title:l("reviews.errorLoadingReviews"),description:s.message,variant:"destructive"}),h([])):h(e||[]),N(!1)})()},[l,n.language]),e.jsxs(e.Fragment,{children:[e.jsxs(i,{children:[e.jsxs("title",{children:[l("reviews.title")," - GreenoFig"]}),e.jsx("meta",{name:"description",content:l("reviews.metaDescription")}),e.jsx("link",{rel:"canonical",href:"https://greenofig.com/reviews"}),e.jsx("meta",{property:"og:title",content:`${l("reviews.title")} - GreenoFig`}),e.jsx("meta",{property:"og:description",content:l("reviews.metaDescription")}),e.jsx("meta",{property:"og:url",content:"https://greenofig.com/reviews"}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{name:"robots",content:"index, follow"})]}),e.jsxs(v,{logoUrl:a,pageTitle:e.jsx(e.Fragment,{children:l("reviews.pageTitle")}),pageDescription:l("reviews.pageDescription"),children:[e.jsx("div",{className:"text-center mb-12",children:e.jsxs(j,{open:o,onOpenChange:c,children:[e.jsx(w,{asChild:!0,children:e.jsxs(t,{size:"lg",className:"bg-primary hover:bg-primary/90 hover:shadow-xl transition-all text-primary-foreground shadow-lg",children:[e.jsx(b,{className:"mr-2 h-5 w-5"}),l("reviews.writeReview")]})}),e.jsxs(g,{className:"sm:max-w-[425px] glass-effect",children:[e.jsxs(u,{children:[e.jsx(y,{children:l("reviews.shareYourStory")}),e.jsx(f,{children:l("reviews.experienceDescription")})]}),e.jsx(D,{setOpen:c})]})]})}),p?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(_,{className:"w-12 h-12 animate-spin text-primary"})}):0===d.length?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:l("reviews.noReviewsYet")}),e.jsx("p",{className:"text-text-secondary mt-2",children:l("reviews.beTheFirst")})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map((s,r)=>e.jsx(C,{review:s,index:r},s.id||r))})]})]})};export{R as default};
