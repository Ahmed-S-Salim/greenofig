import{j as e}from"./vendor-ui-CAdTc8ma.js";import{a as s}from"./vendor-react-DYWoKpfz.js";import{H as r,B as t,s as a,t as i,L as l,I as n,T as o,A as c,a as m,b as d}from"./index-BwEIvyHY.js";import{S as h}from"./SiteLayout-DLYnFKLg.js";import{C as x,c as p}from"./card-ZLe-MT3q.js";import{D as g,a as j,b as u,c as v,d as w,e as y,f}from"./dialog-0sIUUkjU.js";import{M as N,b,a as S,g as F,m as _}from"./vendor-utils-7_dm-8Ld.js";import"./OnboardingSurvey-B2UL1Ci-.js";import"./vendor-editor-CURn2XBo.js";const R=({review:s,index:r})=>{const t={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{delay:.1*r}}};return e.jsx(_.div,{variants:t,initial:"hidden",animate:"visible",children:e.jsx(x,{className:"glass-effect h-full flex flex-col",children:e.jsxs(p,{className:"p-6 flex flex-col flex-grow",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs(c,{className:"h-12 w-12 border-2 border-primary",children:[e.jsx(m,{src:s.avatar_url||s.customer_image,alt:s.customer_name}),e.jsx(d,{children:(a=s.customer_name,a?a.split(" ").map(e=>e[0]).join("").toUpperCase():"U")})]}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"font-bold text-lg",children:s.customer_name}),s.customer_title&&e.jsx("p",{className:"text-xs text-text-secondary",children:s.customer_title}),e.jsx("div",{className:"flex items-center",children:[...Array(5)].map((r,t)=>e.jsx(S,{className:"w-4 h-4 "+(t<s.rating?"text-yellow-400 fill-yellow-400":"text-gray-500")},t))})]})]}),e.jsx("p",{className:"text-text-secondary text-sm flex-grow",children:s.quote})]})})});var a},C=({setOpen:r})=>{const[c,m]=s.useState({name:"",title:"",review:"",rating:0}),[d,h]=s.useState(!1);return e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),0!==c.rating){h(!0);try{const{error:e}=await a.from("testimonials").insert([{customer_name:c.name,customer_title:c.title,quote:c.review,rating:c.rating,is_featured:!1,is_approved:!0,display_order:9999,created_at:(new Date).toISOString()}]);if(e)throw e;i({title:"Review Submitted!",description:"Thank you for sharing your experience with us."}),r(!1),window.location.reload()}catch(s){console.error("Error submitting review:",s),i({title:"Submission Failed",description:s.message||"Please try again later.",variant:"destructive"})}finally{h(!1)}}else i({title:"Rating Required",description:"Please select a star rating before submitting.",variant:"destructive"})},className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"name",children:"Your Name"}),e.jsx(n,{id:"name",placeholder:"John Doe",value:c.name,onChange:e=>m({...c,name:e.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"review-title",children:"Review Title"}),e.jsx(n,{id:"review-title",placeholder:"An amazing experience!",value:c.title,onChange:e=>m({...c,title:e.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"review",children:"Your Review"}),e.jsx(o,{id:"review",placeholder:"Tell us what you think...",value:c.review,onChange:e=>m({...c,review:e.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{children:"Rating *"}),e.jsx("div",{className:"flex items-center space-x-1",children:[...Array(5)].map((s,r)=>e.jsx(S,{className:"w-6 h-6 cursor-pointer transition-colors "+(r<c.rating?"text-yellow-400 fill-yellow-400":"text-gray-300 hover:text-yellow-400"),onClick:()=>m({...c,rating:r+1})},r))})]}),e.jsx(f,{children:e.jsx(t,{type:"submit",disabled:d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Submit Review"]})})})]})},q=({logoUrl:l})=>{const[n,o]=s.useState(!1),[c,m]=s.useState([]),[d,x]=s.useState(!0);return s.useEffect(()=>{(async()=>{x(!0);const{data:e,error:s}=await a.from("testimonials").select("*").eq("is_approved",!0).order("created_at",{ascending:!1});s?(console.error("Error fetching testimonials:",s),i({title:"Error loading reviews",description:s.message,variant:"destructive"}),m([])):m(e||[]),x(!1)})()},[]),e.jsxs(e.Fragment,{children:[e.jsxs(r,{children:[e.jsx("title",{children:"Reviews - GreenoFig"}),e.jsx("meta",{name:"description",content:"See what our members are saying about their success with GreenoFig. Real stories from real people transforming their health."}),e.jsx("link",{rel:"canonical",href:"https://greenofig.com/reviews"}),e.jsx("meta",{property:"og:title",content:"Reviews - GreenoFig"}),e.jsx("meta",{property:"og:description",content:"See what our members are saying about their success with GreenoFig. Real stories from real people transforming their health."}),e.jsx("meta",{property:"og:url",content:"https://greenofig.com/reviews"}),e.jsx("meta",{property:"og:type",content:"website"}),e.jsx("meta",{name:"robots",content:"index, follow"})]}),e.jsxs(h,{logoUrl:l,pageTitle:e.jsxs(e.Fragment,{children:["Success Stories from Our ",e.jsx("span",{className:"gradient-text",children:"Community"})]}),pageDescription:"See how GreenoFig is helping people just like you achieve their health and wellness goals.",children:[e.jsx("div",{className:"text-center mb-12",children:e.jsxs(g,{open:n,onOpenChange:o,children:[e.jsx(j,{asChild:!0,children:e.jsxs(t,{size:"lg",className:"bg-primary hover:bg-primary/90 hover:shadow-xl transition-all text-primary-foreground shadow-lg",children:[e.jsx(N,{className:"mr-2 h-5 w-5"}),"Write a Review"]})}),e.jsxs(u,{className:"sm:max-w-[425px] glass-effect",children:[e.jsxs(v,{children:[e.jsx(w,{children:"Share Your Story"}),e.jsx(y,{children:"We'd love to hear about your experience with GreenoFig."})]}),e.jsx(C,{setOpen:o})]})]})}),d?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx(b,{className:"w-12 h-12 animate-spin text-primary"})}):0===c.length?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"No Reviews Yet!"}),e.jsx("p",{className:"text-text-secondary mt-2",children:"Be the first to share your success story with GreeonFig."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:c.map((s,r)=>e.jsx(R,{review:s,index:r},s.id||r))})]})]})};export{q as default};
